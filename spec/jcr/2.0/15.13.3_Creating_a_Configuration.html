<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head><title>JCR 2.0: 15.13.3 Creating a Configuration (Content Repository for Java Technology API v2.0)</title><meta http-equiv="CONTENT-TYPE" content="text/html; charset=utf-8"></meta><link rel="stylesheet" type="text/css" href="main.css"></link></head><body><script type="text/javascript" src="header.js"></script><script type="text/javascript" src="nav.js"></script>	<H3>15.13.3 Creating a Configuration</H3>
	<P>A configuration is
	created by designating a <FONT FACE="Courier New, monospace"><FONT SIZE=2>mix:versionable</FONT></FONT>
	node <FONT FACE="Courier New, monospace"><FONT SIZE=2>N</FONT></FONT>
	in the workspace as a configuration root node. This is done by
	calling</P>
	<P><FONT FACE="Courier New, monospace"><FONT SIZE=2>Node
	VersionManager.<BR> createConfiguration(String absPath)</FONT></FONT></P>
	<P>where <FONT FACE="Courier New, monospace"><FONT SIZE=2>absPath</FONT></FONT>
	is the path of <FONT FACE="Courier New, monospace"><FONT SIZE=2>N</FONT></FONT>.</P>
	<P>On creation of a new
	configuration with root <FONT FACE="Courier New, monospace"><FONT SIZE=2>N</FONT></FONT>,
	a new proxy node <FONT FACE="Courier New, monospace"><FONT SIZE=2>C</FONT></FONT>,
	of type <FONT FACE="Courier New, monospace"><FONT SIZE=2>nt:configuration</FONT></FONT>,
	is created under <FONT FACE="Courier New, monospace"><FONT SIZE=2>/jcr:system/jcr:configurations/</FONT></FONT>
	and a new version history <FONT FACE="Courier New, monospace"><FONT SIZE=2>H</FONT></FONT><FONT FACE="Courier New, monospace"><FONT SIZE=2><SUB>C</SUB></FONT></FONT>
	is created for <FONT FACE="Courier New, monospace"><FONT SIZE=2>C</FONT></FONT>
	with a root version <FONT FACE="Courier New, monospace"><FONT SIZE=2>B</FONT></FONT><FONT FACE="Courier New, monospace"><FONT SIZE=2><SUB>0</SUB></FONT></FONT>.
	Note that <FONT FACE="Courier New, monospace"><FONT SIZE=2>H</FONT></FONT><FONT FACE="Courier New, monospace"><FONT SIZE=2><SUB>C</SUB></FONT></FONT>
	is also called a <I>baseline history</I> and its contained versions,
	including <FONT FACE="Courier New, monospace"><FONT SIZE=2>B</FONT></FONT><FONT FACE="Courier New, monospace"><FONT SIZE=2><SUB>0</SUB></FONT></FONT>,
	are called <I>baselines</I>. The baselines within <FONT FACE="Courier New, monospace"><FONT SIZE=2>H</FONT></FONT><FONT FACE="Courier New, monospace"><FONT SIZE=2><SUB>C</SUB></FONT></FONT>
	store not only the state of <FONT FACE="Courier New, monospace"><FONT SIZE=2>C</FONT></FONT>
	but also the state of the configuration represented by <FONT FACE="Courier New, monospace"><FONT SIZE=2>C</FONT></FONT>
	(see 15.13.4.1 <I>Creating a Baseline</I>).</P>
	<P>The properties of <FONT FACE="Courier New, monospace"><FONT SIZE=2>C</FONT></FONT>
	and <FONT FACE="Courier New, monospace"><FONT SIZE=2>N</FONT></FONT>
	are initialized as follows:</P>
	<UL>
		<LI><P><FONT FACE="Courier New, monospace"><FONT SIZE=2>N/jcr:configuration</FONT></FONT><FONT FACE="Courier New, monospace"><FONT SIZE=2><FONT FACE="Verdana, sans-serif">
		points to </FONT></FONT></FONT><FONT FACE="Courier New, monospace"><FONT SIZE=2>C</FONT></FONT><FONT FACE="Courier New, monospace"><FONT SIZE=2><FONT FACE="Verdana, sans-serif">.</FONT></FONT></FONT></P>
		<LI><P><FONT FACE="Courier New, monospace"><FONT SIZE=2>C/jcr:root</FONT></FONT>
		points to <FONT FACE="Courier New, monospace"><FONT SIZE=2>N</FONT></FONT>.</P>
		<LI><P><FONT FACE="Courier New, monospace"><FONT SIZE=2>C/jcr:versionHistory</FONT></FONT>
		points to <FONT FACE="Courier New, monospace"><FONT SIZE=2>H</FONT></FONT><FONT FACE="Courier New, monospace"><FONT SIZE=2><SUB>C</SUB></FONT></FONT>.</P>
		<LI><P><FONT FACE="Courier New, monospace"><FONT SIZE=2>C/jcr:baseVersion</FONT></FONT>
		points to <FONT FACE="Courier New, monospace"><FONT SIZE=2>B</FONT></FONT><FONT FACE="Courier New, monospace"><FONT SIZE=2><SUB>0</SUB></FONT></FONT>.</P>
	</UL>
	<P>The
	<FONT FACE="Courier New, monospace"><FONT SIZE=2>createConfiguration</FONT></FONT>
	call will fail if</P>
	<UL>
		<LI><P>the node at
		<FONT FACE="Courier New, monospace"><FONT SIZE=2>absPath</FONT></FONT>
		is not <FONT FACE="Courier New, monospace"><FONT SIZE=2>mix:versionable</FONT></FONT>.</P>
		<LI><P>the node at
		<FONT FACE="Courier New, monospace"><FONT SIZE=2>absPath</FONT></FONT>
		is already a configuration root (i.e., if it already has a
		<FONT FACE="Courier New, monospace"><FONT SIZE=2>jcr:configuration</FONT></FONT>
		property).</P>
		<LI><P>There exists in
		the subgraph at <FONT FACE="Courier New, monospace"><FONT SIZE=2>N</FONT></FONT>
		a versionable node that has never been checked-in (i.e., one whose
		base version is still its root version).</P>
	</UL>
	<P>The
	<FONT FACE="Courier New, monospace"><FONT SIZE=2>createConfiguration</FONT></FONT>
	method is workspace-write. Therefore the changes it makes are
	dispatched immediately and a <FONT FACE="Courier New, monospace"><FONT SIZE=2>save</FONT></FONT>
	is not required.</P>
<script type="text/javascript" src="footer.js"></script></body></html>