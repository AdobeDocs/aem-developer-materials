<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.12) on Wed Oct 06 16:52:31 UTC 2021 -->
<title>TieredMergePolicy (The Adobe Experience Manager SDK 2021.9.5899.20210929T093525Z-210900)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2021-10-06">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="TieredMergePolicy (The Adobe Experience Manager SDK 2021.9.5899.20210929T093525Z-210900)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.apache.lucene.index</a></div>
<h2 title="Class TieredMergePolicy" class="title">Class TieredMergePolicy</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="MergePolicy.html" title="class in org.apache.lucene.index">org.apache.lucene.index.MergePolicy</a></li>
<li>
<ul class="inheritance">
<li>org.apache.lucene.index.TieredMergePolicy</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io" class="externalLink">Closeable</a></code>, <code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html?is-external=true" title="class or interface in java.lang" class="externalLink">AutoCloseable</a></code>, <code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Cloneable.html?is-external=true" title="class or interface in java.lang" class="externalLink">Cloneable</a></code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">TieredMergePolicy</span>
extends <a href="MergePolicy.html" title="class in org.apache.lucene.index">MergePolicy</a></pre>
<div class="block">Merges segments of approximately equal size, subject to
  an allowed number of segments per tier.  This is similar
  to <a href="LogByteSizeMergePolicy.html" title="class in org.apache.lucene.index"><code>LogByteSizeMergePolicy</code></a>, except this merge
  policy is able to merge non-adjacent segment, and
  separates how many segments are merged at once (<a href="#setMaxMergeAtOnce(int)"><code>setMaxMergeAtOnce(int)</code></a>) from how many segments are allowed
  per tier (<a href="#setSegmentsPerTier(double)"><code>setSegmentsPerTier(double)</code></a>).  This merge
  policy also does not over-merge (i.e. cascade merges). 

  <p>For normal merging, this policy first computes a
  "budget" of how many segments are allowed to be in the
  index.  If the index is over-budget, then the policy
  sorts segments by decreasing size (pro-rating by percent
  deletes), and then finds the least-cost merge.  Merge
  cost is measured by a combination of the "skew" of the
  merge (size of largest segment divided by smallest segment),
  total merge size and percent deletes reclaimed,
  so that merges with lower skew, smaller size
  and those reclaiming more deletes, are
  favored.

  <p>If a merge will produce a segment that's larger than
  <a href="#setMaxMergedSegmentMB(double)"><code>setMaxMergedSegmentMB(double)</code></a>, then the policy will
  merge fewer segments (down to 1 at once, if that one has
  deletions) to keep the segment size under budget.
      
  <p><b>NOTE</b>: this policy freely merges non-adjacent
  segments; if this is a problem, use <a href="LogMergePolicy.html" title="class in org.apache.lucene.index"><code>LogMergePolicy</code></a>.

  <p><b>NOTE</b>: This policy always merges by byte size
  of the segments, always pro-rates by percent deletes,
  and does not apply any maximum segment size during
  forceMerge (unlike <a href="LogByteSizeMergePolicy.html" title="class in org.apache.lucene.index"><code>LogByteSizeMergePolicy</code></a>).</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<ul class="blockList">
<li class="blockList"><a id="nested.classes.inherited.from.class.org.apache.lucene.index.MergePolicy">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from class&nbsp;org.apache.lucene.index.<a href="MergePolicy.html" title="class in org.apache.lucene.index">MergePolicy</a></h3>
<code><a href="MergePolicy.DocMap.html" title="class in org.apache.lucene.index">MergePolicy.DocMap</a>, <a href="MergePolicy.MergeAbortedException.html" title="class in org.apache.lucene.index">MergePolicy.MergeAbortedException</a>, <a href="MergePolicy.MergeException.html" title="class in org.apache.lucene.index">MergePolicy.MergeException</a>, <a href="MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index">MergePolicy.MergeSpecification</a>, <a href="MergePolicy.MergeTrigger.html" title="enum in org.apache.lucene.index">MergePolicy.MergeTrigger</a>, <a href="MergePolicy.OneMerge.html" title="class in org.apache.lucene.index">MergePolicy.OneMerge</a></code></li>
</ul>
</li>
</ul>
</section>
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static double</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#DEFAULT_NO_CFS_RATIO">DEFAULT_NO_CFS_RATIO</a></span></code></th>
<td class="colLast">
<div class="block">Default noCFSRatio.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E()">TieredMergePolicy</a></span>()</code></th>
<td class="colLast">
<div class="block">Sole constructor, setting all settings to their
  defaults.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#close()">close</a></span>()</code></th>
<td class="colLast">
<div class="block">Release all resources for the policy.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index">MergePolicy.MergeSpecification</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#findForcedDeletesMerges(org.apache.lucene.index.SegmentInfos)">findForcedDeletesMerges</a></span>&#8203;(<a href="SegmentInfos.html" title="class in org.apache.lucene.index">SegmentInfos</a>&nbsp;infos)</code></th>
<td class="colLast">
<div class="block">Determine what set of merge operations is necessary in order to expunge all
 deletes from the index.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index">MergePolicy.MergeSpecification</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#findForcedMerges(org.apache.lucene.index.SegmentInfos,int,java.util.Map)">findForcedMerges</a></span>&#8203;(<a href="SegmentInfos.html" title="class in org.apache.lucene.index">SegmentInfos</a>&nbsp;infos,
                int&nbsp;maxSegmentCount,
                <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util" class="externalLink">Map</a>&lt;<a href="SegmentCommitInfo.html" title="class in org.apache.lucene.index">SegmentCommitInfo</a>,&#8203;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="class or interface in java.lang" class="externalLink">Boolean</a>&gt;&nbsp;segmentsToMerge)</code></th>
<td class="colLast">
<div class="block">Determine what set of merge operations is necessary in
 order to merge to <= the specified segment count.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index">MergePolicy.MergeSpecification</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#findMerges(org.apache.lucene.index.MergePolicy.MergeTrigger,org.apache.lucene.index.SegmentInfos)">findMerges</a></span>&#8203;(<a href="MergePolicy.MergeTrigger.html" title="enum in org.apache.lucene.index">MergePolicy.MergeTrigger</a>&nbsp;mergeTrigger,
          <a href="SegmentInfos.html" title="class in org.apache.lucene.index">SegmentInfos</a>&nbsp;infos)</code></th>
<td class="colLast">
<div class="block">Determine what set of merge operations are now necessary on the index.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>double</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getFloorSegmentMB()">getFloorSegmentMB</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the current floorSegmentMB.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>double</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getForceMergeDeletesPctAllowed()">getForceMergeDeletesPctAllowed</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the current forceMergeDeletesPctAllowed setting.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMaxMergeAtOnce()">getMaxMergeAtOnce</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the current maxMergeAtOnce setting.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMaxMergeAtOnceExplicit()">getMaxMergeAtOnceExplicit</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the current maxMergeAtOnceExplicit setting.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>double</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMaxMergedSegmentMB()">getMaxMergedSegmentMB</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the current maxMergedSegmentMB setting.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>double</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getReclaimDeletesWeight()">getReclaimDeletesWeight</a></span>()</code></th>
<td class="colLast">
<div class="block">See <a href="#setReclaimDeletesWeight(double)"><code>setReclaimDeletesWeight(double)</code></a>.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>double</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSegmentsPerTier()">getSegmentsPerTier</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the current segmentsPerTier setting.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code><a href="TieredMergePolicy.html" title="class in org.apache.lucene.index">TieredMergePolicy</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setFloorSegmentMB(double)">setFloorSegmentMB</a></span>&#8203;(double&nbsp;v)</code></th>
<td class="colLast">
<div class="block">Segments smaller than this are "rounded up" to this
  size, ie treated as equal (floor) size for merge
  selection.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code><a href="TieredMergePolicy.html" title="class in org.apache.lucene.index">TieredMergePolicy</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setForceMergeDeletesPctAllowed(double)">setForceMergeDeletesPctAllowed</a></span>&#8203;(double&nbsp;v)</code></th>
<td class="colLast">
<div class="block">When forceMergeDeletes is called, we only merge away a
  segment if its delete percentage is over this
  threshold.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code><a href="TieredMergePolicy.html" title="class in org.apache.lucene.index">TieredMergePolicy</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setMaxMergeAtOnce(int)">setMaxMergeAtOnce</a></span>&#8203;(int&nbsp;v)</code></th>
<td class="colLast">
<div class="block">Maximum number of segments to be merged at a time
  during "normal" merging.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code><a href="TieredMergePolicy.html" title="class in org.apache.lucene.index">TieredMergePolicy</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setMaxMergeAtOnceExplicit(int)">setMaxMergeAtOnceExplicit</a></span>&#8203;(int&nbsp;v)</code></th>
<td class="colLast">
<div class="block">Maximum number of segments to be merged at a time,
  during forceMerge or forceMergeDeletes.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code><a href="TieredMergePolicy.html" title="class in org.apache.lucene.index">TieredMergePolicy</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setMaxMergedSegmentMB(double)">setMaxMergedSegmentMB</a></span>&#8203;(double&nbsp;v)</code></th>
<td class="colLast">
<div class="block">Maximum sized segment to produce during
  normal merging.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code><a href="TieredMergePolicy.html" title="class in org.apache.lucene.index">TieredMergePolicy</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setReclaimDeletesWeight(double)">setReclaimDeletesWeight</a></span>&#8203;(double&nbsp;v)</code></th>
<td class="colLast">
<div class="block">Controls how aggressively merges that reclaim more
  deletions are favored.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code><a href="TieredMergePolicy.html" title="class in org.apache.lucene.index">TieredMergePolicy</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setSegmentsPerTier(double)">setSegmentsPerTier</a></span>&#8203;(double&nbsp;v)</code></th>
<td class="colLast">
<div class="block">Sets the allowed number of segments per tier.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#toString()">toString</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.org.apache.lucene.index.MergePolicy">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.lucene.index.<a href="MergePolicy.html" title="class in org.apache.lucene.index">MergePolicy</a></h3>
<code><a href="MergePolicy.html#clone()">clone</a>, <a href="MergePolicy.html#getMaxCFSSegmentSizeMB()">getMaxCFSSegmentSizeMB</a>, <a href="MergePolicy.html#getNoCFSRatio()">getNoCFSRatio</a>, <a href="MergePolicy.html#setIndexWriter(org.apache.lucene.index.IndexWriter)">setIndexWriter</a>, <a href="MergePolicy.html#setMaxCFSSegmentSizeMB(double)">setMaxCFSSegmentSizeMB</a>, <a href="MergePolicy.html#setNoCFSRatio(double)">setNoCFSRatio</a>, <a href="MergePolicy.html#useCompoundFile(org.apache.lucene.index.SegmentInfos,org.apache.lucene.index.SegmentCommitInfo)">useCompoundFile</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang" class="externalLink">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang" class="externalLink">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang" class="externalLink">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang" class="externalLink">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang" class="externalLink">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait(long,int)" title="class or interface in java.lang" class="externalLink">wait</a></code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="DEFAULT_NO_CFS_RATIO">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DEFAULT_NO_CFS_RATIO</h4>
<pre>public static final&nbsp;double DEFAULT_NO_CFS_RATIO</pre>
<div class="block">Default noCFSRatio.  If a merge's size is >= 10% of
  the index, then we disable compound file for it.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="MergePolicy.html#setNoCFSRatio(double)"><code>MergePolicy.setNoCFSRatio(double)</code></a>, 
<a href="../../../../constant-values.html#org.apache.lucene.index.TieredMergePolicy.DEFAULT_NO_CFS_RATIO">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>TieredMergePolicy</h4>
<pre>public&nbsp;TieredMergePolicy()</pre>
<div class="block">Sole constructor, setting all settings to their
  defaults.</div>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="setMaxMergeAtOnce(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMaxMergeAtOnce</h4>
<pre class="methodSignature">public&nbsp;<a href="TieredMergePolicy.html" title="class in org.apache.lucene.index">TieredMergePolicy</a>&nbsp;setMaxMergeAtOnce&#8203;(int&nbsp;v)</pre>
<div class="block">Maximum number of segments to be merged at a time
  during "normal" merging.  For explicit merging (eg,
  forceMerge or forceMergeDeletes was called), see <a href="#setMaxMergeAtOnceExplicit(int)"><code>setMaxMergeAtOnceExplicit(int)</code></a>.  Default is 10.</div>
</li>
</ul>
<a id="getMaxMergeAtOnce()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxMergeAtOnce</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;getMaxMergeAtOnce()</pre>
<div class="block">Returns the current maxMergeAtOnce setting.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#setMaxMergeAtOnce(int)"><code>setMaxMergeAtOnce(int)</code></a></dd>
</dl>
</li>
</ul>
<a id="setMaxMergeAtOnceExplicit(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMaxMergeAtOnceExplicit</h4>
<pre class="methodSignature">public&nbsp;<a href="TieredMergePolicy.html" title="class in org.apache.lucene.index">TieredMergePolicy</a>&nbsp;setMaxMergeAtOnceExplicit&#8203;(int&nbsp;v)</pre>
<div class="block">Maximum number of segments to be merged at a time,
  during forceMerge or forceMergeDeletes. Default is 30.</div>
</li>
</ul>
<a id="getMaxMergeAtOnceExplicit()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxMergeAtOnceExplicit</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;getMaxMergeAtOnceExplicit()</pre>
<div class="block">Returns the current maxMergeAtOnceExplicit setting.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#setMaxMergeAtOnceExplicit(int)"><code>setMaxMergeAtOnceExplicit(int)</code></a></dd>
</dl>
</li>
</ul>
<a id="setMaxMergedSegmentMB(double)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMaxMergedSegmentMB</h4>
<pre class="methodSignature">public&nbsp;<a href="TieredMergePolicy.html" title="class in org.apache.lucene.index">TieredMergePolicy</a>&nbsp;setMaxMergedSegmentMB&#8203;(double&nbsp;v)</pre>
<div class="block">Maximum sized segment to produce during
  normal merging.  This setting is approximate: the
  estimate of the merged segment size is made by summing
  sizes of to-be-merged segments (compensating for
  percent deleted docs).  Default is 5 GB.</div>
</li>
</ul>
<a id="getMaxMergedSegmentMB()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxMergedSegmentMB</h4>
<pre class="methodSignature">public&nbsp;double&nbsp;getMaxMergedSegmentMB()</pre>
<div class="block">Returns the current maxMergedSegmentMB setting.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#getMaxMergedSegmentMB()"><code>getMaxMergedSegmentMB()</code></a></dd>
</dl>
</li>
</ul>
<a id="setReclaimDeletesWeight(double)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setReclaimDeletesWeight</h4>
<pre class="methodSignature">public&nbsp;<a href="TieredMergePolicy.html" title="class in org.apache.lucene.index">TieredMergePolicy</a>&nbsp;setReclaimDeletesWeight&#8203;(double&nbsp;v)</pre>
<div class="block">Controls how aggressively merges that reclaim more
  deletions are favored.  Higher values will more
  aggressively target merges that reclaim deletions, but
  be careful not to go so high that way too much merging
  takes place; a value of 3.0 is probably nearly too
  high.  A value of 0.0 means deletions don't impact
  merge selection.</div>
</li>
</ul>
<a id="getReclaimDeletesWeight()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getReclaimDeletesWeight</h4>
<pre class="methodSignature">public&nbsp;double&nbsp;getReclaimDeletesWeight()</pre>
<div class="block">See <a href="#setReclaimDeletesWeight(double)"><code>setReclaimDeletesWeight(double)</code></a>.</div>
</li>
</ul>
<a id="setFloorSegmentMB(double)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setFloorSegmentMB</h4>
<pre class="methodSignature">public&nbsp;<a href="TieredMergePolicy.html" title="class in org.apache.lucene.index">TieredMergePolicy</a>&nbsp;setFloorSegmentMB&#8203;(double&nbsp;v)</pre>
<div class="block">Segments smaller than this are "rounded up" to this
  size, ie treated as equal (floor) size for merge
  selection.  This is to prevent frequent flushing of
  tiny segments from allowing a long tail in the index.
  Default is 2 MB.</div>
</li>
</ul>
<a id="getFloorSegmentMB()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFloorSegmentMB</h4>
<pre class="methodSignature">public&nbsp;double&nbsp;getFloorSegmentMB()</pre>
<div class="block">Returns the current floorSegmentMB.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#setFloorSegmentMB(double)"><code>setFloorSegmentMB(double)</code></a></dd>
</dl>
</li>
</ul>
<a id="setForceMergeDeletesPctAllowed(double)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setForceMergeDeletesPctAllowed</h4>
<pre class="methodSignature">public&nbsp;<a href="TieredMergePolicy.html" title="class in org.apache.lucene.index">TieredMergePolicy</a>&nbsp;setForceMergeDeletesPctAllowed&#8203;(double&nbsp;v)</pre>
<div class="block">When forceMergeDeletes is called, we only merge away a
  segment if its delete percentage is over this
  threshold.  Default is 10%.</div>
</li>
</ul>
<a id="getForceMergeDeletesPctAllowed()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getForceMergeDeletesPctAllowed</h4>
<pre class="methodSignature">public&nbsp;double&nbsp;getForceMergeDeletesPctAllowed()</pre>
<div class="block">Returns the current forceMergeDeletesPctAllowed setting.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#setForceMergeDeletesPctAllowed(double)"><code>setForceMergeDeletesPctAllowed(double)</code></a></dd>
</dl>
</li>
</ul>
<a id="setSegmentsPerTier(double)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setSegmentsPerTier</h4>
<pre class="methodSignature">public&nbsp;<a href="TieredMergePolicy.html" title="class in org.apache.lucene.index">TieredMergePolicy</a>&nbsp;setSegmentsPerTier&#8203;(double&nbsp;v)</pre>
<div class="block">Sets the allowed number of segments per tier.  Smaller
  values mean more merging but fewer segments.

  <p><b>NOTE</b>: this value should be >= the <a href="#setMaxMergeAtOnce(int)"><code>setMaxMergeAtOnce(int)</code></a> otherwise you'll force too much
  merging to occur.</p>

  <p>Default is 10.0.</p></div>
</li>
</ul>
<a id="getSegmentsPerTier()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSegmentsPerTier</h4>
<pre class="methodSignature">public&nbsp;double&nbsp;getSegmentsPerTier()</pre>
<div class="block">Returns the current segmentsPerTier setting.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#setSegmentsPerTier(double)"><code>setSegmentsPerTier(double)</code></a></dd>
</dl>
</li>
</ul>
<a id="findMerges(org.apache.lucene.index.MergePolicy.MergeTrigger,org.apache.lucene.index.SegmentInfos)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findMerges</h4>
<pre class="methodSignature">public&nbsp;<a href="MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index">MergePolicy.MergeSpecification</a>&nbsp;findMerges&#8203;(<a href="MergePolicy.MergeTrigger.html" title="enum in org.apache.lucene.index">MergePolicy.MergeTrigger</a>&nbsp;mergeTrigger,
                                                 <a href="SegmentInfos.html" title="class in org.apache.lucene.index">SegmentInfos</a>&nbsp;infos)
                                          throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="MergePolicy.html#findMerges(org.apache.lucene.index.MergePolicy.MergeTrigger,org.apache.lucene.index.SegmentInfos)">MergePolicy</a></code></span></div>
<div class="block">Determine what set of merge operations are now necessary on the index.
 <a href="IndexWriter.html" title="class in org.apache.lucene.index"><code>IndexWriter</code></a> calls this whenever there is a change to the segments.
 This call is always synchronized on the <a href="IndexWriter.html" title="class in org.apache.lucene.index"><code>IndexWriter</code></a> instance so
 only one thread at a time will call this method.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="MergePolicy.html#findMerges(org.apache.lucene.index.MergePolicy.MergeTrigger,org.apache.lucene.index.SegmentInfos)">findMerges</a></code>&nbsp;in class&nbsp;<code><a href="MergePolicy.html" title="class in org.apache.lucene.index">MergePolicy</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>mergeTrigger</code> - the event that triggered the merge</dd>
<dd><code>infos</code> - the total set of segments in the index</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="findForcedMerges(org.apache.lucene.index.SegmentInfos,int,java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findForcedMerges</h4>
<pre class="methodSignature">public&nbsp;<a href="MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index">MergePolicy.MergeSpecification</a>&nbsp;findForcedMerges&#8203;(<a href="SegmentInfos.html" title="class in org.apache.lucene.index">SegmentInfos</a>&nbsp;infos,
                                                       int&nbsp;maxSegmentCount,
                                                       <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util" class="externalLink">Map</a>&lt;<a href="SegmentCommitInfo.html" title="class in org.apache.lucene.index">SegmentCommitInfo</a>,&#8203;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="class or interface in java.lang" class="externalLink">Boolean</a>&gt;&nbsp;segmentsToMerge)
                                                throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="MergePolicy.html#findForcedMerges(org.apache.lucene.index.SegmentInfos,int,java.util.Map)">MergePolicy</a></code></span></div>
<div class="block">Determine what set of merge operations is necessary in
 order to merge to <= the specified segment count. <a href="IndexWriter.html" title="class in org.apache.lucene.index"><code>IndexWriter</code></a> calls this when its
 <a href="IndexWriter.html#forceMerge(int)"><code>IndexWriter.forceMerge(int)</code></a> method is called. This call is always
 synchronized on the <a href="IndexWriter.html" title="class in org.apache.lucene.index"><code>IndexWriter</code></a> instance so only one thread at a
 time will call this method.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="MergePolicy.html#findForcedMerges(org.apache.lucene.index.SegmentInfos,int,java.util.Map)">findForcedMerges</a></code>&nbsp;in class&nbsp;<code><a href="MergePolicy.html" title="class in org.apache.lucene.index">MergePolicy</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>infos</code> - the total set of segments in the index</dd>
<dd><code>maxSegmentCount</code> - requested maximum number of segments in the index (currently this
          is always 1)</dd>
<dd><code>segmentsToMerge</code> - contains the specific SegmentInfo instances that must be merged
          away. This may be a subset of all
          SegmentInfos.  If the value is True for a
          given SegmentInfo, that means this segment was
          an original segment present in the
          to-be-merged index; else, it was a segment
          produced by a cascaded merge.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="findForcedDeletesMerges(org.apache.lucene.index.SegmentInfos)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findForcedDeletesMerges</h4>
<pre class="methodSignature">public&nbsp;<a href="MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index">MergePolicy.MergeSpecification</a>&nbsp;findForcedDeletesMerges&#8203;(<a href="SegmentInfos.html" title="class in org.apache.lucene.index">SegmentInfos</a>&nbsp;infos)
                                                       throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="MergePolicy.html#findForcedDeletesMerges(org.apache.lucene.index.SegmentInfos)">MergePolicy</a></code></span></div>
<div class="block">Determine what set of merge operations is necessary in order to expunge all
 deletes from the index.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="MergePolicy.html#findForcedDeletesMerges(org.apache.lucene.index.SegmentInfos)">findForcedDeletesMerges</a></code>&nbsp;in class&nbsp;<code><a href="MergePolicy.html" title="class in org.apache.lucene.index">MergePolicy</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>infos</code> - the total set of segments in the index</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;close()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="MergePolicy.html#close()">MergePolicy</a></code></span></div>
<div class="block">Release all resources for the policy.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html?is-external=true#close()" title="class or interface in java.lang" class="externalLink">close</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html?is-external=true" title="class or interface in java.lang" class="externalLink">AutoCloseable</a></code></dd>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/Closeable.html?is-external=true#close()" title="class or interface in java.io" class="externalLink">close</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io" class="externalLink">Closeable</a></code></dd>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="MergePolicy.html#close()">close</a></code>&nbsp;in class&nbsp;<code><a href="MergePolicy.html" title="class in org.apache.lucene.index">MergePolicy</a></code></dd>
</dl>
</li>
</ul>
<a id="toString()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>toString</h4>
<pre class="methodSignature">public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;toString()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang" class="externalLink">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &copy; 2010 - 2021 Adobe. All Rights Reserved</small></p>
</footer>
</body>
</html>
