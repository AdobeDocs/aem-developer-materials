<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.14) on Wed Dec 06 14:36:20 UTC 2023 -->
<title>MultiDataStore (The Adobe Experience Manager SDK 2023.12.14538.20231205T165334Z-231100)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2023-12-06">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="MultiDataStore (The Adobe Experience Manager SDK 2023.12.14538.20231205T165334Z-231100)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.apache.jackrabbit.core.data</a></div>
<h2 title="Class MultiDataStore" class="title">Class MultiDataStore</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.apache.jackrabbit.core.data.MultiDataStore</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</a></code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">MultiDataStore</span>
extends java.lang.Object
implements <a href="DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</a></pre>
<div class="block">A MultiDataStore can handle two independent DataStores.
 <p>
 <b>Attention:</b> You will lost the global single instance mechanism !
 </p>
 It can be used if you have two storage systems. One for fast access and a
 other one like a archive DataStore on a slower storage system. All Files will
 be added to the primary DataStore. On read operations first the primary
 dataStore will be used and if no Record is found the archive DataStore will
 be used. The GarabageCollector will only remove files from the archive
 DataStore.
 <p>
 The internal MoveDataTask will be started automatically and could be
 configured with the following properties.
 <p>
 The Configuration:
 
 <pre>
 &lt;DataStore class="org.apache.jackrabbit.core.data.MultiDataStore"&gt;
     &lt;param name="<a href="#setMaxAge(int)"><code>maxAge</code></a>" value="60"/&gt;
     &lt;param name="<a href="#setMoveDataTaskSleep(int)"><code>moveDataTaskSleep</code></a>" value="604800"/&gt;
     &lt;param name="<a href="#setMoveDataTaskFirstRunHourOfDay(int)"><code>moveDataTaskFirstRunHourOfDay</code></a>" value="1"/&gt;
     &lt;param name="<a href="#setSleepBetweenRecords(long)"><code>sleepBetweenRecords</code></a>" value="100"/&gt;
     &lt;param name="<a href="#setDelayedDelete(boolean)"><code>delayedDelete</code></a>" value="false"/&gt;
     &lt;param name="<a href="#setDelayedDeleteSleep(long)"><code>delayedDeleteSleep</code></a>" value="86400"/&gt;
     &lt;param name="primary" value="org.apache.jackrabbit.core.data.db.DbDataStore"&gt;
        &lt;param .../&gt;
     &lt;/param&gt;
     &lt;param name="archive" value="org.apache.jackrabbit.core.data.FileDataStore"&gt;
        &lt;param .../&gt;
     &lt;/param&gt;
 &lt;/DataStore&gt;
 </pre>
 
 <ul>
 <li><code>maxAge</code>: defines how many days the content will reside in the
 primary data store. DataRecords that have been added before this time span
 will be moved to the archive data store. (default = <code>60</code>)</li>
 <li><code>moveDataTaskSleep</code>: specifies the sleep time of the
 moveDataTaskThread in seconds. (default = 60 * 60 * 24 * 7, which equals 7
 days)</li>
 <li><code>moveDataTaskNextRunHourOfDay</code>: specifies the hour at which
 the moveDataTaskThread initiates its first run (default = <code>1</code>
 which means 01:00 at night)</li>
 <li><code>sleepBetweenRecords</code>: specifies the delay in milliseconds
 between scanning data records (default = <code>100</code>)</li>
 <li><code>delayedDelete</code>: its possible to delay the delete operation on
 the primary data store. The DataIdentifiers will be written to a temporary
 file. The file will be processed after a defined sleep (see
 <code>delayedDeleteSleep</code>) It's useful if you like to create a snapshot
 of the primary data store backend in the meantime before the data will be
 deleted. (default = <code>false</code>)</li>
 <li><code>delayedDeleteSleep</code>: specifies the sleep time of the
 delayedDeleteTaskThread in seconds. (default = 60 * 60 * 24, which equals 1
 day). This means the delayed delete from the primary data store will be
 processed after one day.</li>
 </ul></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="MultiDataStore.DeleteDelayedIdentifiersTask.html" title="class in org.apache.jackrabbit.core.data">MultiDataStore.DeleteDelayedIdentifiersTask</a></span></code></th>
<td class="colLast">
<div class="block">Class to clean up the delayed DataRecords from the primary data store.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="MultiDataStore.MoveDataTask.html" title="class in org.apache.jackrabbit.core.data">MultiDataStore.MoveDataTask</a></span></code></th>
<td class="colLast">
<div class="block">Class for maintaining the MultiDataStore.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E()">MultiDataStore</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="DataRecord.html" title="interface in org.apache.jackrabbit.core.data">DataRecord</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addRecord(java.io.InputStream)">addRecord</a></span>&#8203;(java.io.InputStream&nbsp;stream)</code></th>
<td class="colLast">
<div class="block">Creates a new data record in the primary data store.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#clearInUse()">clearInUse</a></span>()</code></th>
<td class="colLast">
<div class="block">Clear the in-use list.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#close()">close</a></span>()</code></th>
<td class="colLast">
<div class="block">Close the data store</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#deleteAllOlderThan(long)">deleteAllOlderThan</a></span>&#8203;(long&nbsp;min)</code></th>
<td class="colLast">
<div class="block">Delete objects that have a modified date older than the specified date
 from the archive data store.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>java.util.Iterator&lt;<a href="DataIdentifier.html" title="class in org.apache.jackrabbit.core.data">DataIdentifier</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getAllIdentifiers()">getAllIdentifiers</a></span>()</code></th>
<td class="colLast">
<div class="block">Get all identifiers from the archive data store.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getDelayedDeleteSleep()">getDelayedDeleteSleep</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMaxAge()">getMaxAge</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMinRecordLength()">getMinRecordLength</a></span>()</code></th>
<td class="colLast">
<div class="block">Get the minimum size of an object that should be stored in the primary
 data store.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMoveDataTaskFirstRunHourOfDay()">getMoveDataTaskFirstRunHourOfDay</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMoveDataTaskSleep()">getMoveDataTaskSleep</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code><a href="DataRecord.html" title="interface in org.apache.jackrabbit.core.data">DataRecord</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getRecord(org.apache.jackrabbit.core.data.DataIdentifier)">getRecord</a></span>&#8203;(<a href="DataIdentifier.html" title="class in org.apache.jackrabbit.core.data">DataIdentifier</a>&nbsp;identifier)</code></th>
<td class="colLast">
<div class="block">Returns the identified data record from the primary data store.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code><a href="DataRecord.html" title="interface in org.apache.jackrabbit.core.data">DataRecord</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getRecordFromReference(java.lang.String)">getRecordFromReference</a></span>&#8203;(java.lang.String&nbsp;reference)</code></th>
<td class="colLast">
<div class="block">Returns the record that matches the given binary reference.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code><a href="DataRecord.html" title="interface in org.apache.jackrabbit.core.data">DataRecord</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getRecordIfStored(org.apache.jackrabbit.core.data.DataIdentifier)">getRecordIfStored</a></span>&#8203;(<a href="DataIdentifier.html" title="class in org.apache.jackrabbit.core.data">DataIdentifier</a>&nbsp;identifier)</code></th>
<td class="colLast">
<div class="block">Check if a record for the given identifier exists in the primary data
 store.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSleepBetweenRecords()">getSleepBetweenRecords</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#init(java.lang.String)">init</a></span>&#8203;(java.lang.String&nbsp;homeDir)</code></th>
<td class="colLast">
<div class="block">Initialized the data store</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isDelayedDelete()">isDelayedDelete</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setArchiveDataStore(org.apache.jackrabbit.core.data.DataStore)">setArchiveDataStore</a></span>&#8203;(<a href="DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</a>&nbsp;dataStore)</code></th>
<td class="colLast">
<div class="block">Setter for the archive dataStore</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setDelayedDelete(boolean)">setDelayedDelete</a></span>&#8203;(boolean&nbsp;delayedDelete)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setDelayedDeleteSleep(long)">setDelayedDeleteSleep</a></span>&#8203;(long&nbsp;delayedDeleteSleep)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setMaxAge(int)">setMaxAge</a></span>&#8203;(int&nbsp;maxAge)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setMoveDataTaskFirstRunHourOfDay(int)">setMoveDataTaskFirstRunHourOfDay</a></span>&#8203;(int&nbsp;hourOfDay)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setMoveDataTaskSleep(int)">setMoveDataTaskSleep</a></span>&#8203;(int&nbsp;sleep)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setPrimaryDataStore(org.apache.jackrabbit.core.data.DataStore)">setPrimaryDataStore</a></span>&#8203;(<a href="DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</a>&nbsp;dataStore)</code></th>
<td class="colLast">
<div class="block">Setter for the primary dataStore</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setSleepBetweenRecords(long)">setSleepBetweenRecords</a></span>&#8203;(long&nbsp;millis)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#updateModifiedDateOnAccess(long)">updateModifiedDateOnAccess</a></span>&#8203;(long&nbsp;before)</code></th>
<td class="colLast">
<div class="block">From now on, update the modified date of an object even when accessing it
 in the archive data store.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MultiDataStore</h4>
<pre>public&nbsp;MultiDataStore()</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="setPrimaryDataStore(org.apache.jackrabbit.core.data.DataStore)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setPrimaryDataStore</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setPrimaryDataStore&#8203;(<a href="DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</a>&nbsp;dataStore)</pre>
<div class="block">Setter for the primary dataStore</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dataStore</code> - </dd>
</dl>
</li>
</ul>
<a id="setArchiveDataStore(org.apache.jackrabbit.core.data.DataStore)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setArchiveDataStore</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setArchiveDataStore&#8203;(<a href="DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</a>&nbsp;dataStore)</pre>
<div class="block">Setter for the archive dataStore</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dataStore</code> - </dd>
</dl>
</li>
</ul>
<a id="getRecordIfStored(org.apache.jackrabbit.core.data.DataIdentifier)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRecordIfStored</h4>
<pre class="methodSignature">public&nbsp;<a href="DataRecord.html" title="interface in org.apache.jackrabbit.core.data">DataRecord</a>&nbsp;getRecordIfStored&#8203;(<a href="DataIdentifier.html" title="class in org.apache.jackrabbit.core.data">DataIdentifier</a>&nbsp;identifier)
                             throws <a href="DataStoreException.html" title="class in org.apache.jackrabbit.core.data">DataStoreException</a></pre>
<div class="block">Check if a record for the given identifier exists in the primary data
 store. If not found there it will be returned from the archive data
 store. If no record exists, this method returns null.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="DataStore.html#getRecordIfStored(org.apache.jackrabbit.core.data.DataIdentifier)">getRecordIfStored</a></code>&nbsp;in interface&nbsp;<code><a href="DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>identifier</code> - data identifier</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the record if found, and null if not</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="DataStoreException.html" title="class in org.apache.jackrabbit.core.data">DataStoreException</a></code> - if the data store could not be accessed</dd>
</dl>
</li>
</ul>
<a id="getRecord(org.apache.jackrabbit.core.data.DataIdentifier)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRecord</h4>
<pre class="methodSignature">public&nbsp;<a href="DataRecord.html" title="interface in org.apache.jackrabbit.core.data">DataRecord</a>&nbsp;getRecord&#8203;(<a href="DataIdentifier.html" title="class in org.apache.jackrabbit.core.data">DataIdentifier</a>&nbsp;identifier)
                     throws <a href="DataStoreException.html" title="class in org.apache.jackrabbit.core.data">DataStoreException</a></pre>
<div class="block">Returns the identified data record from the primary data store. If not
 found there it will be returned from the archive data store. The given
 identifier should be the identifier of a previously saved data record.
 Since records are never removed, there should never be cases where the
 identified record is not found. Abnormal cases like that are treated as
 errors and handled by throwing an exception.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="DataStore.html#getRecord(org.apache.jackrabbit.core.data.DataIdentifier)">getRecord</a></code>&nbsp;in interface&nbsp;<code><a href="DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>identifier</code> - data identifier</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>identified data record</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="DataStoreException.html" title="class in org.apache.jackrabbit.core.data">DataStoreException</a></code> - if the data store could not be accessed, or if the given
             identifier is invalid</dd>
</dl>
</li>
</ul>
<a id="addRecord(java.io.InputStream)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addRecord</h4>
<pre class="methodSignature">public&nbsp;<a href="DataRecord.html" title="interface in org.apache.jackrabbit.core.data">DataRecord</a>&nbsp;addRecord&#8203;(java.io.InputStream&nbsp;stream)
                     throws <a href="DataStoreException.html" title="class in org.apache.jackrabbit.core.data">DataStoreException</a></pre>
<div class="block">Creates a new data record in the primary data store. The given binary
 stream is consumed and a binary record containing the consumed stream is
 created and returned. If the same stream already exists in another
 record, then that record is returned instead of creating a new one.
 <p>
 The given stream is consumed and <strong>not closed</strong> by this
 method. It is the responsibility of the caller to close the stream. A
 typical call pattern would be:
 
 <pre>
     InputStream stream = ...;
     try {
         record = store.addRecord(stream);
     } finally {
         stream.close();
     }
 </pre></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="DataStore.html#addRecord(java.io.InputStream)">addRecord</a></code>&nbsp;in interface&nbsp;<code><a href="DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>stream</code> - binary stream</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>data record that contains the given stream</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="DataStoreException.html" title="class in org.apache.jackrabbit.core.data">DataStoreException</a></code> - if the data store could not be accessed</dd>
</dl>
</li>
</ul>
<a id="updateModifiedDateOnAccess(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateModifiedDateOnAccess</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;updateModifiedDateOnAccess&#8203;(long&nbsp;before)</pre>
<div class="block">From now on, update the modified date of an object even when accessing it
 in the archive data store. Usually, the modified date is only updated
 when creating a new object, or when a new link is added to an existing
 object. When this setting is enabled, even getLength() will update the
 modified date.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="DataStore.html#updateModifiedDateOnAccess(long)">updateModifiedDateOnAccess</a></code>&nbsp;in interface&nbsp;<code><a href="DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>before</code> - - update the modified date to the current time if it is older
            than this value</dd>
</dl>
</li>
</ul>
<a id="deleteAllOlderThan(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteAllOlderThan</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;deleteAllOlderThan&#8203;(long&nbsp;min)
                       throws <a href="DataStoreException.html" title="class in org.apache.jackrabbit.core.data">DataStoreException</a></pre>
<div class="block">Delete objects that have a modified date older than the specified date
 from the archive data store.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="DataStore.html#deleteAllOlderThan(long)">deleteAllOlderThan</a></code>&nbsp;in interface&nbsp;<code><a href="DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>min</code> - the minimum time</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the number of data records deleted</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="DataStoreException.html" title="class in org.apache.jackrabbit.core.data">DataStoreException</a></code></dd>
</dl>
</li>
</ul>
<a id="getAllIdentifiers()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAllIdentifiers</h4>
<pre class="methodSignature">public&nbsp;java.util.Iterator&lt;<a href="DataIdentifier.html" title="class in org.apache.jackrabbit.core.data">DataIdentifier</a>&gt;&nbsp;getAllIdentifiers()
                                                     throws <a href="DataStoreException.html" title="class in org.apache.jackrabbit.core.data">DataStoreException</a></pre>
<div class="block">Get all identifiers from the archive data store.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="DataStore.html#getAllIdentifiers()">getAllIdentifiers</a></code>&nbsp;in interface&nbsp;<code><a href="DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an iterator over all DataIdentifier objects</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="DataStoreException.html" title="class in org.apache.jackrabbit.core.data">DataStoreException</a></code> - if the list could not be read</dd>
</dl>
</li>
</ul>
<a id="getRecordFromReference(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRecordFromReference</h4>
<pre class="methodSignature">public&nbsp;<a href="DataRecord.html" title="interface in org.apache.jackrabbit.core.data">DataRecord</a>&nbsp;getRecordFromReference&#8203;(java.lang.String&nbsp;reference)
                                  throws <a href="DataStoreException.html" title="class in org.apache.jackrabbit.core.data">DataStoreException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="DataStore.html#getRecordFromReference(java.lang.String)">DataStore</a></code></span></div>
<div class="block">Returns the record that matches the given binary reference.
 Returns <code>null</code> if the reference is invalid, for example if it
 points to a record that does not exist.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="DataStore.html#getRecordFromReference(java.lang.String)">getRecordFromReference</a></code>&nbsp;in interface&nbsp;<code><a href="DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>reference</code> - binary reference</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>matching record, or <code>null</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="DataStoreException.html" title="class in org.apache.jackrabbit.core.data">DataStoreException</a></code> - if the data store could not be accessed</dd>
</dl>
</li>
</ul>
<a id="init(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>init</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;init&#8203;(java.lang.String&nbsp;homeDir)
          throws <a href="../../../../../javax/jcr/RepositoryException.html" title="class in javax.jcr">RepositoryException</a></pre>
<div class="block">Initialized the data store</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="DataStore.html#init(java.lang.String)">init</a></code>&nbsp;in interface&nbsp;<code><a href="DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>homeDir</code> - the home directory of the repository</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../javax/jcr/RepositoryException.html" title="class in javax.jcr">RepositoryException</a></code></dd>
</dl>
</li>
</ul>
<a id="getMinRecordLength()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMinRecordLength</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;getMinRecordLength()</pre>
<div class="block">Get the minimum size of an object that should be stored in the primary
 data store.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="DataStore.html#getMinRecordLength()">getMinRecordLength</a></code>&nbsp;in interface&nbsp;<code><a href="DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the minimum size in bytes</dd>
</dl>
</li>
</ul>
<a id="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;close()
           throws <a href="DataStoreException.html" title="class in org.apache.jackrabbit.core.data">DataStoreException</a></pre>
<div class="block">Close the data store</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="DataStore.html#close()">close</a></code>&nbsp;in interface&nbsp;<code><a href="DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="DataStoreException.html" title="class in org.apache.jackrabbit.core.data">DataStoreException</a></code> - if a problem occurred</dd>
</dl>
</li>
</ul>
<a id="clearInUse()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clearInUse</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;clearInUse()</pre>
<div class="block">Clear the in-use list. This is only used for testing to make the the garbage collection
 think that objects are no longer in use.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="DataStore.html#clearInUse()">clearInUse</a></code>&nbsp;in interface&nbsp;<code><a href="DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</a></code></dd>
</dl>
</li>
</ul>
<a id="getMaxAge()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxAge</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;getMaxAge()</pre>
</li>
</ul>
<a id="setMaxAge(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMaxAge</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setMaxAge&#8203;(int&nbsp;maxAge)</pre>
</li>
</ul>
<a id="getMoveDataTaskSleep()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMoveDataTaskSleep</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;getMoveDataTaskSleep()</pre>
</li>
</ul>
<a id="getMoveDataTaskFirstRunHourOfDay()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMoveDataTaskFirstRunHourOfDay</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;getMoveDataTaskFirstRunHourOfDay()</pre>
</li>
</ul>
<a id="setMoveDataTaskSleep(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMoveDataTaskSleep</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setMoveDataTaskSleep&#8203;(int&nbsp;sleep)</pre>
</li>
</ul>
<a id="setMoveDataTaskFirstRunHourOfDay(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMoveDataTaskFirstRunHourOfDay</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setMoveDataTaskFirstRunHourOfDay&#8203;(int&nbsp;hourOfDay)</pre>
</li>
</ul>
<a id="setSleepBetweenRecords(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setSleepBetweenRecords</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setSleepBetweenRecords&#8203;(long&nbsp;millis)</pre>
</li>
</ul>
<a id="getSleepBetweenRecords()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSleepBetweenRecords</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getSleepBetweenRecords()</pre>
</li>
</ul>
<a id="isDelayedDelete()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isDelayedDelete</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isDelayedDelete()</pre>
</li>
</ul>
<a id="setDelayedDelete(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDelayedDelete</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setDelayedDelete&#8203;(boolean&nbsp;delayedDelete)</pre>
</li>
</ul>
<a id="getDelayedDeleteSleep()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDelayedDeleteSleep</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getDelayedDeleteSleep()</pre>
</li>
</ul>
<a id="setDelayedDeleteSleep(long)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>setDelayedDeleteSleep</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setDelayedDeleteSleep&#8203;(long&nbsp;delayedDeleteSleep)</pre>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &copy; 2010 - 2023 Adobe. All Rights Reserved</small></p>
</footer>
</body>
</html>
