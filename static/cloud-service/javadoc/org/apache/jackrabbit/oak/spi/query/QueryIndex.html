<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.14) on Wed Nov 29 17:28:19 UTC 2023 -->
<title>QueryIndex (The Adobe Experience Manager SDK 2023.11.14227.20231108T162349Z-231100)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2023-11-29">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="QueryIndex (The Adobe Experience Manager SDK 2023.11.14227.20231108T162349Z-231100)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":6,"i1":6,"i2":18,"i3":6,"i4":6,"i5":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],16:["t5","Default Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.apache.jackrabbit.oak.spi.query</a></div>
<h2 title="Interface QueryIndex" class="title">Interface QueryIndex</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Known Subinterfaces:</dt>
<dd><code><a href="QueryIndex.AdvanceFulltextQueryIndex.html" title="interface in org.apache.jackrabbit.oak.spi.query">QueryIndex.AdvanceFulltextQueryIndex</a></code>, <code><a href="QueryIndex.FulltextQueryIndex.html" title="interface in org.apache.jackrabbit.oak.spi.query">QueryIndex.FulltextQueryIndex</a></code></dd>
</dl>
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><code><a href="../../plugins/index/aggregate/AggregateIndex.html" title="class in org.apache.jackrabbit.oak.plugins.index.aggregate">AggregateIndex</a></code>, <code>org.apache.jackrabbit.oak.plugins.index.search.spi.query.FulltextIndex</code>, <code><a href="../../plugins/index/lucene/LuceneIndex.html" title="class in org.apache.jackrabbit.oak.plugins.index.lucene">LuceneIndex</a></code>, <code><a href="../../plugins/index/lucene/LucenePropertyIndex.html" title="class in org.apache.jackrabbit.oak.plugins.index.lucene">LucenePropertyIndex</a></code></dd>
</dl>
<hr>
<pre>public interface <span class="typeNameLabel">QueryIndex</span></pre>
<div class="block">Represents an index. The index should use the data in the filter if possible
 to speed up reading.
 <p>
 The query engine will pick the index that returns the lowest cost for the
 given filter conditions.
 <p>
 The index should only use that part of the filter that speeds up data lookup.
 All other filter conditions should be ignored and not evaluated within this
 index, because the query engine will in any case evaluate the condition (and
 join condition), so that evaluating the conditions within the index would
 actually slow down processing. For example, an index on the property
 "lastName" should not try to evaluate any other restrictions than those on
 the property "lastName", even if the query contains other restrictions. For
 the query "where lastName = 'x' and firstName = 'y'", the query engine will
 set two filter conditions, one for "lastName" and another for "firstName".
 The index on "lastName" should not evaluate the condition on "firstName",
 even thought it will be set in the filter.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="QueryIndex.AdvancedQueryIndex.html" title="interface in org.apache.jackrabbit.oak.spi.query">QueryIndex.AdvancedQueryIndex</a></span></code></th>
<td class="colLast">
<div class="block">A query index that may support using multiple access orders
 (returning the rows in a specific order), and that can provide detailed
 information about the cost.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="QueryIndex.AdvanceFulltextQueryIndex.html" title="interface in org.apache.jackrabbit.oak.spi.query">QueryIndex.AdvanceFulltextQueryIndex</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="QueryIndex.FulltextQueryIndex.html" title="interface in org.apache.jackrabbit.oak.spi.query">QueryIndex.FulltextQueryIndex</a></span></code></th>
<td class="colLast">
<div class="block">A marker interface which means this index supports may support more than
 just the minimal fulltext query syntax.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="QueryIndex.IndexPlan.html" title="interface in org.apache.jackrabbit.oak.spi.query">QueryIndex.IndexPlan</a></span></code></th>
<td class="colLast">
<div class="block">An index plan.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="QueryIndex.NativeQueryIndex.html" title="interface in org.apache.jackrabbit.oak.spi.query">QueryIndex.NativeQueryIndex</a></span></code></th>
<td class="colLast">
<div class="block">A marker interface which means this index supports executing native queries</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="QueryIndex.NodeAggregator.html" title="interface in org.apache.jackrabbit.oak.spi.query">QueryIndex.NodeAggregator</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="QueryIndex.OrderEntry.html" title="class in org.apache.jackrabbit.oak.spi.query">QueryIndex.OrderEntry</a></span></code></th>
<td class="colLast">
<div class="block">A sort order entry.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t5" class="tableTab"><span><a href="javascript:show(16);">Default Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>double</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCost(org.apache.jackrabbit.oak.spi.query.Filter,org.apache.jackrabbit.oak.spi.state.NodeState)">getCost</a></span>&#8203;(<a href="Filter.html" title="interface in org.apache.jackrabbit.oak.spi.query">Filter</a>&nbsp;filter,
       <a href="../state/NodeState.html" title="interface in org.apache.jackrabbit.oak.spi.state">NodeState</a>&nbsp;rootState)</code></th>
<td class="colLast">
<div class="block">Estimate the worst-case cost to query with the given filter.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getIndexName()">getIndexName</a></span>()</code></th>
<td class="colLast">
<div class="block">Get the generic index name (normally the index type).</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>default java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getIndexName(org.apache.jackrabbit.oak.spi.query.Filter,org.apache.jackrabbit.oak.spi.state.NodeState)">getIndexName</a></span>&#8203;(<a href="Filter.html" title="interface in org.apache.jackrabbit.oak.spi.query">Filter</a>&nbsp;filter,
            <a href="../state/NodeState.html" title="interface in org.apache.jackrabbit.oak.spi.state">NodeState</a>&nbsp;rootState)</code></th>
<td class="colLast">
<div class="block">Get the specific index name (the path of the index definition, or the
 index type if that one is unique).</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>double</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMinimumCost()">getMinimumCost</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the minimum cost which <a href="#getCost(org.apache.jackrabbit.oak.spi.query.Filter,org.apache.jackrabbit.oak.spi.state.NodeState)"><code>getCost(Filter, NodeState)</code></a> would return in the best possible case.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getPlan(org.apache.jackrabbit.oak.spi.query.Filter,org.apache.jackrabbit.oak.spi.state.NodeState)">getPlan</a></span>&#8203;(<a href="Filter.html" title="interface in org.apache.jackrabbit.oak.spi.query">Filter</a>&nbsp;filter,
       <a href="../state/NodeState.html" title="interface in org.apache.jackrabbit.oak.spi.state">NodeState</a>&nbsp;rootState)</code></th>
<td class="colLast">
<div class="block">Get the query plan for the given filter.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="Cursor.html" title="interface in org.apache.jackrabbit.oak.spi.query">Cursor</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#query(org.apache.jackrabbit.oak.spi.query.Filter,org.apache.jackrabbit.oak.spi.state.NodeState)">query</a></span>&#8203;(<a href="Filter.html" title="interface in org.apache.jackrabbit.oak.spi.query">Filter</a>&nbsp;filter,
     <a href="../state/NodeState.html" title="interface in org.apache.jackrabbit.oak.spi.state">NodeState</a>&nbsp;rootState)</code></th>
<td class="colLast">
<div class="block">Query the index.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="getMinimumCost()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMinimumCost</h4>
<pre class="methodSignature">double&nbsp;getMinimumCost()</pre>
<div class="block">Returns the minimum cost which <a href="#getCost(org.apache.jackrabbit.oak.spi.query.Filter,org.apache.jackrabbit.oak.spi.state.NodeState)"><code>getCost(Filter, NodeState)</code></a> would return in the best possible case.
 <p>
 The implementation should return a static/cached value because it is called very often.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the minimum cost for the index</dd>
</dl>
</li>
</ul>
<a id="getCost(org.apache.jackrabbit.oak.spi.query.Filter,org.apache.jackrabbit.oak.spi.state.NodeState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCost</h4>
<pre class="methodSignature">double&nbsp;getCost&#8203;(<a href="Filter.html" title="interface in org.apache.jackrabbit.oak.spi.query">Filter</a>&nbsp;filter,
               <a href="../state/NodeState.html" title="interface in org.apache.jackrabbit.oak.spi.state">NodeState</a>&nbsp;rootState)</pre>
<div class="block">Estimate the worst-case cost to query with the given filter. The returned
 cost is a value between 1 (very fast; lookup of a unique node) and the
 estimated number of entries to traverse, if the cursor would be fully
 read, and if there could in theory be one network roundtrip or disk read
 operation per node (this method may return a lower number if the data is
 known to be fully in memory).
 <p>
 The returned value is supposed to be an estimate and doesn't have to be
 very accurate. Please note this method is called on each index whenever a
 query is run, so the method should be reasonably fast (not read any data
 itself, or at least not read too much data).
 <p>
 If an index implementation can not query the data, it has to return
 <code>Double.MAX_VALUE</code>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>filter</code> - the filter</dd>
<dd><code>rootState</code> - root state of the current repository snapshot</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the estimated cost in number of read nodes</dd>
</dl>
</li>
</ul>
<a id="query(org.apache.jackrabbit.oak.spi.query.Filter,org.apache.jackrabbit.oak.spi.state.NodeState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>query</h4>
<pre class="methodSignature"><a href="Cursor.html" title="interface in org.apache.jackrabbit.oak.spi.query">Cursor</a>&nbsp;query&#8203;(<a href="Filter.html" title="interface in org.apache.jackrabbit.oak.spi.query">Filter</a>&nbsp;filter,
             <a href="../state/NodeState.html" title="interface in org.apache.jackrabbit.oak.spi.state">NodeState</a>&nbsp;rootState)</pre>
<div class="block">Query the index. The returned cursor is supposed to return as few nodes
 as possible, but may return more nodes than necessary.
 <p>
 An implementation should only filter the result if it can do so easily
 and efficiently; the query engine will verify the data again (in memory)
 and check for access rights.
 <p>
 The method is only called if this index is used for the given query and
 selector, which is only the case if the given index implementation
 returned the lowest cost for the given filter. If the implementation
 returned <code>Double.MAX_VALUE</code> in the getCost method for the given
 filter, then this method is not called. If it is still called, then it is
 supposed to throw an exception (as it would be an internal error of the
 query engine).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>filter</code> - the filter</dd>
<dd><code>rootState</code> - root state of the current repository snapshot</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a cursor to iterate over the result</dd>
</dl>
</li>
</ul>
<a id="getPlan(org.apache.jackrabbit.oak.spi.query.Filter,org.apache.jackrabbit.oak.spi.state.NodeState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPlan</h4>
<pre class="methodSignature">java.lang.String&nbsp;getPlan&#8203;(<a href="Filter.html" title="interface in org.apache.jackrabbit.oak.spi.query">Filter</a>&nbsp;filter,
                         <a href="../state/NodeState.html" title="interface in org.apache.jackrabbit.oak.spi.state">NodeState</a>&nbsp;rootState)</pre>
<div class="block">Get the query plan for the given filter. This method is called when
 running an <code>EXPLAIN SELECT</code> query, or for logging purposes. The
 result should be human readable.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>filter</code> - the filter</dd>
<dd><code>rootState</code> - root state of the current repository snapshot</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the query plan</dd>
</dl>
</li>
</ul>
<a id="getIndexName()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getIndexName</h4>
<pre class="methodSignature">java.lang.String&nbsp;getIndexName()</pre>
<div class="block">Get the generic index name (normally the index type).</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the index name</dd>
</dl>
</li>
</ul>
<a id="getIndexName(org.apache.jackrabbit.oak.spi.query.Filter,org.apache.jackrabbit.oak.spi.state.NodeState)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getIndexName</h4>
<pre class="methodSignature">default&nbsp;java.lang.String&nbsp;getIndexName&#8203;(<a href="Filter.html" title="interface in org.apache.jackrabbit.oak.spi.query">Filter</a>&nbsp;filter,
                                      <a href="../state/NodeState.html" title="interface in org.apache.jackrabbit.oak.spi.state">NodeState</a>&nbsp;rootState)</pre>
<div class="block">Get the specific index name (the path of the index definition, or the
 index type if that one is unique).</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the index name</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &copy; 2010 - 2023 Adobe. All Rights Reserved</small></p>
</footer>
</body>
</html>
