<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.14) on Wed Dec 06 14:36:20 UTC 2023 -->
<title>AuthorizableJSONWriter (The Adobe Experience Manager SDK 2023.12.14538.20231205T165334Z-231100)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2023-12-06">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="AuthorizableJSONWriter (The Adobe Experience Manager SDK 2023.12.14538.20231205T165334Z-231100)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">com.adobe.granite.security.user.util</a></div>
<h2 title="Class AuthorizableJSONWriter" class="title">Class AuthorizableJSONWriter</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.adobe.granite.security.user.util.AuthorizableJSONWriter</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="PropConstants.html" title="interface in com.adobe.granite.security.user.util">PropConstants</a></code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">AuthorizableJSONWriter</span>
extends java.lang.Object
implements <a href="PropConstants.html" title="interface in com.adobe.granite.security.user.util">PropConstants</a></pre>
<div class="block">AuthorizableJSONWriter is a utility to write a JSON serialization of users
 and groups.

 <h3>Default Serialization</h3>

 The default serialization of a given authorizable includes the following
 information:
 <ul>
     <li><a href="PropConstants.html#TYPE"><code>PropConstants.TYPE</code></a>: with value "group" or "user" depending on
     the type of authorizable.</li>
     <li><a href="PropConstants.html#AUTHORIZABLE_ID"><code>PropConstants.AUTHORIZABLE_ID</code></a>: the authorizable ID.</li>
     <li><a href="PropConstants.html#DISPLAY_NAME"><code>PropConstants.DISPLAY_NAME</code></a>: the default display name.</li>
     <li><a href="PropConstants.html#HOME"><code>PropConstants.HOME</code></a>: The path to the home directory.</li>
     <li><a href="PropConstants.html#IS_IMPERSONATED"><code>PropConstants.IS_IMPERSONATED</code></a>: this property is only included
     if the serialized authorizable is the same as the one associated with the
     editing session. The flag is 'true' if the session has been obtained
     through impersonation.</li>
 </ul>

 <h3>Output Properties</h3>

 In order to include additional information into the serialization a set of
 output properties can be specified. Currently the following additional
 properties are supported:

 <ul>
     <li><a href="PropConstants.html#PRINCIPAL"><code>PropConstants.PRINCIPAL</code></a>: The principal name.</li>
     <li><a href="PropConstants.html#MEMBER_OF"><code>PropConstants.MEMBER_OF</code></a>: Includes the serialization of the
     groups this authorizable is member of (as visible to the editing session).</li>
     <li>memberOfTotal: The total number of groups this authorizable is member
     of. Note, that -1 may be returned if a limit has been specified and the
     total amount of members exceeds the specified limit</li>
     <li><a href="PropConstants.html#DECLARED_MEMBER_OF"><code>PropConstants.DECLARED_MEMBER_OF</code></a>: Includes the serialization
     of those groups this authorizable is declared member of (as visible to the
     editing session).</li>
     <li>declaredMemberOfTotal: The number of those groups. Note, that -1 may
     be returned if a limit has been specified and the total amount of
     declared membership entries exceeds the specified limit.</li>
     <li><a href="PropConstants.html#IMAGE"><code>PropConstants.IMAGE</code></a>: The image information.</li>
     <li><a href="PropConstants.html#MODIFICATION"><code>PropConstants.MODIFICATION</code></a>: Modification information.</li>
     <li><a href="PropConstants.html#REPLICATION"><code>PropConstants.REPLICATION</code></a>: Replication data.</li>
     <li><a href="PropConstants.html#WILDCARD"><code>PropConstants.WILDCARD</code></a>: Includes all of the above properties
     plus the user and group specific properties listed below (except the
     *Total properties).</li>
     <li>Any other property stored with an authorizable. The property to be
     included must be referred with a relative path. E.g. 'profile/givenName'
     would be used to retrieve a property 'givenName' that was stored in the
     profile subnode. The wildcard '*' is used to include all user specific
     properties of a subnode e.g. 'profile/*'. Note however, that this will
     not include protected JCR specific properties.
     The serialization of the these properties is hierarchical exposing
     intermediate nodes as JSON objects.</li>
 </ul>

 In addition the following user specific properties can be specified:

 <ul>
     <li><a href="PropConstants.html#IMPERSONATORS"><code>PropConstants.IMPERSONATORS</code></a>: The serialization of those
     users that can impersonate the target user (as visible to the
     editing session).</li>
     <li>impersonatorsTotal: The total amount of impersonators. Note, that -1
     may be returned if a limit has been specified and the total amount of
     impersonators exceeds the specified limit.</li>
     <li><a href="PropConstants.html#DISABLED"><code>PropConstants.DISABLED</code></a>: The disabled text in case this
     user is disabled.</li>
 </ul>

 And there are a couple of group specific properties:

 <ul>
     <li><a href="PropConstants.html#MEMBERS"><code>PropConstants.MEMBERS</code></a>: The serialization of the members
     of this group (as visible to the editing session).</li>
     <li>membersTotal: The total number of members. Note, that -1 may be
     returned if a limit has been specified and the total number exceeds the limit.</li>
     <li><a href="PropConstants.html#DECLARED_MEMBERS"><code>PropConstants.DECLARED_MEMBERS</code></a>: The serialization of the
     declared members of this group (as visible to the editing session).</li>
     <li>declaredMembersTotal: The total number of declared members.
     Note, that -1 is returned if a limit has been specified and the total
     number exceeds the limit.</li>
 </ul>

 <h3>Limit the number of serialized authorizables</h3>

 For those properties that include serialization of additional authorizables
 it is possible to set a limit, which is the maximum amount of authorizables
 that should be serialized with the specified output property.
 This can be achieved by calling <a href="#setLimit(java.lang.String,long)"><code>setLimit(String, long)</code></a> where the
 'key' is the name of the output property.

 <h3>Compatibility Notes</h3>

 This class replaces CQ <code>AuthorizableJSONWriter</code>.<br>
 Please note the following differences in usage:

 <pre>
 - outputprop-keys should be relative paths
 - removed old backwards compatibility lookup from user-prop to profile
 - jcr:created and jcr:createdBy must be listed explicitly
 - rep:userId omitted as this properties no longer exists and is identical to "authorizableId"
 - the "id" key has been renamed to "authorizableId"
 - the "groupName" key has been omitted as it seems wrong to have "name"
   and "id" and in addition a "groupName" which essential was the "id".
 - basic option removed as this is covered by outputprops being empty.
 - the cq specific 'table' view has been removed
 </pre></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a id="fields.inherited.from.class.com.adobe.granite.security.user.util.PropConstants">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;com.adobe.granite.security.user.util.<a href="PropConstants.html" title="interface in com.adobe.granite.security.user.util">PropConstants</a></h3>
<code><a href="PropConstants.html#AUTHORIZABLE_ID">AUTHORIZABLE_ID</a>, <a href="PropConstants.html#AUTHORIZABLES">AUTHORIZABLES</a>, <a href="PropConstants.html#CNT">CNT</a>, <a href="PropConstants.html#DECLARED_MEMBER_OF">DECLARED_MEMBER_OF</a>, <a href="PropConstants.html#DECLARED_MEMBERS">DECLARED_MEMBERS</a>, <a href="PropConstants.html#DISABLED">DISABLED</a>, <a href="PropConstants.html#DISPLAY_NAME">DISPLAY_NAME</a>, <a href="PropConstants.html#HOME">HOME</a>, <a href="PropConstants.html#IMAGE">IMAGE</a>, <a href="PropConstants.html#IMPERSONATORS">IMPERSONATORS</a>, <a href="PropConstants.html#IS_IMPERSONATED">IS_IMPERSONATED</a>, <a href="PropConstants.html#MEMBER_OF">MEMBER_OF</a>, <a href="PropConstants.html#MEMBERS">MEMBERS</a>, <a href="PropConstants.html#MODIFICATION">MODIFICATION</a>, <a href="PropConstants.html#OFFSET">OFFSET</a>, <a href="PropConstants.html#PRINCIPAL">PRINCIPAL</a>, <a href="PropConstants.html#REPLICATION">REPLICATION</a>, <a href="PropConstants.html#TYPE">TYPE</a>, <a href="PropConstants.html#TYPE_GROUP">TYPE_GROUP</a>, <a href="PropConstants.html#TYPE_USER">TYPE_USER</a>, <a href="PropConstants.html#WILDCARD">WILDCARD</a></code></li>
</ul>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(com.adobe.granite.security.user.UserPropertiesManager,org.apache.sling.api.resource.ResourceResolver,javax.jcr.Session,java.util.Set,com.adobe.granite.xss.XSSFilter)">AuthorizableJSONWriter</a></span>&#8203;(<a href="../UserPropertiesManager.html" title="interface in com.adobe.granite.security.user">UserPropertiesManager</a>&nbsp;userPropertiesMgr,
                      <a href="../../../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource">ResourceResolver</a>&nbsp;resourceResolver,
                      <a href="../../../../../../javax/jcr/Session.html" title="interface in javax.jcr">Session</a>&nbsp;session,
                      java.util.Set&lt;java.lang.String&gt;&nbsp;outputProps,
                      <a href="../../../xss/XSSFilter.html" title="interface in com.adobe.granite.xss">XSSFilter</a>&nbsp;xss)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setFilterPredicates(java.lang.String%5B%5D)">setFilterPredicates</a></span>&#8203;(java.lang.String[]&nbsp;filters)</code></th>
<td class="colLast">
<div class="block">Creates a predicate list based of the given filters array containing only the non blank filters and merges all of them in a single resulting authorizable predicate.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setLimit(java.lang.String,long)">setLimit</a></span>&#8203;(java.lang.String&nbsp;key,
        long&nbsp;limit)</code></th>
<td class="colLast">
<div class="block">Sets the limit for the number of authorizables included in the object
 with the specified key.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#write(org.apache.sling.commons.json.io.JSONWriter,org.apache.jackrabbit.api.security.user.Authorizable)">write</a></span>&#8203;(<a href="../../../../../../org/apache/sling/commons/json/io/JSONWriter.html" title="class in org.apache.sling.commons.json.io">JSONWriter</a>&nbsp;writer,
     <a href="../../../../../../org/apache/jackrabbit/api/security/user/Authorizable.html" title="interface in org.apache.jackrabbit.api.security.user">Authorizable</a>&nbsp;authorizable)</code></th>
<td class="colLast">
<div class="block">Write the data of the specified <code>authorizable</code> to the given
 <code>writer</code>.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;(com.adobe.granite.security.user.UserPropertiesManager,org.apache.sling.api.resource.ResourceResolver,javax.jcr.Session,java.util.Set,com.adobe.granite.xss.XSSFilter)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>AuthorizableJSONWriter</h4>
<pre>public&nbsp;AuthorizableJSONWriter&#8203;(<a href="../UserPropertiesManager.html" title="interface in com.adobe.granite.security.user">UserPropertiesManager</a>&nbsp;userPropertiesMgr,
                              <a href="../../../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource">ResourceResolver</a>&nbsp;resourceResolver,
                              <a href="../../../../../../javax/jcr/Session.html" title="interface in javax.jcr">Session</a>&nbsp;session,
                              java.util.Set&lt;java.lang.String&gt;&nbsp;outputProps,
                              <a href="../../../xss/XSSFilter.html" title="interface in com.adobe.granite.xss">XSSFilter</a>&nbsp;xss)</pre>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>userPropertiesMgr</code> - the manager to access the profile.</dd>
<dd><code>resourceResolver</code> - the resource resolver</dd>
<dd><code>session</code> - the session</dd>
<dd><code>outputProps</code> - the output properties</dd>
<dd><code>xss</code> - the XSS protection service</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="setLimit(java.lang.String,long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setLimit</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setLimit&#8203;(java.lang.String&nbsp;key,
                     long&nbsp;limit)</pre>
<div class="block">Sets the limit for the number of authorizables included in the object
 with the specified key.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - The key as present in the output props.</dd>
<dd><code>limit</code> - The maximal number of entries to be created for the
 given key.</dd>
</dl>
</li>
</ul>
<a id="setFilterPredicates(java.lang.String[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setFilterPredicates</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setFilterPredicates&#8203;(java.lang.String[]&nbsp;filters)</pre>
<div class="block">Creates a predicate list based of the given filters array containing only the non blank filters and merges all of them in a single resulting authorizable predicate.
 The <code>resultingAuthorizablePredicate</code> will validate an authorizable if any of the predicates from the list are valid.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>filters</code> - an array of given filters to use for creating a predicate list and a resulting predicate from that list</dd>
</dl>
</li>
</ul>
<a id="write(org.apache.sling.commons.json.io.JSONWriter,org.apache.jackrabbit.api.security.user.Authorizable)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>write</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;write&#8203;(<a href="../../../../../../org/apache/sling/commons/json/io/JSONWriter.html" title="class in org.apache.sling.commons.json.io">JSONWriter</a>&nbsp;writer,
                  <a href="../../../../../../org/apache/jackrabbit/api/security/user/Authorizable.html" title="interface in org.apache.jackrabbit.api.security.user">Authorizable</a>&nbsp;authorizable)
           throws <a href="../../../../../../org/apache/sling/commons/json/JSONException.html" title="class in org.apache.sling.commons.json">JSONException</a></pre>
<div class="block">Write the data of the specified <code>authorizable</code> to the given
 <code>writer</code>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>writer</code> - The JSONWriter to be used.</dd>
<dd><code>authorizable</code> - The target authorizable.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/sling/commons/json/JSONException.html" title="class in org.apache.sling.commons.json">JSONException</a></code> - If an exception occurs.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &copy; 2010 - 2023 Adobe. All Rights Reserved</small></p>
</footer>
</body>
</html>
