<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.14) on Wed Nov 29 17:28:19 UTC 2023 -->
<title>KeyStoreService (The Adobe Experience Manager SDK 2023.11.14227.20231108T162349Z-231100)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2023-11-29">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="KeyStoreService (The Adobe Experience Manager SDK 2023.11.14227.20231108T162349Z-231100)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":6,"i5":6,"i6":6,"i7":6,"i8":6,"i9":6,"i10":6,"i11":6,"i12":6,"i13":6,"i14":6,"i15":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">com.adobe.granite.keystore</a></div>
<h2 title="Interface KeyStoreService" class="title">Interface KeyStoreService</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<pre><a href="../../../../org/osgi/annotation/versioning/ProviderType.html" title="annotation in org.osgi.annotation.versioning">@ProviderType</a>
public interface <span class="typeNameLabel">KeyStoreService</span></pre>
<div class="block">Provides secure access to <code>KeyManager</code> instances for accessing private keys and the system-wide <code>TrustManager</code> for validating
 signatures and certificates.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#NAME">NAME</a></span></code></th>
<td class="colLast">
<div class="block">Name of the KeyStoreService service</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addKeyStoreKeyEntry(org.apache.sling.api.resource.ResourceResolver,java.lang.String,java.lang.String,java.security.Key,java.security.cert.Certificate%5B%5D)">addKeyStoreKeyEntry</a></span>&#8203;(<a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource">ResourceResolver</a>&nbsp;resolver,
                   java.lang.String&nbsp;userId,
                   java.lang.String&nbsp;alias,
                   java.security.Key&nbsp;key,
                   java.security.cert.Certificate[]&nbsp;chain)</code></th>
<td class="colLast">
<div class="block">Adds a private key entry with a certificate chain to the key store owned by the user with the user id equal to <code>userId</code>.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addKeyStoreKeyPair(org.apache.sling.api.resource.ResourceResolver,java.lang.String,java.security.KeyPair,java.lang.String)">addKeyStoreKeyPair</a></span>&#8203;(<a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource">ResourceResolver</a>&nbsp;resolver,
                  java.lang.String&nbsp;userId,
                  java.security.KeyPair&nbsp;keyPair,
                  java.lang.String&nbsp;alias)</code></th>
<td class="colLast">
<div class="block">Saves a <code>KeyPair</code> in the <code>KeyStore</code> owned by the user whose user id is <code>userId</code>, under the specified alias.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#changeKeyStorePassword(org.apache.sling.api.resource.ResourceResolver,java.lang.String,char%5B%5D,char%5B%5D)">changeKeyStorePassword</a></span>&#8203;(<a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource">ResourceResolver</a>&nbsp;resolver,
                      java.lang.String&nbsp;userId,
                      char[]&nbsp;currentPassword,
                      char[]&nbsp;newPassword)</code></th>
<td class="colLast">
<div class="block">Changes the password used to protect a user's key store.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#changeTrustStorePassword(org.apache.sling.api.resource.ResourceResolver,char%5B%5D,char%5B%5D)">changeTrustStorePassword</a></span>&#8203;(<a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource">ResourceResolver</a>&nbsp;resolver,
                        char[]&nbsp;currentPassword,
                        char[]&nbsp;newPassword)</code></th>
<td class="colLast">
<div class="block">Changes the password used to protect the global trust store.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>java.security.KeyStore</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#createKeyStore(org.apache.sling.api.resource.ResourceResolver,char%5B%5D)">createKeyStore</a></span>&#8203;(<a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource">ResourceResolver</a>&nbsp;resolver,
              char[]&nbsp;password)</code></th>
<td class="colLast">
<div class="block">
 Creates and returns a raw <code>KeyStore</code> for the user identified by the <code>resolver</code>.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>java.security.KeyStore</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#createKeyStore(org.apache.sling.api.resource.ResourceResolver,java.lang.String,char%5B%5D)">createKeyStore</a></span>&#8203;(<a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource">ResourceResolver</a>&nbsp;resolver,
              java.lang.String&nbsp;userId,
              char[]&nbsp;password)</code></th>
<td class="colLast">
<div class="block">
 Creates and returns a raw <code>KeyStore</code> for the user whose user id is <code>userId</code>.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>java.security.KeyStore</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#createTrustStore(org.apache.sling.api.resource.ResourceResolver,char%5B%5D)">createTrustStore</a></span>&#8203;(<a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource">ResourceResolver</a>&nbsp;resolver,
                char[]&nbsp;password)</code></th>
<td class="colLast">
<div class="block">
 Creates and returns the global trust store.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>javax.net.ssl.KeyManager</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getKeyManager(org.apache.sling.api.resource.ResourceResolver)">getKeyManager</a></span>&#8203;(<a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource">ResourceResolver</a>&nbsp;resolver)</code></th>
<td class="colLast">
<div class="block">Returns the private <code>KeyManager</code> of the user identified by the given <a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource"><code>ResourceResolver</code></a>.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>java.security.KeyStore</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getKeyStore(org.apache.sling.api.resource.ResourceResolver)">getKeyStore</a></span>&#8203;(<a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource">ResourceResolver</a>&nbsp;resolver)</code></th>
<td class="colLast">
<div class="block">
 Returns the raw <code>KeyStore</code> owned by the user identified by the <a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource"><code>ResourceResolver</code></a>.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>java.security.KeyStore</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getKeyStore(org.apache.sling.api.resource.ResourceResolver,java.lang.String)">getKeyStore</a></span>&#8203;(<a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource">ResourceResolver</a>&nbsp;resolver,
           java.lang.String&nbsp;userId)</code></th>
<td class="colLast">
<div class="block">
 Returns the raw <code>KeyStore</code> owned by the user whose user id is <code>userId</code>.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>java.security.KeyStore.Entry</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getKeyStoreEntry(org.apache.sling.api.resource.ResourceResolver,java.lang.String,java.lang.String)">getKeyStoreEntry</a></span>&#8203;(<a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource">ResourceResolver</a>&nbsp;resolver,
                java.lang.String&nbsp;userId,
                java.lang.String&nbsp;alias)</code></th>
<td class="colLast">
<div class="block">Retrieves a protected entry from the key store owned by the user with the user id equal to <code>userId</code> for entries stored using
 the key store's password
 (see <a href="#addKeyStoreKeyEntry(org.apache.sling.api.resource.ResourceResolver,java.lang.String,java.lang.String,java.security.Key,java.security.cert.Certificate%5B%5D)"><code>addKeyStoreKeyEntry(org.apache.sling.api.resource.ResourceResolver,
 String, String, java.security.Key, java.security.cert.Certificate[])</code></a> .</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>java.security.KeyPair</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getKeyStoreKeyPair(org.apache.sling.api.resource.ResourceResolver,java.lang.String,java.lang.String)">getKeyStoreKeyPair</a></span>&#8203;(<a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource">ResourceResolver</a>&nbsp;resolver,
                  java.lang.String&nbsp;userId,
                  java.lang.String&nbsp;alias)</code></th>
<td class="colLast">
<div class="block">Retrieve a <code>KeyPair</code> from the <code>KeyStore</code> owned by the user whose user id is <code>userId</code>, stored under the specified
 alias.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>javax.net.ssl.TrustManager</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getTrustManager(org.apache.sling.api.resource.ResourceResolver)">getTrustManager</a></span>&#8203;(<a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource">ResourceResolver</a>&nbsp;resolver)</code></th>
<td class="colLast">
<div class="block">Returns the system wide <code>TrustManager</code>.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>java.security.KeyStore</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getTrustStore(org.apache.sling.api.resource.ResourceResolver)">getTrustStore</a></span>&#8203;(<a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource">ResourceResolver</a>&nbsp;resolver)</code></th>
<td class="colLast">
<div class="block">
 Returns the global trust store if it's accessible to the user identified by the <a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource"><code>ResourceResolver</code></a>.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#keyStoreExists(org.apache.sling.api.resource.ResourceResolver,java.lang.String)">keyStoreExists</a></span>&#8203;(<a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource">ResourceResolver</a>&nbsp;resolver,
              java.lang.String&nbsp;userId)</code></th>
<td class="colLast">
<div class="block">Checks if a key store was created for the user whose user id is <code>userId</code>.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#trustStoreExists(org.apache.sling.api.resource.ResourceResolver)">trustStoreExists</a></span>&#8203;(<a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource">ResourceResolver</a>&nbsp;resolver)</code></th>
<td class="colLast">
<div class="block">Checks if the global trust store was created.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="NAME">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>NAME</h4>
<pre>static final&nbsp;java.lang.String NAME</pre>
<div class="block">Name of the KeyStoreService service</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#com.adobe.granite.keystore.KeyStoreService.NAME">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="getKeyManager(org.apache.sling.api.resource.ResourceResolver)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getKeyManager</h4>
<pre class="methodSignature">javax.net.ssl.KeyManager&nbsp;getKeyManager&#8203;(<a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource">ResourceResolver</a>&nbsp;resolver)
                                throws <a href="../../../../org/apache/sling/api/SlingIOException.html" title="class in org.apache.sling.api">SlingIOException</a>,
                                       java.lang.SecurityException,
                                       java.lang.IllegalArgumentException,
                                       <a href="KeyStoreNotInitialisedException.html" title="class in com.adobe.granite.keystore">KeyStoreNotInitialisedException</a></pre>
<div class="block">Returns the private <code>KeyManager</code> of the user identified by the given <a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource"><code>ResourceResolver</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resolver</code> - a resolver identifying the user whose <code>KeyStore</code> is used for building the <code>KeyManager</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the private key manager of the user identified by the given resolver; this method does not return <code>null</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../org/apache/sling/api/SlingIOException.html" title="class in org.apache.sling.api">SlingIOException</a></code> - if an error occurs instantiating the <code>KeyManager</code> with data from persistence</dd>
<dd><code>java.lang.SecurityException</code> - if the underlying key store cannot be instantiated due to security errors</dd>
<dd><code>java.lang.IllegalArgumentException</code> - if any of the parameters are null</dd>
<dd><code><a href="KeyStoreNotInitialisedException.html" title="class in com.adobe.granite.keystore">KeyStoreNotInitialisedException</a></code> - if the key store has not been created
 (see <a href="#createKeyStore(org.apache.sling.api.resource.ResourceResolver,char%5B%5D)"><code>createKeyStore(org.apache.sling.api.resource.ResourceResolver, char[])</code></a>)</dd>
</dl>
</li>
</ul>
<a id="getKeyStore(org.apache.sling.api.resource.ResourceResolver)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getKeyStore</h4>
<pre class="methodSignature">java.security.KeyStore&nbsp;getKeyStore&#8203;(<a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource">ResourceResolver</a>&nbsp;resolver)
                            throws <a href="../../../../org/apache/sling/api/SlingIOException.html" title="class in org.apache.sling.api">SlingIOException</a>,
                                   java.lang.SecurityException,
                                   java.lang.IllegalArgumentException,
                                   <a href="KeyStoreNotInitialisedException.html" title="class in com.adobe.granite.keystore">KeyStoreNotInitialisedException</a></pre>
<div class="block"><p>
 Returns the raw <code>KeyStore</code> owned by the user identified by the <a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource"><code>ResourceResolver</code></a>. This key store allows managing the
 keys in the store.
 </p>
 <p>
 The <code>load</code> and <code>store</code> methods of the returned <code>KeyStore</code> instance always throw a <code>KeyStoreException</code> because the actual storage is managed by the <a href="KeyStoreService.html" title="interface in com.adobe.granite.keystore"><code>KeyStoreService</code></a> service behind the scenes.
 </p>
 <p>
 The <a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource"><code>ResourceResolver</code></a> has to be open as long as write operations are performed with the <code>KeyStore</code>.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resolver</code> - a resolver identifying the user for which the <code>KeyStore</code> will be obtained</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the key store owned by the user identified by the given resolver; this method does not return <code>null</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../org/apache/sling/api/SlingIOException.html" title="class in org.apache.sling.api">SlingIOException</a></code> - if an error occurs loading the <code>KeyStore</code> data from persistence</dd>
<dd><code>java.lang.SecurityException</code> - if the key store cannot be instantiated due to security errors</dd>
<dd><code>java.lang.IllegalArgumentException</code> - if any of the parameters are null</dd>
<dd><code><a href="KeyStoreNotInitialisedException.html" title="class in com.adobe.granite.keystore">KeyStoreNotInitialisedException</a></code> - if the key store has not been created
 (see <a href="#createKeyStore(org.apache.sling.api.resource.ResourceResolver,char%5B%5D)"><code>createKeyStore(org.apache.sling.api.resource.ResourceResolver, char[])</code></a>)</dd>
</dl>
</li>
</ul>
<a id="getKeyStore(org.apache.sling.api.resource.ResourceResolver,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getKeyStore</h4>
<pre class="methodSignature">java.security.KeyStore&nbsp;getKeyStore&#8203;(<a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource">ResourceResolver</a>&nbsp;resolver,
                                   java.lang.String&nbsp;userId)
                            throws <a href="../../../../org/apache/sling/api/SlingIOException.html" title="class in org.apache.sling.api">SlingIOException</a>,
                                   java.lang.SecurityException,
                                   java.lang.IllegalArgumentException,
                                   <a href="KeyStoreNotInitialisedException.html" title="class in com.adobe.granite.keystore">KeyStoreNotInitialisedException</a></pre>
<div class="block"><p>
 Returns the raw <code>KeyStore</code> owned by the user whose user id is <code>userId</code>. The given resource resolver must have the proper
 access rights in order to access the given user's key store. This key store allows managing the keys in the store.
 </p>
 <p>
 The <code>load</code> and <code>store</code> methods of the returned <code>KeyStore</code> instance always throw a <code>KeyStoreException</code> because the actual storage is managed by the <a href="KeyStoreService.html" title="interface in com.adobe.granite.keystore"><code>KeyStoreService</code></a> service behind the scenes.
 </p>
 <p>
 The <a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource"><code>ResourceResolver</code></a> has to be open as long as write operations are performed with the <code>KeyStore</code>.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resolver</code> - the resource resolver to use for accessing the key store owned by the user given as parameter</dd>
<dd><code>userId</code> - the ID of the user who owns the returned key store</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the key store owned by the user identified by the given user ID. <code>null</code> is never returned.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../org/apache/sling/api/SlingIOException.html" title="class in org.apache.sling.api">SlingIOException</a></code> - if an error occurs loading the <code>KeyStore</code> data from persistence</dd>
<dd><code>java.lang.SecurityException</code> - if the key store cannot be instantiated due to security errors</dd>
<dd><code>java.lang.IllegalArgumentException</code> - if any of the parameters are null</dd>
<dd><code><a href="KeyStoreNotInitialisedException.html" title="class in com.adobe.granite.keystore">KeyStoreNotInitialisedException</a></code> - if the key store has not been created
 (see <a href="#createKeyStore(org.apache.sling.api.resource.ResourceResolver,char%5B%5D)"><code>createKeyStore(org.apache.sling.api.resource.ResourceResolver, char[])</code></a>)</dd>
</dl>
</li>
</ul>
<a id="getTrustManager(org.apache.sling.api.resource.ResourceResolver)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTrustManager</h4>
<pre class="methodSignature">javax.net.ssl.TrustManager&nbsp;getTrustManager&#8203;(<a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource">ResourceResolver</a>&nbsp;resolver)
                                    throws <a href="../../../../org/apache/sling/api/SlingIOException.html" title="class in org.apache.sling.api">SlingIOException</a>,
                                           java.lang.SecurityException,
                                           <a href="KeyStoreNotInitialisedException.html" title="class in com.adobe.granite.keystore">KeyStoreNotInitialisedException</a></pre>
<div class="block">Returns the system wide <code>TrustManager</code>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resolver</code> - a resolver identifying a user allowed to access the <code>TrustManager</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the global trust manager; this method does not return <code>null</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../org/apache/sling/api/SlingIOException.html" title="class in org.apache.sling.api">SlingIOException</a></code> - if an error occurs instantiating the <code>TrustManager</code> with data from persistence</dd>
<dd><code>java.lang.SecurityException</code> - if the <a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource"><code>ResourceResolver</code></a> is not allowed to access the global trust store</dd>
<dd><code>java.lang.IllegalArgumentException</code> - if the <code>resolver</code> is <code>null</code></dd>
<dd><code><a href="KeyStoreNotInitialisedException.html" title="class in com.adobe.granite.keystore">KeyStoreNotInitialisedException</a></code> - if the trust store has not been created
 (see <a href="#createTrustStore(org.apache.sling.api.resource.ResourceResolver,char%5B%5D)"><code>createTrustStore(org.apache.sling.api.resource.ResourceResolver, char[])</code></a>)</dd>
</dl>
</li>
</ul>
<a id="getTrustStore(org.apache.sling.api.resource.ResourceResolver)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTrustStore</h4>
<pre class="methodSignature">java.security.KeyStore&nbsp;getTrustStore&#8203;(<a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource">ResourceResolver</a>&nbsp;resolver)
                              throws <a href="../../../../org/apache/sling/api/SlingIOException.html" title="class in org.apache.sling.api">SlingIOException</a>,
                                     java.lang.SecurityException,
                                     java.lang.IllegalArgumentException,
                                     <a href="KeyStoreNotInitialisedException.html" title="class in com.adobe.granite.keystore">KeyStoreNotInitialisedException</a></pre>
<div class="block"><p>
 Returns the global trust store if it's accessible to the user identified by the <a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource"><code>ResourceResolver</code></a>. This key store allows
 managing the keys in the store.
 </p>
 <p>
 The <code>load</code> and <code>store</code> methods of the returned <code>KeyStore</code> instance always throw a <code>KeyStoreException</code> because the actual storage is managed by the <a href="KeyStoreService.html" title="interface in com.adobe.granite.keystore"><code>KeyStoreService</code></a> service behind the scenes.
 </p>
 <p>
 The <a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource"><code>ResourceResolver</code></a> has to be open as long as write operations are performed with the <code>KeyStore</code>.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resolver</code> - a resolver identifying a user allowed to access the global trust store</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../org/apache/sling/api/SlingIOException.html" title="class in org.apache.sling.api">SlingIOException</a></code> - if an error occurs loading the <code>KeyStore</code> data from persistence</dd>
<dd><code>java.lang.SecurityException</code> - if the <a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource"><code>ResourceResolver</code></a> is not allowed access to the global trust store or if the
                                         store cannot be instantiated due to security errors</dd>
<dd><code>java.lang.IllegalArgumentException</code> - if any of the parameters are null</dd>
<dd><code><a href="KeyStoreNotInitialisedException.html" title="class in com.adobe.granite.keystore">KeyStoreNotInitialisedException</a></code> - if the trust store has not been created
 (see <a href="#createTrustStore(org.apache.sling.api.resource.ResourceResolver,char%5B%5D)"><code>createTrustStore(org.apache.sling.api.resource.ResourceResolver, char[])</code></a>)</dd>
</dl>
</li>
</ul>
<a id="changeKeyStorePassword(org.apache.sling.api.resource.ResourceResolver,java.lang.String,char[],char[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>changeKeyStorePassword</h4>
<pre class="methodSignature">void&nbsp;changeKeyStorePassword&#8203;(<a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource">ResourceResolver</a>&nbsp;resolver,
                            java.lang.String&nbsp;userId,
                            char[]&nbsp;currentPassword,
                            char[]&nbsp;newPassword)
                     throws <a href="../../../../org/apache/sling/api/SlingIOException.html" title="class in org.apache.sling.api">SlingIOException</a>,
                            java.lang.SecurityException,
                            <a href="KeyStoreNotInitialisedException.html" title="class in com.adobe.granite.keystore">KeyStoreNotInitialisedException</a></pre>
<div class="block">Changes the password used to protect a user's key store. For security reasons the password char arrays parameters should be cleaned
 after successfully calling this method (see <code>Arrays.fill(char[], char)</code>).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resolver</code> - a resource resolver to use for accessing the key store owned by the user given as parameter</dd>
<dd><code>userId</code> - the ID of the user who owns the key store</dd>
<dd><code>currentPassword</code> - the key store's current password; please make sure to clean this array after calling this method for security
                        purposes</dd>
<dd><code>newPassword</code> - the key store's new password; please make sure to clean this array after calling this method for security
                        purposes</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../org/apache/sling/api/SlingIOException.html" title="class in org.apache.sling.api">SlingIOException</a></code> - if an error occurs loading the <code>KeyStore</code> data from persistence</dd>
<dd><code>java.lang.SecurityException</code> - if the <code>currentPassword</code> doesn't match the key store's password or if the key store
                                         cannot be instantiated due to security errors</dd>
<dd><code><a href="KeyStoreNotInitialisedException.html" title="class in com.adobe.granite.keystore">KeyStoreNotInitialisedException</a></code> - if the key store has not been created
 (see <a href="#createKeyStore(org.apache.sling.api.resource.ResourceResolver,char%5B%5D)"><code>createKeyStore(org.apache.sling.api.resource.ResourceResolver, char[])</code></a>)</dd>
</dl>
</li>
</ul>
<a id="changeTrustStorePassword(org.apache.sling.api.resource.ResourceResolver,char[],char[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>changeTrustStorePassword</h4>
<pre class="methodSignature">void&nbsp;changeTrustStorePassword&#8203;(<a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource">ResourceResolver</a>&nbsp;resolver,
                              char[]&nbsp;currentPassword,
                              char[]&nbsp;newPassword)
                       throws <a href="../../../../org/apache/sling/api/SlingIOException.html" title="class in org.apache.sling.api">SlingIOException</a>,
                              java.lang.SecurityException,
                              <a href="KeyStoreNotInitialisedException.html" title="class in com.adobe.granite.keystore">KeyStoreNotInitialisedException</a></pre>
<div class="block">Changes the password used to protect the global trust store. For security reasons the password char arrays parameters should be
 cleaned after successfully calling this method (see <code>Arrays.fill(char[], char)</code>).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resolver</code> - a resource resolver with write access to the trust store</dd>
<dd><code>currentPassword</code> - the trust store's current password; please make sure to clean this array after calling this method for
                        security purposes</dd>
<dd><code>newPassword</code> - the trust store's new password; please make sure to clean this array after calling this method for security
                        purposes</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../org/apache/sling/api/SlingIOException.html" title="class in org.apache.sling.api">SlingIOException</a></code> - if an error occurs loading the trust store data from persistence</dd>
<dd><code>java.lang.SecurityException</code> - if the <code>currentPassword</code> doesn't match the key store's password or if the passed
                                         resolver doesn't have enough rights to modify the trust store</dd>
<dd><code><a href="KeyStoreNotInitialisedException.html" title="class in com.adobe.granite.keystore">KeyStoreNotInitialisedException</a></code> - if the trust store has not been created
 (see <a href="#createTrustStore(org.apache.sling.api.resource.ResourceResolver,char%5B%5D)"><code>createTrustStore(org.apache.sling.api.resource.ResourceResolver, char[])</code></a>)</dd>
</dl>
</li>
</ul>
<a id="addKeyStoreKeyPair(org.apache.sling.api.resource.ResourceResolver,java.lang.String,java.security.KeyPair,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addKeyStoreKeyPair</h4>
<pre class="methodSignature">void&nbsp;addKeyStoreKeyPair&#8203;(<a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource">ResourceResolver</a>&nbsp;resolver,
                        java.lang.String&nbsp;userId,
                        java.security.KeyPair&nbsp;keyPair,
                        java.lang.String&nbsp;alias)
                 throws <a href="../../../../org/apache/sling/api/SlingIOException.html" title="class in org.apache.sling.api">SlingIOException</a>,
                        java.lang.SecurityException,
                        <a href="KeyStoreNotInitialisedException.html" title="class in com.adobe.granite.keystore">KeyStoreNotInitialisedException</a></pre>
<div class="block">Saves a <code>KeyPair</code> in the <code>KeyStore</code> owned by the user whose user id is <code>userId</code>, under the specified alias. The
 given resource resolver must have the proper access rights in order to access the given user's key store. If an entry already exists
 for the specified alias, it is overridden.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resolver</code> - the resource resolver to use for accessing the key store owned by the user given as parameter</dd>
<dd><code>userId</code> - the id of the user who owns the key store</dd>
<dd><code>keyPair</code> - the <code>KeyPair</code> to save</dd>
<dd><code>alias</code> - save the <code>KeyPair</code> under this alias</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../org/apache/sling/api/SlingIOException.html" title="class in org.apache.sling.api">SlingIOException</a></code> - if an error occurs loading the <code>KeyStore</code> data from persistence</dd>
<dd><code>java.lang.SecurityException</code> - if the key store cannot be instantiated due to security errors</dd>
<dd><code>java.lang.IllegalArgumentException</code> - if any of the parameters are null</dd>
<dd><code><a href="KeyStoreNotInitialisedException.html" title="class in com.adobe.granite.keystore">KeyStoreNotInitialisedException</a></code> - if the key store has not been created
 (see <a href="#createKeyStore(org.apache.sling.api.resource.ResourceResolver,char%5B%5D)"><code>createKeyStore(org.apache.sling.api.resource.ResourceResolver, char[])</code></a>)</dd>
</dl>
</li>
</ul>
<a id="getKeyStoreKeyPair(org.apache.sling.api.resource.ResourceResolver,java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getKeyStoreKeyPair</h4>
<pre class="methodSignature">java.security.KeyPair&nbsp;getKeyStoreKeyPair&#8203;(<a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource">ResourceResolver</a>&nbsp;resolver,
                                         java.lang.String&nbsp;userId,
                                         java.lang.String&nbsp;alias)
                                  throws <a href="../../../../org/apache/sling/api/SlingIOException.html" title="class in org.apache.sling.api">SlingIOException</a>,
                                         java.lang.SecurityException,
                                         <a href="KeyStoreNotInitialisedException.html" title="class in com.adobe.granite.keystore">KeyStoreNotInitialisedException</a></pre>
<div class="block">Retrieve a <code>KeyPair</code> from the <code>KeyStore</code> owned by the user whose user id is <code>userId</code>, stored under the specified
 alias. The given resource resolver must have the proper access rights in order to access the given user's key store.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resolver</code> - the resource resolver to use for accessing the key store owned by the user given as parameter</dd>
<dd><code>userId</code> - the id of the user who owns the key store</dd>
<dd><code>alias</code> - retrieve the <code>KeyPair</code> stored under this alias</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the <code>KeyPair</code> or <code>null</code> if no <code>KeyPair</code> was stored with the given alias.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../org/apache/sling/api/SlingIOException.html" title="class in org.apache.sling.api">SlingIOException</a></code> - if an error occurs loading the <code>KeyStore</code> data from persistence</dd>
<dd><code>java.lang.SecurityException</code> - if the key store cannot be instantiated due to security errors</dd>
<dd><code>java.lang.IllegalArgumentException</code> - if any of the parameters are null</dd>
<dd><code><a href="KeyStoreNotInitialisedException.html" title="class in com.adobe.granite.keystore">KeyStoreNotInitialisedException</a></code> - if the key store has not been created
 (see <a href="#createKeyStore(org.apache.sling.api.resource.ResourceResolver,char%5B%5D)"><code>createKeyStore(org.apache.sling.api.resource.ResourceResolver, char[])</code></a>)</dd>
</dl>
</li>
</ul>
<a id="createKeyStore(org.apache.sling.api.resource.ResourceResolver,java.lang.String,char[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createKeyStore</h4>
<pre class="methodSignature">java.security.KeyStore&nbsp;createKeyStore&#8203;(<a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource">ResourceResolver</a>&nbsp;resolver,
                                      java.lang.String&nbsp;userId,
                                      char[]&nbsp;password)
                               throws <a href="../../../../org/apache/sling/api/SlingIOException.html" title="class in org.apache.sling.api">SlingIOException</a>,
                                      java.lang.SecurityException,
                                      java.lang.IllegalArgumentException</pre>
<div class="block"><p>
 Creates and returns a raw <code>KeyStore</code> for the user whose user id is <code>userId</code>. For security reasons the password char
 array parameter should be cleaned after successfully calling this method (see <code>Arrays.fill(char[], char)</code>).
 </p>
 <p>
 The <code>load</code> and <code>store</code> methods of the returned <code>KeyStore</code> instance always throw a <code>KeyStoreException</code> because the actual storage is managed by the <a href="KeyStoreService.html" title="interface in com.adobe.granite.keystore"><code>KeyStoreService</code></a> service behind the scenes.
 </p>
 <p>
 The <a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource"><code>ResourceResolver</code></a> has to be open as long as write operations are performed with the <code>KeyStore</code>. Also, it must have
 the proper access rights in order to create the given user's key store.
 </p>
 Calling this method several times with the same parameters has no effect on an already created key store. However, calling this
 method with a different password will throw a <a href="../../../../org/apache/sling/api/SlingIOException.html" title="class in org.apache.sling.api"><code>SlingIOException</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resolver</code> - a resolver that will be used to create the <code>KeyStore</code></dd>
<dd><code>userId</code> - the user for which the <code>KeyStore</code> will be created</dd>
<dd><code>password</code> - the password used for protecting the returned <code>KeyStore</code>; please make sure to clean this array
                 after calling this method for security purposes</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the key store owned by the user whose user id is <code>userId</code>; this method does not return <code>null</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../org/apache/sling/api/SlingIOException.html" title="class in org.apache.sling.api">SlingIOException</a></code> - if an error occurs storing the <code>KeyStore</code> data to the persistence layer</dd>
<dd><code>java.lang.SecurityException</code> - if the key store cannot be instantiated due to security errors</dd>
<dd><code>java.lang.IllegalArgumentException</code> - if any of the parameters are null</dd>
</dl>
</li>
</ul>
<a id="createKeyStore(org.apache.sling.api.resource.ResourceResolver,char[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createKeyStore</h4>
<pre class="methodSignature">java.security.KeyStore&nbsp;createKeyStore&#8203;(<a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource">ResourceResolver</a>&nbsp;resolver,
                                      char[]&nbsp;password)
                               throws <a href="../../../../org/apache/sling/api/SlingIOException.html" title="class in org.apache.sling.api">SlingIOException</a>,
                                      java.lang.SecurityException,
                                      java.lang.IllegalArgumentException</pre>
<div class="block"><p>
 Creates and returns a raw <code>KeyStore</code> for the user identified by the <code>resolver</code>. For security reasons the password char
 array parameter should be cleaned after successfully calling this method (see <code>Arrays.fill(char[], char)</code>).
 </p>
 <p>
 The <code>load</code> and <code>store</code> methods of the returned <code>KeyStore</code> instance always throw a <code>KeyStoreException</code> because the actual storage is managed by the <a href="KeyStoreService.html" title="interface in com.adobe.granite.keystore"><code>KeyStoreService</code></a> service behind the scenes.
 </p>
 <p>
 The <a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource"><code>ResourceResolver</code></a> has to be open as long as write operations are performed with the <code>KeyStore</code>.
 </p>
 <p>
 Calling this method several times with the same parameters has no effect on an already created key store. However, calling this
 method with a different password will throw a <a href="../../../../org/apache/sling/api/SlingIOException.html" title="class in org.apache.sling.api"><code>SlingIOException</code></a>.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resolver</code> - a resolver identifying the user for which the <code>KeyStore</code> will be created</dd>
<dd><code>password</code> - the password used for protecting the returned <code>KeyStore</code>; please make sure to clean this array
                 after calling this method for security purposes</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>key store owned by the user identified by the given resolver; this method does not return <code>null</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../org/apache/sling/api/SlingIOException.html" title="class in org.apache.sling.api">SlingIOException</a></code> - if an error occurs storing the <code>KeyStore</code> data to the persistence layer</dd>
<dd><code>java.lang.SecurityException</code> - if the key store cannot be instantiated due to security errors</dd>
<dd><code>java.lang.IllegalArgumentException</code> - if any of the parameters are null</dd>
</dl>
</li>
</ul>
<a id="createTrustStore(org.apache.sling.api.resource.ResourceResolver,char[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createTrustStore</h4>
<pre class="methodSignature">java.security.KeyStore&nbsp;createTrustStore&#8203;(<a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource">ResourceResolver</a>&nbsp;resolver,
                                        char[]&nbsp;password)
                                 throws <a href="../../../../org/apache/sling/api/SlingIOException.html" title="class in org.apache.sling.api">SlingIOException</a>,
                                        java.lang.SecurityException,
                                        java.lang.IllegalArgumentException</pre>
<div class="block"><p>
 Creates and returns the global trust store. The <code>resolver</code> provided should have enough access rights in order to successfully
 create the trust store. For security reasons the password char array parameter should be cleaned after successfully calling this
 method (see <code>Arrays.fill(char[], char)</code>).
 </p>
 <p>
 The <code>load</code> and <code>store</code> methods of the returned <code>KeyStore</code> instance always throw a <code>KeyStoreException</code> because the actual storage is managed by the <a href="KeyStoreService.html" title="interface in com.adobe.granite.keystore"><code>KeyStoreService</code></a> service behind the scenes.
 </p>
 <p>
 The <a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource"><code>ResourceResolver</code></a> has to be open as long as write operations are performed with the <code>KeyStore</code>.
 </p>
 <p>
 Calling this method several times with the same parameters has no effect on an already created trust store. However, calling this
 method with a different password will throw a <a href="../../../../org/apache/sling/api/SlingIOException.html" title="class in org.apache.sling.api"><code>SlingIOException</code></a>.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resolver</code> - a resolver identifying a user allowed to create the global trust store</dd>
<dd><code>password</code> - the password used for protecting the returned <code>KeyStore</code>; please make sure to clean this array
                 after calling this method for security purposes</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the global trust store; this method does not return <code>null</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../org/apache/sling/api/SlingIOException.html" title="class in org.apache.sling.api">SlingIOException</a></code> - if an error occurs storing the <code>KeyStore</code> data to the persistence layer</dd>
<dd><code>java.lang.SecurityException</code> - if the <a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource"><code>ResourceResolver</code></a> is not allowed access to the global trust store location or if the
                                  store cannot be instantiated due to security errors</dd>
<dd><code>java.lang.IllegalArgumentException</code> - if any of the parameters are null</dd>
</dl>
</li>
</ul>
<a id="keyStoreExists(org.apache.sling.api.resource.ResourceResolver,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>keyStoreExists</h4>
<pre class="methodSignature">boolean&nbsp;keyStoreExists&#8203;(<a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource">ResourceResolver</a>&nbsp;resolver,
                       java.lang.String&nbsp;userId)</pre>
<div class="block">Checks if a key store was created for the user whose user id is <code>userId</code>. The given resource resolver must have the proper
 access rights in order to check the existence of the given user's key store.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resolver</code> - the resource resolver to use for checking the existence of a key store for the user whose user id is <code>userId</code></dd>
<dd><code>userId</code> - the id of the user who owns the checked key store</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if the key store exists, <code>false</code> otherwise</dd>
</dl>
</li>
</ul>
<a id="trustStoreExists(org.apache.sling.api.resource.ResourceResolver)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>trustStoreExists</h4>
<pre class="methodSignature">boolean&nbsp;trustStoreExists&#8203;(<a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource">ResourceResolver</a>&nbsp;resolver)</pre>
<div class="block">Checks if the global trust store was created.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resolver</code> - the resolver used for checking the trust store's existence</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if the trust store exists, <code>false</code> otherwise</dd>
</dl>
</li>
</ul>
<a id="addKeyStoreKeyEntry(org.apache.sling.api.resource.ResourceResolver,java.lang.String,java.lang.String,java.security.Key,java.security.cert.Certificate[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addKeyStoreKeyEntry</h4>
<pre class="methodSignature">void&nbsp;addKeyStoreKeyEntry&#8203;(<a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource">ResourceResolver</a>&nbsp;resolver,
                         java.lang.String&nbsp;userId,
                         java.lang.String&nbsp;alias,
                         java.security.Key&nbsp;key,
                         java.security.cert.Certificate[]&nbsp;chain)
                  throws java.lang.SecurityException,
                         <a href="KeyStoreNotInitialisedException.html" title="class in com.adobe.granite.keystore">KeyStoreNotInitialisedException</a></pre>
<div class="block">Adds a private key entry with a certificate chain to the key store owned by the user with the user id equal to <code>userId</code>. This
 method makes sure the entries are protected with the store's password for ease of use instead of requiring a password for each key.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resolver</code> - a resource resolver to use for accessing the key store owned by the user given as parameter</dd>
<dd><code>userId</code> - the id of the user who owns the key store</dd>
<dd><code>alias</code> - the alias under which the key entry will be saved in the key store</dd>
<dd><code>key</code> - the private key that will be added to the key store</dd>
<dd><code>chain</code> - the private key's certificate chain</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.SecurityException</code> - if the underlying key store cannot be instantiated due to security errors</dd>
<dd><code><a href="KeyStoreNotInitialisedException.html" title="class in com.adobe.granite.keystore">KeyStoreNotInitialisedException</a></code> - if the key store has not been created
 (see <a href="#createKeyStore(org.apache.sling.api.resource.ResourceResolver,char%5B%5D)"><code>createKeyStore(org.apache.sling.api.resource.ResourceResolver, char[])</code></a>)</dd>
</dl>
</li>
</ul>
<a id="getKeyStoreEntry(org.apache.sling.api.resource.ResourceResolver,java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getKeyStoreEntry</h4>
<pre class="methodSignature">java.security.KeyStore.Entry&nbsp;getKeyStoreEntry&#8203;(<a href="../../../../org/apache/sling/api/resource/ResourceResolver.html" title="interface in org.apache.sling.api.resource">ResourceResolver</a>&nbsp;resolver,
                                              java.lang.String&nbsp;userId,
                                              java.lang.String&nbsp;alias)
                                       throws java.lang.SecurityException,
                                              <a href="KeyStoreNotInitialisedException.html" title="class in com.adobe.granite.keystore">KeyStoreNotInitialisedException</a></pre>
<div class="block">Retrieves a protected entry from the key store owned by the user with the user id equal to <code>userId</code> for entries stored using
 the key store's password
 (see <a href="#addKeyStoreKeyEntry(org.apache.sling.api.resource.ResourceResolver,java.lang.String,java.lang.String,java.security.Key,java.security.cert.Certificate%5B%5D)"><code>addKeyStoreKeyEntry(org.apache.sling.api.resource.ResourceResolver,
 String, String, java.security.Key, java.security.cert.Certificate[])</code></a> .</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resolver</code> - a resource resolver to use for accessing the key store owned by the user given as parameter</dd>
<dd><code>userId</code> - the id of the user who owns the key store</dd>
<dd><code>alias</code> - the alias under which the key entry will be saved in the key store</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the entry stored in the key store under <code>alias</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.SecurityException</code> - if the underlying key store cannot be instantiated due to security errors</dd>
<dd><code><a href="KeyStoreNotInitialisedException.html" title="class in com.adobe.granite.keystore">KeyStoreNotInitialisedException</a></code> - if the key store has not been created
 (see <a href="#createKeyStore(org.apache.sling.api.resource.ResourceResolver,char%5B%5D)"><code>createKeyStore(org.apache.sling.api.resource.ResourceResolver, char[])</code></a>)</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &copy; 2010 - 2023 Adobe. All Rights Reserved</small></p>
</footer>
</body>
</html>
