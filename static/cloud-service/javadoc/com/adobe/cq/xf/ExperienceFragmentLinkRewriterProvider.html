<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.13) on Fri Dec 17 07:25:51 UTC 2021 -->
<title>ExperienceFragmentLinkRewriterProvider (The Adobe Experience Manager SDK 2021.11.6058.20211123T163652Z-211100)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2021-12-17">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ExperienceFragmentLinkRewriterProvider (The Adobe Experience Manager SDK 2021.11.6058.20211123T163652Z-211100)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":6,"i1":6,"i2":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">com.adobe.cq.xf</a></div>
<h2 title="Interface ExperienceFragmentLinkRewriterProvider" class="title">Interface ExperienceFragmentLinkRewriterProvider</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<pre><a href="../../../../org/osgi/annotation/versioning/ConsumerType.html" title="annotation in org.osgi.annotation.versioning">@ConsumerType</a>
public interface <span class="typeNameLabel">ExperienceFragmentLinkRewriterProvider</span></pre>
<div class="block"><h1>Experience Fragment Link Rewriter Provider</h1>
  <p>
  This is an extension point offered to clients in order to allow link rewriting for the Export to Target feature.
  <p>
  Services implementing this interface will be called during the Export To Target offer content generation for HTML.
  <p>
  When an Export to Target call is made in the AEM Experience Fragment console, the body of the HTML content is
  generated through a request to an Experience Fragment with the selector <code>atoffer.html</code>. However, before this
  HTML content can be sent to Target, we would have to rewrite the links present throughout the content
  in such a way so that they point to resources on the publish instance, where they can be accessed publicly.
  We already rewrite these links using Externalizer, but if there is the need for more customization,
  a service can implement this interface in order to take control of the link rewriting process.
  <p>
  For example, a call is made to <code>http[s]://aem_instance[:port]/path/to/experience/fragment.nocloudconfigs.atoffer.html</code>.
  During the Sling Rewriter phase, Sling will parse each node of the HTML output (called tag).
  At this time, if there is any service implementing this interface, the "shouldRewrite" method is called in order
  to establish if the current Experience Fragment should have links rewritten. If the method returns true, then
  our system doesn't make any more modifications to the link, but lets the service handle the rewriting through the
  <code>rewriteLink</code> method.
  <p>
  Currently, only one <code>ExperienceFragmentLinkRewriterProvider</code> for an Experience Fragment is permitted.
  If there are multiple providers for an Experience Fragment, only the one with the highest priority is chosen.
  Priority is determined by the providers <code>getPriority()</code> method. If there are several
  <code>ExperienceFragmentLinkRewriterProvider</code> with the same priority, then only one will be chosen.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getPriority()">getPriority</a></span>()</code></th>
<td class="colLast">
<div class="block">If there are several providers for which the <code>shouldRewrite</code> returns true for a particular
  ExperienceFragmentVariation, then the one with the highest priority is used.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#rewriteLink(java.lang.String,java.lang.String,java.lang.String)">rewriteLink</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;link,
           <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;tag,
           <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;attribute)</code></th>
<td class="colLast">
<div class="block">This method receives a String which represents the location of the resource on the author instance.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#shouldRewrite(com.adobe.cq.xf.ExperienceFragmentVariation)">shouldRewrite</a></span>&#8203;(<a href="ExperienceFragmentVariation.html" title="interface in com.adobe.cq.xf">ExperienceFragmentVariation</a>&nbsp;experienceFragment)</code></th>
<td class="colLast">
<div class="block">This method receives the Resource which represents the Experience Fragment that is currently being processed
  by the Sling Rewriter framework.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="rewriteLink(java.lang.String,java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rewriteLink</h4>
<pre class="methodSignature"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;rewriteLink&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;link,
                   <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;tag,
                   <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;attribute)</pre>
<div class="block">This method receives a String which represents the location of the resource on the author instance. These are
  the values of attributes present on the HTML tags that are also passed as input.
  <p>
  The type of attributes that will be processed are the following:
  <ul>
   <li><code>src</code> attributes</li>
   <li><code>href</code> attributes</li>
   <li><code>action</code> attributes</li>
   <li>attributes that contain <code>-href</code> in their name</li>
   <li>attributes that contain <code>-src</code> in their name</li>
  </ul>
  <p>
  The <code>link</code> this method receives is usually an URI in the form of <code>/path/to/resource</code>. To note that in
  some cases, the URI might differ, due to the effects of the <code>html</code> selector on a component inside
  the Experience Fragments. In other words, if there are custom components in your Experience Fragment, then
  the link received in this method might be different, depending on its implementation. Our out-of-the-box components
  are rendered as a path to the resource, as mentioned previously.
  <p>
  Besides the link, the method also receives the local attribute name, so that implementations can easily distinguish
  what attributes from the above set is currently being processed (e.g. there can be <code>data-src</code> attributes
  that an implementation might not want to change).
  The last parameter is the tag name that is currently being processed, that can be helpful in the case some
  resources should not be changed, such as <code>link</code> attributes when the purpose is embedding inside another page.
  <p>
  The method should return a valid link to the resource, that can be accessed publicly. This link will be
  then placed in the corresponding attribute and tag.
  An example of an output for a regular case is the mapped public facing URL to a resource:
  <code>http[s]://[public-hostname]/path/to/resource</code>.
  How the output should look like is an implementation detail left to the service that implements this interface.
  The regular use case is that the Target Offer is embedded inside other HTML pages as a separate <code>div</code> and
  then delivered to clients or used in other places, and as such all the links inside this Target Offer should be
  able to be accessed by anyone.
  <p>
  If the method returns null, then no rewrite will be done and the link will remain the same.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>link</code> - - the value of the attribute, which is usually an internal URI (e.g. /path/to/resource)</dd>
<dd><code>tag</code> - - the name of the node that is currently modified</dd>
<dd><code>attribute</code> - - the name of the attribute that is currently modified</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>- a string representing the rewritten link that is public facing (e.g. <code>http[s]://[public_instance]/path/to/resource</code>), or null</dd>
</dl>
</li>
</ul>
<a id="shouldRewrite(com.adobe.cq.xf.ExperienceFragmentVariation)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shouldRewrite</h4>
<pre class="methodSignature">boolean&nbsp;shouldRewrite&#8203;(<a href="ExperienceFragmentVariation.html" title="interface in com.adobe.cq.xf">ExperienceFragmentVariation</a>&nbsp;experienceFragment)</pre>
<div class="block">This method receives the Resource which represents the Experience Fragment that is currently being processed
  by the Sling Rewriter framework.
  <p>
  Should return true if the service implementing this interface should be used on rewriting links
  for the experience fragment variation given.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>experienceFragment</code> - - the experience fragment that is currently processed</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>- true in case this service should rewrite links, false otherwise</dd>
</dl>
</li>
</ul>
<a id="getPriority()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getPriority</h4>
<pre class="methodSignature">int&nbsp;getPriority()</pre>
<div class="block">If there are several providers for which the <code>shouldRewrite</code> returns true for a particular
  ExperienceFragmentVariation, then the one with the highest priority is used.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>- an Integer representing the priority of this Provider over others for which <code>shouldRewrite(ExperienceFragmentVariation)</code> returns true.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &copy; 2010 - 2021 Adobe. All Rights Reserved</small></p>
</footer>
</body>
</html>
