!function(a,b){"use strict";var c="ruf7eed";a.Coral&&a.Coral.options&&a.Coral.options.typeKitId&&(c=a.Coral.options.typeKitId);var d={kitId:c,scriptTimeout:3e3};if(!a.Typekit){var e=document.getElementsByTagName("html")[0];e.className+=" wf-loading";var f=setTimeout(function(){e.className=e.className.replace(/(\s|^)wf-loading(\s|$)/g," "),e.className+=" wf-inactive"},d.scriptTimeout),g=document.createElement("script"),h=!1;g.src="https://use.typekit.net/"+d.kitId+".js",g.type="text/javascript",g.async="true",g.onload=g.onreadystatechange=function(){var a=this.readyState;if(!(h||a&&"complete"!==a&&"loaded"!==a)){h=!0,clearTimeout(f);try{Typekit.load(d)}catch(b){}}};var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(g,i)}}(this),function(a){function b(b,d){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,!(!b.href||!f||"map"!==e.nodeName.toLowerCase())&&(g=a("img[usemap='#"+f+"']")[0],!!g&&c(g))):(/^(input|select|textarea|button|object)$/.test(h)?!b.disabled:"a"===h?b.href||d:d)&&c(b)}function c(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(c){return b(c,!isNaN(a.attr(c,"tabindex")))},tabbable:function(c){var d=a.attr(c,"tabindex"),e=isNaN(d);return(e||d>=0)&&b(c,!e)}})}(jQuery),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){return function(){function b(a,b,c){return[parseFloat(a[0])*(n.test(a[0])?b/100:1),parseFloat(a[1])*(n.test(a[1])?c/100:1)]}function c(b,c){return parseInt(a.css(b,c),10)||0}function d(b){var c=b[0];return 9===c.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}a.ui=a.ui||{};var e,f,g=Math.max,h=Math.abs,i=Math.round,j=/left|center|right/,k=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,m=/^\w+/,n=/%$/,o=a.fn.position;f=function(){var b=a("<div>").css("position","absolute").appendTo("body").offset({top:1.5,left:1.5}),c=1.5===b.offset().top;return b.remove(),f=function(){return c},c},a.position={scrollbarWidth:function(){if(void 0!==e)return e;var b,c,d=a("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),f=d.children()[0];return a("body").append(d),b=f.offsetWidth,d.css("overflow","scroll"),c=f.offsetWidth,b===c&&(c=d[0].clientWidth),d.remove(),e=b-c},getScrollInfo:function(b){var c=b.isWindow||b.isDocument?"":b.element.css("overflow-x"),d=b.isWindow||b.isDocument?"":b.element.css("overflow-y"),e="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth,f="scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight;return{width:f?a.position.scrollbarWidth():0,height:e?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]),e=!!c[0]&&9===c[0].nodeType,f=!d&&!e;return{element:c,isWindow:d,isDocument:e,offset:f?a(b).offset():{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:c.outerWidth(),height:c.outerHeight()}}},a.fn.position=function(e){if(!e||!e.of)return o.apply(this,arguments);e=a.extend({},e);var n,p,q,r,s,t,u=a(e.of),v=a.position.getWithinInfo(e.within),w=a.position.getScrollInfo(v),x=(e.collision||"flip").split(" "),y={};return t=d(u),u[0].preventDefault&&(e.at="left top"),p=t.width,q=t.height,r=t.offset,s=a.extend({},r),a.each(["my","at"],function(){var a,b,c=(e[this]||"").split(" ");1===c.length&&(c=j.test(c[0])?c.concat(["center"]):k.test(c[0])?["center"].concat(c):["center","center"]),c[0]=j.test(c[0])?c[0]:"center",c[1]=k.test(c[1])?c[1]:"center",a=l.exec(c[0]),b=l.exec(c[1]),y[this]=[a?a[0]:0,b?b[0]:0],e[this]=[m.exec(c[0])[0],m.exec(c[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===e.at[0]?s.left+=p:"center"===e.at[0]&&(s.left+=p/2),"bottom"===e.at[1]?s.top+=q:"center"===e.at[1]&&(s.top+=q/2),n=b(y.at,p,q),s.left+=n[0],s.top+=n[1],this.each(function(){var d,j,k=a(this),l=k.outerWidth(),m=k.outerHeight(),o=c(this,"marginLeft"),t=c(this,"marginTop"),z=l+o+c(this,"marginRight")+w.width,A=m+t+c(this,"marginBottom")+w.height,B=a.extend({},s),C=b(y.my,k.outerWidth(),k.outerHeight());"right"===e.my[0]?B.left-=l:"center"===e.my[0]&&(B.left-=l/2),"bottom"===e.my[1]?B.top-=m:"center"===e.my[1]&&(B.top-=m/2),B.left+=C[0],B.top+=C[1],f()||(B.left=i(B.left),B.top=i(B.top)),d={marginLeft:o,marginTop:t},a.each(["left","top"],function(b,c){a.ui.position[x[b]]&&a.ui.position[x[b]][c](B,{targetWidth:p,targetHeight:q,elemWidth:l,elemHeight:m,collisionPosition:d,collisionWidth:z,collisionHeight:A,offset:[n[0]+C[0],n[1]+C[1]],my:e.my,at:e.at,within:v,elem:k})}),e.using&&(j=function(a){var b=r.left-B.left,c=b+p-l,d=r.top-B.top,f=d+q-m,i={target:{element:u,left:r.left,top:r.top,width:p,height:q},element:{element:k,left:B.left,top:B.top,width:l,height:m},horizontal:c<0?"left":b>0?"right":"center",vertical:f<0?"top":d>0?"bottom":"middle"};p<l&&h(b+c)<p&&(i.horizontal="center"),q<m&&h(d+f)<q&&(i.vertical="middle"),g(h(b),h(c))>g(h(d),h(f))?i.important="horizontal":i.important="vertical",e.using.call(this,a,i)}),k.offset(a.extend(B,{using:j}))})},a.ui.position={fit:{left:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollLeft:d.offset.left,f=d.width,h=a.left-b.collisionPosition.marginLeft,i=e-h,j=h+b.collisionWidth-f-e;b.collisionWidth>f?i>0&&j<=0?(c=a.left+i+b.collisionWidth-f-e,a.left+=i-c):j>0&&i<=0?a.left=e:i>j?a.left=e+f-b.collisionWidth:a.left=e:i>0?a.left+=i:j>0?a.left-=j:a.left=g(a.left-h,a.left)},top:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollTop:d.offset.top,f=b.within.height,h=a.top-b.collisionPosition.marginTop,i=e-h,j=h+b.collisionHeight-f-e;b.collisionHeight>f?i>0&&j<=0?(c=a.top+i+b.collisionHeight-f-e,a.top+=i-c):j>0&&i<=0?a.top=e:i>j?a.top=e+f-b.collisionHeight:a.top=e:i>0?a.top+=i:j>0?a.top-=j:a.top=g(a.top-h,a.top)}},flip:{left:function(a,b){var c,d,e=b.within,f=e.offset.left+e.scrollLeft,g=e.width,i=e.isWindow?e.scrollLeft:e.offset.left,j=a.left-b.collisionPosition.marginLeft,k=j-i,l=j+b.collisionWidth-g-i,m="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,n="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,o=-2*b.offset[0];k<0?(c=a.left+m+n+o+b.collisionWidth-g-f,(c<0||c<h(k))&&(a.left+=m+n+o)):l>0&&(d=a.left-b.collisionPosition.marginLeft+m+n+o-i,(d>0||h(d)<l)&&(a.left+=m+n+o))},top:function(a,b){var c,d,e=b.within,f=e.offset.top+e.scrollTop,g=e.height,i=e.isWindow?e.scrollTop:e.offset.top,j=a.top-b.collisionPosition.marginTop,k=j-i,l=j+b.collisionHeight-g-i,m="top"===b.my[1],n=m?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,o="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,p=-2*b.offset[1];k<0?(d=a.top+n+o+p+b.collisionHeight-g-f,(d<0||d<h(k))&&(a.top+=n+o+p)):l>0&&(c=a.top-b.collisionPosition.marginTop+n+o+p-i,(c>0||h(c)<l)&&(a.top+=n+o+p))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}}}(),a.ui.position}),function(){"use strict";"undefined"!=typeof moment&&moment.locale(document.documentElement.lang||window.navigator.language||"en")}();var Class,Exception;!function(){var a=function(a){var b=a.bind(this);return b._methodName=a._methodName,this[b._methodName]=b,b},b=function(a){return a.extend=this,new Class(a)};Class=function(c){if(c=c||{},c.hasOwnProperty("extend")&&!c.extend)throw new Class.NonTruthyExtendError("function"==typeof c.toString?c.toString():c.toString);var d=c.extend||Object,e=c.construct,f=c.destruct;if(delete c.bind,delete c.extend,delete c.destruct,delete c.construct,c._construct=e,c._destruct=f,c.hasOwnProperty("toString")&&"function"!=typeof c.toString){var g=c.toString;c.toString=function(){return g.toString()}}else!c.hasOwnProperty("toString")&&d.prototype.hasOwnProperty("toString")&&(c.toString=d.prototype.toString);var h=c,i=Object.create(d&&d.prototype);if(i.superClass=d.prototype,h)for(var j in h)h.hasOwnProperty(j)&&(i[j]=h[j],"function"==typeof h[j]&&(i[j]._methodName=j,i[j]._parentProto=i));i.inherited=function(a){var b=a.callee,c=b._methodName;if(!c)throw new Class.MissingCalleeError(this.toString());for(var d=b._parentProto,e=null;d.superClass&&(d=d.superClass,e=d[c],"function"!=typeof e););if("function"==typeof e){var f=this.inherited;this.inherited=d.inherited;var g=e.apply(this,a);return this.inherited=f,g}throw new Class.InheritedMethodNotFoundError(this.toString(),c)},i.bind=a,i.destruct=function(){"function"==typeof f&&f.apply(this);for(var a=[],b=this.superClass;b;){if("function"==typeof b._destruct&&a.push(b._destruct),b===b.superClass)throw new Class.InfiniteInheritanceLoopError(b.toString());b=b.superClass}for(var c=0;c<a.length;c++)a[c].apply(this)},i.construct=function(a){var b=Array.prototype.slice.call(arguments);void 0===b[0]&&(b[0]={});for(var c=[],d=this.superClass;d;){if("function"==typeof d._construct&&c.push(d._construct),d===d.superClass)throw new Class.InfiniteInheritanceLoopError(d.toString());d=d.superClass}for(var f=c.length-1;f>=0;f--)c[f].apply(this,b);"function"==typeof e&&e.apply(this,b)};var k=function(){var a=Object.create(i);return i.construct.apply(a,arguments),a};return k.toString=i.toString,k.prototype=i,k.extend=b,i.constructor=k,k},Object.create||(Object.create=function(a){function b(){}if(arguments.length>1)throw new Error("Object.create implementation only accepts the first parameter.");return b.prototype=a,new b}),Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),Exception=new Class({extend:Error,construct:function(){this.name="Error",this.message="General exception"},toString:function(){return this.name+": "+this.message}});var c=Exception.extend({name:"Class Exception"});Class.NonTruthyExtendError=c.extend({construct:function(a){this.message=a+" attempted to extend a non-truthy object"}}),Class.InheritedMethodNotFoundError=c.extend({construct:function(a,b){this.message=a+" can't call method '"+b+"', no method defined in parent classes"}}),Class.MissingCalleeError=c.extend({construct:function(a){this.message=a+" can't call inherited method: calling method did not have _methodName"}}),Class.InfiniteInheritanceLoopError=c.extend({construct:function(a){this.message=a+" seems to inherit from itself, cannot construct an object"}})}(),function(a,b,c){function d(b,c,d,e){a.each(i,function(a,f){f[b].call(this,c,d,e)})}function e(a){var b=j.Event(a);h=j.State(b),d("touchstart",a,h,b)}function f(a){var b=j.Event(a);h.move.push(b),d("touchmove",a,h,b)}function g(a){var b=j.Event(a);h.end=b,d("touchend",a,h,b)}var h,i={},j={active:!1,on:function(){a(document).on("touchstart",e).on("touchmove",f).on("touchend touchcancel",g),j.active=!0},off:function(){a(document).off("touchstart",e).off("touchmove",f).off("touchend touchcancel",g),j.active=!1},track:function(a,b){i[a]=b},addEventParam:function(b,c){var d=a(b.target),e=d.offset(),f={pageX:b.point[0].x,pageY:b.point[0].y,offsetX:e.left-b.point[0].x,offsetY:e.top-b.point[0].y};return a.extend(f,c)},Event:function(b){var c={type:b.type,timestamp:(new Date).getTime(),target:b.target,point:[]},d=b.changedTouches||b.originalEvent.changedTouches||b.touches||b.originalEvent.touches;return a.each(d,function(a,b){c.point.push({x:b.pageX,y:b.pageY})}),c},State:function(a){a.point[0];return{start:a,move:[],end:null}},calc:{getDuration:function(a,b){return b.timestamp-a.timestamp},getDistance:function(a,b){return Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2))},getAngle:function(a,b){return 180*Math.atan2(b.y-a.y,b.x-a.x)/Math.PI},getDirection:function(a){return a<-45&&a>-135?"top":a>=-45&&a<=45?"right":a>=45&&a<135?"down":a>=135||a<=-135?"left":"unknown"},getScale:function(a,b){var c=a.point,d=b.point;return 2===c.length&&2===d.length?(Math.sqrt(Math.pow(d[0].x-d[1].x,2)+Math.pow(d[0].y-d[1].y,2))/Math.sqrt(Math.pow(c[0].x-c[1].x,2)+Math.pow(c[0].y-c[1].y,2))).toFixed(2):0},getRotation:function(a,b){var c=a.point,d=b.point;return 2===c.length&&2===d.length?(180*Math.atan2(d[0].y-d[1].y,d[0].x-d[1].x)/Math.PI-180*Math.atan2(c[0].y-c[1].y,c[0].x-c[1].x)/Math.PI).toFixed(2):0}}};j.on(),a.toe=j}(jQuery,this),function(a,b,c,d){var e="swipe",f={distance:40,duration:1200,direction:"all"};b.track(e,{touchstart:function(a,b,c){b[e]={finger:c.point.length}},touchmove:function(a,b,c){b[e].finger=c.point.length>b[e].finger?c.point.length:b[e].finger},touchend:function(c,d,g){var h,i,j=a.extend(f,c.data);h=b.calc.getDuration(d.start,g),i=b.calc.getDistance(d.start.point[0],g.point[0]),h<j.duration&&i>j.distance&&(d[e].angle=b.calc.getAngle(d.start.point[0],g.point[0]),d[e].direction=b.calc.getDirection(d[e].angle),"all"!==j.direction&&d[e].direction!==j.direction||a(c.target).trigger(a.Event(e,b.addEventParam(d.start,d[e]))))}})}(jQuery,jQuery.toe,this),function(a,b,c,d){var e="tap",f={distance:10,duration:300,finger:1};b.track(e,{touchstart:function(a,b,c){b[e]={finger:c.point.length}},touchmove:function(a,b,c){b[e].finger=c.point.length>b[e].finger?c.point.length:b[e].finger},touchend:function(c,d,g){var h,i,j=a.extend(f,c.data);h=b.calc.getDuration(d.start,g),i=b.calc.getDistance(d.start.point[0],g.point[0]),h<j.duration&&i<j.distance&&d[e].finger===j.finger&&a(c.target).trigger(a.Event(e,b.addEventParam(d.start,d[e])))}})}(jQuery,jQuery.toe,this),function(a,b,c,d){var e,f,g="taphold",h={distance:20,duration:500,finger:1};b.track(g,{touchstart:function(c,d,i){var j=a.extend(h,c.data);f=!1,d[g]={finger:i.point.length},clearTimeout(e),e=setTimeout(function(){!f&&b.active&&d[g].finger===j.finger&&a(c.target).trigger(a.Event(g,b.addEventParam(i,d[g])))},j.duration)},touchmove:function(c,d,e){var i,j=a.extend(h,c.data);d[g].finger=e.point.length>d[g].finger?e.point.length:d[g].finger,i=b.calc.getDistance(d.start.point[0],e.point[0]),i>j.distance&&(f=!0)},touchend:function(a,b,c){f=!0,clearTimeout(e)}})}(jQuery,jQuery.toe,this),function(a,b,c,d){var e,f="transform",g={scale:.1,rotation:15};b.track(f,{touchstart:function(a,b,c){e=!1,b[f]={start:c,move:[]}},touchmove:function(c,d,h){var i=a.extend(g,c.data);2===h.point.length&&(d[f].move.push(h),2!==d[f].start.point.length&&2===h.point.length&&(d[f].start=a.extend({},h)),d[f].rotation=b.calc.getRotation(d[f].start,h),d[f].scale=b.calc.getScale(d[f].start,h),(Math.abs(1-d[f].scale)>i.scale||Math.abs(d[f].rotation)>i.rotation)&&(e||(a(c.target).trigger(a.Event("transformstart",d[f])),e=!0),a(c.target).trigger(a.Event("transform",d[f]))))},touchend:function(c,d,g){e&&(e=!1,2!==g.point.length&&(d.end=a.extend({},d[f].move[d[f].move.length-1])),d[f].rotation=b.calc.getRotation(d[f].start,d.end),d[f].scale=b.calc.getScale(d[f].start,d.end),a(c.target).trigger(a.Event("transformend",d[f])))}})}(jQuery,jQuery.toe,this),function(a,b,c){"use strict";b.CUI=b.CUI||{},CUI.options=a.extend({debug:!1,dataAPI:!0},CUI.options),a(function(){a(document).trigger("cui-contentloaded")})}(jQuery,this),function(a,b,c){"use strict";var d=1;CUI.util={isTouch:function(){return!/Windows NT 6\.[23];.*Chrome/.test(b.navigator.userAgent)&&"ontouchstart"in b}(),getNextId:function(){return"coral-"+d++},getDataTarget:function(b){var c=b.attr("href"),d=a(b.attr("data-target")||c&&c.replace(/.*(?=#[^\s]+$)/,""));return d},decapitalize:function(a){return a.slice(0,1).toLowerCase()+a.slice(1)},capitalize:function(a){return a.slice(0,1).toUpperCase()+a.slice(1)},plugClass:function(b,c,d){c=c||CUI.util.decapitalize(b.toString()),a.fn[c]=function(e){var f=arguments;return this.each(function(){var g=a(this),h=a.extend({},g.data(),"object"==typeof e&&e,{element:this}),i=g.data(c)||new b(h);"string"==typeof e?i[e].apply(i,Array.prototype.slice.call(f,1)):a.isPlainObject(e)&&i.set(e),"function"==typeof d&&d.call(this,i)})},a.fn[c].Constructor=b},buildFunction:function(a,b){if(b=b||[],"string"==typeof b&&(b=[b]),a)try{var c=Function;return new c(b,"return "+a+"("+b.join(", ")+");")}catch(d){return null}},selectText:function(b,c,d){var e=b.val();if(e.length>0){c=c||0,d=d||e.length;var f=a(b)[0];if(f.setSelectionRange)f.blur(),f.setSelectionRange(c,d),f.focus();else if(f.createTextRange){var g=f.createTextRange();g.collapse(!0),g.moveEnd("character",d-e.length),g.moveStart("character",c),g.select()}}},getNested:function(a,b){if(!b)return a;for(var c="string"==typeof b?b.split("."):b,d=a;d&&c.length>0;)d=d[c.shift()];return d},isTrue:function(a){return"true"===a}},a("html").toggleClass("touch",CUI.util.isTouch)}(jQuery,this),function(a,b,c){"use strict";a.fn.loadWithSpinner=function(b,c,d){var e=a(this);if(b&&(c||e.data("loaded-remote")!==b)){var f=setTimeout(function(){e.html('<div class="spinner large"></div>')},50);e.load(b,function(a,b,c){clearTimeout(f),"error"===b&&(e.html('<div class="alert error"><strong>ERROR</strong> Failed to load content: '+c.statusText+" ("+c.status+")</div>"),e.data("loaded-remote","")),"function"==typeof d&&d.call(this,a,b,c)}),e.data("loaded-remote",b)}},a.fn.finger=function(){return CUI.util.isTouch&&this.on.apply(this,arguments),this},a.fn.pointer=function(){return CUI.util.isTouch||this.on.apply(this,arguments),this},a.fn.fipo=function(){var a=Array.prototype.slice.call(arguments,1,arguments.length);return this.pointer.apply(this,a),a[0]=arguments[0],this.finger.apply(this,a),this}}(jQuery,this),function(a,b,c){"use strict";CUI.Widget=new Class({toString:"Widget",construct:function(d){this.$element=a(d.element);var e=CUI.util.decapitalize(this.toString());if(this.$element.data(e)!==c){var f=["An instance of",this,"is already attached to the specified target element.","Future versions of CoralUI will throw an exception at this point."].join(" ");b.console.log(f)}this.options=a.extend({},"object"==typeof this.defaults&&this.defaults,this.$element.data(),d),this.$element.data(e,this),this.bind(this.hide),this.bind(this.show),this.bind(this.toggleVisibility),this.on("change:visible",function(a){this[a.value?"_show":"_hide"]()}.bind(this))},set:function(b,c){if(a.isPlainObject(b))for(var d in b)this._set(d,b[d]);else this._set(b,c);return this},_set:function(b,c){var d=a.Event("beforeChange:"+b,{widget:this,option:b,currentValue:this.options[b],value:c});return this.$element.trigger(d),d.isDefaultPrevented()?this:(this.options[b]=c,d=a.Event("change:"+b,{widget:this,option:b,value:c}),void this.$element.trigger(d))},get:function(a){return this.options[a]},on:function(a,b){return this.$element.on.apply(this.$element,arguments),this},off:function(a,b){return this.$element.off.apply(this.$element,arguments),this},show:function(b){if(b=b||{},this.options.visible)return this;if(!b.silent){var c=a.Event("show");if(this.$element.trigger(c),c.isDefaultPrevented())return this}return this.options.visible=!0,this._show(b),this},_show:function(a){this.$element.show()},hide:function(b){if(b=b||{},!this.options.visible)return this;if(!b.silent){var c=a.Event("hide");if(this.$element.trigger(c),c.isDefaultPrevented())return this}return this.options.visible=!1,this._hide(b),this},_hide:function(a){this.$element.hide()},toggleVisibility:function(){return this[this.options.visible?"hide":"show"]()},setName:function(a){return this.toString=function(){return a},this}}),CUI.Widget.fromElement=function(a,b){return b.data(CUI.util.decapitalize(a.toString()))},CUI.Widget.registry={register:function(a,b){CUI.util.plugClass(b),this._widgets[a]=b,b.init=function(a){this._init(b,a)}.bind(this)},resolve:function(a){return this._widgets[a]},init:function(a,b){this._init(this.resolve(a),b)},getSelectors:function(){var a=[];for(var b in this._widgets)a.push(b);return a},_widgets:{},_init:function(b,d){b!==c&&d.each(function(){var d=a(this);CUI.Widget.fromElement(b,d)===c&&new b({element:d})})}}}(jQuery,this),window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.commons=window.Coral.templates.commons||{},window.Coral.templates.commons.resizeListener=function(a){var b=document.createElement("object");return b.setAttribute("aria-hidden","true"),b.setAttribute("tabindex","-1"),b.setAttribute("style","display:block; position:absolute; top:0; left:0; height:100%; width:100%; opacity:0; overflow:hidden; z-index:-100;"),b.textContent="​",b},function(){var a=document.createElement("div");"hidden"in a||Object.defineProperty(HTMLElement.prototype,"hidden",{get:function(){return this.hasAttribute("hidden")},set:function(a){a?this.setAttribute("hidden",""):this.removeAttribute("hidden")},configurable:!0})}(),function(){Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(a){for(var b=(this.document||this.ownerDocument).querySelectorAll(a),c=b.length;--c>=0&&b.item(c)!==this;);return c>-1})}(),function(){Element.prototype.closest||(Element.prototype.closest=function(a){for(var b=this;b;){if(b.matches(a))return b;b=b.parentElement}return null})}(),"undefined"==typeof WeakMap&&!function(){var a=Object.defineProperty,b=Date.now()%1e9,c=function(){this.name="__st"+(1e9*Math.random()>>>0)+(b++ +"__")};c.prototype={set:function(b,c){var d=b[this.name];return d&&d[0]===b?d[1]=c:a(b,this.name,{value:[b,c],writable:!0}),this},get:function(a){var b;return(b=a[this.name])&&b[0]===a?b[1]:void 0},"delete":function(a){var b=a[this.name];return!(!b||b[0]!==a||(b[0]=b[1]=void 0,0))},has:function(a){var b=a[this.name];return!!b&&b[0]===a}},window.WeakMap=c}(),function(a){function b(a){u.push(a),t||(t=!0,p(d))}function c(a){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(a)||a}function d(){t=!1;var a=u;u=[],a.sort(function(a,b){return a.uid_-b.uid_});var b=!1;a.forEach(function(a){var c=a.takeRecords();e(a),c.length&&(a.callback_(c,a),b=!0)}),b&&d()}function e(a){a.nodes_.forEach(function(b){var c=q.get(b);c&&c.forEach(function(b){b.observer===a&&b.removeTransientObservers()})})}function f(a,b){for(var c=a;c;c=c.parentNode){var d=q.get(c);if(d)for(var e=0;e<d.length;e++){var f=d[e],g=f.options;if(c===a||g.subtree){var h=b(g);h&&f.enqueue(h)}}}}function g(a){this.callback_=a,this.nodes_=[],this.records_=[],this.uid_=++v}function h(a,b){this.type=a,this.target=b,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function i(a){var b=new h(a.type,a.target);return b.addedNodes=a.addedNodes.slice(),b.removedNodes=a.removedNodes.slice(),b.previousSibling=a.previousSibling,b.nextSibling=a.nextSibling,b.attributeName=a.attributeName,b.attributeNamespace=a.attributeNamespace,b.oldValue=a.oldValue,b}function j(a,b){return w=new h(a,b)}function k(a){return x?x:(x=i(w),x.oldValue=a,x)}function l(){w=x=void 0}function m(a){return a===x||a===w}function n(a,b){return a===b?a:x&&m(a)?x:null}function o(a,b,c){this.observer=a,this.target=b,this.options=c,this.transientObservedNodes=[]}if(!a.JsMutationObserver){var p,q=new WeakMap;if(/Trident|Edge/.test(navigator.userAgent))p=setTimeout;else if(window.setImmediate)p=window.setImmediate;else{var r=[],s=String(Math.random());window.addEventListener("message",function(a){if(a.data===s){var b=r;r=[],b.forEach(function(a){a()})}}),p=function(a){r.push(a),window.postMessage(s,"*")}}var t=!1,u=[],v=0;g.prototype={observe:function(a,b){if(a=c(a),!b.childList&&!b.attributes&&!b.characterData||b.attributeOldValue&&!b.attributes||b.attributeFilter&&b.attributeFilter.length&&!b.attributes||b.characterDataOldValue&&!b.characterData)throw new SyntaxError;var d=q.get(a);d||q.set(a,d=[]);for(var e,f=0;f<d.length;f++)if(d[f].observer===this){e=d[f],e.removeListeners(),e.options=b;break}e||(e=new o(this,a,b),d.push(e),this.nodes_.push(a)),e.addListeners()},disconnect:function(){this.nodes_.forEach(function(a){for(var b=q.get(a),c=0;c<b.length;c++){var d=b[c];if(d.observer===this){d.removeListeners(),b.splice(c,1);break}}},this),this.records_=[]},takeRecords:function(){var a=this.records_;return this.records_=[],a}};var w,x;o.prototype={enqueue:function(a){var c=this.observer.records_,d=c.length;if(c.length>0){var e=c[d-1],f=n(e,a);if(f)return void(c[d-1]=f)}else b(this.observer);c[d]=a},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(a){var b=this.options;b.attributes&&a.addEventListener("DOMAttrModified",this,!0),b.characterData&&a.addEventListener("DOMCharacterDataModified",this,!0),b.childList&&a.addEventListener("DOMNodeInserted",this,!0),(b.childList||b.subtree)&&a.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(a){var b=this.options;b.attributes&&a.removeEventListener("DOMAttrModified",this,!0),b.characterData&&a.removeEventListener("DOMCharacterDataModified",this,!0),b.childList&&a.removeEventListener("DOMNodeInserted",this,!0),(b.childList||b.subtree)&&a.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(a){if(a!==this.target){this.addListeners_(a),this.transientObservedNodes.push(a);var b=q.get(a);b||q.set(a,b=[]),b.push(this)}},removeTransientObservers:function(){var a=this.transientObservedNodes;this.transientObservedNodes=[],a.forEach(function(a){this.removeListeners_(a);for(var b=q.get(a),c=0;c<b.length;c++)if(b[c]===this){b.splice(c,1);break}},this)},handleEvent:function(a){switch(a.stopImmediatePropagation(),a.type){case"DOMAttrModified":var b=a.attrName,c=a.relatedNode.namespaceURI,d=a.target,e=new j("attributes",d);e.attributeName=b,e.attributeNamespace=c;var g=a.attrChange===MutationEvent.ADDITION?null:a.prevValue;f(d,function(a){if(a.attributes&&(!a.attributeFilter||!a.attributeFilter.length||a.attributeFilter.indexOf(b)!==-1||a.attributeFilter.indexOf(c)!==-1))return a.attributeOldValue?k(g):e});break;case"DOMCharacterDataModified":var d=a.target,e=j("characterData",d),g=a.prevValue;f(d,function(a){if(a.characterData)return a.characterDataOldValue?k(g):e});break;case"DOMNodeRemoved":this.addTransientObserver(a.target);case"DOMNodeInserted":var h,i,m=a.target;"DOMNodeInserted"===a.type?(h=[m],i=[]):(h=[],i=[m]);var n=m.previousSibling,o=m.nextSibling,e=j("childList",a.target.parentNode);e.addedNodes=h,e.removedNodes=i,e.previousSibling=n,e.nextSibling=o,f(a.relatedNode,function(a){if(a.childList)return e})}l()}},a.JsMutationObserver=g,a.MutationObserver||(a.MutationObserver=g,g._isPolyfilled=!0)}}(self),function(a){"use strict";if(!window.performance||!window.performance.now){var b=Date.now();window.performance={now:function(){return Date.now()-b}}}window.requestAnimationFrame||(window.requestAnimationFrame=function(){var a=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return a?function(b){return a(function(){b(performance.now())})}:function(a){return window.setTimeout(a,1e3/60)}}()),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(){return window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(a){clearTimeout(a)}}());var c=function(){var a=document.createEvent("Event");return a.initEvent("foo",!0,!0),a.preventDefault(),a.defaultPrevented}();if(!c){var d=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(d.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}var e=/Trident/.test(navigator.userAgent);if((!window.CustomEvent||e&&"function"!=typeof window.CustomEvent)&&(window.CustomEvent=function(a,b){b=b||{};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,Boolean(b.bubbles),Boolean(b.cancelable),b.detail),c},window.CustomEvent.prototype=window.Event.prototype),!window.Event||e&&"function"!=typeof window.Event){var f=window.Event;window.Event=function(a,b){b=b||{};var c=document.createEvent("Event");return c.initEvent(a,Boolean(b.bubbles),Boolean(b.cancelable)),c},window.Event.prototype=f.prototype}}(window.WebComponents),window.CustomElements=window.CustomElements||{flags:{}},function(a){var b=a.flags,c=[],d=function(a){c.push(a)},e=function(){c.forEach(function(b){b(a)})};a.addModule=d,a.initializeModules=e,a.hasNative=Boolean(document.registerElement),a.isIE=/Trident/.test(navigator.userAgent),a.useNative=!b.register&&a.hasNative&&!window.ShadowDOMPolyfill&&(!window.HTMLImports||window.HTMLImports.useNative)}(window.CustomElements),window.CustomElements.addModule(function(a){function b(a,b){c(a,function(a){return!!b(a)||void d(a,b)}),d(a,b)}function c(a,b,d){var e=a.firstElementChild;if(!e)for(e=a.firstChild;e&&e.nodeType!==Node.ELEMENT_NODE;)e=e.nextSibling;for(;e;)b(e,d)!==!0&&c(e,b,d),e=e.nextElementSibling;return null}function d(a,c){for(var d=a.shadowRoot;d;)b(d,c),d=d.olderShadowRoot}function e(a,b){f(a,b,[])}function f(a,b,c){if(a=window.wrap(a),!(c.indexOf(a)>=0)){c.push(a);for(var d,e=a.querySelectorAll("link[rel="+g+"]"),h=0,i=e.length;h<i&&(d=e[h]);h++)d["import"]&&f(d["import"],b,c);b(a)}}var g=window.HTMLImports?window.HTMLImports.IMPORT_LINK_TYPE:"none";a.forDocumentTree=e,a.forSubtree=b}),window.CustomElements.addModule(function(a){function b(a,b){return c(a,b)||d(a,b)}function c(b,c){return!!a.upgrade(b,c)||void(c&&g(b))}function d(a,b){t(a,function(a){if(c(a,b))return!0})}function e(a){x.push(a),w||(w=!0,setTimeout(f))}function f(){w=!1;for(var a,b=x,c=0,d=b.length;c<d&&(a=b[c]);c++)a();x=[]}function g(a){v?e(function(){h(a)}):h(a)}function h(a){a.__upgraded__&&!a.__attached&&(a.__attached=!0,a.attachedCallback&&a.attachedCallback())}function i(a){j(a),t(a,function(a){j(a)})}function j(a){v?e(function(){k(a)}):k(a)}function k(a){a.__upgraded__&&a.__attached&&(a.__attached=!1,a.detachedCallback&&a.detachedCallback())}function l(a){for(var b=a,c=window.wrap(document);b;){if(b==c)return!0;b=b.parentNode||b.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&b.host}}function m(a){if(a.shadowRoot&&!a.shadowRoot.__watched){s.dom&&console.log("watching shadow-root for: ",a.localName);for(var b=a.shadowRoot;b;)p(b),b=b.olderShadowRoot}}function n(a,c){if(s.dom){var d=c[0];if(d&&"childList"===d.type&&d.addedNodes&&d.addedNodes){for(var e=d.addedNodes[0];e&&e!==document&&!e.host;)e=e.parentNode;var f=e&&(e.URL||e._URL||e.host&&e.host.localName)||"";f=f.split("/?").shift().split("/").pop()}console.group("mutations (%d) [%s]",c.length,f||"")}var g=l(a);c.forEach(function(a){"childList"===a.type&&(y(a.addedNodes,function(a){a.localName&&b(a,g)}),y(a.removedNodes,function(a){a.localName&&i(a)}))}),s.dom&&console.groupEnd()}function o(a){for(a=window.wrap(a),a||(a=window.wrap(document));a.parentNode;)a=a.parentNode;var b=a.__observer;b&&(n(a,b.takeRecords()),f())}function p(a){if(!a.__observer){var b=new MutationObserver(n.bind(this,a));b.observe(a,{childList:!0,subtree:!0}),a.__observer=b}}function q(a){a=window.wrap(a),s.dom&&console.group("upgradeDocument: ",a.baseURI.split("/").pop());var c=a===window.wrap(document);b(a,c),p(a),s.dom&&console.groupEnd()}function r(a){u(a,q)}var s=a.flags,t=a.forSubtree,u=a.forDocumentTree,v=window.MutationObserver._isPolyfilled&&s["throttle-attached"];a.hasPolyfillMutations=v,a.hasThrottledAttached=v;var w=!1,x=[],y=Array.prototype.forEach.call.bind(Array.prototype.forEach),z=Element.prototype.createShadowRoot;z&&(Element.prototype.createShadowRoot=function(){
var a=z.call(this);return window.CustomElements.watchShadow(this),a}),a.watchShadow=m,a.upgradeDocumentTree=r,a.upgradeDocument=q,a.upgradeSubtree=d,a.upgradeAll=b,a.attached=g,a.takeRecords=o}),window.CustomElements.addModule(function(a){function b(b,d){if("template"===b.localName&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(b),!b.__upgraded__&&b.nodeType===Node.ELEMENT_NODE){var e=b.getAttribute("is"),f=a.getRegisteredDefinition(b.localName)||a.getRegisteredDefinition(e);if(f&&(e&&f.tag==b.localName||!e&&!f["extends"]))return c(b,f,d)}}function c(b,c,e){return g.upgrade&&console.group("upgrade:",b.localName),c.is&&b.setAttribute("is",c.is),d(b,c),b.__upgraded__=!0,f(b),e&&a.attached(b),a.upgradeSubtree(b,e),g.upgrade&&console.groupEnd(),b}function d(a,b){Object.__proto__?a.__proto__=b.prototype:(e(a,b.prototype,b["native"]),a.__proto__=b.prototype)}function e(a,b,c){for(var d={},e=b;e!==c&&e!==HTMLElement.prototype;){for(var f,g=Object.getOwnPropertyNames(e),h=0;f=g[h];h++)d[f]||(Object.defineProperty(a,f,Object.getOwnPropertyDescriptor(e,f)),d[f]=1);e=Object.getPrototypeOf(e)}}function f(a){a.createdCallback&&a.createdCallback()}var g=a.flags;a.upgrade=b,a.upgradeWithDefinition=c,a.implementPrototype=d}),window.CustomElements.addModule(function(a){function b(b,d){var i=d||{};if(!b)throw new Error("document.registerElement: first argument `name` must not be empty");if(b.indexOf("-")<0)throw new Error("document.registerElement: first argument ('name') must contain a dash ('-'). Argument provided was '"+String(b)+"'.");if(e(b))throw new Error("Failed to execute 'registerElement' on 'Document': Registration failed for type '"+String(b)+"'. The type name is invalid.");if(j(b))throw new Error("DuplicateDefinitionError: a type with name '"+String(b)+"' is already registered");return i.prototype||(i.prototype=Object.create(HTMLElement.prototype)),i.__name=b.toLowerCase(),i["extends"]&&(i["extends"]=i["extends"].toLowerCase()),i.lifecycle=i.lifecycle||{},i.ancestry=f(i["extends"]),g(i),h(i),c(i.prototype),k(i.__name,i),i.ctor=l(i),i.ctor.prototype=i.prototype,i.prototype.constructor=i.ctor,a.ready&&q(document),i.ctor}function c(a){if(!a.setAttribute._polyfilled){var b=a.setAttribute;a.setAttribute=function(a,c){d.call(this,a,c,b)};var c=a.removeAttribute;a.removeAttribute=function(a){d.call(this,a,null,c)},a.setAttribute._polyfilled=!0}}function d(a,b,c){a=a.toLowerCase();var d=this.getAttribute(a);c.apply(this,arguments);var e=this.getAttribute(a);this.attributeChangedCallback&&e!==d&&this.attributeChangedCallback(a,d,e)}function e(a){for(var b=0;b<v.length;b++)if(a===v[b])return!0}function f(a){var b=j(a);return b?f(b["extends"]).concat([b]):[]}function g(a){for(var b,c=a["extends"],d=0;b=a.ancestry[d];d++)c=b.is&&b.tag;a.tag=c||a.__name,c&&(a.is=a.__name)}function h(a){if(!Object.__proto__){var b=HTMLElement.prototype;if(a.is){var c=document.createElement(a.tag);b=Object.getPrototypeOf(c)}for(var d,e=a.prototype,f=!1;e;)e==b&&(f=!0),d=Object.getPrototypeOf(e),d&&(e.__proto__=d),e=d;f||console.warn(a.tag+" prototype not found in prototype chain for "+a.is),a["native"]=b}}function i(a){return s(y(a.tag),a)}function j(a){if(a)return w[a.toLowerCase()]}function k(a,b){w[a]=b}function l(a){return function(){return i(a)}}function m(a,b,c){return a===x?n(b,c):z(a,b)}function n(a,b){a&&(a=a.toLowerCase()),b&&(b=b.toLowerCase());var c=j(b||a);if(c){if(a==c.tag&&b==c.is)return new c.ctor;if(!b&&!c.is)return new c.ctor}var d;return b?(d=n(a),d.setAttribute("is",b),d):(d=y(a),a.indexOf("-")>=0&&t(d,HTMLElement),d)}function o(a,b){var c=a[b];a[b]=function(){var a=c.apply(this,arguments);return r(a),a}}var p,q=(a.isIE,a.upgradeDocumentTree),r=a.upgradeAll,s=a.upgradeWithDefinition,t=a.implementPrototype,u=a.useNative,v=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"],w={},x="http://www.w3.org/1999/xhtml",y=document.createElement.bind(document),z=document.createElementNS.bind(document);p=Object.__proto__||u?function(a,b){return a instanceof b}:function(a,b){if(a instanceof b)return!0;for(var c=a;c;){if(c===b.prototype)return!0;c=c.__proto__}return!1},o(Node.prototype,"cloneNode"),o(document,"importNode"),document.registerElement=b,document.createElement=n,document.createElementNS=m,a.registry=w,a["instanceof"]=p,a.reservedTagList=v,a.getRegisteredDefinition=j,document.register=document.registerElement}),function(a){function b(){f(window.wrap(document)),window.CustomElements.ready=!0;var a=window.requestAnimationFrame||function(a){setTimeout(a,16)};a(function(){setTimeout(function(){window.CustomElements.readyTime=Date.now(),window.HTMLImports&&(window.CustomElements.elapsed=window.CustomElements.readyTime-window.HTMLImports.readyTime),document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))})})}var c=a.useNative,d=a.initializeModules;if(a.isIE,c){var e=function(){};a.watchShadow=e,a.upgrade=e,a.upgradeAll=e,a.upgradeDocumentTree=e,a.upgradeSubtree=e,a.takeRecords=e,a["instanceof"]=function(a,b){return a instanceof b}}else d();var f=a.upgradeDocumentTree,g=a.upgradeDocument;if(window.wrap||(window.ShadowDOMPolyfill?(window.wrap=window.ShadowDOMPolyfill.wrapIfNeeded,window.unwrap=window.ShadowDOMPolyfill.unwrapIfNeeded):window.wrap=window.unwrap=function(a){return a}),window.HTMLImports&&(window.HTMLImports.__importsParsingHook=function(a){a["import"]&&g(wrap(a["import"]))}),"complete"===document.readyState||a.flags.eager)b();else if("interactive"!==document.readyState||window.attachEvent||window.HTMLImports&&!window.HTMLImports.ready){var h=window.HTMLImports&&!window.HTMLImports.ready?"HTMLImportsLoaded":"DOMContentLoaded";window.addEventListener(h,b)}else b()}(window.CustomElements),function(){"use strict";var a=document.createElement("_");if(a.classList.add("c1","c2"),!a.classList.contains("c2")){var b=function(a){var b=DOMTokenList.prototype[a];DOMTokenList.prototype[a]=function(a){var c,d=arguments.length;for(c=0;c<d;c++)a=arguments[c],b.call(this,a)}};b("add"),b("remove")}if(a.classList.toggle("c3",!1),a.classList.contains("c3")){var c=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(a,b){return 1 in arguments&&!this.contains(a)==!b?b:c.call(this,a)}}a=null}(),function(a){function b(a,b){for(var c=0;c<b.length;c++)if(a.indexOf(b[c])===-1)return!1;return!0}function c(a){return a&&h.test(a)}function d(){this._ventPropagationStopped=!0,Event.prototype.stopPropagation.call(this)}function e(){this._ventImmediatePropagationStopped=!0,Event.prototype.stopImmediatePropagation.call(this)}function f(b){if(this===a)throw new Error("Vent must be invoked with the new keyword");var c;c="string"==typeof b?document.querySelector(b):b,this.root=c,this._listenersByType=Object.create(null),this._allListeners=[],this._executeCaptureListeners=this._executeCaptureListeners.bind(this),this._executeBubbleListeners=this._executeBubbleListeners.bind(this),this._id=this._id||g++}var g=0,h=/^\s*(>|:scope\s*>)/,i=function(){var a=Element.prototype,b=a.matches||a.matchesSelector||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector;if(!b)throw new Error("Vent: Browser does not support matchesSelector");return b}();f.prototype._listenerMatchesRootTarget=function(a,b){return null===a.selector&&b===this.root},f.prototype._listenerMatchesDelegateTarget=function(a,b){return b!==document&&b!==this.root&&null!==a.selector&&(a.isScoped?i.call(b,'[__vent-id__="'+this._id+'"] '+a.selector):i.call(b,a.selector))},f.prototype._listenerMatchesEventPhase=function(a,b){return a.useCapture===b},f.prototype._executeListenersAtElement=function(a,b,c,d){var e,f;a:for(var g=0;g<b.length&&(e=b[g],"click"===c.type&&a.disabled===!0||!this._listenerMatchesRootTarget(e,a)&&!this._listenerMatchesDelegateTarget(e,a)||!this._listenerMatchesEventPhase(e,d)||(c.matchedTarget=a,f=e.handler.call(a,c),f===!1&&(c.preventDefault(),c.stopPropagation()),!c._ventImmediatePropagationStopped));g++);},f.prototype._executeCaptureListeners=function(a){var b=this._listenersByType[a.type];if(!b)throw new Error("Vent: _executeListeners called in response to "+a.type+", but we are not listening to it");if(b.length){b=b.slice(),this._decorateEvent(a);var c=this._getPath(a);a:for(var d=c.length-1;d>=0&&b.length;d--){var e=c[d];if(this._executeListenersAtElement(e,b,a,!0),a._ventImmediatePropagationStopped||a._ventPropagationStopped)break a}}this._undecorateEvent(a)},f.prototype._executeBubbleListeners=function(a){var b=this._listenersByType[a.type];if(!b)throw new Error("Vent: _executeListeners called in response to "+a.type+", but we are not listening to it");if(b.length){b=b.slice(),this._decorateEvent(a);var c="focus"!==a.type&&"blur"!==a.type,d=this._getPath(a);a:for(var e=0;e<d.length&&b.length;e++){var f=d[e];if(this._executeListenersAtElement(f,b,a,!1),a._ventImmediatePropagationStopped||a._ventPropagationStopped)break a;if(!c)break a}}this._undecorateEvent(a),a["_ventPath"+this._id]=null},f.prototype._decorateEvent=function(a){a.stopPropagation=d,a.stopImmediatePropagation=e},f.prototype._undecorateEvent=function(a){a.stopPropagation=Event.prototype.stopPropagation,a.stopImmediatePropagation=Event.prototype.stopImmediatePropagation},f.prototype._getPath=function(a){if(a["_ventPath"+this._id])return a["_ventPath"+this._id];var b=a.target;b.nodeType===Node.TEXT_NODE&&(b=b.parentNode);for(var c=b,d=[];c&&c!==this.root;)d.push(c),c=c.parentNode;return d.push(this.root),a["_ventPath"+this._id]=d,d},f.prototype.on=function(a,b,d,e){if("function"==typeof b&&(e=d,d=b,b=null),"function"!=typeof d)throw new Error("Vent: Cannot add listener with non-function handler");b||(b=null),"undefined"==typeof e&&(e="focus"===a||"blur"===a);var f=null,g=a.indexOf(".");g!==-1&&(f=a.slice(g+1).split("."),a=a.slice(0,g));var i=this._listenersByType[a];i||(i=this._listenersByType[a]=[],this.root.addEventListener(a,this._executeCaptureListeners,!0),this.root.addEventListener(a,this._executeBubbleListeners,!1));var j=c(b);j&&(b=b.replace(h,">"),this.root.setAttribute("__vent-id__",this._id));var k={eventName:a,handler:d,namespaces:f,selector:b,useCapture:e,isScoped:j};i.push(k),this._allListeners.push(k)},f.prototype.off=function(a,c,d,e){"function"==typeof c&&(e=d,d=c,c=null),"undefined"==typeof a&&(a=null),"undefined"==typeof c&&(c=null),"undefined"==typeof d&&(d=null),"undefined"==typeof e&&(e=null);var f=null;if(a){var g=a.indexOf(".");g!==-1&&(f=a.slice(g+1).split("."),a=a.slice(0,g))}""===a&&(a=null);for(var h,i,j=this._allListeners,k=0;k<j.length;k++)if(h=j[k],(null===a||h.eventName===a)&&(null===c||h.selector===c)&&(null===d||h.handler===d)&&(null===e||h.useCapture===e)&&(null===f||h.namespaces&&b(h.namespaces,f))){if(this._allListeners.splice(k,1),k--,!this._listenersByType[h.eventName])throw new Error("Vent: Missing listenersByType for "+h.eventName);if(i=this._listenersByType[h.eventName].indexOf(h),i===-1)throw new Error("Vent: Event existed in allEvents, but did not exist in listenersByType");var l=this._listenersByType[h.eventName];l.splice(i,1),0===l.length&&(this.root.removeEventListener(h.eventName,this._executeCaptureListeners,!0),this.root.removeEventListener(h.eventName,this._executeBubbleListeners,!1),this._listenersByType[h.eventName]=null)}return this},"function"==typeof CustomEvent?f.prototype.dispatch=function(a,b){b=b||{},"undefined"==typeof b.bubbles&&(b.bubbles=!0),"undefined"==typeof b.cancelable&&(b.cancelable=!0);var c=new CustomEvent(a,b);return this.root.dispatchEvent(c),c}:f.prototype.dispatch=function(a,b){b=b||{},"undefined"==typeof b.bubbles&&(b.bubbles=!0),"undefined"==typeof b.cancelable&&(b.cancelable=!0);var c=document.createEvent("CustomEvent");c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail);var d=!this.root.dispatchEvent(c);if(d!==c.defaultPrevented){var e=Object.create(c);return Object.defineProperty(e,"defaultPrevented",{value:d}),e}return c},f.prototype.destroy=function(){this.destroyed||(this.off(),this._listenersByType=null,this._allListeners=null,this.root=null,this.destroyed=!0)},a.Vent=f}(window);var Coral=window.Coral=window.Coral||{};Coral.strings=Coral.strings||{},Coral.strings.generic=Coral.strings.generic||{},Coral.events=new Vent(window),Coral.commons=Coral.commons||{},Coral.commons.extend=function(){"use strict";for(var a=arguments[0],b=1,c=arguments.length;b<c;b++){var d=arguments[b];for(var e in d)a[e]=d[e]}return a},Coral.commons.augment=function(){"use strict";var a,b=arguments[0],c=arguments.length,d=arguments[c-1];"function"==typeof d&&(a=d,c--);for(var e=1;e<c;e++){var f=arguments[e];for(var g in f)if("undefined"!=typeof b[g]){if("function"==typeof a){var h=a(b[g],f[g],g,b,f);"undefined"!=typeof h&&(b[g]=h)}}else b[g]=f[g]}return b},Coral.commons.swapKeysAndValues=function(a){"use strict";var b={};for(var c in a)b[a[c]]=c;return b},Coral.commons.nextFrame=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(a){"use strict";return window.setTimeout(a,1e3/60)}).bind(window),function(){"use strict";function a(a){var b=parseFloat(a,10),c=a.match(/m?s/);return c&&(c=c[0]),"s"===c?1e3*b:"ms"===c?b:0}var b=100;Coral.commons.transitionEnd=function(c,d){var e,f=!1,g=null,h={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",MSTransition:"msTransitionEnd"},i=null,j=function(a){var b="undefined"==typeof a;f||(f=!0,clearTimeout(i),c.removeEventListener(g,j),d({target:c,cssTransitionSupported:!0,transitionStoppedByTimeout:b}))};for(e in h)if(void 0!==c.style[e]){g=h[e];break}if(null!==g){var k=0,l=a(window.getComputedStyle(c).transitionDuration);0!==l&&(c.addEventListener(g,j),k=l+b),i=setTimeout(j,k)}}}(),function(){"use strict";function a(a,b){a&&window.CustomElements.upgradeAll(a),Coral.commons.nextFrame(function(){b(a)})}var b=[],c=!1;window.addEventListener("WebComponentsReady",function d(){c=!0;for(var e,f=0,g=b.length;f<g;f++)e=b[f],a(e.element,e.callback);b.splice(0,g),window.removeEventListener("WebComponentsReady",d)}),Coral.commons.ready=function(d,e){"function"==typeof d&&(e=d,d=window),c?a(d,e):b.push({element:d,callback:e})}}(),Coral.commons.setSubProperty=function(a,b,c){"use strict";var d=b.split("."),e=a;if(1===d.length)return void(e[b]=c);for(;d.length>1;){var f=d.shift();if(!e[f])throw new Error("Coral.commons.setSubProperty: could not set "+b+", part "+f+" not found");e=e[f]}e[d.shift()]=c},Coral.commons.getSubProperty=function(a,b){"use strict";var c=b.split("."),d=a;if(1===c.length)return d[b];for(;c.length;){var e=c.shift();if(0!==c.length&&"undefined"==typeof d[e])throw new Error("Coral.commons.getSubProperty: could not get "+b+", part "+e+" not found");d=d[e]}return d},function(){"use strict";function a(a,b,c){var d=typeof b;if("function"===d)b(a,c);else{if("object"!==d||null===b)throw new Error("Coral.commons.mixin: Cannot mix in "+d+" to "+a.toString());Coral.commons.extend(a,b)}}Coral.commons.mixin=function(b,c,d){if(Array.isArray(c))for(var e=0;e<c.length;e++)a(b,c[e],d);else a(b,c,d)}}(),function(){"use strict";var a=0;Coral.commons.getUID=function(){return"coral-id-"+a++}}(),function(){"use strict";function a(){}function b(a,b){return function(){var c=a.apply(this,arguments);return b.apply(this,arguments),c}}function c(a){return"function"==typeof a}Coral.commons.callAll=function(){var d=arguments[arguments.length-1];"number"!=typeof d&&(d=0);var e=arguments[d],f=Array.prototype.filter.call(arguments,c);return 2===f.length&&0===d?b(f[0],f[1]):1===f.length?f[0]:0===f.length?a:("function"!=typeof e&&(e=f[0]),function(){for(var a,b,c,d=0;d<f.length;d++)c=f[d],b=c.apply(this,arguments),c===e&&(a=b);return a})}}(),function(){"use strict";function a(){var a=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/);this.useNativeResizeSupport=document.attachEvent&&!a}function b(){return c||(c=Coral.templates.commons.resizeListener.call()),c.cloneNode(!0)}var c;a.prototype._addTriggerElement=function(a,c){"static"===getComputedStyle(a).position&&(a.style.position="relative");var d=b();a._resizeTriggerElement=d,d.onload=function(b){var d=this.contentDocument,e=d.defaultView,f=d.documentElement;e._originalElement=a,e._listenerFunction=c,e.addEventListener("resize",c),f.lang="en",d.title="​",c({target:e})},d.type="text/html",a.appendChild(d),d.data="about:blank"},a.prototype._removeTriggerElement=function(a){if(a._resizeTriggerElement){var b=a._resizeTriggerElement;b.contentDocument&&b.contentDocument.defaultView&&b.contentDocument.defaultView.removeEventListener("resize",b.contentDocument.defaultView._listenerFunction),a._resizeTriggerElement=!a.removeChild(a._resizeTriggerElement)}},a.prototype._fireResizeListeners=function(a){var b=a.target||a.srcElement,c=b._originalElement||b;c._resizeListeners.forEach(function(b){b.call(c,a)})},a.prototype.addResizeListener=function(a,b){if(a){if(this.useNativeResizeSupport)return void a.addEventListener("resize",b);a._resizeListeners&&0!==a._resizeListeners.length||(a._resizeListeners=[],this._addTriggerElement(a,this._fireResizeListeners.bind(this))),a._resizeListeners.push(b)}},a.prototype.removeResizeListener=function(a,b){if(a){if(this.useNativeResizeSupport)return void a.removeEventListener("resize",b);if(a._resizeListeners&&a._resizeTriggerElement){var c=a._resizeListeners.indexOf(b);c!==-1&&(a._resizeListeners.splice(c,1),a._resizeListeners.length||this._removeTriggerElement(a))}}};var d=new a;Coral.commons.addResizeListener=d.addResizeListener.bind(d),Coral.commons.removeResizeListener=d.removeResizeListener.bind(d)}(),function(){"use strict";var a=["input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]"];Coral.commons.FOCUSABLE_ELEMENT_SELECTOR=a.join(","),a.push('[tabindex]:not([tabindex="-1"])'),Coral.commons.TABBABLE_ELEMENT_SELECTOR=a.join(':not([tabindex="-1"]),')}(),Coral.transform={},Coral.transform["boolean"]=function(a){"use strict";return!!a},Coral.transform.booleanAttr=function(a){"use strict";return!(null===a||"undefined"==typeof a)},Coral.transform.number=function(a){"use strict";return a=parseFloat(a),isNaN(a)?null:a},Coral.transform["float"]=function(a){"use strict";return/^(\-|\+)?([0-9]+(\.[0-9]+)?|Infinity)$/.test(a)?Number(a):null},Coral.transform.string=function(a){"use strict";return null===a||"undefined"==typeof a?"":"string"==typeof a?a:String(a)},Coral.validate={},Coral.validate.valueMustChange=function(a,b){"use strict";return a!==b},Coral.validate.enumeration=function(a){"use strict";var b=Coral.commons.swapKeysAndValues(a);return function(a,c){return"undefined"!=typeof b[a]}},Coral.property={},Coral.property.proxy=function(a){"use strict";function b(a,b){Coral.commons.setSubProperty(this,d,a)}function c(){return Coral.commons.getSubProperty(this,d)}var d=a.path,e=function(e,f){var g="_"+f;return a.needsDOMSync?(a.sync=function(){Coral.commons.setSubProperty(this,d,this[g]),this[g]=void 0},a.set=function(a,b){this[g]=a},a.get=function(){return"undefined"==typeof this[g]?Coral.commons.getSubProperty(this,d):this[g]}):(a.set=b,a.get=c,a.sync=null),a};return e.override="undefined"==typeof a.override||a.override,e},Coral.property.proxyAttr=function(a){"use strict";var b=a.attribute,c=a.handle,d=function(d,e){return Coral.commons.extend({attribute:b,set:function(a){this._elements[c][a===!1||null===a?"removeAttribute":"setAttribute"](b,a)},get:function(){return this._elements[c].getAttribute(b)}},a)};return d.override="undefined"==typeof a.override||a.override,d},Coral.property.contentZone=function(a){"use strict";var b=a.handle,c=a.tagName,d=a.set,e=a.get,f=a.insert,g=function(g,h){return a.defaultContentZone&&Object.defineProperty(g,"defaultContentZone",{set:function(a){this[h]=a},get:function(){return this[h]}}),Coral.commons.extend({},a,{contentZone:!0,set:function(a){var e;if(a){if(!(a instanceof HTMLElement))throw new Error('DOMException: Failed to set the "'+h+'" property on "'+this.toString()+'": The provided value is not of type "HTMLElement".');if(c&&a.tagName.toLowerCase()!==c)throw new Error('DOMException: Failed to set the "'+h+'" property on "'+this.toString()+'": The new '+h+' element is of type "'+a.tagName+'". It must be a "'+c.toUpperCase()+'" element.');e=this._elements[b],f?(e&&e.parentNode&&e.parentNode.removeChild(e),f.call(this,a)):e&&e.parentNode?(console.warn(this._componentName+" does not define an insert method for content zone "+b+", falling back to replace."),this._elements[b].parentNode.replaceChild(a,this._elements[b])):(console.error(this._componentName+" does not define an insert method for content zone "+b+", falling back to append."),this.appendChild(a))}else e=this._elements[b],e&&e.parentNode&&e.parentNode.removeChild(e);this._elements[b]=a,"function"==typeof d&&d.call(this,a)},get:e||function(){return this._elements[b]}})};return g};var Coral=window.Coral=window.Coral||{};"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=Coral),exports=Coral),function(){"use strict";function a(){}function b(a){return a}function c(a){return a.validate?Array.isArray(a.validate)?a.validate:[a.validate]:[Coral.validate.valueMustChange]}function d(b,c){if(!c.reflectAttribute)return a;var d=c.attribute||b;return function(a,b){a===!1||null===a?this.removeAttribute(d):(a===!0&&(a=""),this.getAttribute(d)!==a&&this.setAttribute(d,a))}}function e(b){if(!b)return a;if("function"==typeof b)return b;var c=b;return function(a,b){return this.trigger(c,{oldValue:b,value:a})}}function f(b,c){var d=c.alsoSync,e=c.sync;return e||d?d?(Array.isArray(d)?d.unshift(b):d=[b,d],function(a){this._queueSync.apply(this,d)}):function(a){this._queueSync(b)}:a}function g(a,g,h){var i;if("function"==typeof h.triggerBefore||"string"==typeof h.triggerBefore)i=h.triggerBefore;else if(h.triggerBefore===!0){if("string"!=typeof h.trigger||h.trigger.indexOf(":")===-1)throw new Error('Coral.register: Cannot automatically set "before" event name unless descriptor.trigger is a string that conatins a colon');i=h.trigger.replace(":",":before")}h.set=h.set||k(g),h.get=h.get||j(g);var l=h._methods;if(h._methods={},l)for(var m in l)h._methods[m]=l[m];h._methods.triggerBefore=e(i),h._methods.trigger=e(h.trigger),h._methods.transform=h.transform||b,h._methods.attributeTransform=h.attributeTransform||b,h._methods.reflectAttribute=d(g,h),h._methods.queueSync=f(g,h),h._methods.validate=c(h),h.attribute?a._attributes[h.attribute]=g:a._attributes[h.attribute]=null,a._properties[g]=h}function h(a){return function(){return this._properties[a].get.call(this)}}function i(a){return function(b,c){var d=this._properties[a],e=d._methods,f=e.transform.call(this,b,this._properties[a]["default"]),g=this[a],h=this,i=e.validate.some(function(a){return!a.call(h,f,g)});if(!i){if(!c){var j=e.triggerBefore.call(this,f,g);if(j&&j.defaultPrevented)return}d.set.call(this,f,c),e.reflectAttribute.call(this,f),e.queueSync.call(this),c||e.trigger.call(this,f,g),this._setProps[a]=!0}}}function j(a){var b="_"+a;return function(){return this[b]}}function k(a){var b="_"+a;return function(a){this[b]=a}}function l(a,b){for(var c in b)b[c]&&m(a,c,b[c])}function m(a,b,c){if("function"==typeof c&&(c=c(a,b),!c))throw new Error("Coral.register.defineProperty: Property function did not return a descriptor for "+b);g(a,b,c);var d=c._methods.set=i(b),e=c._methods.get=h(b);Object.defineProperty(a,b,{enumerable:!0,configurable:!1,set:d,get:e})}function n(a){return r[a]=r[a]||Object.getPrototypeOf(document.createElement(a)),r[a]}function o(a,b,c){switch(c){case"sync":case"set":return p(b,a);default:return a}}function p(a,b){return function(){a.apply(this,arguments),b.apply(this,arguments)}}var q={extend:!0,properties:!0,events:!0,_elements:!0,name:!0,tagName:!0,baseTagName:!0,className:!0},r={};Coral.register=function(a){a.extend&&!a.extend.prototype._methods&&(a.extend=Coral.Component);var b=a.extend||Coral.Component,c=b.prototype,d=c,e=a.properties?Coral.commons.extend({},a.properties):{};a.baseTagName&&(d=n(a.baseTagName));var f=Object.create(d);if(f._proto=c,a.baseTagName){for(var h=[],i=c;i&&i._methods;)h.unshift(i),i=i._proto;for(;i=h.shift();)for(var j in i._methods)f[j]=i[j]}f._attributes=Coral.commons.extend({},c._attributes),f._properties={},f._events=Coral.commons.extend({},c._events,a.events),f._elements=Coral.commons.extend({},c._elements,a._elements),f._componentName=a.name,f._className=a.className;var k=f._methods={};for(var m in a)q[m]||(f[m]=k[m]=a[m]);a.mixins&&Coral.commons.mixin(f,a.mixins,{properties:e}),Coral.commons.augment(f._properties,c._properties,e,function(a,b,c){if(!b)return null;if(b.override===!0)return b;var d=Coral.commons.augment({},b,a,o);return g(f,c,d),e[c]=void 0,d});for(var p in f._properties)f._properties[p]||delete f._properties[p];a.baseTagName?l(f,f._properties):l(f,e);var r={prototype:f};a.baseTagName&&(r["extends"]=a.baseTagName);var s=document.registerElement(a.tagName,r);return Coral.commons.setSubProperty(Coral,a.name,s),s},Coral.register.defineProperties=l,Coral.register.defineProperty=m,Coral.register.augmentProperties=function(a,b,c){Coral.commons.augment(a,b,function(a,b,d){if(a.override===!0)return a;var e=Coral.commons.augment({},a,b,c||o);return e})}}(),Coral.mixin=Coral.mixin||{},function(){"use strict";function a(a){if(a.keyCode===j.escape)return!0;var b=a.target,c=b.tagName,d=b.isContentEditable,e=m[c];return!d&&!e}function b(a){a=a.toLowerCase();var b=j[a]||f[a];if(!b&&a.length>1)throw new Error("Coral.Keys: Key "+a+" not recognized");return b||a.toUpperCase().charCodeAt(0)}function c(a){return i[a]||a}function d(a){return a.toString().split("+").map(b).sort().join("+")}function e(b,i){function j(a){clearTimeout(C),C=setTimeout(u,Coral.Keys.sequenceTime);var b=c(a.keyCode);g[b]||(A.indexOf(b)===-1&&(A.push(b),m(a)),p.call(this,a),a.metaKey&&v(),a.target.parentNode||v())}function m(a){for(var b=[],c=0;c<h.length;c++){var d=h[c];a[d]&&b.push(f[d.slice(0,-3)])}B=A.concat(b).sort().join("+")}function n(a){var b=c(a.keyCode);if(g[b])return void v();var d=A.indexOf(b);d!==-1&&(A.splice(d,1),m(a),p.call(this,a,!0))}function o(){var a=[];return z.forEach(function(b){b.parts[b.currentPart]===B?b.currentPart++:b.currentPart=0,b.currentPart===b.parts.length&&(a.push(b),b.currentPart=0)}),a}function p(a,b){if(B&&F(a)){var c,d=a.target||a.srcElement,e="[object Window]"===Object.prototype.toString.call(this)?this.document:this,f=[],g=y[B];if(b||(c=o()),g&&g.length&&(f=f.concat(g)),c&&c.length&&(f=f.concat(c)),f&&f.length){for(var h=0;h<f.length;h++){var i=f[h];if(i.selector){var j,k="";if(i.needsContext&&(e.id=e.id||Coral.commons.getUID(),k="#"+e.id+" "),j=Array.prototype.indexOf.call(e.querySelectorAll(k+i.selector),d)>=0,!j)continue}void 0!==typeof i.data&&(a.data=i.data),a.matchedTarget=d,a.keys=i.originalString,i.listener.call(E||e,a)}G&&a.preventDefault(),H&&a.stopPropagation()}}}function q(a,b,c,e){if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(var f in a)this.on(f,b,c,a[f]);return this}if("undefined"==typeof c&&"undefined"==typeof e?(e=b,c=b=void 0):"undefined"==typeof e&&("string"==typeof b?(e=c,c=void 0):(e=c,c=b,b=void 0)),"function"!=typeof e)throw new Error("Coral.Keys: Cannot add listener of type "+typeof e);var g,h=k.exec(a);h&&(a=h[1],g=h[2]);var i=!!b&&l.test(b);if(a.toString().indexOf("-")!==-1){var j=r(a);z.push({originalString:a,currentPart:0,parts:j,needsContext:i,selector:b,listener:e,data:c,namespace:g})}else{var m=a.toString();a=d(a);var n=y[a]=y[a]||[];n.push({originalString:m,needsContext:!!b&&l.test(b),selector:b,listener:e,data:c,namespace:g})}return this}function r(a){return a.toString().split("-").map(d)}function s(a,b,c,d){var e,f=y[a];if(f&&f.length)if("undefined"==typeof c&&"undefined"==typeof d&&"undefined"==typeof b)f.length=0;else if("undefined"==typeof d)for(e=0;e<f.length;e++)f[e].selector===c&&f[e].namespace===b&&(f.splice(e,1),e--);else for(e=0;e<f.length;e++)f[e].listener===d&&f[e].selector===c&&f[e].namespace===b&&(f.splice(e,1),e--)}function t(a,b,c){"undefined"==typeof c&&(c=b,b=void 0);var e,f,g=k.exec(a);if(g&&(a=g[1],f=g[2]),""===a&&void 0!==f){for(a in y)s(a,f,b,c);for(e=0;e<z.length;e++)z[e].namespace===f&&(z.splice(e,1),e--);return this}if(a.indexOf("-")!==-1)for(e=0;e<z.length;e++)void 0!==a&&z[e].originalString!==a||void 0!==c&&z[e].listener!==c||void 0!==b&&z[e].selector!==b||void 0!==f&&z[e].namespace!==f||(z.splice(e,1),e--);else a=d(a),s(a,f,b,c);return this}function u(){clearTimeout(C),z.forEach(function(a){a.currentPart=0})}function v(){return A=[],B="",this}function w(a){return a||(A=[],B="",y={},z=[],D.addEventListener("keydown",j)),x(!0),window.addEventListener("keyup",n,!0),window.addEventListener("focus",v),this}function x(a){return a||(y=null,A=null,B=null,D.removeEventListener("keydown",j)),window.removeEventListener("keyup",n,!0),window.removeEventListener("focus",v),this}if(i=i||{},"undefined"==typeof b)throw new Error("Coral.Keys: Cannot create a combo handler for "+b);var y,z,A,B,C,D="string"==typeof b?document.querySelector(b):b,E=i.context,F=i.filter||a,G=i.preventDefault||!1,H=i.stopPropagation||!1;return this instanceof e&&w(),{on:q,off:t,reset:v,init:w,destroy:x}}var f={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91,meta:91},g={16:!0,17:!0,18:!0,91:!0},h=["shiftKey","ctrlKey","altKey","metaKey"],i={96:48,97:49,98:50,99:51,100:52,101:53,102:54,103:55,104:56,105:57},j={backspace:8,tab:9,"return":13,enter:13,pause:19,capslock:20,esc:27,escape:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,del:46,"delete":46,";":186,"=":187,"*":106,plus:107,minus:189,".":190,period:190,"/":191,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,f13:124,f14:125,f15:126,f16:127,f17:128,f18:129,f19:130,numlock:144,scroll:145,",":188,"`":192,"[":219,"\\":220,"]":221,"'":222},k=/(.*?)(\..+)$/,l=/^[\x20\t\r\n\f]*[>+~]/,m={INPUT:!0,SELECT:!0,TEXTAREA:!0};Coral.Keys=e,Coral.Keys.filterInputs=a,Coral.Keys.keyToCode=b,Coral.Keys.sequenceTime=1500,Coral.keys=new Coral.Keys(document.documentElement,{stopPropagation:!0,preventDefault:!0})}(),function(){"use strict";var a={en:"en-US","en-us":"en-US",cs:"cs-CZ","cs-cz":"cs-CZ",da:"da-DK","da-dk":"da-DK",de:"de-DE","de-de":"de-DE",es:"es-ES","es-es":"es-ES",fi:"fi-FI","fi-fi":"fi-FI",fr:"fr-FR","fr-fr":"fr-FR",it:"it-IT","it-it":"it-IT",ja:"ja-JP","ja-jp":"ja-JP",ko:"ko-KR","ko-kr":"ko-KR",nb:"nb-NO","nb-no":"nb-NO",nl:"nl-NL","nl-nl":"nl-NL",pl:"pl-PL","pl-pl":"pl-PL",pt:"pt-BR","pt-br":"pt-BR",ru:"ru-RU","ru-ru":"ru-RU",sv:"sv-SE","sv-se":"sv-SE",tr:"tr-TR","tr-tr":"tr-TR","zh-cn":"zh-CN","zh-hans-cn":"zh-CN","zh-hans":"zh-CN","zh-tw":"zh-TW","zh-hant-tw":"zh-TW","zh-hant":"zh-TW"},b=function(a){a=a||{},a.locale&&(this._locale=a.locale)};b.prototype._locale="en-US",Object.defineProperty(b.prototype,"locale",{set:function(a){this._locale=a},get:function(){return this._locale}}),b.prototype._evaluate=/(\{.+?\})/g,b.prototype.set=function(){Coral.strings.generic[this._locale]=Coral.strings.generic[this._locale]||{};var a,b,c;if(0===arguments.length)return"";if(1===arguments.length){if(!arguments[0])throw new Error("Coral.i18n.set: Single argument must be an array of arrays of key/value/(translation hint).");if("object"!=typeof arguments[0]||"object"!=typeof arguments[0][0])throw new Error("Coral.i18n.set: Single argument must be an array of key-value pairs.");for(var d=0;d<arguments[0].length;d++)a=arguments[0][d][0],b=arguments[0][d][1],c=arguments[0][d][2],c&&(a=a+"/[translation hint:"+c.replace(/&period;/g,".")+"]"),Coral.strings.generic[this._locale][a]=b}else if(2===arguments.length){if("string"!=typeof arguments[0]||!arguments[0]||"string"!=typeof arguments[1]||!arguments[1])throw new Error("Coral.i18n.set: Both arguments must be non-empty string values.");
a=arguments[0],b=arguments[1],Coral.strings.generic[this._locale][a]=b}else{if(3!==arguments.length)throw new Error("Coral.i18n.set: Too many arguments provided.");if("string"!=typeof arguments[0]||"string"!=typeof arguments[1]||"string"!=typeof arguments[2])throw new Error("Coral.i18n.set: All arguments must be of string type.");a=arguments[0],b=arguments[1],c=arguments[2],"null"!==c&&(a=a+"/[translation hint:"+c.replace(/&period;/g,".")+"]"),Coral.strings.generic[this._locale][a]=b}return this},b.prototype.get=function(){if(0===arguments.length)return"";var a,b=arguments[0].replace(".","&period;"),c=b.match(this._evaluate),d=c?c.length:0,e="",f={},g=0;if(null!==arguments[1]&&"object"==typeof arguments[1]){f=arguments[1];var h="";for(a=0;a<c.length;a++)if(h=c[a].slice(1).slice(0,-1),null===f[h]||"undefined"==typeof f[h])throw new Error('Coral.i18n.get: Named key "'+h+'" not present in provided object.');"string"==typeof arguments[2]&&(e=arguments[2])}else{if(g=arguments.length-1,g===d+1)e=arguments[arguments.length-1];else if(g!==d)throw new Error("Coral.i18n.get: Number of variable placeholders ("+d+") does not match number of variables ("+g+").");for(a=0;a<g;a++)f[a]=arguments[a+1]}e&&(b=b+"/[translation hint:"+e+"]");var i=b;for(var j in Coral.strings)"undefined"!=typeof Coral.strings[j]&&"undefined"!=typeof Coral.strings[j][this._locale]&&(i=Coral.strings[j][this._locale][b]||i);return 0===d?i:i.replace(this._evaluate,function(a){return a=a.slice(1).slice(0,-1),f[a]})};var c=document.documentElement.lang.toLowerCase(),d=a[c]||"en-US";Coral.i18n=new b({locale:d})}(),function(){"use strict";function a(a,b,c){if("function"==typeof c)return c;if("string"==typeof c){if(!a[c])throw new Error("Coral.Component: Unable to add "+b+" listener for "+a.toString()+", method "+c+" not found");var d=a[c];if("function"!=typeof d)throw new Error("Coral.Component: Unable to add "+b+" listener for "+a.toString()+", listener is a "+typeof d+" but should be a function");return d}if(c)throw new Error("Coral.Component: Unable to add "+b+" listener for "+a.toString()+", "+c+" is neither a method name or a function");return null}var b=/^(\S+)\s*(.*)$/,c=Node.ELEMENT_NODE;Coral.Component=function(){throw new Error("Coral.Component is not meant to be invoked directly. Inherit from its prototype instead.")},Coral.Component.prototype=Object.create(HTMLElement.prototype),Coral.Component.prototype._properties={},Coral.Component.prototype.toString=function(){return"Coral."+this._componentName},Coral.Component.prototype._events={},Coral.Component.prototype.createdCallback=function(){this.toString!==Coral.Component.prototype.toString&&(this.toString=Coral.Component.prototype.toString),this._setProps={},this._syncQueue=[],this._syncDOM=this._syncDOM.bind(this),this._vent=new Vent(this),this._className&&this.classList.add.apply(this.classList,this._className.split(" ")),this._elements={},"function"==typeof this._render&&this._render();var a,b,c,d,e;this._contentZones={};var f={};for(a in this._properties)d=this._properties[a],d.contentZone&&(this._contentZones[d.tagName]&&console.warn('Coral.Component: content zone for "%s" is already defined',d.tagName),this._contentZones[d.tagName]=a),b=d.attribute||a,f[a]=this.getAttribute(b);for(a in this._properties){if(d=this._properties[a],e=d._methods,c=f[a],null!==c&&(e.attributeTransform&&(c=e.attributeTransform.call(this,c,d["default"])),d.transform&&(c=e.transform.call(this,c,d["default"])),e.validate))for(var g=0;g<e.validate.length;g++)if(!e.validate[g].call(this,c)){c=null;break}if(null===c){if(this._setProps[a])continue;if(c="function"==typeof d["default"]?d["default"].call(this):d["default"],"undefined"==typeof c)continue}this.set(a,c,!0)}this._delegateEvents(),"function"==typeof this._initialize&&this._initialize(),Object.keys(this._contentZones).length&&(this._observer=new MutationObserver(this._handleContentZones.bind(this)),this._observer.observe(this,{childList:!0,subtree:!1})),this._componentReady=!0},Coral.Component.prototype._handleContentZones=function(a){for(var b,d,e,f,g,h,i=0,j=a.length;i<j;i++){b=a[i],d=b.addedNodes,e=b.removedNodes;for(var k=0,l=e.length;k<l;k++)f=e[k],f.nodeType===c&&(g=f.tagName.toLowerCase(),h=this._contentZones[g],h&&this[h]===f&&null===f.parentNode&&(this[h]=void 0));for(var m=0,n=d.length;m<n;m++)f=d[m],f.nodeType===c&&(g=f.tagName.toLowerCase(),h=this._contentZones[g],h&&this[h]!==f&&(this[h]=f))}},Coral.Component.prototype._filterKeys=function(){return!0},Coral.Component.prototype.attachedCallback=function(){this.trigger("coral-component:attached"),this._delegateGlobalEvents()},Coral.Component.prototype.detachedCallback=function(){this.trigger("coral-component:detached"),this._undelegateGlobalEvents()},Coral.Component.prototype.attributeChangedCallback=function(a,b,c){var d=this._attributes[a]||a,e=this._properties[d];if("undefined"!=typeof e){if(null===e.attribute)return;["attributeTransform","transform"].forEach(function(a){var b=e._methods[a];b&&(c=b.call(this,c,e["default"]))},this),c!==this[d]&&(this[d]=c)}this._properties["_"+d]&&this._properties["_"+d].set.call(this,c)},Coral.Component.prototype._queueSync=function(){for(var a=0,b=arguments.length;a<b;a++){var c=arguments[a],d=this._syncQueue.indexOf(c);d!==-1&&this._syncQueue.splice(d,1),this._syncQueue.push(c)}this._syncPending||(Coral.commons.nextFrame(this._syncDOM),this._syncPending=!0)},Coral.Component.prototype._syncProp=function(a,b){var c=this._properties[a].sync;if(c?c.call(this):console.warn("Coral.Component: sync method for %s is not defined",a),!b){var d=this._syncQueue.indexOf(a);d!==-1&&this._syncQueue.splice(d,1)}},Coral.Component.prototype._syncDOM=function(){for(var a;a=this._syncQueue.shift();)this._syncProp(a,!0);this._syncPending=!1},Coral.Component.prototype._delegateEvents=function(){var c,d,e,f,g,h,i,j,k,l;for(e in this._events)if(f=this._events[e],c=e.match(b),d=c[1]+".CoralComponent",g=c[2],""===g&&(g=void 0),f=a(this,d,f)){if(f=f.bind(this),i=0===d.indexOf("global:"),i&&(d=d.substr(7)),l=0===d.indexOf("capture:"),l&&(d=d.substr(8)),j=0===d.indexOf("key:")){if(l)throw new Error("Coral.Keys does not currently support listening to key events with capture");d=d.substr(4)}if(k=0===d.indexOf("resize"),k&&l)throw new Error("Coral.commons.addResizeListener does not currently support listening to resize event with capture");if(i)j?(this._globalKeys=this._globalKeys||[],this._globalKeys.push({keyCombo:d,selector:g,listener:f})):(this._globalEvents=this._globalEvents||[],this._globalEvents.push({eventName:d,selector:g,listener:f,isCapture:l}));else if(j)this._keys=this._keys||new Coral.Keys(this,{filter:this._filterKeys,context:this}),this._keys.on(d,g,f);else if(k)if(g){h=document.querySelectorAll(g);for(var m=0;m<h.length;++m)Coral.commons.addResizeListener(h[m],f)}else Coral.commons.addResizeListener(this,f);else this._vent.on(d,g,f,l)}},Coral.Component.prototype._undelegateGlobalEvents=function(){var a;if(this._globalEvents)for(a=0;a<this._globalEvents.length;a++){var b=this._globalEvents[a];Coral.events.off(b.eventName,b.selector,b.listener,b.isCapture)}if(this._globalKeys)for(a=0;a<this._globalKeys.length;a++){var c=this._globalKeys[a];Coral.keys.off(c.keyCombo,c.selector,c.listener)}return this._keys&&this._keys.destroy(!0),this},Coral.Component.prototype._delegateGlobalEvents=function(){var a;if(this._globalEvents)for(a=0;a<this._globalEvents.length;a++){var b=this._globalEvents[a];Coral.events.on(b.eventName,b.selector,b.listener,b.isCapture)}if(this._globalKeys)for(a=0;a<this._globalKeys.length;a++){var c=this._globalKeys[a];Coral.keys.on(c.keyCombo,c.selector,c.listener)}return this._keys&&this._keys.init(!0),this},Coral.Component.prototype.on=function(a,b,c,d){return this._vent.on(a,b,c,d),this},Coral.Component.prototype.off=function(a,b,c,d){return this._vent.off(a,b,c,d),this},Coral.Component.prototype.trigger=function(a,b,c,d){c=c||void 0===c,d=d||void 0===d;var e=new CustomEvent(a,{bubbles:c,cancelable:d,detail:b}),f=!1;try{f=!this.dispatchEvent(e)}catch(g){}if(f!==e.defaultPrevented){var h=Object.create(e);return Object.defineProperty(h,"defaultPrevented",{value:f}),h}return e},Coral.Component.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)},Coral.Component.prototype._doSet=function(a,b,c){var d=this._properties&&this._properties[a];d?!d.contentZone||b instanceof HTMLElement||!this[a].set?d.contentZone&&!(b instanceof HTMLElement)&&"object"==typeof b&&this[a]instanceof HTMLElement?Object.keys(b).forEach(function(a){this[a]=b[a]},this[a]):d._methods&&d._methods.set?d._methods.set.call(this,b,!!c):this[a]=b:this[a].set(b):this[a]=b},Coral.Component.prototype.set=function(a,b,c){var d,e,f;if("string"==typeof a)d=a,f=b,this._doSet(d,f,c);else{e=a,c=b;for(d in e)f=e[d],this._doSet(d,f,c)}return this},Coral.Component.prototype.get=function(a){return this[a]},Coral.Component.prototype.show=function(){return this.hidden?(this.hidden=!1,this):this},Coral.Component.prototype.hide=function(){return this.hidden?this:(this.hidden=!0,this)},Coral.Component.prototype._methods={};for(var d in Coral.Component.prototype)Coral.Component.prototype.hasOwnProperty(d)&&(Coral.Component.prototype._methods[d]=Coral.Component.prototype[d])}(),function(){"use strict";function a(a,b){return b?b+'[is="'+a+'"]':a}function b(a){for(var b=[],c=0,d=b.length=a.length;c<d;c++)b[c]=a[c];return b}function c(a,b){return"function"!=typeof b||b(a)}var d=0,e="coral-collection-id-",f=":scope > ";Coral.Collection=function(b){b=b||{},this._id=d++,this._host=b.host,this._itemTagName=b.itemTagName,this._itemBaseTagName=b.itemBaseTagName,this._itemSelector=b.itemSelector||a(this._itemTagName,this._itemBaseTagName),this._container=b.container||this._host,this._filter=b.filter,this._handleItems=!1,this._itemSelector&&0===this._itemSelector.indexOf(f)?(this._container.id=this._container.id||e+this._id,this._allItemsSelector=this._itemSelector.replace(f,"#"+this._container.id+" > "),this._itemSelector=this._itemSelector.replace(f,""),this._itemSelector===this._itemTagName&&(this._useItemTagName=this._itemSelector.toUpperCase())):(this._allItemsSelector=this._itemSelector,this._container&&this._allItemsSelector===this._itemTagName&&(this._liveCollection=!0,this._useItemTagName=this._allItemsSelector.toUpperCase())),this._onItemAdded=b.onItemAdded,this._onItemRemoved=b.onItemRemoved,this._onCollectionChange=b.onCollectionChange};var g={length:{get:function(){return this.getAll().length}}};Coral.Collection.prototype=Object.create(Object.prototype,g),Coral.Collection.prototype._properties=g,Coral.Collection.prototype.add=function(a,b){if(this._container&&this._itemTagName)return a instanceof HTMLElement||(a=this._itemBaseTagName?document.createElement(this._itemBaseTagName,this._itemTagName).set(a,!0):document.createElement(this._itemTagName).set(a,!0)),this._container.insertBefore(a,b||null),!this._handleItems&&"function"==typeof this._onItemAdded&&this._host&&c(a,this._filter)&&this._onItemAdded.call(this._host,a),a;throw new Error("Please provide host and itemTagName or override add() to provide your own implementation.")},Coral.Collection.prototype.clear=function(){for(var a=this.getAll(),b=[],c=a.length-1;c>-1;c--)b.push(this.remove(a[c]));return b},Coral.Collection.prototype.getAll=function(){if(this._container&&this._allItemsSelector){var a=b(this._liveCollection?this._container.getElementsByTagName(this._allItemsSelector):this._container.querySelectorAll(this._allItemsSelector));return this._filter&&(a=a.filter(this._filter)),a}throw new Error("Please provide host and itemTagName or override getAll() to provide your own implementation.")},Coral.Collection.prototype.remove=function(a){return a.parentNode&&(a.parentNode.removeChild(a),!this._handleItems&&"function"==typeof this._onItemRemoved&&this._host&&c(a,this._filter)&&this._onItemRemoved.call(this._host,a)),a},Coral.Collection.prototype.first=function(){return this.getAll()[0]||null},Coral.Collection.prototype.last=function(){var a=this.getAll();return a[a.length-1]||null},Coral.Collection.prototype._isPartOfCollection=function(a){return!(a instanceof Text)&&c(a,this._filter)&&(this._useItemTagName?this._useItemTagName===a.tagName:a.matches(this._itemSelector))},Coral.Collection.prototype._onItemAttached=function(a){"function"==typeof this._onItemAdded&&this._onItemAdded.call(this._host,a),this._host.trigger("coral-collection:add",{item:a})},Coral.Collection.prototype._onItemDetached=function(a){"function"==typeof this._onItemRemoved&&this._onItemRemoved.call(this._host,a),this._host.trigger("coral-collection:remove",{item:a})},Coral.Collection.prototype._startHandlingItems=function(a){if(!this._host||!this._container)throw new Error("Please provide options.host and/or options.container to enable handling the items.");this._observer=this._observer||new MutationObserver(this._handleMutation.bind(this)),this._handleItems=!0,Coral.commons.ready(this._container,function(){if(this._observer.observe(this._container,{childList:!0,subtree:!0}),a!==!0){var b,c=0;if("function"!=typeof this._onItemAdded&&"function"!=typeof this._onCollectionChange||(b=this.getAll(),c=b.length),"function"==typeof this._onItemAdded)for(var d=0;d<c;d++)this._onItemAdded.call(this._host,b[d]);c>0&&"function"==typeof this._onCollectionChange&&this._onCollectionChange.call(this._host,b,[])}}.bind(this))},Coral.Collection.prototype._stopHandlingItems=function(){this._observer&&this._observer.disconnect()},Coral.Collection.prototype._handleMutation=function(a){for(var b,c,d,e,f,g,h=a.length,i=[],j=[],k=0,l=0;l<h;l++){b=a[l],d=b.addedNodes,e=d.length;for(var m=0;m<e;m++)c=d[m],this._isPartOfCollection(c)&&(k++,i.push(c),this._onItemAttached(c));f=b.removedNodes,g=f.length;for(var n=0;n<g;n++)c=f[n],this._isPartOfCollection(c)&&(k++,j.push(c),this._onItemDetached(c))}0!==k&&"function"==typeof this._onCollectionChange&&this._host&&this._onCollectionChange.call(this._host,i,j)}}(),function(){"use strict";function a(a){for(var b=[],c=0,d=b.length=a.length;c<d;c++)b[c]=a[c];return b}Coral.SelectableCollection=function(a){Coral.Collection.apply(this,arguments),this._filter&&console.warn("Coral.SelectableCollection does not support the options.filter"),this._selectableItemSelector=this._itemSelector+":not([disabled])",this._selectedItemSelector=this._itemSelector+"[selected]",this._deselectAllExceptSelector=this._selectedItemSelector},Coral.SelectableCollection.prototype=Object.create(Coral.Collection.prototype),Coral.SelectableCollection.prototype._getFirstSelectable=function(){return this._host.querySelector(this._selectableItemSelector)||null},Coral.SelectableCollection.prototype._getLastSelectable=function(){var a=this._host.querySelectorAll(this._selectableItemSelector);return a[a.length-1]||null},Coral.SelectableCollection.prototype._getFirstSelected=function(a){var b=this._selectedItemSelector;return"string"==typeof a&&(b=b.replace("[selected]","["+a+"]")),this._host.querySelector(b)||null},Coral.SelectableCollection.prototype._getLastSelected=function(a){var b=this._selectedItemSelector;"string"==typeof a&&(b=b.replace("[selected]","["+a+"]"));var c=this._host.querySelectorAll(b);return c[c.length-1]||null},Coral.SelectableCollection.prototype._getAllSelected=function(b){var c=this._selectedItemSelector;return"string"==typeof b&&(c=c.replace("[selected]","["+b+"]")),a(this._host.querySelectorAll(c))},Coral.SelectableCollection.prototype._deselectAllExceptFirst=function(a){var b=this._deselectAllExceptSelector,c=a||"selected";"string"==typeof a&&(b=b.replace("[selected]","["+a+"]"));for(var d=this._host.querySelectorAll(b),e=d.length,f=1;f<e;f++)d[f].removeAttribute(c)},Coral.SelectableCollection.prototype._deselectAllExceptLast=function(a){var b=this._deselectAllExceptSelector,c=a||"selected";"string"==typeof a&&(b=b.replace("[selected]","["+a+"]"));for(var d=this._host.querySelectorAll(b),e=d.length-1,f=0;f<e;f++)d[f].removeAttribute(c)},Coral.SelectableCollection.prototype._deselectAllExcept=function(a,b){var c,d,e=this._deselectAllExceptSelector;"string"==typeof a?(c=null,d=a||"selected",e=e.replace("[selected]","["+d+"]")):(c=a,d=b||"selected","string"==typeof b&&(e=e.replace("[selected]","["+d+"]")));for(var f=this._host.querySelectorAll(e),g=f.length,h=0;h<g;h++)c!==f[h]&&f[h].removeAttribute(d)}}(),function(){"use strict";function a(){if(m&&m._isOpen){var a=u.some(function(a){if(a.backdrop)return!0});a?b():d();var c=u.top();c&&c.instance.trapFocus===q.ON&&c.instance._requestedBackdrop?c&&c.instance.trapFocus===q.ON&&c.instance._requestedBackdrop&&i():j()}}function b(){var a=u.top();if(a){for(var b=t.length-1;b>-1;b--)if(t[b].backdrop){m.style.zIndex=t[b].zIndex-1;break}g(a.instance)}}function c(){clearTimeout(n)}function d(){document.body.classList.remove("u-coral-noscroll"),Coral.commons.nextFrame(function(){m.classList.remove("is-open"),c(),n=setTimeout(function(){m.style.display="none"},Coral.mixin.overlay.FADETIME)}),m._isOpen=!1,h()}function e(a,b){document.body.classList.add("u-coral-noscroll"),m||(m=document.createElement("div"),m.className="coral3-Backdrop",document.body.appendChild(m),m.addEventListener("click",f)),m.style.zIndex=a-1,m._isOpen=!0,m.style.display="",Coral.commons.nextFrame(function(){m.classList.add("is-open"),c()}),g(b)}function f(a){u.forEach(function(b){"function"==typeof b.instance.backdropClickedCallback&&b.instance.backdropClickedCallback(a)})}function g(a){for(var b=document.body.children,c=0;c<b.length;c++){var d=b[c];if(d!==a&&!d.contains(a)){var e=d.getAttribute("aria-hidden");if(e){if(d._previousAriaHidden=d._previousAriaHidden||e,"true"===e)continue}else d._previousAriaHidden="false";d.setAttribute("aria-hidden","true")}}a.setAttribute("aria-hidden","false")}function h(){for(var a=document.body.children,b=0;b<a.length;b++){var c=a[b];c.setAttribute("aria-hidden",c._previousAriaHidden||"false")}}function i(){k?(document.body.firstElementChild!==k&&document.body.insertBefore(k,document.body.firstChild),document.body.lastElementChild!==l&&document.body.appendChild(l)):(k=document.createElement("div"),k.setAttribute("coral-tabcapture",""),k.tabIndex=0,document.body.insertBefore(k,document.body.firstChild),k.addEventListener("focus",function(a){var b=u.top();b&&b.instance.trapFocus===q.ON&&Array.prototype.some.call(b.instance.querySelectorAll(Coral.commons.TABBABLE_ELEMENT_SELECTOR),function(a){if(null!==a.offsetParent&&!a.hasAttribute("coral-tabcapture"))return a.focus(),!0})}),l=document.createElement("div"),l.setAttribute("coral-tabcapture",""),l.tabIndex=0,document.body.appendChild(l),l.addEventListener("focus",function(a){var b=u.top();if(b&&b.instance.trapFocus===q.ON){var c=Array.prototype.filter.call(b.instance.querySelectorAll(Coral.commons.TABBABLE_ELEMENT_SELECTOR),function(a){return null!==a.offsetParent&&!a.hasAttribute("coral-tabcapture")}).pop();c&&c.focus()}})),k.style.display="inline",l.style.display="inline"}function j(){k&&(k.style.display="none",l.style.display="none")}var k,l,m,n,o=1e4,p=9,q={ON:"on",OFF:"off"},r={ON:"on",OFF:"off"},s={ON:"on",OFF:"off"},t=[],u={pop:function(a){var b=this.indexOf(a);if(b===-1)return null;var c=t[b];return t.splice(b,1),c},push:function(a){var c=this.pop(a)||{instance:a},d=this.getHighestZIndex()+10;return c.zIndex=d,a.style.zIndex=d,t.push(c),c.backdrop&&b(),c},indexOf:function(a){for(var b=0;b<t.length;b++)if(t[b].instance===a)return b;return-1},get:function(a){var b=this.indexOf(a);return b===-1?null:t[b]},top:function(){var a=t.length;return 0===a?null:t[a-1]},getHighestZIndex:function(){var a=this.top();return a?a.zIndex:o},some:function(){return t.some.apply(t,arguments)},forEach:function(){return t.forEach.apply(t,arguments)}},v={trapFocus:{attribute:"trapfocus","default":q.OFF,validate:Coral.validate.enumeration(q),set:function(a){a===q.ON?(this.tabIndex<0&&(this.tabIndex=0),this._elements.topTabCapture=document.createElement("div"),this._elements.topTabCapture.setAttribute("coral-tabcapture","top"),this._elements.topTabCapture.tabIndex=0,this.insertBefore(this._elements.topTabCapture,this.firstElementChild),this._elements.intermediateTabCapture=document.createElement("div"),this._elements.intermediateTabCapture.setAttribute("coral-tabcapture","intermediate"),this._elements.intermediateTabCapture.tabIndex=0,this.appendChild(this._elements.intermediateTabCapture),this._elements.bottomTabCapture=document.createElement("div"),this._elements.bottomTabCapture.setAttribute("coral-tabcapture","bottom"),this._elements.bottomTabCapture.tabIndex=0,this.appendChild(this._elements.bottomTabCapture),this._handleTabCaptureFocus=this._handleTabCaptureFocus.bind(this),this._handleRootKeypress=this._handleRootKeypress.bind(this),this._vent.on("keydown",this._handleRootKeypress),this._vent.on("focus","[coral-tabcapture]",this._handleTabCaptureFocus)):this.trapFocus===q.ON&&(this.removeChild(this._elements.topTabCapture),this.removeChild(this._elements.intermediateTabCapture),this.removeChild(this._elements.bottomTabCapture),this._elements.topTabCapture=null,this._elements.intermediateTabCapture=null,this._elements.bottomTabCaptureEl=null,this._vent.off("keydown",this._handleRootKeypress),this._vent.off("focus","[coral-tabcapture]",this._handleTabCaptureFocus)),this._trapFocus=a}},returnFocus:{attribute:"returnfocus","default":r.OFF,validate:Coral.validate.enumeration(r)},focusOnShow:{attribute:"focusonshow","default":s.ON,validate:[Coral.validate.valueMustChange,function(a){return"string"==typeof a||a instanceof HTMLElement}]},open:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,triggerBefore:function(a,b){return this.trigger(a?"coral-overlay:beforeopen":"coral-overlay:beforeclose")},set:function(a,b){this._open=a,this._openSilently=!!b,this.open?this.setAttribute("aria-hidden","false"):this.setAttribute("aria-hidden","true"),this.parentNode&&(this.open?(this._pushOverlay(),this.returnFocus===r.ON&&(this._elementToFocusWhenHidden=this._elementToFocusWhenHidden||this._returnFocusToElement||(document.activeElement===document.body?null:document.activeElement))):this._popOverlay())},sync:function(){var a=this;this.open?(this.trapFocus===q.ON&&(this._elements.topTabCapture===this.firstElementChild&&this._elements.bottomTabCapture===this.lastElementChild&&this._elements.bottomTabCapture.previousElementSibling===this._elements.intermediateTabCapture||(this.insertBefore(this._elements.intermediateTabCapture,this.firstElementChild),this.appendChild(this._elements.intermediateTabCapture),this.appendChild(this._elements.bottomTabCapture))),this.style.display="block",Coral.commons.nextFrame(function(){a.classList.add("is-open");var b=function(){a.open&&(a._handleFocus(),a._openSilently||a.trigger("coral-overlay:open"))};a._overlayAnimationTime?Coral.commons.transitionEnd(a,b):b()})):Coral.commons.nextFrame(function(){a.classList.remove("is-open");var b=function(){a.open||(a.style.display="none",a._handleReturnFocus(),a._openSilently||a.trigger("coral-overlay:close"))};a._overlayAnimationTime?Coral.commons.transitionEnd(a,b):b()})}}},w={detachedCallback:function(){this.open&&(this._popOverlay(),this._requestedBackdrop&&(this._showBackdropOnAttached=!0))},attachedCallback:function(){this.open&&(this._pushOverlay(),this._showBackdropOnAttached&&this._showBackdrop())},show:function(){return this.open=!0,this},hide:function(){return this.open=!1,this},returnFocusTo:function(a){if(this.returnFocus===r.OFF&&(this.returnFocus=r.ON),null===a.offsetParent||!a.matches(Coral.commons.FOCUSABLE_ELEMENT_SELECTOR)){a.setAttribute("tabindex",-1);var b=new Vent(a);b.on("blur.afterFocus",function(a){Coral.commons.nextFrame(function(){var c=u.top();c&&c.instance.contains(document.activeElement)||(b.off("blur.afterFocus"),a.matchedTarget.removeAttribute("tabindex"))})},!0)}return this._returnFocusToElement=a,this},_isTopOverlay:function(){var a=u.top();return a&&a.instance===this},_pushOverlay:function(){u.push(this)},_popOverlay:function(){u.pop(this),a()},_showBackdrop:function(){var a=u.get(this);a&&(a.backdrop=!0,e(a.zIndex,this)),this._requestedBackdrop=!0,this.parentNode||(this._showBackdropOnAttached=!0),this.trapFocus===q.ON&&i()},_hideBackdrop:function(){var b=u.get(this);b&&(b.backdrop=!1,a()),this._requestedBackdrop=!1},_handleRootKeypress:function(a){a.target===this&&a.keyCode===p&&(this._focusOn("first"),a.preventDefault())},_handleTabCaptureFocus:function(a){if(this._ignoreTabCapture)return void(this._ignoreTabCapture=!1);var b=a.target,c=b===this._elements.intermediateTabCapture?"first":"last";this._focusOn(c)},_handleFocus:function(){if(this.focusOnShow===s.ON)this._focusOn("first");else if(this.focusOnShow instanceof HTMLElement)this.focusOnShow.focus();else if("string"==typeof this.focusOnShow&&this.focusOnShow!==s.OFF){var a=this.querySelector(this.focusOnShow+":not([coral-tabcapture])");a?a.focus():this._focusOn("first")}},_handleReturnFocus:function(){if(this.returnFocus===r.ON&&this._elementToFocusWhenHidden){if(document.activeElement&&!this.contains(document.activeElement))return;this._elementToFocusWhenHidden._ignoreTabCapture=!0,this._elementToFocusWhenHidden.focus(),this._elementToFocusWhenHidden._ignoreTabCapture=!1,this._elementToFocusWhenHidden=null}},_focusOn:function(a){var b;"first"!==a&&"last"!==a||(b=Array.prototype.filter.call(this.querySelectorAll(Coral.commons.TABBABLE_ELEMENT_SELECTOR),function(a){return null!==a.offsetParent&&!a.hasAttribute("coral-tabcapture")})["first"===a?"shift":"pop"]()),b?b.focus():this.focus()}};Coral.mixin.overlay=function(a,b){Coral.register.augmentProperties(b.properties,v),Coral.commons.augment(a,w,function(a,b,c){return"hide"===c||"show"===c?b:Coral.commons.callAll(b,a)})},Coral.mixin.overlay.prototype=w,Coral.mixin.overlay.FADETIME=350,Coral.mixin.overlay.trapFocus=q,Coral.mixin.overlay.returnFocus=r,Coral.mixin.overlay.focusOnShow=s}(),function(){"use strict";function a(a,b){return b?b+'[is="'+a+'"]':a}var b=function(b){var c=b.itemTagName,d=b.itemBaseTagName,e=b.itemSelectors||[a(c,d)],f=e.join(","),g={};return g["coral-component:attached "+f]="_onItemAttached",g},c=function(b){var c=b.itemTagName,d=b.itemBaseTagName,e=b.itemSelectors||[a(c,d)],f=e.join(","),g="undefined"==typeof b.supportMultiple||b.supportMultiple,h=b.containerSelector,i={selectedItem:{get:function(){return this.multiple?this.items.getFirstSelected():this.items.getLastSelected()},set:function(){}},selectedItems:{get:function(){return this.items.getSelected()},set:function(){}},items:{get:function(){if(!this._items){var a=this.querySelector(h),b={itemTagName:c,itemBaseTag:d,itemSelector:f,container:a};this._items=this._constructCollection(b)}return this._items},set:function(){}},multiple:{"default":!1,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){this.setAttribute("aria-multiselectable",this.multiple),this._mutateSelection(function(){this.multiple||this.items.deselectAllExceptLast()})}}};return g||(delete i.selectedItems,i.multiple.get=function(){return!1},i.multiple.set=function(){}),i},d=function(b){var c=b.itemTagName,d=b.itemBaseTagName,e=b.itemSelectors||[a(c,d)],f=e.join(","),g=b.role||"listbox",h=b.tabIndex,i=b.allowSingleModeDeselect,j=b.forceSelection;return{_onItemAttached:function(a){var b=a.target;b.matches(f)&&b.closest(this.tagName.toLowerCase())===this&&(this._boundOnItemDetached||(this._boundOnItemDetached=this._onItemDetached.bind(this)),b.on("coral-component:detached",this._boundOnItemDetached),this._validateSelection(),this.trigger("coral-collection:add",{item:b}))},_onItemDetached:function(a){var b=a.target;b===a.currentTarget&&(b.off("coral-component:detached",this._boundOnItemDetached),b.selected&&(this._oldSelection=this._getSelection(),this._validateSelection(b)),this.trigger("coral-collection:remove",{item:b}))},_selectItem:function(a){a.disabled||this._mutateSelection(function(){i||this.multiple?a.selected=!a.selected:a.selected=!0})},_onItemSelected:function(a){this._mutateSelection(function(){this.multiple||this.items.deselectAllExcept(a)})},_onItemDeselected:function(a){this._mutateSelection(function(){this._validateSelection(a)})},_initialize:function(){this.setAttribute("role",g),"undefined"!=typeof h&&this.setAttribute("tabindex",h),this._validateSelection(),this._oldSelection=this._getSelection()},attachedCallback:function(){this.multiple||this.items.deselectAllExceptLast()},_constructCollection:function(a){return a.host=this,new Coral.mixin.selectionList.Collection(a)},_mutateSelection:function(a){if(this._increaseMutationCounter(),a.call(this),this._decreaseMutationCounter(),0===this._mutatingSelection){var b=this._getSelection();this._selectionDiffersFromOldSelection(b)&&(this._onSelectionChange(b,this._oldSelection),this._oldSelection=b)}},_onSelectionChange:function(a,b){this.trigger(this.tagName.toLowerCase()+":change",{oldSelection:b,selection:a})},_selectionDiffersFromOldSelection:function(a){if(this._isEmptySelection(a)&&this._isEmptySelection(this._oldSelection))return!1;var b=Array.isArray(this._oldSelection),c=Array.isArray(a);if(b||c){if(b&&c){var d=this._oldSelection.filter(function(b){return a.indexOf(b)===-1});return this._oldSelection.length!==a.length||0!==d.length}return!0}return a!==this._oldSelection},_isEmptySelection:function(a){return null===a||"undefined"==typeof a||0===a.length},_getSelection:function(){return this.multiple?this.selectedItems:this.selectedItem},_validateSelection:function(a){if(j){var b=this.items.getSelected();if(0===b.length){var c=this.items.getNextSelectable(a);c&&c.setAttribute("selected",!0)}}},_increaseMutationCounter:function(){"undefined"==typeof this._mutatingSelection?this._mutatingSelection=1:this._mutatingSelection++},_decreaseMutationCounter:function(){this._mutatingSelection--}}};Coral.mixin.selectionList=function(a){return function(e,f){Coral.commons.augment(e,d(a),function(a,b,c){return Coral.commons.callAll(b,a)}),e._events=Coral.commons.augment({},e._events,b(a)),Coral.register.augmentProperties(f.properties,c(a))}}}(),function(){"use strict";function a(a,b){return b?b+'[is="'+a+'"]':a}var b=function(b){this._host=b.host,this._itemTagName=b.itemTagName,this._itemBaseTag=b.itemBaseTag,this._itemSelector=b.itemSelector||a(this._itemTagName,this._itemBaseTag),this._host.id=this._host.id||Coral.commons.getUID(),this._nonNestedItemSelector="#"+this._host.id+" "+this._host.tagName.toLowerCase()+" "+this._itemSelector,this._container=b.container||this._host};b.prototype=Object.create(Coral.Collection.prototype),b.prototype.createElement=function(a,b){return b?document.createElement(b,a):document.createElement(a)},b.prototype.add=function(a,b){var c;a instanceof HTMLElement||(c=a,a=this.createElement(this._itemTagName,this._itemBaseTag,a));var d=c&&c.selected;return c&&(delete c.selected,a.set(c,!0)),this._container.insertBefore(a,b||null),d&&(a.selected=d),a},b.prototype.getAll=function(){return this._getNonNestedItems()},b.prototype.getNextSelectable=function(a,b){var c=this._getSelectableItems(),d=c.indexOf(a);return d===-1?c[0]||null:b?d===c.length-1?c[0]:c[d+1]:d===c.length-1?a:c[d+1]},b.prototype.getPreviousSelectable=function(a,b){var c=this._getSelectableItems(),d=c.indexOf(a);return d===-1?c[0]||null:b?0===d?c[c.length-1]||null:c[d-1]:0===d?a:c[d-1]},b.prototype.getFirstSelectable=function(){return this._getSelectableItems()[0]||null},b.prototype.getLastSelectable=function(){return this._getSelectableItems().pop()||null},b.prototype.getSelected=function(){return this._getSelectedItems()},b.prototype.getFirstSelected=function(){return this._getSelectedItems()[0]||null},b.prototype.getLastSelected=function(){return this._getSelectedItems().pop()||null},b.prototype.deselectAll=function(){this._getNonNestedItems().filter(function(a){return a.hasAttribute("selected")}).forEach(function(a){a.removeAttribute("selected")})},b.prototype.deselectAllExcept=function(a){
this._getNonNestedItems().filter(function(a){return a.hasAttribute("selected")}).forEach(function(b){b!==a&&b.removeAttribute("selected")})},b.prototype.deselectAllExceptLast=function(){this._getNonNestedItems().filter(function(a){return a.hasAttribute("selected")}).slice(0,-1).forEach(function(a){a.removeAttribute("selected")})},b.prototype._getNonNestedItems=function(){var a=Array.prototype.slice.call(this._host.querySelectorAll(this._nonNestedItemSelector)),b=Array.prototype.slice.call(this._host.querySelectorAll(this._itemSelector));return b.filter(function(b){return a.indexOf(b)===-1})},b.prototype._getSelectableItems=function(){return this._getNonNestedItems().filter(function(a){return!(a.hasAttribute("disabled")||a.hasAttribute("hidden"))})},b.prototype._getSelectedItems=function(){return this._getNonNestedItems().filter(function(a){return a.hasAttribute("selected")&&!a.hasAttribute("disabled")})},Coral.mixin.selectionList.Collection=b}(),function(){"use strict";var a=function(a){var b=a.alwaysEnabled,c={selected:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,validate:[Coral.validate.valueMustChange,function(a){return!a||!this.disabled}],trigger:function(a,b){var c=this._getSelectionList();if(c){var d=a?c._onItemSelected:c._onItemDeselected;d&&"[object Function]"===Object.prototype.toString.call(d)&&d.call(c,this)}return!1},set:function(a,b){this._selected=a},sync:function(){this.classList.toggle("is-selected",this.selected),this.setAttribute("aria-selected",this.selected)}},disabled:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,set:function(a,b){this._disabled=a,this.selected&&a&&(this.selected=!1)},sync:function(){this.classList.toggle("is-disabled",this.disabled),this.setAttribute("aria-disabled",this.disabled)}}};return b&&delete c.disabled,c},b=function(a){var b=a.role||"option",c=a.tabIndex,d=a.listSelector;return{_initialize:function(){this.setAttribute("role",b),"undefined"!=typeof c&&this.setAttribute("tabindex",c)},_getSelectionList:function(){return this.closest(d)}}};Coral.mixin.selectionList.Item=function(c){return function(d,e){Coral.commons.augment(d,b(c),function(a,b,c){return Coral.commons.callAll(b,a)}),Coral.register.augmentProperties(e.properties,a(c))}}}(),function(){"use strict";var a="button,input:not([type=hidden]),keygen,meter,output,progress,select,textarea";(navigator.userAgent.indexOf("MSIE")!==-1||navigator.appVersion.indexOf("Trident/")>0)&&(a="button,keygen,meter,output,progress,select,textarea,",["text","password","submit","reset","radio","checkbox","button","color","date","datetime-local","email","month","number","range","search","tel","time","url","week"].forEach(function(b){a+='input[type="'+b+'"],'}),a=a.slice(0,-1));var b="input:not([type=hidden])",c={disabled:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){this.setAttribute("aria-disabled",this.disabled)}},invalid:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){this.setAttribute("aria-invalid",this.invalid)}},name:{"default":"",reflectAttribute:!0,transform:Coral.transform.string},readOnly:{"default":!1,reflectAttribute:!0,attribute:"readonly",transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){this.setAttribute("aria-readonly",this.readOnly)}},required:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){this.setAttribute("aria-required",this.required)}},value:{"default":"",transform:Coral.transform.string},labelledBy:{attribute:"labelledby",transform:Coral.transform.string,get:function(){return this._getLabellableElement().getAttribute("aria-labelledby")},set:function(b){var c=this._getLabellableElement(),d=c.id=c.id||Coral.commons.getUID(),e=c.getAttribute("aria-labelledby");e&&e!==b&&this._updateForAttributes(e,d,!0),b?(c.setAttribute("aria-labelledby",b),c.matches(a)&&this._updateForAttributes(b,d)):c.removeAttribute("aria-labelledby")}}},d={_getLabellableElement:function(){var b=this.querySelector(a);return b||this},_getTargetChangeInput:function(){return this._targetChangeInput||(this._targetChangeInput=this._getLabellableElement().matches(b)?this._getLabellableElement():null)},_onInputChange:function(a){a.stopPropagation(),this[this._componentTargetProperty]=a.target[this._eventTargetProperty],this._triggerChangeEvent&&this.trigger("change")},_onFormReset:function(a){a.target.contains(this)&&this.reset()},_onTargetInputChange:function(a){var b=this._getTargetChangeInput();b!==a.target&&null!==b||this._onInputChange(a)},_updateForAttributes:function(a,b,c){var d=a.split(/\s+/);d.forEach(function(a){var d=document.getElementById(a);if(d&&"LABEL"===d.tagName){var e=d.getAttribute("for");c?e===b&&d.removeAttribute("for"):d.setAttribute("for",b)}})},clear:function(){this.value=""},reset:function(){this.value=Coral.transform.string(this.getAttribute("value"))}},e={"capture:change input":"_onTargetInputChange","global:reset":"_onFormReset"},f=["name","value"],g=["disabled","name","required","readOnly","value"],h={_componentTargetProperty:"value",_eventTargetProperty:"value",_triggerChangeEvent:!0};Coral.mixin.formField=function(a,b){Coral.commons.augment(a,d,function(a,b,c){return"reset"===c||"clear"===c||"_onTargetInputChange"===c||"_onInputChange"===c||"_getTargetChangeInput"===c||"_getLabellableElement"===c?a:Coral.commons.callAll(b,a)}),a._events=Coral.commons.augment({},a._events,e),Coral.commons.augment(a,h);for(var i,j={},k=!1,l=a;l;){if(l===HTMLInputElement.prototype||l===HTMLTextAreaElement.prototype){k=!0;break}l=Object.getPrototypeOf(l)}for(i in c)k&&g.indexOf(i)!==-1||(j[i]=c[i]);k||f.forEach(function(a){if(j[a]&&(!b.properties[a]||"function"!=typeof b.properties[a].set||"function"!=typeof b.properties[a].get))throw new Error("Coral.mixin.formField: You must implement properties."+a+".set() and properties."+a+".get()")}),Coral.register.augmentProperties(b.properties,j)}}(),function(){"use strict";var a=/[\s?]coral3-Icon--(?!size(XXS|XS|S|M|L))\w+/g,b=/\/|:|\./g,c=/([a-z0-9])([A-Z])/g,d={EXTRA_EXTRA_SMALL:"XXS",EXTRA_SMALL:"XS",SMALL:"S",MEDIUM:"M",LARGE:"L",EXTRA_LARGE:"XL",EXTRA_EXTRA_LARGE:"XXL"},e="coral3-Icon",f=[];for(var g in d)f.push(e+"--size"+d[g]);Coral.register({name:"Icon",tagName:"coral-icon",className:e,properties:{icon:{"default":"",reflectAttribute:!0,transform:function(a){return Coral.transform.string(a).trim()},sync:function(){if(this.className=this.className.replace(a,"").trim(),this.icon)if(this.icon.match(b)){this.classList.add("is-image");var c=this._elements.image=this._elements.image||document.createElement("img");c.className=this._className+"-image",c.src=this.icon,this.appendChild(c)}else this._elements.image&&this._elements.image.parentNode===this&&(this.removeChild(this._elements.image),this.classList.remove("is-image")),this.classList.add(this._className+"--"+this._icon)},alsoSync:"alt"},size:{"default":d.SMALL,reflectAttribute:!0,transform:function(a){return"string"==typeof a?a.toUpperCase():a},validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(d)],sync:function(){this.classList.remove.apply(this.classList,f),this.classList.add(this._className+"--size"+this.size)}},alt:{reflectAttribute:!0,transform:Coral.transform.string,get:function(){return this._alt||""},sync:function(){this._updateAltText()}}},_updateAltText:function(){var a=this.classList.contains("is-image");this._alt||(this.removeAttribute("aria-label"),a&&this._elements.image.setAttribute("alt",""));var b=this._alt||this.hasAttribute("alt")?this.alt:this.getAttribute("title")||(a?"":this.icon.replace(c,"$1 $2").toLowerCase()),d=this.getAttribute("role"),e=d&&"presentation"!==d&&"img"!==d;e||this.setAttribute("role",a?"presentation":"img"),a?(this.removeAttribute("aria-label"),this._elements.image.setAttribute("alt",b)):""===b?(this.removeAttribute("aria-label"),e||this.removeAttribute("role")):this.setAttribute("aria-label",b)},_initialize:function(){this._queueSync()},attributeChangedCallback:function(a,b,c){return a=a.toLowerCase(),"title"===a?void this._updateAltText():(Coral.Component.prototype.attributeChangedCallback.apply(this,arguments),void("alt"===a&&(null===c||null===b&&""===c)&&this._updateAltText()))}}),Coral.Icon.size=d}(),function(){"use strict";var a={CTA:"cta",PRIMARY:"primary",SECONDARY:"secondary",DEFAULT:"secondary",QUIET:"quiet",WARNING:"warning",MINIMAL:"minimal"},b="coral3-Button",c=[];for(var d in a)c.push(b+"--"+a[d]);var e={MEDIUM:"M",LARGE:"L"},f={RIGHT:"right",LEFT:"left"};Coral.register({name:"Button",tagName:"coral-button",baseTagName:"button",extend:HTMLButtonElement,className:b,events:{mousedown:"_onMouseDown"},properties:{label:Coral.property.contentZone({handle:"label",tagName:"coral-button-label",defaultContentZone:!0,insert:function(a){this.appendChild(a)}}),iconPosition:{attribute:"iconposition",reflectAttribute:!0,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(f)],transform:function(a){return null!==a?a:f.LEFT},get:function(){return"undefined"==typeof this._iconPosition?f.LEFT:this._iconPosition},set:function(a){this._iconPosition=a,this.icon&&this._updateIcon(this.icon)}},icon:{get:function(){var a=this._elements.icon;return a?a.icon:""},set:function(a){this._updateIcon(a)}},iconSize:{attribute:"iconsize",get:function(){var a=this._elements.icon;return a?a.size:Coral.Icon.size.SMALL},set:function(a){this._getIconElement().size=a}},size:{"default":e.MEDIUM,reflectAttribute:!0,transform:function(a){return"string"==typeof a?a.toUpperCase():a},validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(e)],set:function(a){this._size=a,this.classList.toggle(b+"--large",this.size===e.LARGE)}},selected:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,set:function(a){this._selected=a,this.classList.toggle("is-selected",this.selected)}},block:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,set:function(a){this._block=a,this.classList.toggle(this._className+"--block",this.block)}},variant:{"default":a.SECONDARY,reflectAttribute:!0,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(a)],set:function(a){this._variant=a,this.classList.remove.apply(this.classList,c),this.classList.add(this._className+"--"+this.variant)}}},_updateIcon:function(a){var b=this._getIconElement();b.icon=a,""===this.icon?b.remove():b.parentNode&&!this._iconPosition||this.insertBefore(b,this.iconPosition===f.LEFT?this.firstChild:null),this._makeAccessible()},_onMouseDown:function(a){var b=a.matchedTarget;Coral.commons.nextFrame(function(){b!==document.activeElement&&b.focus()})},_makeAccessible:function(){var a=this.label&&this.label.textContent.length>0;""!==this.icon&&this._elements.icon[a?"setAttribute":"removeAttribute"]("alt","")},_initialize:function(){this._observer=new MutationObserver(this._makeAccessible.bind(this)),this._observer.observe(this.label,{childList:!0,characterData:!0,subtree:!0})},_getIconElement:function(){return this._elements.icon||(this._elements.icon=document.createElement("coral-icon")),this._elements.icon},_render:function(){var a=document.createDocumentFragment(),b=this.querySelector("coral-button-label")||document.createElement("coral-button-label");for(b.parentNode&&this.removeChild(b);this.firstChild;){var c=this.firstChild;"CORAL-ICON"===c.tagName?(this._elements.icon=c,a.appendChild(c)):b.appendChild(c)}this.appendChild(a),this.label=b}}),Coral.Button.Label=function(){return document.createElement("coral-button-label")},Coral.Button.variant=a,Coral.Button.size=e,Coral.Button.iconPosition=f}(),function(){"use strict";var a=32;Coral.register({name:"AnchorButton",tagName:"coral-anchorbutton",baseTagName:"a",extend:HTMLAnchorElement,className:Coral.Button.prototype._className,events:{keydown:"_onKeyDown",keyup:"_onKeyUp"},properties:Coral.commons.extend({},Coral.Button.prototype._properties,{label:Coral.property.contentZone({handle:"label",tagName:"coral-anchorbutton-label",defaultContentZone:!0,insert:function(a){this.appendChild(a)}}),disabled:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){this.classList.toggle("is-disabled",this.disabled),this.setAttribute("tabindex",this.disabled?"-1":"0"),this.setAttribute("aria-disabled",this.disabled)}}}),_makeAccessible:Coral.Button.prototype._makeAccessible,_getIconElement:Coral.Button.prototype._getIconElement,_updateIcon:Coral.Button.prototype._updateIcon,_onKeyDown:function(b){b.keyCode===a&&(b.preventDefault(),this.click(),this.classList.add("is-selected"))},_onKeyUp:function(b){b.keyCode===a&&(b.preventDefault(),this.classList.remove("is-selected"))},_onClick:function(a){this.disabled&&a.preventDefault()},_initialize:function(){Coral.Button.prototype._initialize.call(this),this.setAttribute("role","button"),this.setAttribute("tabindex","0"),this.addEventListener("click",this._onClick.bind(this))},_render:function(){for(var a=document.createDocumentFragment(),b=this.querySelector("coral-anchorbutton-label")||document.createElement("coral-anchorbutton-label");this.firstChild;){var c=this.firstChild;c.nodeType===Node.TEXT_NODE?b.appendChild(c):"CORAL-ICON"===c.tagName?(this._elements.icon=c,a.appendChild(c)):this.removeChild(c)}this.appendChild(a),this.label=b}}),Coral.AnchorButton.Label=function(){return document.createElement("coral-anchorbutton-label")}}(),window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.Progress=window.Coral.templates.Progress||{},window.Coral.templates.Progress.base=function(a){var b=document.createElement("div");b.className+=" coral3-Progress-bar";var c=document.createTextNode("\n  ");b.appendChild(c);var d=this.status=document.createElement("div");d.className+=" coral3-Progress-status",d.setAttribute("handle","status"),b.appendChild(d);var e=document.createTextNode("\n");return b.appendChild(e),b},function(){"use strict";var a={SMALL:"S",MEDIUM:"M",LARGE:"L"},b={LEFT:"left",RIGHT:"right",BOTTOM:"bottom"},c="coral3-Progress",d={S:"small",M:"medium",L:"large"},e=[];for(var f in a)e.push(c+"--"+d[a[f]]);var g=[];for(var h in b)g.push(c+"--"+b[h]+"Label");Coral.register({name:"Progress",tagName:"coral-progress",className:c,properties:{value:{"default":0,reflectAttribute:!0,trigger:"coral-progress:change",transform:function(a){return a=Coral.transform.number(a),null===a&&(a=0),a>100?a=100:a<0&&(a=0),a},sync:function(){this._elements.status.style.width=this.value+"%",this.indeterminate||(this.setAttribute("aria-valuenow",this.value),this.showPercent===!0&&this._setLabelContent(this.value+"%"))},get:function(){return this.indeterminate?0:this._value}},indeterminate:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,alsoSync:"value",sync:function(){this.indeterminate?(this.classList.add(this._className+"--indeterminate"),this.removeAttribute("aria-valuenow"),this.removeAttribute("aria-valuemin"),this.removeAttribute("aria-valuemax")):(this.classList.remove(this._className+"--indeterminate"),this.setAttribute("aria-valuemin","0"),this.setAttribute("aria-valuemax","100"))}},size:{"default":a.MEDIUM,transform:function(a){return"string"==typeof a?a.toUpperCase():a},validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(a)],sync:function(){this.classList.remove.apply(this.classList,e),this.classList.add(this._className+"--"+d[this.size])}},showPercent:{attribute:"showpercent",reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){if(this.showPercent===!0){var a=this.indeterminate?"":this.value+"%";this._setLabelContent(a),this._showLabel()}else this.label.innerHTML=""}},label:Coral.property.contentZone({handle:"label",tagName:"coral-progress-label",defaultContentZone:!0,insert:function(a){this.appendChild(a)}}),labelPosition:{"default":b.RIGHT,attribute:"labelposition",validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(b)],sync:function(){this.classList.remove.apply(this.classList,g),this._elements.label.textContent.length>0&&this.classList.add(this._className+"--"+this.labelPosition+"Label")}}},_initialize:function(){this.setAttribute("role","progressbar"),this.setAttribute("aria-valuenow","0"),this.setAttribute("aria-valuemin","0"),this.setAttribute("aria-valuemax","100"),this._observer=new MutationObserver(this._toggleLabelBasedOnContent.bind(this)),this._observer.observe(this._elements.label,{characterData:!0,childList:!0,subtree:!0})},_render:function(){var a=this.querySelector("coral-progress-label"),b=a||document.createElement("coral-progress-label");if(!a)for(;this.firstChild;)b.appendChild(this.firstChild);this.appendChild(Coral.templates.Progress.base.call(this._elements)),this.label=b,this._toggleLabelBasedOnContent()},_toggleLabelBasedOnContent:function(){this._elements.label.textContent.length>0?this._showLabel():this._hideLabel()},_hideLabel:function(){this._elements.label.hidden=!0,this.classList.remove.apply(this.classList,g),this.classList.add(this._className+"--noLabel"),this.removeAttribute("aria-valuetext")},_showLabel:function(){this._elements.label.hidden=!1,this.classList.remove(this._className+"--noLabel"),this.classList.add(this._className+"--"+this.labelPosition+"Label"),this.showPercent===!1&&this.setAttribute("aria-valuetext",this.label.textContent)},_setLabelContent:function(a){this._elements.label.textContent=a,this.showPercent===!0?this.removeAttribute("aria-valuetext"):this.setAttribute("aria-valuetext",this.label.textContent)}}),Coral.register({name:"Progress.Label",tagName:"coral-progress-label",className:"coral3-Progress-label"}),Coral.Progress.size=a,Coral.Progress.labelPosition=b}(),function(){"use strict";var a={DEFAULT:"default",DOTS:"dots"},b={SMALL:"S",MEDIUM:"M",LARGE:"L"},c="coral3-Wait",d=[];for(var e in a)d.push(c+"--"+a[e]);Coral.register({name:"Wait",tagName:"coral-wait",className:c,properties:{size:{"default":b.SMALL,transform:function(a){return"string"==typeof a?a.toUpperCase():a},validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(b)],set:function(a){this._size=a,this.classList.toggle(this._className+"--large",this.size===b.LARGE),this.classList.toggle(this._className+"--medium",this.size===b.MEDIUM)}},centered:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){this.classList.toggle(this._className+"--centered",this.centered)}},variant:{"default":a.DEFAULT,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(a)],set:function(b){this._variant=b,this.classList.remove.apply(this.classList,d),this.variant!==a.DEFAULT&&this.classList.add(this._className+"--"+this.variant)}}}}),Coral.Wait.size=b,Coral.Wait.variant=a}(),window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.ButtonGroup=window.Coral.templates.ButtonGroup||{},window.Coral.templates.ButtonGroup.base=function(a){var b=this.nativeSelect=document.createElement("select");return b.className+=" coral3-ButtonGroup-select",b.setAttribute("tabindex","-1"),b.setAttribute("handle","nativeSelect"),b},function(){"use strict";var a={NONE:"none",SINGLE:"single",MULTIPLE:"multiple"},b='button[is="coral-button"]',c=function(a){var b=a.getAttribute("value");return null!==b?b:a.textContent.replace(/\s{2,}/g," ").trim()};Coral.register({name:"ButtonGroup",tagName:"coral-buttongroup",className:"coral3-ButtonGroup",mixins:[Coral.mixin.formField],events:{'click button[is="coral-button"]':"_onButtonClick",'capture:focus button[is="coral-button"]':"_onButtonFocus",'capture:blur button[is="coral-button"]':"_onButtonBlur",'key:up button[is="coral-button"]':"_onButtonKeyUpLeft",'key:left button[is="coral-button"]':"_onButtonKeyUpLeft",'key:down button[is="coral-button"]':"_onButtonKeyDownRight",'key:right button[is="coral-button"]':"_onButtonKeyDownRight",'key:home button[is="coral-button"]':"_onButtonKeyHome",'key:end button[is="coral-button"]':"_onButtonKeyEnd"},properties:{items:{get:function(){return this._items||(this._items=new Coral.SelectableCollection({host:this,itemBaseTagName:"button",itemTagName:"coral-button",itemSelector:b,onItemAdded:this._onItemAdded,onItemRemoved:this._onItemRemoved,onCollectionChange:this._onCollectionChange})),this._items},set:function(){}},selectionMode:{"default":a.NONE,attribute:"selectionmode",validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(a)],set:function(b){this._selectionMode=b,this._elements.nativeSelect.multiple=this._selectionMode===a.MULTIPLE},sync:function(){this.selectionMode===a.SINGLE?(this.setAttribute("role","radiogroup"),this._syncItemOptions(),this._validateSelection()):this.selectionMode===a.MULTIPLE?(this.setAttribute("role","group"),this._syncItemOptions()):(this.setAttribute("role","group"),this._removeItemOptions())}},name:{get:function(a){return this._elements.nativeSelect.name},set:function(a){this._elements.nativeSelect.name=a}},value:{get:function(){return this._elements.nativeSelect.value},set:function(b){this.selectionMode!==a.NONE&&this._selectItemByValue([b])}},selectedItems:{get:function(){if(this.selectionMode===a.MULTIPLE)return this.items._getAllSelected();var b=this.selectedItem;return b?[b]:[]},set:function(){}},selectedItem:{get:function(){return this.selectionMode===a.MULTIPLE?this.items._getFirstSelected():this.items._getLastSelected()},set:function(){}},values:{attribute:null,validate:[Coral.validate.valueMustChange,function(a){return Array.isArray(a)}],set:function(b){this.selectionMode!==a.NONE&&(this.selectionMode!==a.MULTIPLE&&b.length>1&&(b=[b[0]]),this._selectItemByValue(b))},get:function(){for(var a=[],b=this._elements.nativeSelect.querySelectorAll(":checked"),c=0,d=b.length;c<d;c++)a.push(b[c].value);return a}},disabled:{sync:function(){var a=this.disabled||this.readOnly;this._elements.nativeSelect.disabled=a,this.items.getAll().forEach(function(b){b.disabled=a}),this.setAttribute("aria-disabled",a)}},readOnly:{sync:function(){var a=this;this._elements.nativeSelect.disabled=this.readOnly||this.disabled,this.items.getAll().forEach(function(b){b.disabled=a.disabled||a.readOnly&&!b.hasAttribute("selected"),a.readOnly?b.setAttribute("aria-disabled",!0):b.removeAttribute("aria-disabled")}),this.removeAttribute("aria-readonly")}},required:{sync:function(){this._elements.nativeSelect.required=this.required,this.selectionMode!==a.SINGLE&&this.removeAttribute("aria-required")}},invalid:{sync:function(){this.classList.toggle("is-invalid",this.invalid)}},labelledBy:{sync:function(){this._elements.nativeSelect.setAttribute("aria-labelledby",this.labelledBy)}}},reset:function(){this.values=this._initalSelectedValues},_onButtonClick:function(b){var c=b.matchedTarget;if(this._onButtonFocus(b),this.readOnly)return b.preventDefault(),void b.stopImmediatePropagation();if(this.selectionMode===a.SINGLE){b.preventDefault();var d=this.items._getAllSelected();0!==d.length&&d[0]!==c&&this._toggleItemSelection(d[0],!1),this._toggleItemSelection(c,!0),d[0]!==c&&this.trigger("change")}else this.selectionMode===a.MULTIPLE&&(b.preventDefault(),this._toggleItemSelection(c),this.trigger("change"))},_onButtonFocus:function(a){for(var b,c=a.matchedTarget,d=this.items.getAll(),e=d.length,f=0;f<e;f++)b=d[f],b.setAttribute("tabindex",b===c?0:-1)},_onButtonBlur:function(b){for(var c,d,e=b.matchedTarget,f=this.items.getAll(),g=f.length,h=this.selectedItems.length,i=this.items._getFirstSelectable(),j=!1,k=0;k<g;k++)c=f[k],j=c.hasAttribute("selected"),d=this.selectionMode===a.SINGLE?j?0:-1:this.selectionMode===a.MULTIPLE?!h&&0===k||j&&c===e||!e.hasAttribute("selected")&&c===(this.selectedItems[h-1]||i)?0:-1:c===i?0:-1,c.setAttribute("tabindex",d)},_onButtonKeyUpLeft:function(b){b.preventDefault();for(var c=b.matchedTarget,d=c.previousElementSibling;!d||d.disabled||"BUTTON"!==d.nodeName;)d=d?d.previousElementSibling:this.items._getLastSelectable();d!==c&&(this.selectionMode===a.SINGLE&&d.click(),this._setFocusToButton(d))},_onButtonKeyDownRight:function(b){b.preventDefault();for(var c=b.matchedTarget,d=c.nextElementSibling;!d||d.disabled||"BUTTON"!==d.nodeName;)d=d?d.nextElementSibling:this.items._getFirstSelectable();d!==c&&(this.selectionMode===a.SINGLE&&d.click(),this._setFocusToButton(d))},_onButtonKeyHome:function(b){b.preventDefault();var c=b.matchedTarget,d=this.items._getFirstSelectable();d!==c&&(this.selectionMode===a.SINGLE&&d.click(),this._setFocusToButton(d))},_onButtonKeyEnd:function(b){b.preventDefault();var c=b.matchedTarget,d=this.items._getLastSelectable();d!==c&&(this.selectionMode===a.SINGLE&&d.click(),this._setFocusToButton(d))},_setFocusToButton:function(a){a&&a.focus()},_onItemAdded:function(b){b.classList.add("coral3-ButtonGroup-item"),this.selectionMode!==a.NONE?(this.selectionMode===a.SINGLE?(b.setAttribute("role","radio"),b.setAttribute("tabindex",b.hasAttribute("selected")?0:-1)):b.setAttribute("role","checkbox"),b.setAttribute("aria-checked",b.hasAttribute("selected"))):b.removeAttribute("role"),b.disabled=this.disabled||this.readOnly&&!b.hasAttribute("selected"),this.readOnly?b.setAttribute("aria-disabled",!0):b.removeAttribute("aria-disabled"),this._addItemOption(b),this._validateSelection(b.hasAttribute("selected")?b:null)},_onItemRemoved:function(a){a.classList.remove("coral3-ButtonGroup-item"),a.removeAttribute("role");var b=this;Coral.commons.nextFrame(function(){if(!a.parentNode){var c=b._initalSelectedValues.indexOf(a.value);c!==-1&&b._initalSelectedValues.splice(c,1)}}),a.option&&(a.option.parentNode.removeChild(a.option),a.option=void 0)},_onCollectionChange:function(a,b){this._validateSelection()},_handleMutations:function(d){for(var e=0,f=d.length;e<f;e++){var g=d[e].target,h=d[e].attributeName;if("value"===h)g.matches(b)&&(g.option.value=c(g));else if("selected"===h&&g.matches(b)){var i=g.hasAttribute("selected");this.selectionMode===a.SINGLE?this._validateSelection(i?g:null):this._toggleItemSelection(g,i)}}},_toggleItemSelection:function(b,c){var d=b.getAttribute("aria-checked"),e=b.getAttribute("tabindex");c="undefined"!=typeof c?c:!b.hasAttribute("selected"),c?(b.hasAttribute("selected")||b.setAttribute("selected",""),"true"!==d&&b.setAttribute("aria-checked",!0),this.selectionMode===a.SINGLE&&"0"!==e&&b.setAttribute("tabindex",0)):c||(b.hasAttribute("selected")&&b.removeAttribute("selected"),this.selectionMode!==a.NONE?("false"!==d&&b.setAttribute("aria-checked",!1),this.selectionMode===a.SINGLE&&"-1"!==e&&b.setAttribute("tabindex",-1)):(b.removeAttribute("aria-checked"),b.removeAttribute("tabindex"))),b.option&&(b.option.selected=c)},_selectItemByValue:function(a){for(var b,d=this.items.getAll(),e=0,f=d.length;e<f;e++)b=d[e],this._toggleItemSelection(b,a.indexOf(c(b))!==-1)},_addItemOption:function(b){if(this.selectionMode!==a.NONE&&!b.option){var d=document.createElement("option");d.value=c(b),this._initalSelectedValues.indexOf(d.value)!==-1&&d.setAttribute("selected",""),b.option=d,this._elements.nativeSelect.add(d),this._toggleItemSelection(b,b.hasAttribute("selected"))}},_removeItemOptions:function(){for(var a,b=this.items.getAll(),c=0,d=b.length;c<d;c++)a=b[c],a.removeAttribute("role"),a.removeAttribute("aria-checked"),a.hasAttribute("selected")&&this._toggleItemSelection(a,!1),a.option&&(a.option.parentNode.removeChild(a.option),delete a.option)},_syncItemOptions:function(){var b,c=this.items.getAll(),d=c.length,e=0,f=this.selectionMode===a.SINGLE?"radio":this.selectionMode===a.MULTIPLE?"checkbox":null,g=!1;for(e;e<d;e++)this._addItemOption(c[e]);for(e=d-1;e>=0;e--)b=c[e],g=b.hasAttribute("selected"),b.option.selected=g,b.setAttribute("aria-checked",g),f?b.setAttribute("role",f):b.removeAttribute("role")},_validateSelection:function(b){if(this.selectionMode===a.SINGLE){var c=this.items._getAllSelected(),d=c.length;if(0===d){var e=this.items._getFirstSelectable();e&&this._toggleItemSelection(e,!0)}else if(d>1){b=b||c[0],this._toggleItemSelection(b,!0);for(var f=0;f<d;f++)c[f]!==b&&this._toggleItemSelection(c[f],!1)}}},_getLabellableElement:function(){return this},_templateHandleNames:["nativeSelect"],_render:function(){var a=document.createDocumentFragment();for(a.appendChild(Coral.templates.ButtonGroup.base.call(this._elements));this.firstChild;){var b=this.firstChild;b.nodeType===Node.TEXT_NODE||this._templateHandleNames.indexOf(b.getAttribute("handle"))===-1?a.appendChild(b):this.removeChild(b)}this.appendChild(a)},_initialize:function(){this._observer=new MutationObserver(this._handleMutations.bind(this)),this._observer.observe(this,{attributes:!0,subtree:!0,attributeFilter:["selected","value"]}),this._initalSelectedValues=[];for(var a=0,b=this.selectedItems.length;a<b;a++)this._initalSelectedValues.push(this.selectedItems[a].value);this.items._startHandlingItems()}}),Coral.ButtonGroup.selectionMode=a}(),window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.Checkbox=window.Coral.templates.Checkbox||{},window.Coral.templates.Checkbox.base=function(a){var b=document.createDocumentFragment(),c=this.input=document.createElement("input");c.setAttribute("type","checkbox"),c.setAttribute("handle","input"),c.className+=" coral3-Checkbox-input",c.id=Coral.commons.getUID(),b.appendChild(c);var d=document.createTextNode("\n");b.appendChild(d);var e=this.checkbox=document.createElement("span");e.className+=" coral3-Checkbox-checkmark",e.setAttribute("handle","checkbox"),b.appendChild(e);var f=document.createTextNode("\n");b.appendChild(f);var g=this.labelWrapper=document.createElement("label");return g.className+=" coral3-Checkbox-description",g.setAttribute("handle","labelWrapper"),g.setAttribute("for",this.input.id),b.appendChild(g),b},function(){"use strict";var a=navigator.userAgent.indexOf("MSIE")!==-1||navigator.appVersion.indexOf("Trident/")>0||window.navigator.userAgent.indexOf("Edge")!==-1;Coral.register({name:"Checkbox",tagName:"coral-checkbox",className:"coral3-Checkbox",mixins:[Coral.mixin.formField],events:{click:"_onClick",mousedown:"_onMouseDown"},properties:{checked:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,set:function(a){this._checked=a,this._elements.input.checked=a}},indeterminate:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){this._elements.input.indeterminate=this.indeterminate,this._elements.input[this.indeterminate?"setAttribute":"removeAttribute"]("aria-checked","mixed")}},label:Coral.property.contentZone({handle:"label",tagName:"coral-checkbox-label",defaultContentZone:!0,insert:function(a){this._elements.labelWrapper.appendChild(a)}}),value:{"default":"on",set:function(a){this._elements.input.value=a},get:function(){return this._elements.input.value}},disabled:{sync:function(){this.classList.toggle("is-disabled",this.disabled),this._elements.input.disabled=this.disabled}},name:{get:function(){return this._elements.input.name},set:function(a){this._elements.input.name=a}},required:{sync:function(){this._elements.input.required=this.required}}},_componentTargetProperty:"checked",_eventTargetProperty:"checked",clear:function(){this.checked=!1},reset:function(){this.checked=this._initialCheckedState},_onInputChange:function(b){b.stopPropagation(),this[this._componentTargetProperty]=b.target[this._eventTargetProperty],this.indeterminate=!1,this._triggerChangeEvent&&(a?Coral.commons.nextFrame(function(){
this.trigger("change")}.bind(this)):this.trigger("change"))},_onClick:function(b){a&&this.indeterminate?(this.checked=!this.checked,this._onInputChange(b)):b.target===this&&(this.indeterminate=!1,this.checked=!this.checked,this.trigger("change"))},_onMouseDown:function(){var a=this._elements.input;Coral.commons.nextFrame(function(){a!==document.activeElement&&a.focus()})},_templateHandleNames:["input","checkbox","labelWrapper"],_render:function(){var a=document.createDocumentFragment();a.appendChild(Coral.templates.Checkbox.base.call(this._elements));var b=this.querySelector("coral-checkbox-label")||document.createElement("coral-checkbox-label");for(b&&b.parentNode&&b.parentNode.removeChild(b),this._elements.labelWrapper.hidden=!0;this.firstChild;){var c=this.firstChild;c.nodeType===Node.TEXT_NODE||this._templateHandleNames.indexOf(c.getAttribute("handle"))===-1?b.appendChild(c):this.removeChild(c)}this.appendChild(a),this.label=b},_initialize:function(){this._observer=new MutationObserver(this._hideLabelIfEmpty.bind(this)),this._observer.observe(this._elements.labelWrapper,{childList:!0,characterData:!0,subtree:!0}),this._initialCheckedState=this.checked},_hideLabelIfEmpty:function(){var a=this._elements.label,b=0===a.children.length&&""===a.textContent.replace(/\s*/g,"");b!==this._elements.labelWrapper.hidden&&(this._elements.labelWrapper.hidden=b)},attachedCallback:function(){Coral.Component.prototype.attachedCallback.call(this),this._hideLabelIfEmpty()}}),Coral.Checkbox.Label=function(){return document.createElement("coral-checkbox-label")}}(),window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.Radio=window.Coral.templates.Radio||{},window.Coral.templates.Radio.base=function(a){var b=document.createDocumentFragment(),c=this.input=document.createElement("input");c.setAttribute("type","radio"),c.setAttribute("handle","input"),c.className+=" coral3-Radio-input",c.id=Coral.commons.getUID(),b.appendChild(c);var d=document.createTextNode("\n");b.appendChild(d);var e=this.checkmark=document.createElement("span");e.className+=" coral3-Radio-checkmark",e.setAttribute("handle","checkmark"),b.appendChild(e);var f=document.createTextNode("\n");b.appendChild(f);var g=this.labelWrapper=document.createElement("label");return g.className+=" coral3-Radio-description",g.setAttribute("handle","labelWrapper"),g.setAttribute("for",this.input.id),b.appendChild(g),b},function(){"use strict";Coral.register({name:"Radio",tagName:"coral-radio",className:"coral3-Radio",mixins:[Coral.mixin.formField],events:{click:"_onClick",mousedown:"_onMouseDown"},properties:{checked:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,set:function(a){this._checked=a,this._elements.input.checked=a,this._syncRelatedRadios()}},label:Coral.property.contentZone({handle:"label",tagName:"coral-radio-label",defaultContentZone:!0,insert:function(a){this._elements.labelWrapper.appendChild(a)}}),value:{"default":"on",set:function(a,b){this._elements.input.value=a},get:function(){return this._elements.input.value}},disabled:{sync:function(){this.classList.toggle("is-disabled",this.disabled),this._elements.input.disabled=this.disabled}},name:{get:function(){return this._elements.input.name},set:function(a){this._elements.input.name=a}},required:{sync:function(){this._elements.input.required=this.required}}},_componentTargetProperty:"checked",_eventTargetProperty:"checked",clear:function(){this.checked=!1},reset:function(){this.checked=this._initialCheckedState},_syncRelatedRadios:function(){if(null!==this.parentNode&&this.name&&this.checked)for(var a=document.querySelectorAll(this.tagName+"[name="+JSON.stringify(this.name)+"]"),b=a.length,c=0;c<b;c++)a[c]!==this&&a[c].removeAttribute("checked")},_hideLabelIfEmpty:function(){var a=this.label,b=0===a.children.length&&""===a.textContent.replace(/\s*/g,"");b!==this._elements.labelWrapper.hidden&&(this._elements.labelWrapper.hidden=b)},_onClick:function(a){a.target!==this||this.checked||(this.checked=!0,this.trigger("change"))},_onMouseDown:function(){var a=this._elements.input;Coral.commons.nextFrame(function(){a!==document.activeElement&&a.focus()})},attachedCallback:function(){Coral.Component.prototype.attachedCallback.call(this),this._syncRelatedRadios(),this._hideLabelIfEmpty()},_initialize:function(){this._observer=new MutationObserver(this._hideLabelIfEmpty.bind(this)),this._observer.observe(this._elements.labelWrapper,{childList:!0,characterData:!0,subtree:!0}),this._initialCheckedState=this.checked},_templateHandleNames:["input","checkmark","labelWrapper"],_render:function(){var a=document.createDocumentFragment();a.appendChild(Coral.templates.Radio.base.call(this._elements));var b=this.querySelector("coral-radio-label")||document.createElement("coral-radio-label");for(b&&b.parentNode&&b.parentNode.removeChild(b),this._elements.labelWrapper.hidden=!0;this.firstChild;){var c=this.firstChild;c.nodeType===Node.TEXT_NODE||this._templateHandleNames.indexOf(c.getAttribute("handle"))===-1?b.appendChild(c):this.removeChild(c)}this.appendChild(a),this.label=b}}),Coral.Radio.Label=function(){return document.createElement("coral-radio-label")}}(),function(){"use strict";var a={DEFAULT:"default",QUIET:"quiet"},b="coral3-Textfield",c=[];for(var d in a)c.push(b+"--"+a[d]);Coral.register({name:"Textfield",tagName:"coral-textfield",baseTagName:"input",extend:HTMLInputElement,className:b,mixins:[Coral.mixin.formField],properties:{invalid:{sync:function(){this.classList.toggle("is-invalid",this.invalid)}},variant:{"default":a.DEFAULT,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(a)],sync:function(){this.classList.remove.apply(this.classList,c),this.variant!==Coral.Textfield.variant.DEFAULT&&this.classList.add(this._className+"--"+this.variant)}}}}),Coral.Textfield.variant=a}(),function(){"use strict";var a="coral3-Textfield",b={DEFAULT:"default",QUIET:"quiet"},c=[];for(var d in b)c.push(a+"--"+b[d]);Coral.register({name:"Textarea",tagName:"coral-textarea",baseTagName:"textarea",extend:HTMLTextAreaElement,className:a+" "+a+"--multiline",mixins:[Coral.mixin.formField],events:{input:"_onInput"},properties:{invalid:{sync:function(){this.classList.toggle("is-invalid",this.invalid)}},variant:{"default":b.DEFAULT,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(b)],sync:function(){this.classList.remove.apply(this.classList,c),this.variant!==b.DEFAULT&&this.classList.add(a+"--"+this.variant),this.variant===b.QUIET?this._defaultHeight=this.style.height:this.style.height=this._defaultHeight,this._onInput()}}},reset:function(){this.value=this.textContent},_onInput:function(){this.variant===b.QUIET&&(this.style.height="auto",this.style.height=this.scrollHeight+"px")}}),Coral.Textarea.variant=b}(),window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.Accordion=window.Coral.templates.Accordion||{},window.Coral.templates.Accordion.item=function(a){var b=document.createDocumentFragment(),c=this.acHeader=document.createElement("div");c.className+=" coral3-Accordion-header",c.setAttribute("role","tab"),c.id=Coral.commons.getUID(),c.setAttribute("handle","acHeader");var d=document.createTextNode("\n  ");c.appendChild(d);var e=this.icon=document.createElement("coral-icon");e.className+=" coral3-Accordion-icon",e.setAttribute("size","xs"),e.setAttribute("handle","icon"),e.setAttribute("icon","chevronRight"),e.setAttribute("alt",""),c.appendChild(e);var f=document.createTextNode("\n  ");c.appendChild(f);var g=this.labelContainer=document.createElement("div");g.className+=" coral3-Accordion-label",g.setAttribute("handle","labelContainer"),c.appendChild(g);var h=document.createTextNode("\n");c.appendChild(h),b.appendChild(c);var i=document.createTextNode("\n");b.appendChild(i);var j=this.acContent=document.createElement("div");return j.className+=" coral3-Accordion-content",j.setAttribute("handle","acContent"),j.id=Coral.commons.getUID(),j.setAttribute("role","tabpanel"),b.appendChild(j),b},function(){"use strict";var a=33,b=34,c=37,d=38,e={DEFAULT:"default",QUIET:"quiet",LARGE:"large"},f="coral3-Accordion",g=[];for(var h in e)g.push(f+"--"+e[h]);Coral.register({name:"Accordion",tagName:"coral-accordion",className:f,mixins:[Coral.mixin.selectionList({role:"tablist",itemTagName:"coral-accordion-item",allowSingleModeDeselect:!0})],events:{'click [handle="acHeader"]':"_onItemClick",'key:space [handle="acHeader"]':"_onToggleItemKey",'key:return [handle="acHeader"]':"_onToggleItemKey",'key:pageup [handle="acHeader"]':"_focusPreviousItem",'key:left [handle="acHeader"]':"_focusPreviousItem",'key:up [handle="acHeader"]':"_focusPreviousItem",'key:pagedown [handle="acHeader"]':"_focusNextItem",'key:right [handle="acHeader"]':"_focusNextItem",'key:down [handle="acHeader"]':"_focusNextItem",'key:home [handle="acHeader"]':"_onHomeKey",'key:end [handle="acHeader"]':"_onEndKey",'keydown [handle="acContent"]':"_onItemContentKeyDown"},properties:{variant:{"default":e.DEFAULT,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(e)],sync:function(){this.classList.remove.apply(this.classList,g),this.variant!==Coral.Accordion.variant.DEFAULT&&this.classList.add(this._className+"--"+this.variant)}},_tabTarget:{"default":null,sync:function(){var a=this._tabTarget,b=this.items.getAll();b.forEach(function(b){b._isTabTarget=b===a})}}},_onHomeKey:function(a){a.preventDefault(),a.stopPropagation(),this._focusItem(this.items.getFirstSelectable())},_onEndKey:function(a){a.preventDefault(),a.stopPropagation(),this._focusItem(this.items.getLastSelectable())},_onItemContentKeyDown:function(e){var f=parseFloat(e.keyCode),g=e.matchedTarget.parentNode;switch(f){case d:case c:(e.metaKey||e.ctrlKey)&&Coral.Keys.filterInputs(e)&&(e.preventDefault(),e.stopPropagation(),this._focusItem(g));break;case a:if(e.metaKey||e.ctrlKey){e.preventDefault(),e.stopPropagation();var h=this.items.getPreviousSelectable(g);this._selectItem(h),this._focusItem(h)}break;case b:if(e.metaKey||e.ctrlKey){e.preventDefault(),e.stopPropagation();var i=this.items.getNextSelectable(g);this._selectItem(i),this._focusItem(i)}}},_focusPreviousItem:function(a){a.preventDefault(),a.stopPropagation(),this._focusItem(this.items.getPreviousSelectable(a.target.parentNode))},_focusNextItem:function(a){a.preventDefault(),a.stopPropagation(),this._focusItem(this.items.getNextSelectable(a.target.parentNode))},_onItemClick:function(a){if(!a.target.hasAttribute("coral-interactive")&&!a.target.closest("[coral-interactive]")){var b=a.target.closest("coral-accordion-item");b&&(a.preventDefault(),a.stopPropagation(),this._selectItem(b),this._focusItem(b))}},_onToggleItemKey:function(a){a.preventDefault(),a.stopPropagation();var b=a.target.parentNode;this._selectItem(b),this._focusItem(b)},_onItemSelected:function(){this._resetTabTarget()},_onItemDeselected:function(){this._resetTabTarget()},_onItemAttached:function(){this._resetTabTarget()},_onItemDetached:function(){this._resetTabTarget()},_resetTabTarget:function(){this._resetTabTargetScheduled||(this._resetTabTargetScheduled=!0,Coral.commons.nextFrame(function(){this._resetTabTargetScheduled=!1;var a=this.items._getNonNestedItems().filter(function(a){return a.hasAttribute("selected")&&!a.hasAttribute("disabled")&&!a.hasAttribute("hidden")});this._tabTarget=a.length?a[0]:this.items.getFirstSelectable()}.bind(this)))},_focusItem:function(a){a&&a.focus(),this._tabTarget=a},_initialize:function(){this.setAttribute("aria-multiselectable","true")}}),Coral.Accordion.variant=e}(),function(){"use strict";var a={"true":"chevronDown","false":"chevronRight"};Coral.register({name:"Accordion.Item",tagName:"coral-accordion-item",className:"coral3-Accordion-item",mixins:[Coral.mixin.selectionList.Item({listSelector:"coral-accordion",role:"presentation"})],properties:{label:Coral.property.contentZone({handle:"label",tagName:"coral-accordion-item-label",insert:function(a){this._elements.labelContainer.appendChild(a)}}),content:Coral.property.contentZone({handle:"content",tagName:"coral-accordion-item-content",defaultContentZone:!0,insert:function(a){this._elements.acContent.appendChild(a)}}),selected:{sync:function(){var b;this.classList.toggle("is-selected",this.selected),this.removeAttribute("aria-selected"),this._elements.acHeader.setAttribute("aria-selected",this.selected),this._elements.acHeader.setAttribute("aria-expanded",this.selected),this._elements.acContent.setAttribute("aria-hidden",!this.selected),this._elements.icon.icon=a[this.selected];var c=this._elements.acContent;this._animate?(this.selected?(c.classList.remove("is-closed"),c.classList.add("is-collapsing"),c.style.height=c.scrollHeight+"px"):(c.style.height=c.scrollHeight+"px",b=c.offsetHeight,c.classList.add("is-collapsing"),c.classList.remove("is-open"),c.style.height=0),Coral.commons.transitionEnd(c,function(){this._onCollapsed()}.bind(this))):(this._animate=!0,this.selected?c.classList.add("is-open"):(c.classList.add("is-closed"),c.style.height="0"))}},disabled:{alsoSync:["_isTabTarget"],sync:function(){this.classList.toggle("is-disabled",this.disabled),this.removeAttribute("aria-disabled"),this._elements.acHeader.setAttribute("aria-disabled",this.disabled)}},_isTabTarget:{"default":!1,sync:function(){this.disabled?this._elements.acHeader.removeAttribute("tabindex"):this._elements.acHeader.setAttribute("tabindex",this.__isTabTarget?"0":"-1")}}},focus:function(){this._elements.acHeader.focus()},_onCollapsed:function(){var a=this._elements.acContent;a.classList.remove("is-collapsing"),a.classList.add("is-closed"),this._selected?(a.classList.add("is-open"),a.classList.remove("is-closed"),a.style.height=""):(a.classList.add("is-closed"),a.classList.remove("is-open"))},_initialize:function(){var a=this._elements.acHeader;a.setAttribute("aria-controls",this._elements.acContent.id),this._elements.acContent.setAttribute("aria-labelledby",a.id)},_templateHandleNames:["acHeader","icon","labelContainer","acContent"],_render:function(){var a=Coral.templates.Accordion.item.call(this._elements),b=this.querySelector("coral-accordion-item-label")||document.createElement("coral-accordion-item-label"),c=this.querySelector("coral-accordion-item-content")||document.createElement("coral-accordion-item-content");for(this.label=b,this.content=c;this.firstChild;){var d=this.firstChild;d.nodeType===Node.TEXT_NODE||this._templateHandleNames.indexOf(d.getAttribute("handle"))===-1?c.appendChild(d):this.removeChild(d)}this.appendChild(a)}}),Coral.Accordion.Item.Content=function(){return document.createElement("coral-accordion-item-content")},Coral.Accordion.Item.Label=function(){return document.createElement("coral-accordion-item-label")}}(),function(){"use strict";function a(){this.open&&this._position()}function b(a){return"string"==typeof a?a.toLowerCase():a}var c={LEFT_TOP:"left top",LEFT_CENTER:"left center",LEFT_BOTTOM:"left bottom",CENTER_TOP:"center top",CENTER_CENTER:"center center",CENTER_BOTTOM:"center bottom",RIGHT_TOP:"right top",RIGHT_CENTER:"right center",RIGHT_BOTTOM:"right bottom"},d={FLIP:"flip",FIT:"fit",FLIP_FIT:"flipfit",NONE:"none"},e={PREVIOUS:"_prev",NEXT:"_next"},f={LEFT:"left",RIGHT:"right",BOTTOM:"bottom",TOP:"top"},g={ON:"on",OFF:"off"};Coral.register({name:"Overlay",tagName:"coral-overlay",className:"coral3-Overlay",mixins:[Coral.mixin.overlay],events:{"global:resize":"_position","global:key:escape":"_handleEscape","click [coral-close]":"_handleCloseClick"},properties:{target:{"default":null,validate:function(a){return null===a||"string"==typeof a||a instanceof Node},set:function(a){this._target=a,this.target&&this.open&&(this._position(),this._returnFocus===Coral.mixin.overlay.returnFocus.ON&&this.returnFocusTo(this._getTarget()))}},alignMy:{attribute:"alignmy","default":c.CENTER_CENTER,transform:b,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(c)],sync:a},alignAt:{attribute:"alignat","default":c.CENTER_CENTER,transform:b,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(c)],sync:a},offset:{"default":0,transform:Coral.transform.number,validate:function(a){return"number"==typeof a},set:function(a){this._offset=a,this.open&&this._position()}},placement:{transform:b,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(f)],set:function(a){var b=this._placementAlignValues[a];this.alignMy=b.alignMy,this.alignAt=b.alignAt,this._placement=a}},within:{"default":window,sync:a},collision:{"default":d.FLIP_FIT,sync:a},open:{sync:function(){this.open&&this._position()}},interaction:{"default":g.ON,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(g)]}},_overlayAnimationTime:0,_initialize:function(){this.style.display="none"},_getTarget:function(a){if(a=a||this.target,a instanceof Node)return a;var b=null;return"string"==typeof a&&(b=a===e.PREVIOUS?this.previousElementSibling:a===e.NEXT?this.nextElementSibling:document.querySelector(a)),b},_placementAlignValues:{right:{alignMy:"left center",alignAt:"right center"},left:{alignMy:"right center",alignAt:"left center"},top:{alignMy:"center bottom",alignAt:"center top"},bottom:{alignMy:"center top",alignAt:"center bottom"}},reposition:a,_position:function(){if(this.open){var a=this._getTarget();if(a){this._beforePosition();var b=this.offset,c=[],d=this.alignMy,e=this.alignAt,f=d.split(" "),g=e.split(" ");c[0]=b>0?"+"+b:b,c[1]=b>0?"-"+b:"+"+-b,b&&("top"!==f[1]||"bottom"!==g[1]&&"top"!==g[1]?"bottom"!==f[1]||"top"!==g[1]&&"bottom"!==g[1]?"left"!==f[0]||"right"!==g[0]&&"left"!==g[0]?"right"!==f[0]||"left"!==g[0]&&"right"!==g[0]||(d=f.join(c[1]+" ")):d=f.join(c[0]+" "):d+=c[1]:d+=c[0]),$(this).position({my:d,at:e,using:this._positionCallback,of:a,collision:this.collision,within:this.within})}}},_beforePosition:function(){var a=window.innerWidth;if(0===this.alignMy.indexOf("left")||0===this.alignMy.indexOf("right")){this.style.display="block";var b=this._getTarget(),c=b.getBoundingClientRect(),d=a-(c.left+c.width),e=c.left,f=Math.max(e,d);this.style.maxWidth=f+"px",this.style.display=""}else this.style.maxWidth=a+"px";this.style.left="-9999px",this.style.top="-9999px"},_positionCallback:function(a,b){this._applyPosition(a,b),this.trigger("coral-overlay:positioned",b)},_applyPosition:function(a,b){this.style.top=a.top+"px",this.style.left=a.left+"px"},_handleCloseClick:function(a){var b=a.matchedTarget,c=b.getAttribute("coral-close");c&&!this.matches(c)||(this.hide(),a.stopPropagation())},_handleEscape:function(a){this.interaction===g.ON&&this.open&&this._isTopOverlay()&&this.hide()}}),Coral.Overlay.align=c,Coral.Overlay.collision=d,Coral.Overlay.target=e,Coral.Overlay.placement=f,Coral.Overlay.interaction=g}(),function(){"use strict";function a(a){for(;;){var b=a.parentNode;if(!b)return b;if(b.matches("body"))return b;var c=window.getComputedStyle(b),d=c.overflow,e=c.overflowX,f=c.overflowY;if(("hidden"===d||"auto"===d||"scroll"===d)&&d===e&&d===f)return b;a=b}}function b(a){return"string"==typeof a?Array.prototype.slice.call(document.querySelectorAll(a)):a instanceof HTMLElement?[a]:"[object NodeList]"===Object.prototype.toString.call(a)?Array.prototype.slice.call(a):void 0}function c(a){var b={};return a.changedTouches&&a.changedTouches.length>0?b=a.changedTouches[0]:a.touches&&a.touches.length>0&&(b=a.touches[0]),{x:b.pageX||a.pageX,y:b.pageY||a.pageY}}function d(a){var b=null;return a._dropZones&&a._dropZones.length&&a._dropZones.some(function(c){if(e(a._scrollingElement,a._dragElement,c))return b=c,!0}),b}function e(a,b,c){var d=b.getBoundingClientRect(),e=c.getBoundingClientRect(),f=a.scrollTop,g=a.scrollLeft,h=d.left+g,i=h+d.width,j=e.left+g,k=j+e.width,l=d.top+f,m=l+d.height,n=e.top+f,o=n+e.height;return!(j>i||k<h||n>m||o<l)}var f="coral-dragaction",g="coral-dragaction-dropzone",h="coral-dragaction-handle",i="coral-dragaction-axis",j="coral-dragaction-scroll",k="coral-dragaction-containment",l="u-coral-openHand",m="u-coral-closedHand",n="is-dragging",o=20,p=10,q={FREE:"free",VERTICAL:"vertical",HORIZONTAL:"horizontal"};Coral.DragAction=function(a){if(!a)throw new Error("Coral.DragAction: dragElement is missing");var b=null;if(a instanceof HTMLElement)b=a;else if("string"==typeof a&&(b=document.querySelector(a),!b))throw new Error("Coral.DragAction: dragElement is null");this._id=Coral.commons.getUID(),this._dragElementValue=a,this._dragElement=b,this._dragElement.dragAction&&this._dragElement.dragAction.destroy();var c=window.getComputedStyle(this._dragElement);this._initialPosition={position:c.position,left:c.left,top:c.top},this._dragEvents=new window.Vent(this._dragElement),this.handle=this._dragElement.getAttribute(h),this.dropZone=this._dragElement.getAttribute(g),this.axis=this._dragElement.getAttribute(i),this.scroll=this._dragElement.matches("["+j+"]"),this.containment=this._dragElement.matches("["+k+"]"),this._drag=this._drag.bind(this),this._dragEnd=this._dragEnd.bind(this),Coral.events.on("touchmove.CoralDragAction"+this._id,this._drag),Coral.events.on("mousemove.CoralDragAction"+this._id,this._drag),Coral.events.on("touchend.CoralDragAction"+this._id,this._dragEnd),Coral.events.on("mouseup.CoralDragAction"+this._id,this._dragEnd),this._dragElement.dragAction=this},Coral.DragAction.prototype={},Object.defineProperty(Coral.DragAction.prototype,"_scrollingElement",{get:function(){return document.scrollingElement||document.documentElement}}),Object.defineProperty(Coral.DragAction.prototype,"dragElement",{get:function(){return this._dragElementValue},set:function(a){}}),Object.defineProperty(Coral.DragAction.prototype,"handle",{get:function(){return this._handle},set:function(a){if(Coral.validate.valueMustChange(a,this._handle))if(this._handle=a,this._dragEvents.off(".CoralDragAction"),document.body.classList.remove(m),this._dragElement.classList.remove(n),this._handles&&this._handles.length?this._handles.forEach(function(a){a._dragEvents.off(".CoralDragAction"),a.classList.remove(l)}):this._dragElement.classList.remove(l),"string"==typeof a||a instanceof HTMLElement||"[object NodeList]"===Object.prototype.toString.call(a))if(this._handles=b(a),this._handles&&this._handles.length){var c=this;this._handles.forEach(function(a){a._dragEvents=a._dragEvents||new window.Vent(a),a._dragEvents.on("mousedown.CoralDragAction",c._dragStart.bind(c)),a._dragEvents.on("touchstart.CoralDragAction",c._dragStart.bind(c)),a.classList.add(l)})}else this._dragEvents.on("touchstart.CoralDragAction",this._dragStart.bind(this)),this._dragEvents.on("mousedown.CoralDragAction",this._dragStart.bind(this)),this._dragElement.classList.add(l);else this._handles=[],this._dragEvents.on("touchstart.CoralDragAction",this._dragStart.bind(this)),this._dragEvents.on("mousedown.CoralDragAction",this._dragStart.bind(this)),this._dragElement.classList.add(l)}}),Object.defineProperty(Coral.DragAction.prototype,"dropZone",{get:function(){return this._dropZone},set:function(a){Coral.validate.valueMustChange(a,this._dropZone)&&(this._dropZone=a,this._dropZoneEntered=!1,"string"==typeof a||a instanceof HTMLElement||"[object NodeList]"===Object.prototype.toString.call(a)?this._dropZones=b(a):this._dropZones=[])}}),Object.defineProperty(Coral.DragAction.prototype,"axis",{get:function(){return this._axis},set:function(a){var b=Coral.transform.string(a);Coral.validate.valueMustChange(b,this._axis)&&(Coral.validate.enumeration(q)(b)?this._axis=b:this._axis=q.FREE)}}),Object.defineProperty(Coral.DragAction.prototype,"scroll",{get:function(){return this._scroll},set:function(a){var b=Coral.transform["boolean"](a);Coral.validate.valueMustChange(b,this._scroll)&&(this._scroll=b)}}),Object.defineProperty(Coral.DragAction.prototype,"containment",{get:function(){return this._containment},set:function(a){var b=Coral.transform["boolean"](a);Coral.validate.valueMustChange(b,this._containment)&&(this._containment=b)}}),Coral.DragAction.prototype._dragStart=function(b){this._container=a(this._dragElement),"IMG"===b.target.tagName&&b.preventDefault(),Coral.events.on("touchmove.CoralDragAction",function(a){a.preventDefault()}),document.body._overflow=getComputedStyle(document.body).overflow,document.body.style.overflow="hidden",this._container.matches("body")||(this._container._overflow=getComputedStyle(this._container).overflow,this._container.style.overflow=this.scroll?"scroll":"hidden");var d=c(b),e=this._dragElement.getBoundingClientRect();this._dragPosition=c(b),this._dragPosition.y-=e.top+this._scrollingElement.scrollTop,this._dragPosition.x-=e.left+this._scrollingElement.scrollLeft,document.body.classList.add(m),this._handles&&this._handles.length?this._handles.forEach(function(a){a.classList.remove(l)}):this._dragElement.classList.remove(l),this._dragElement.classList.add(n),"static"===window.getComputedStyle(this._dragElement).position&&(this._dragElement.style.position="relative"),this._dragEvents.dispatch("coral-dragaction:dragstart",{detail:{dragElement:this._dragElement,pageX:d.x,pageY:d.y}})},Coral.DragAction.prototype._drag=function(a){if(this._dragElement.classList.contains(n)){var b=this,e=c(a),f=this._scrollingElement.scrollTop,g=this._scrollingElement.scrollLeft,h=this._dragElement.getBoundingClientRect(),i=h.height,j=h.width,k={top:h.top+f,left:h.left+g},l=window.getComputedStyle(this._dragElement),m={top:parseFloat(l.top)||0,left:parseFloat(l.left)||0},q=this._container.getBoundingClientRect(),r=q.width,s=q.height,t={top:q.top+f,left:q.left+g};b._dragEvents.dispatch("coral-dragaction:drag",{detail:{dragElement:b._dragElement,pageX:e.x,pageY:e.y}}),document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges(),this.scroll&&(this._container===document.body?(h.top<o?this._scrollingElement.scrollTop=f-p:h.top+h.height>window.innerHeight-o&&k.top+h.height+o<this._scrollingElement.scrollHeight&&(this._scrollingElement.scrollTop=f+p),h.left<o?this._scrollingElement.scrollLeft=g-p:h.left+h.width>window.innerWidth-o&&k.left+h.width+o<this._scrollingElement.scrollWidth&&(this._scrollingElement.scrollLeft=g+p)):(h.top-q.top<o?this._container.scrollTop=this._container.scrollTop-p:h.top-q.top+h.height>q.height-o&&h.top-q.top+h.height<q.height&&(this._container.scrollTop=this._container.scrollTop+p),h.left-q.left<o?this._container.scrollLeft=this._container.scrollLeft-p:h.left-q.left+h.width>q.width-o&&h.left-q.left+h.width<q.width&&(this._container.scrollLeft=this._container.scrollLeft+p)));var u={};if("horizontal"!==this.axis){var v=e.y-this._dragPosition.y;this.containment?v>=t.top&&v+i<=t.top+s?u.top=v:e.y<=t.top?u.top=t.top:e.y>=t.top+s&&(u.top=t.top+s-i):u.top=v}if("vertical"!==this.axis){var w=e.x-this._dragPosition.x;this.containment?w>=t.left&&w+j<=t.left+r?u.left=w:e.x<=t.left?u.left=t.left:e.x>=t.left+r&&(u.left=t.left+r-j):u.left=w}this._dragElement.style.top=u.top-k.top+m.top+"px",this._dragElement.style.left=u.left-k.left+m.left+"px";var x=d(b);x?(b._dropElement=x,b._dropZoneEntered||(b._dropZoneEntered=!0,b._dragEvents.dispatch("coral-dragaction:dragenter",{detail:{dragElement:b._dragElement,pageX:e.x,pageY:e.y,dropElement:b._dropElement}})),b._dragEvents.dispatch("coral-dragaction:dragover",{detail:{dragElement:b._dragElement,pageX:e.x,pageY:e.y,dropElement:b._dropElement}})):b._dropZoneEntered&&(b._dragEvents.dispatch("coral-dragaction:dragleave",{detail:{dragElement:b._dragElement,pageX:e.x,pageY:e.y,dropElement:b._dropElement}}),b._dropZoneEntered=!1)}},Coral.DragAction.prototype._dragEnd=function(a){if(this._dragElement.classList.contains(n)){var b=c(a);if(document.body.style.overflow=document.body._overflow,document.body._overflow=void 0,this._container.matches("body")||(this._container.style.overflow=this._container._overflow,this._container._overflow=void 0),document.body.classList.remove(m),this._dragElement.classList.remove(n),this._handles&&this._handles.length?this._handles.forEach(function(a){a.classList.add(l)}):this._dragElement.classList.add(l),this._dropZoneEntered){var e=d(this);e&&(this._dropElement=e,this._dragEvents.dispatch("coral-dragaction:drop",{detail:{dragElement:this._dragElement,pageX:b.x,pageY:b.y,dropElement:this._dropElement}}))}this._dragEvents.dispatch("coral-dragaction:dragend",{detail:{dragElement:this._dragElement,pageX:b.x,pageY:b.y}})}},Coral.DragAction.prototype.destroy=function(a){document.body.classList.remove(m),this._dragElement.classList.remove(n),this._handles&&this._handles.length?this._handles.forEach(function(a){a._dragEvents.off(".CoralDragAction"),a.classList.remove(l)}):(this._dragEvents.off(".CoralDragAction"),this._dragElement.classList.remove(l)),Coral.events.off(".CoralDragAction"+this._id),document.body._overflow&&(document.body.style.overflow=document.body._overflow,document.body._overflow=void 0),this._container&&!this._container.matches("body")&&this._container._overflow&&(this._container.style.overflow=this._container._overflow,this._container._overflow=void 0),a&&(this._dragElement.style.position=this._initialPosition.position,this._dragElement.style.top=this._initialPosition.top,this._dragElement.style.left=this._initialPosition.left),this._dragElement.dragAction=void 0},Coral.DragAction.axis=q,document.addEventListener("DOMContentLoaded",function(){Array.prototype.forEach.call(document.body.querySelectorAll("["+f+"]"),function(a){new Coral.DragAction(a)})})}(),window.Coral=window.Coral||{},window.Coral.strings=window.Coral.strings||{},window.Coral.strings["coralui-component-dialog"]={"en-US":{Close:"Close"},"de-DE":{Close:"Schließen"},"fr-FR":{Close:"Fermer"},"it-IT":{Close:"Chiudi"},"ja-JP":{Close:"閉じる"},"es-ES":{Close:"Cerrar"},"ko-KR":{Close:"닫기"},"zh-CN":{Close:"关闭"},"zh-TW":{Close:"關閉"},"pt-BR":{Close:"Fechar"},"nl-NL":{Close:"Sluiten"},"da-DK":{Close:"Luk"},"fi-FI":{Close:"Sulje"},"nb-NO":{Close:"Lukk"},"sv-SE":{Close:"Stäng"},"cs-CZ":{Close:"Zavřít"},"pl-PL":{Close:"Zamknij"},"ru-RU":{Close:"Закрыть"},"tr-TR":{Close:"Kapat"}},window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.Dialog=window.Coral.templates.Dialog||{},window.Coral.templates.Dialog.header=function(a){var b=document.createDocumentFragment(),c=this.icon=document.createElement("coral-icon");c.setAttribute("handle","icon"),c.className+=" coral3-Dialog-typeIcon",c.setAttribute("size","S"),b.appendChild(c);var d=document.createTextNode("\n");b.appendChild(d);var e=this.headerContent=document.createElement("div");e.setAttribute("handle","headerContent"),e.className+=" coral3-Dialog-title coral-Heading coral-Heading--2",e.setAttribute("role","heading"),e.setAttribute("aria-level","2"),b.appendChild(e);var f=document.createTextNode("\n");b.appendChild(f);var g=this.closeButton=document.createElement("button","coral-button");return g.setAttribute("handle","closeButton"),g.className+=" coral3-Dialog-closeButton",g.setAttribute("type","button"),g.setAttribute("is","coral-button"),g.setAttribute("variant","minimal"),g.setAttribute("icon","close"),g.setAttribute("iconsize","XS"),g.setAttribute("title",Coral.i18n.get("Close")),g.setAttribute("tabindex","-1"),g.setAttribute("coral-close",""),b.appendChild(g),b},function(){"use strict";var a={ON:"on",OFF:"off"},b={ON:"on",OFF:"off"},c={DEFAULT:"default",ERROR:"error",WARNING:"warning",SUCCESS:"success",HELP:"help",INFO:"info"},d={NONE:"none",MODAL:"modal",STATIC:"static"},e={error:"alert",warning:"alert",success:"checkCircle",help:"helpCircle",info:"infoCircle"},f="coral3-Dialog",g=f+"--fullscreen",h=f+"--backdropNone",i=[];for(var j in c)i.push(f+"--"+c[j]);Coral.register({name:"Dialog",tagName:"coral-dialog",className:f,mixins:[Coral.mixin.overlay],events:{"click [coral-close]":"_handleCloseClick",click:"_handleClick","global:resize":"center","global:key:escape":"_handleEscape"},properties:{interaction:{"default":b.ON,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(b)]},trapFocus:{"default":Coral.mixin.overlay.trapFocus.ON
},returnFocus:{"default":Coral.mixin.overlay.returnFocus.ON},header:Coral.property.contentZone({handle:"header",tagName:"coral-dialog-header",insert:function(a){this._elements.headerContent.appendChild(a)},set:function(a){this._observeHeader(),this._hideHeaderIfEmpty()}}),content:Coral.property.contentZone({handle:"content",tagName:"coral-dialog-content",defaultContentZone:!0,insert:function(a){this._elements.contentZoneTarget.insertBefore(a,this.footer)}}),footer:Coral.property.contentZone({handle:"footer",tagName:"coral-dialog-footer",insert:function(a){this._elements.contentZoneTarget.appendChild(a)}}),backdrop:{"default":d.MODAL,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(d)],sync:function(){var a=this.backdrop!==d.NONE;this.open&&a&&this._showBackdrop(),this.classList.toggle(h,!a)}},variant:{"default":c.DEFAULT,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(c)],sync:function(){this.classList.remove.apply(this.classList,i),this.variant===Coral.Dialog.variant.DEFAULT?(this._elements.icon.icon="",this.setAttribute("role","dialog")):(this._elements.icon.icon=e[this.variant],this.classList.add(f+"--"+this.variant),this.setAttribute("role","alertdialog"))}},fullscreen:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,set:function(a){a&&(this.movable=!1),this._fullscreen=a},sync:function(){this.fullscreen?(this.classList.add(g),this._elements.wrapper.style.top="",this._elements.wrapper.style.left="",this._elements.wrapper.style.marginLeft="",this._elements.wrapper.style.marginTop="",this._elements.closeButton.iconSize="S"):(this.classList.remove(g),this._elements.closeButton.iconSize="XS",this._center())}},open:{sync:function(){this.open&&(this._open=!1,this.parentNode!==document.body&&document.body.insertBefore(this,document.body.lastElementChild),this._open=!0,this._center(),this.backdrop!==d.NONE&&this._showBackdrop())}},icon:Coral.property.proxy({path:"_elements.icon.icon"}),closable:{"default":a.OFF,reflectAttribute:!0,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(a)],sync:function(){this.classList.toggle(this._className+"--closable",this.closable===a.ON),this._elements.closeButton.style.display=this.closable===a.ON?"":"none"}},movable:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,set:function(a){a&&(this.fullscreen=!1),this._movable=a},sync:function(){var a=this._elements.wrapper;if(this.movable){a.style.width=a.getBoundingClientRect().width+"px";var b=new Coral.DragAction(a);b.handle=this._elements.headerWrapper}else a.style.width="",a.dragAction&&a.dragAction.destroy(),this._center()}}},_overlayAnimationTime:Coral.mixin.overlay.FADETIME,_initialize:function(){this._center=this._center.bind(this),this.style.display="none",this._headerObserver=new MutationObserver(this._hideHeaderIfEmpty.bind(this)),this._observeHeader()},_observeHeader:function(){this._headerObserver&&(this._headerObserver.disconnect(),this._headerObserver.observe(this._elements.header,{childList:!0,characterData:!0,subtree:!0}))},_hideHeaderIfEmpty:function(){var a=this._elements.header,b=this._elements.headerContent,c=0===a.children.length||""===a.textContent.replace(/\s*/g,"");c?(b.removeAttribute("role"),b.removeAttribute("aria-level")):(b.setAttribute("role","heading"),b.setAttribute("aria-level","2"))},_handleEscape:function(a){this.interaction===Coral.Dialog.interaction.ON&&this.open&&this._isTopOverlay()&&this.hide()},_handleCloseClick:function(a){var b=a.matchedTarget,c=b.getAttribute("coral-close");c&&!this.matches(c)||(this.hide(),a.stopPropagation())},_handleClick:function(a){a.target===this&&this.backdrop===d.MODAL&&this._isTopOverlay()&&this.hide()},attachedCallback:function(){Coral.Component.prototype.attachedCallback.apply(this,arguments),this.open&&this._center()},_render:function(){var a=this.querySelector("coral-dialog-header"),b=this.querySelector("coral-dialog-content"),c=this.querySelector("coral-dialog-footer"),d=b||c||a,e=this.querySelector(".coral3-Dialog-wrapper");if(e)Array.prototype.filter.call(this.children,function(a){return a.hasAttribute("coral-tabcapture")}).forEach(function(a){this.removeChild(a)}.bind(this)),this._elements.headerWrapper=this.querySelector(".coral3-Dialog-header"),this._elements.headerContent=this.querySelector(".coral3-Dialog-title"),this._elements.closeButton=this.querySelector(".coral3-Dialog-closeButton"),this._elements.icon=this.querySelector(".coral3-Dialog-typeIcon"),this._elements.wrapper=e,this._elements.contentZoneTarget=d.parentNode;else{a=a||document.createElement("coral-dialog-header"),b=b||document.createElement("coral-dialog-content"),c=c||document.createElement("coral-dialog-footer"),e=document.createElement("div"),e.className="coral3-Dialog-wrapper";var f=Coral.templates.Dialog.header.call(this._elements),g=this._elements.headerWrapper=document.createElement("div");if(g.className="coral3-Dialog-header",g.appendChild(f),this._elements.wrapper=e,d){for(d.parentNode===this?this._elements.contentZoneTarget=e:this._elements.contentZoneTarget=d.parentNode;this.firstChild;)e.appendChild(this.firstChild);this._elements.contentZoneTarget.appendChild(g)}else{for(this._elements.contentZoneTarget=e;this.firstChild;)b.appendChild(this.firstChild);e.appendChild(g),e.appendChild(b),e.appendChild(c)}this.appendChild(e)}this.header=a,this.content=b,this.footer=c},center:function(){if(!this.fullscreen)return this._centered&&Coral.commons.nextFrame(this._center),this._centered=!1,this},_center:function(){var a=this._elements.wrapper,b=this.style.display;this.style.display="block",a.style.position="absolute",a.style.left=0,a.style.top=0;var c=a.offsetWidth,d=a.offsetHeight;d<window.innerHeight-20?(a.style.top="50%",a.style.marginTop=-(d/2)+"px"):(a.style.top="",a.style.marginTop=""),this.fullscreen?(a.style.marginLeft="",a.style.left=""):(a.style.marginLeft=-(c/2)+"px",a.style.left="50%"),this.style.display=b,this._centered=!0}}),Coral.register({name:"Dialog.Header",tagName:"coral-dialog-header"}),Coral.register({name:"Dialog.Footer",tagName:"coral-dialog-footer",className:"coral3-Dialog-footer"}),Coral.register({name:"Dialog.Content",tagName:"coral-dialog-content",className:"coral3-Dialog-content"}),Coral.Dialog.interaction=b,Coral.Dialog.variant=c,Coral.Dialog.backdrop=d,Coral.Dialog.closable=a}(),function(){"use strict";var a="coral3-Popover",b={ON:"on",OFF:"off"},c={ON:"on",OFF:"off"},d={DEFAULT:"default",ERROR:"error",WARNING:"warning",SUCCESS:"success",HELP:"help",INFO:"info"};Coral.register({name:"Popover",tagName:"coral-popover",className:a,extend:Coral.Overlay,events:{"global:capture:click":"_handleClick","click [coral-close]":"_handleCloseClick"},properties:{trapFocus:{"default":Coral.mixin.overlay.trapFocus.ON},returnFocus:{"default":Coral.mixin.overlay.returnFocus.ON},focusOnShow:{"default":Coral.mixin.overlay.focusOnShow.ON},content:Coral.property.contentZone({handle:"content",tagName:"coral-popover-content",defaultContentZone:!0,insert:function(a){this._elements.contentWrapper.appendChild(a)}}),header:Coral.property.contentZone({handle:"header",tagName:"coral-popover-header",insert:function(a){this._elements.headerContent.appendChild(a)},set:function(a){this._observeHeader(),this._hideHeaderIfEmpty()}}),alignMy:{"default":Coral.Overlay.align.LEFT_CENTER},alignAt:{"default":Coral.Overlay.align.RIGHT_CENTER},offset:{"default":5},open:{sync:function(){var a=this._getTarget();a&&(this.open?(this._targetWasSelected=a.classList.contains("is-selected"),this._targetWasSelected||a.classList.add("is-selected")):this._targetWasSelected||a.classList.remove("is-selected"))}},interaction:{"default":c.ON},variant:Coral.Dialog.prototype._properties.variant,closable:{"default":b.OFF,reflectAttribute:!0,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(b)],sync:function(){this._elements.closeButton.style.display=this.closable===b.ON?"":"none"}},icon:Coral.property.proxy({path:"_elements.icon.icon"})},_overlayAnimationTime:Coral.mixin.overlay.FADETIME,_observeHeader:function(){this._headerObserver&&(this._headerObserver.disconnect(),this._headerObserver.observe(this._elements.header,{childList:!0,characterData:!0,subtree:!0}))},_hideHeaderIfEmpty:function(){var a=this._elements.header,b=this._elements.headerWrapper,c=this._elements.headerContent,d=0===a.children.length&&""===a.textContent.replace(/\s*/g,"");d!==b.hidden&&(b.hidden=d,d?(c.removeAttribute("role"),c.removeAttribute("aria-level")):(c.setAttribute("role","heading"),c.setAttribute("aria-level","2")),this.reposition())},_handleCloseClick:function(a){var b=a.matchedTarget,c=b.getAttribute("coral-close");c&&!this.matches(c)||(this.hide(),a.stopPropagation())},_handleClick:function(a){if(this.interaction!==c.OFF){var b=a.target,d=this._getTarget(),e=!!d&&d.contains(b);e?this.open||d.disabled?this.hide():this.show():this.open&&!this.contains(b)&&this.hide()}},attachedCallback:function(){Coral.Component.prototype.attachedCallback.call(this),this.open&&(this._pushOverlay(),this._showBackdropOnAttached&&this._showBackdrop(),this.reposition())},_render:function(){var a=document.createDocumentFragment(),b=this._elements.headerWrapper=document.createElement("div");b.className="coral3-Dialog-header coral3-Popover-header";var c=this._elements.contentWrapper=document.createElement("div");c.className="coral3-Popover-content";var d=Coral.templates.Dialog.header.call(this._elements);b.appendChild(d);var e=this.querySelector("coral-popover-header"),f=e||document.createElement("coral-popover-header"),g=this.querySelector("coral-popover-content")||document.createElement("coral-popover-content");for(this.header=f,this.content=g,e||(b.hidden=!0),a.appendChild(b),a.appendChild(c);this.firstChild;)g.appendChild(this.firstChild);this.appendChild(a)},_initialize:function(){this.setAttribute("role","dialog"),this.setAttribute("aria-live","assertive"),this._headerObserver=new MutationObserver(this._hideHeaderIfEmpty.bind(this)),this._observeHeader()}}),Coral.register({name:"Popover.Content",tagName:"coral-popover-content"}),Coral.register({name:"Popover.Header",tagName:"coral-popover-header"}),Coral.register({name:"Popover.Separator",tagName:"coral-popover-separator",className:"coral3-Popover-separator"}),Coral.Popover.closable=b,Coral.Popover.interaction=c,Coral.Popover.variant=d}(),window.Coral=window.Coral||{},window.Coral.strings=window.Coral.strings||{},window.Coral.strings["coralui-component-actionbar"]={"en-US":{More:"More"},"de-DE":{More:"Mehr"},"fr-FR":{More:"Plus"},"it-IT":{More:"Altro"},"ja-JP":{More:"その他"},"es-ES":{More:"Más"},"ko-KR":{More:"자세히"},"zh-CN":{More:"更多"},"zh-TW":{More:"更多"},"pt-BR":{More:"Mais"},"nl-NL":{More:"Meer"},"da-DK":{More:"Mere"},"fi-FI":{More:"Lisää"},"nb-NO":{More:"Mer"},"sv-SE":{More:"Mer"},"cs-CZ":{More:"Více"},"pl-PL":{More:"Więcej"},"ru-RU":{More:"Дополнительно"},"tr-TR":{More:"Daha Fazla"}},window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.ActionBar=window.Coral.templates.ActionBar||{},window.Coral.templates.ActionBar.moreButton=function(a){var b=this.moreButton=document.createElement("button","coral-button");return b.setAttribute("is","coral-button"),b.setAttribute("handle","moreButton"),b.setAttribute("type","button"),b.setAttribute("variant","quiet"),b.setAttribute("icon","more"),b.setAttribute("coral-actionbar-more",""),b.setAttribute("aria-expanded","false"),b.setAttribute("aria-haspopup","true"),b},window.Coral.templates.ActionBar.morePopover=function(a){var b=this.popover=document.createElement("coral-popover");return b.setAttribute("handle","popover"),b.setAttribute("alignmy","left top"),b.setAttribute("alignat","left bottom"),b.setAttribute("coral-actionbar-popover",""),b},window.Coral.templates.ActionBar.popovercontent=function(a){var b=a,c=document.createElement("ul");c.className+=" coral-List coral-List--minimal";var d=document.createTextNode("\n  ");c.appendChild(d);for(var e=a,f=0,g=e.length;f<g;f++){var h=b=e[f],i=document.createTextNode("\n    ");c.appendChild(i);var j=document.createElement("li");j.className+=" coral-List-item";var k=document.createTextNode("\n      ");j.appendChild(k),j.appendChild(h),c.appendChild(j);var l=document.createTextNode("\n  ");c.appendChild(l)}var m=document.createTextNode("\n");return c.appendChild(m),c},function(){"use strict";Coral.register({name:"ActionBar",tagName:"coral-actionbar",className:"coral3-ActionBar",events:{"key:up":"_onFocusPreviousItem","key:left":"_onFocusPreviousItem","key:down":"_onFocusNextItem","key:right":"_onFocusNextItem","global:resize":"_onResizeWindow"},properties:{primary:Coral.property.contentZone({handle:"primary",tagName:"coral-actionbar-primary",defaultContentZone:!0,insert:function(a){this.insertBefore(a,this.secondary)}}),secondary:Coral.property.contentZone({handle:"secondary",tagName:"coral-actionbar-secondary",insert:function(a){this.appendChild(a)}})},_render:function(){for(var a=this.querySelectorAll("object"),b=0;b<a.length;++b){var c=a[b];c.parentNode===this&&this.removeChild(c)}var d=this.querySelector("coral-actionbar-primary"),e=this.querySelector("coral-actionbar-secondary"),f=null!==d;d=d||document.createElement("coral-actionbar-primary"),e=e||document.createElement("coral-actionbar-secondary");for(var g,h,i=Array.prototype.slice.call(this.getElementsByTagName("coral-actionbar-container")),j=0,k=i.length;j<k;j++){if(g=i[j],0===j?(h=d,f=!0):1===j&&(h=e),h)for(g.hasAttribute("threshold")&&h.setAttribute("threshold",g.getAttribute("threshold")),g.hasAttribute("morebuttontext")&&h.setAttribute("morebuttontext",g.getAttribute("morebuttontext"));g.firstChild;)h.appendChild(g.firstChild);this.removeChild(g)}if(!f)for(;this.firstChild;)d.appendChild(this.firstChild);this.primary=d,this.secondary=e},_recalculateLayoutOnMutation:function(){var a=this;a._observer=new MutationObserver(function(){a._debounceOnLayout()}),a._observer.observe(a,{attributes:!0,childList:!0,characterData:!0,subtree:!0})},_initialize:function(){this._wait=50,this._onLayout=this._onLayout.bind(this),this._debounceOnLayout=this._debounceOnLayout.bind(this);var a=this;Coral.commons.nextFrame(function(){a._onLayout(),a._recalculateLayoutOnMutation()})},attachedCallback:function(){Coral.Component.prototype.attachedCallback.apply(this,arguments);var a=this;Coral.commons.nextFrame(function(){Coral.commons.addResizeListener(a,a._debounceOnLayout),Coral.commons.addResizeListener(a.primary,a._debounceOnLayout),Coral.commons.addResizeListener(a.secondary,a._debounceOnLayout)})},detachedCallback:function(){Coral.Component.prototype.detachedCallback.apply(this,arguments),Coral.commons.removeResizeListener(this,this._debounceOnLayout),Coral.commons.removeResizeListener(this.primary,this._debounceOnLayout),Coral.commons.removeResizeListener(this.secondary,this._debounceOnLayout)},_onFocusPreviousItem:function(a){a.preventDefault();var b=this._getPreviousSelectableWrappedItem(a.target);null!==b&&b.focus()},_onFocusNextItem:function(a){a.preventDefault();var b=this._getNextSelectableWrappedItem(a.target);null!==b&&b.focus()},_onResizeWindow:function(){for(var a=this.querySelectorAll("coral-popover"),b=0;b<a.length;b++)a[b].open=!1;this._debounceOnLayout()},_onLayout:function(){if(this.primary&&this.primary._elements.popover&&this.secondary&&this.secondary._elements.popover&&this.primary._elements.popover.open!==!0&&this.secondary._elements.popover.open!==!0){var a=document.activeElement;this!==a&&this.contains(a)||(a=null),a&&a.parentNode&&"coral-actionbar-item"===a.parentNode.tagName.toLowerCase()&&(a=a.parentNode);for(var b=25,c=this.primary.items.getAll(),d=this.secondary.items.getAll().reverse(),e=null,f=null,g=this._newWidthCache(),h=c.length>0?g.getOuterWidth(this.primary._elements.moreButton):0,i=d.length>0?g.getOuterWidth(this.secondary._elements.moreButton):0,j=this.primary.offsetWidth-this.primary.getBoundingClientRect().width,k=this.secondary.offsetWidth-this.secondary.getBoundingClientRect().width,l=this.primary.offsetLeft,m=this.offsetWidth-(this.secondary.offsetLeft+this.secondary.offsetWidth),n=this.offsetWidth-l-m-h-i-j-k-b,o=0,p=0,q=0,r=!1,s=!1,t=!1,u=0,v=0;v<c.length||v<d.length;v++)e=v<c.length?c[v]:null,f=v<d.length?d[v]:null,t=!1,null!==e&&(e.hidden||"none"===e.style.display?this._moveToScreen(e):(r||(this.primary.threshold<=0||p<this.primary.threshold)&&(u=g.getOuterWidth(e),o+u<n?t=!0:p===c.length-1&&o+u<n+h&&(t=!0)),this._makeItemTabEnabled(e,t&&0===v),t?(p+=1,o+=u,this._moveToScreen(e)):(this._hideItem(e),r=!0),p===c.length&&(n+=h,r=!1))),t=!1,null!==f&&(f.hidden||"none"===f.style.display?this._moveToScreen(f):(s||(this.secondary.threshold<=0||q<this.secondary.threshold)&&(u=g.getOuterWidth(f),o+u<n?t=!0:q===d.length-1&&o+u<n+i&&(t=!0)),this._makeItemTabEnabled(f,t&&v===d.length-1),t?(q+=1,o+=u,this._moveToScreen(f)):(this._hideItem(f),s=!0),q===d.length&&(n+=i,s=!1)));if(this._moveToScreen(this.primary._elements.moreButton,r),this._moveToScreen(this.secondary._elements.moreButton,s),this._makeItemTabEnabled(this.primary._elements.moreButton,p<1),this._makeItemTabEnabled(this.secondary._elements.moreButton,q<d.length),a&&a.hasAttribute&&a.hasAttribute("coral-actionbar-offscreen")){var w=Coral.ActionBar._getFirstSelectableWrappedItem(this._getAllSelectableItems()[0]);w&&w.focus()}}},_getNextSelectableWrappedItem:function(a){"coral-actionbar-item"===a.parentNode.tagName.toLowerCase()&&(a=a.parentNode);var b=this._getAllSelectableItems(a),c=b.indexOf(a);return c>=0&&b.length>c+1?Coral.ActionBar._getFirstSelectableWrappedItem(b[c+1]):null},_getPreviousSelectableWrappedItem:function(a){"coral-actionbar-item"===a.parentNode.tagName.toLowerCase()&&(a=a.parentNode);var b=this._getAllSelectableItems(a),c=b.indexOf(a);return c>0?Coral.ActionBar._getFirstSelectableWrappedItem(b[c-1]):null},_getAllSelectableItems:function(a){var b=[];if(this.primary._elements.popover.open===!0||this.secondary._elements.popover.open===!0)for(var c=this.primary._elements.popover.open===!0?this.primary._itemsInPopover:this.secondary._itemsInPopover,d=null,e=0;e<c.length;e++)d=c[e],d.hasAttribute("disabled")||d.hasAttribute("hidden")||"none"===d.style.display||!Coral.ActionBar._getFirstSelectableWrappedItem(d)||b.push(d);else{var f=this.primary.items._getAllSelectable(),g=this.secondary.items._getAllSelectable();a?f.indexOf(a)>=0?b=f:g.indexOf(a)>=0&&(b=g):b=f.concat(g)}return b},_newWidthCache:function(){return{_items:[],_outerWidth:[],getOuterWidth:function(a){var b=this._items.indexOf(a);if(b<0){this._items.push(a);var c=a.offsetWidth;this._outerWidth.push(c),b=this._outerWidth.length-1}return this._outerWidth[b]}}},_forceWebkitRedraw:function(a){var b="WebkitAppearance"in document.documentElement.style;b&&"none"!==a.style.display&&(a.style.display="none",this._cachedOffsetHeight=a.offsetHeight,a.style.display="")},_hideItem:function(a,b){b===!1?this._moveToScreen(a):a.hasAttribute("coral-actionbar-offscreen")||(a.setAttribute("coral-actionbar-offscreen",""),this._forceWebkitRedraw(a))},_moveToScreen:function(a,b){b===!1?this._hideItem(a):a.hasAttribute("coral-actionbar-offscreen")&&(a.removeAttribute("coral-actionbar-offscreen"),this._forceWebkitRedraw(a))},_makeItemTabEnabled:function(a,b){a=Coral.ActionBar._getFirstSelectableWrappedItem(a),null!==a&&(b&&a.hasAttribute("tabindex")?a.removeAttribute("tabindex"):b||a.hasAttribute("tabindex")||a.setAttribute("tabindex","-1"))},_debounceOnLayout:function(){var a=this;null!==a._timeout&&window.clearTimeout(a._timeout),a._timeout=window.setTimeout(function(){a._timeout=null,a._onLayout()},a._wait)}}),Coral.ActionBar._getFirstSelectableWrappedItem=function(a){if(!a)return null;if(a.hasAttribute("coral-actionbar-more"))return a;for(var b=null,c=0;c<a.children.length;c++)if(b=a.children[c],b.offsetParent&&b.matches(Coral.commons.FOCUSABLE_ELEMENT_SELECTOR))return b;return null}}(),function(){"use strict";var a={PRIMARY:"primary",SECONDARY:"secondary",INVALID:"invalid"};Coral.register({name:"ActionBar.Container",tagName:"coral-actionbar-container",className:"coral3-ActionBar-container",_itemsInPopover:[],events:{'coral-overlay:beforeopen [handle="popover"]':"_beforePopoverOpen",'coral-overlay:beforeclose [handle="popover"]':"_beforePopoverClose"},properties:{_position:{attribute:null,get:function(){if(this.parentNode){var a=this.parentNode.querySelectorAll("coral-actionbar-container");if(a.length>0&&a[0]===this)return Coral.ActionBar.Container.position.PRIMARY;if(a.length>1&&a[1]===this)return Coral.ActionBar.Container.position.SECONDARY}return Coral.ActionBar.Container.position.INVALID},set:function(){}},items:{get:function(){return this._items||(this._items=new Coral.ActionBar.Container.Collection(this)),this._items},set:function(){}},threshold:{"default":-1,reflectAttribute:!0,transform:Coral.transform.number},moreButtonText:{"default":"",attribute:"morebuttontext",transform:Coral.transform.string,sync:function(){this._elements.moreButton&&(this._elements.moreButton.label.innerHTML=this.moreButtonText,""===this.moreButtonText.trim()?this._elements.moreButton.setAttribute("title",Coral.i18n.get("More")):this._elements.moreButton.removeAttribute("title"))}}},_beforePopoverOpen:function(a){if(a.target===this._elements.popover&&(this._itemsInPopover=this.items._getAllOffScreen(),!(this._itemsInPopover.length<1))){this._elements.popover.hidden=!1;var b=this._elements.popover.content;b.innerHTML="",b.appendChild(Coral.templates.ActionBar.popovercontent(this._itemsInPopover));var c,d=this,e=!0,f=function(){return(c=Coral.ActionBar._getFirstSelectableWrappedItem(d._itemsInPopover[0]))?(c.removeAttribute("tabindex"),void c.focus()):void(e&&(e=!1,Coral.commons.nextFrame(f)))};Coral.commons.nextFrame(f)}},_beforePopoverClose:function(a){if(a.target===this._elements.popover){var b=document.activeElement.parentNode;this._elements.popover.hidden=!0;for(var c=this._elements.popover.querySelectorAll("coral-popover"),d=0;d<c.length;d++)c[d].open=!1;this._position===Coral.ActionBar.Container.position.PRIMARY?this._returnLeftElementsFromPopover():this._position===Coral.ActionBar.Container.position.SECONDARY&&this._returnRightElementsFromPopover(),this._itemsInPopover=[];var e=this.parentNode!==b&&this.parentNode.contains(b),f=b.hasAttribute&&b.hasAttribute("coral-actionbar-offscreen");e&&f&&this._elements.moreButton.focus()}},_render:function(){for(var a=this.querySelectorAll("object"),b=0;b<a.length;++b){var c=a[b];c.parentNode===this&&this.removeChild(c)}this._elements.moreButton=this.querySelector("[coral-actionbar-more]"),this._elements.moreButton&&this.removeChild(this._elements.moreButton),this._elements.popover=this.querySelector("[coral-actionbar-popover]"),this._elements.popover&&this.removeChild(this._elements.popover),Coral.templates.ActionBar.moreButton.call(this._elements),this._elements.moreButton.label.textContent=this.moreButtonText,this.appendChild(this._elements.moreButton),Coral.templates.ActionBar.morePopover.call(this._elements),this._elements.popover.target=this._elements.moreButton,this.insertBefore(this._elements.popover,this.firstChild||null),console.warn("@deprecated: coral-actionbar-container is deprecated, use coral-actionbar-primary and coral-actionbar-secondary instead")},_returnLeftElementsFromPopover:function(){for(var a=null,b=null,c=0;c<this._itemsInPopover.length;c++)a=this._itemsInPopover[c],b=Coral.ActionBar._getFirstSelectableWrappedItem(a),b&&b.hasAttribute("tabindex")&&b.setAttribute("tabindex",-1),this.insertBefore(a,this._elements.moreButton||null)},_returnRightElementsFromPopover:function(){for(var a=null,b=null,c=this._itemsInPopover.length-1;c>=0;c--)a=this._itemsInPopover[c],b=Coral.ActionBar._getFirstSelectableWrappedItem(a),b&&b.hasAttribute("tabindex")&&b.setAttribute("tabindex",-1),this.insertBefore(a,this.firstChild.nextSibling||null)},_attachMoreButtonToContainer:function(){this.parentNode&&this.parentNode.secondary===this?this.insertBefore(this._elements.moreButton,this.firstChild||null):this.appendChild(this._elements.moreButton)},attachedCallback:function(){if(Coral.Component.prototype.attachedCallback.apply(this,arguments),this.parentNode._componentReady)this._attachMoreButtonToContainer();else{var a=this;Coral.commons.ready(this,function(){a._attachMoreButtonToContainer()})}}}),Coral.ActionBar.Container.position=a}(),function(){"use strict";var a={items:{get:function(){return this._items||(this._items=new Coral.ActionBar.Container.Collection(this)),this._items},set:function(){}},threshold:{"default":-1,reflectAttribute:!0,transform:Coral.transform.number},moreButtonText:{"default":"",attribute:"morebuttontext",transform:Coral.transform.string,sync:function(){this._elements.moreButton&&(this._elements.moreButton.label.innerHTML=this.moreButtonText,""===this.moreButtonText.trim()?this._elements.moreButton.setAttribute("title",Coral.i18n.get("More")):this._elements.moreButton.removeAttribute("title"))}}},b={'coral-overlay:beforeopen [handle="popover"]':"_onOverlayBeforeOpen",'coral-overlay:beforeclose [handle="popover"]':"_onOverlayBeforeClose"},c={_onOverlayBeforeOpen:function(a){if(a.target===this._elements.popover&&(this._itemsInPopover=this.items._getAllOffScreen(),!(this._itemsInPopover.length<1))){this._elements.popover.hidden=!1;var b=this._elements.popover.content;b.innerHTML="",b.appendChild(Coral.templates.ActionBar.popovercontent(this._itemsInPopover));var c,d=this,e=!0,f=function(){return(c=Coral.ActionBar._getFirstSelectableWrappedItem(d._itemsInPopover[0]))?(c.removeAttribute("tabindex"),void c.focus()):void(e&&(e=!1,Coral.commons.nextFrame(f)))};Coral.commons.nextFrame(f)}},_onOverlayBeforeClose:function(a){if(a.target===this._elements.popover){var b=document.activeElement.parentNode;this._elements.popover.hidden=!0;for(var c=this._elements.popover.querySelectorAll("coral-popover"),d=0;d<c.length;d++)c[d].open=!1;this._returnElementsFromPopover(),this._itemsInPopover=[];var e=this.parentNode.contains(b),f=b.hasAttribute&&b.hasAttribute("coral-actionbar-offscreen");e&&f&&this._elements.moreButton.focus()}},_render:function(){for(var a=this.querySelectorAll("object"),b=0;b<a.length;++b){var c=a[b];c.parentNode===this&&this.removeChild(c)}this._elements.moreButton=this.querySelector("[coral-actionbar-more]"),this._elements.moreButton&&this.removeChild(this._elements.moreButton),this._elements.popover=this.querySelector("[coral-actionbar-popover]"),this._elements.popover&&this.removeChild(this._elements.popover),Coral.templates.ActionBar.moreButton.call(this._elements),this._elements.moreButton.label.textContent=this.moreButtonText,this.appendChild(this._elements.moreButton),Coral.templates.ActionBar.morePopover.call(this._elements),this._elements.popover.target=this._elements.moreButton,this.insertBefore(this._elements.popover,this.firstChild||null)}};Coral.mixin.actionBarContainer=function(d,e){Coral.commons.augment(d,c,function(a,b,c){return Coral.commons.callAll(b,a)}),d._events=Coral.commons.augment({},d._events,b),Coral.register.augmentProperties(e.properties,a)}}(),function(){"use strict";Coral.register({name:"ActionBar.Primary",tagName:"coral-actionbar-primary",className:"coral3-ActionBar-primary",mixins:[Coral.mixin.actionBarContainer],_itemsInPopover:[],_returnElementsFromPopover:function(){for(var a=null,b=null,c=0;c<this._itemsInPopover.length;c++)a=this._itemsInPopover[c],b=Coral.ActionBar._getFirstSelectableWrappedItem(a),b&&b.hasAttribute("tabindex")&&b.setAttribute("tabindex",-1),this.insertBefore(a,this._elements.moreButton||null)},_attachMoreButtonToContainer:function(){this.appendChild(this._elements.moreButton)},attachedCallback:function(){var a=this;Coral.Component.prototype.attachedCallback.apply(this,arguments),Coral.commons.ready(this,function(){a._attachMoreButtonToContainer()})}})}(),function(){"use strict";Coral.register({name:"ActionBar.Secondary",tagName:"coral-actionbar-secondary",className:"coral3-ActionBar-secondary",mixins:[Coral.mixin.actionBarContainer],_itemsInPopover:[],_returnElementsFromPopover:function(){for(var a=null,b=null,c=this._itemsInPopover.length-1;c>=0;c--)a=this._itemsInPopover[c],b=Coral.ActionBar._getFirstSelectableWrappedItem(a),b&&b.hasAttribute("tabindex")&&b.setAttribute("tabindex",-1),this.insertBefore(a,this.firstChild.nextSibling||null)},_attachMoreButtonToContainer:function(){this.insertBefore(this._elements.moreButton,this.firstChild||null)},attachedCallback:function(){Coral.Component.prototype.attachedCallback.apply(this,arguments),this._attachMoreButtonToContainer()}})}(),function(){"use strict";var a=function(a){this._host=a};a.prototype=Object.create(Coral.Collection.prototype),a.prototype.add=function(a,b){if(b||"CORAL-ACTIONBAR-PRIMARY"!==this._host.tagName||(b=this._host.lastChild),!(a instanceof HTMLElement)){var c=a;a=document.createElement("coral-actionbar-item"),a.set(c,!0)}return this._host.insertBefore(a,b||null),a},a.prototype.clear=function(){for(var a=this.getAll(),b=[],c=a.length-1;c>-1;c--)b.push(this.remove(a[c]));return this._host._itemsInPopover=[],b},a.prototype.getAll=function(){var a=Array.prototype.filter.call(this._host.children,function(a){return"CORAL-ACTIONBAR-ITEM"===a.tagName});return a.concat(this._host._itemsInPopover)},a.prototype._getAllSelectable=function(){for(var a=[],b=null,c=0;c<this._host.children.length;c++)b=this._host.children[c],b.hasAttribute("disabled")||b.hasAttribute("hidden")||b.hasAttribute("coral-actionbar-offscreen")||b===this._host._elements.popover||!Coral.ActionBar._getFirstSelectableWrappedItem(b)||a.push(b);return a},a.prototype._getAllOffScreen=function(){return Array.prototype.filter.call(this._host.children,function(a){return"CORAL-ACTIONBAR-ITEM"===a.tagName&&a.hasAttribute("CORAL-ACTIONBAR-OFFSCREEN")})},Coral.ActionBar.Container.Collection=a}(),function(){"use strict";Coral.register({name:"ActionBar.Item",tagName:"coral-actionbar-item",className:"coral3-ActionBar-item",properties:{content:{contentZone:!0,get:function(){return this},set:function(){}}}})}(),window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.Alert=window.Coral.templates.Alert||{},window.Coral.templates.Alert.icon=function(a){var b=this.icon=document.createElement("coral-icon");return b.className+=" coral3-Alert-typeIcon",b.setAttribute("size","XS"),b.setAttribute("handle","icon"),b},function(){"use strict";var a={success:"checkCircle",info:"infoCircle",error:"alert",warning:"alert",help:"helpCircle"},b={ERROR:"error",WARNING:"warning",SUCCESS:"success",HELP:"help",INFO:"info"},c={SMALL:"S",LARGE:"L"},d="coral3-Alert",e={S:"small",L:"large"},f=[];for(var g in b)f.push(d+"--"+b[g]);var h=[];for(var i in c)h.push(d+"--"+e[c[i]]);Coral.register({name:"Alert",tagName:"coral-alert",className:d,events:{"click [coral-close]":"_onCloseClick"},properties:{variant:{"default":b.INFO,reflectAttribute:!0,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(b)],set:function(b){this._variant=b,this._elements.icon.icon=a[this.variant]},sync:function(){this.classList.remove.apply(this.classList,f),this.classList.add(d+"--"+this.variant),this.setAttribute("role",this.variant===b.ERROR||this.variant===b.WARNING?"alert":"status")}},size:{"default":c.SMALL,reflectAttribute:!0,transform:function(a){return"string"==typeof a?a.toUpperCase():a},validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(c)],sync:function(){this.classList.remove.apply(this.classList,h),this.classList.add(d+"--"+e[this.size])}},header:Coral.property.contentZone({handle:"header",tagName:"coral-alert-header",insert:function(a){this.insertBefore(a,this._elements.icon.nextElementSibling)}}),content:Coral.property.contentZone({handle:"content",tagName:"coral-alert-content",defaultContentZone:!0,insert:function(a){this.insertBefore(a,this.header.nextElementSibling)}}),footer:Coral.property.contentZone({
handle:"footer",tagName:"coral-alert-footer",insert:function(a){this.insertBefore(a,this.content.nextElementSibling)}})},_templateHandleNames:["icon"],_render:function(){var a=this.querySelector("coral-alert-header")||document.createElement("coral-alert-header"),b=this.querySelector("coral-alert-content"),c=this.querySelector("coral-alert-footer")||document.createElement("coral-alert-footer");if(null===b)for(b=document.createElement("coral-alert-content");this.firstChild;){var d=this.firstChild;d.nodeType===Node.TEXT_NODE||this._templateHandleNames.indexOf(d.getAttribute("handle"))===-1?b.appendChild(d):this.removeChild(d)}var e=this.querySelector("coral-icon");null===e?this.appendChild(Coral.templates.Alert.icon.call(this._elements)):this._elements.icon=e,this.header=a,this.content=b,this.footer=c},_onCloseClick:function(a){var b=a.matchedTarget,c=b.getAttribute("coral-close");c&&!this.matches(c)||(this.hide(),a.stopPropagation())}}),Coral.register({name:"Alert.Header",tagName:"coral-alert-header",className:d+"-header"}),Coral.register({name:"Alert.Content",tagName:"coral-alert-content",className:d+"-content"}),Coral.register({name:"Alert.Footer",tagName:"coral-alert-footer",className:d+"-footer"}),Coral.Alert.size=c,Coral.Alert.variant=b}(),window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.List=window.Coral.templates.List||{},window.Coral.templates.List.item=function(a){var b=document.createDocumentFragment(),c=this.icon=document.createElement("coral-icon");c.setAttribute("size","S"),c.className+=" coral3-BasicList-item-icon",c.setAttribute("handle","icon"),b.appendChild(c);var d=document.createTextNode("\n");b.appendChild(d);var e=this.outerContainer=document.createElement("div");e.className+=" coral3-BasicList-item-outerContainer",e.setAttribute("handle","outerContainer");var f=document.createTextNode("\n  ");e.appendChild(f);var g=this.contentContainer=document.createElement("div");g.className+=" coral3-BasicList-item-contentContainer",g.setAttribute("handle","contentContainer"),e.appendChild(g);var h=document.createTextNode("\n");return e.appendChild(h),b.appendChild(e),b},function(){"use strict";var a={ON:"on",OFF:"off"};Coral.register({name:"List",tagName:"coral-list",className:"coral3-BasicList",itemTagName:"coral-list-item",events:{"capture:mouseenter [coral-list-item]":"_onItemMouseEnter","key:down [coral-list-item]":"_focusNextItem","key:right [coral-list-item]":"_focusNextItem","key:left [coral-list-item]":"_focusPreviousItem","key:up [coral-list-item]":"_focusPreviousItem","key:pageup [coral-list-item]":"_focusPreviousItem","key:pagedown [coral-list-item]":"_focusNextItem","key:home [coral-list-item]":"_focusFirstItem","key:end [coral-list-item]":"_focusLastItem"},properties:{items:{get:function(){return this._items||(this._items=new Coral.Collection({itemTagName:this.itemTagName,itemBaseTagName:this.itemBaseTagName,itemSelector:"[coral-list-item]",host:this})),this._items},set:function(){}},interaction:{"default":a.ON,attribute:"interaction",validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(a)]}},focus:function(){if(!this.contains(document.activeElement)){var a=this._getSelectableItems();a.length>0&&a[0].focus()}},_onItemMouseEnter:function(a){a.matchedTarget.hasAttribute("disabled")||this.interaction!==Coral.List.interaction.ON||a.matchedTarget.focus()},_eventIsAtTarget:function(a){var b=a.target,c=a.matchedTarget,d=b===c;return d&&(a.preventDefault(),a.stopPropagation()),d},_focusFirstItem:function(){if(this.interaction!==Coral.List.interaction.OFF&&this._eventIsAtTarget(event)){var a=this._getSelectableItems();a[0].focus()}},_focusLastItem:function(){if(this.interaction!==Coral.List.interaction.OFF&&this._eventIsAtTarget(event)){var a=this._getSelectableItems();a[a.length-1].focus()}},_focusNextItem:function(a){if(this.interaction!==Coral.List.interaction.OFF&&this._eventIsAtTarget(a)){var b=a.matchedTarget,c=this._getSelectableItems(),d=c.indexOf(b);d!==-1&&(d<c.length-1?c[d+1].focus():c[0].focus())}},_focusPreviousItem:function(a){if(this.interaction!==Coral.List.interaction.OFF&&this._eventIsAtTarget(a)){var b=a.matchedTarget,c=this._getSelectableItems(),d=c.indexOf(b);d!==-1&&(d>0?c[d-1].focus():c[c.length-1].focus())}},_getSelectableItems:function(){return this.items.getAll().filter(function(a){return!a.hasAttribute("hidden")&&!a.hasAttribute("disabled")&&null!==a.offsetParent&&(a.offsetWidth>0||a.offsetHeight>0)})}}),Coral.register({name:"List.Item",tagName:"coral-list-item",className:"coral3-BasicList-item",properties:{content:Coral.property.contentZone({handle:"content",tagName:"coral-list-item-content",defaultContentZone:!0,insert:function(a){this._elements.contentContainer.appendChild(a)}}),disabled:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){this.disabled?this.setAttribute("aria-disabled","true"):this.removeAttribute("aria-disabled")}},icon:{"default":"",validate:[],get:function(){return this._elements.icon.icon},set:function(a){this._elements.icon.icon=a,this._elements.icon.hidden=""===this._elements.icon.icon}}},_render:function(){var a=document.createDocumentFragment();a.appendChild(Coral.templates.List.item.call(this._elements));var b=this.querySelector("coral-list-item-content")||document.createElement("coral-list-item-content");for(Array.prototype.filter.call(this.children,function(a){return a.hasAttribute("handle")}).forEach(function(a){this.removeChild(a)}.bind(this));this.firstChild;)b.appendChild(this.firstChild);this.content=b,this.appendChild(a)},_initialize:function(){this.setAttribute("coral-list-item","")}}),Coral.register({name:"List.Item.Content",tagName:"coral-list-item-content",className:"coral3-BasicList-item-content"}),Coral.List.interaction=a}(),function(){"use strict";Coral.register({name:"AnchorList",tagName:"coral-anchorlist",className:"coral3-BasicList coral3-AnchorList",extend:Coral.List,itemTagName:"coral-anchorlist-item",itemBaseTagName:"a"}),Coral.register({name:"AnchorList.Item",tagName:"coral-anchorlist-item",baseTagName:"a",className:"coral3-BasicList-item coral3-AnchorList-item",extend:Coral.List.Item,events:{click:"_onClick"},properties:{disabled:{sync:function(a){this.disabled?this.tabIndex=-1:this.tabIndex=0}}},_onClick:function(a){this.disabled&&a.preventDefault()}})}(),function(){"use strict";Coral.register({name:"ButtonList",tagName:"coral-buttonlist",className:"coral3-BasicList coral3-ButtonList",extend:Coral.List,itemTagName:"coral-buttonlist-item",itemBaseTagName:"button"}),Coral.register({name:"ButtonList.Item",tagName:"coral-buttonlist-item",baseTagName:"button",className:"coral3-BasicList-item coral3-ButtonList-item",extend:Coral.List.Item,properties:{disabled:null}})}(),window.Coral=window.Coral||{},window.Coral.strings=window.Coral.strings||{},window.Coral.strings["coralui-component-taglist"]={"en-US":{Remove:"Remove"},"fr-FR":{Remove:"Supprimer"},"de-DE":{Remove:"Entfernen"},"it-IT":{Remove:"Rimuovi"},"es-ES":{Remove:"Eliminar"},"pt-BR":{Remove:"Remover"},"ja-JP":{Remove:"削除"},"ko-KR":{Remove:"제거"},"zh-CN":{Remove:"删除"},"zh-TW":{Remove:"移除"},"nl-NL":{Remove:"Verwijderen"},"da-DK":{Remove:"Fjern"},"fi-FI":{Remove:"Poista"},"nb-NO":{Remove:"Fjern"},"sv-SE":{Remove:"Ta bort"},"cs-CZ":{Remove:"Odebrat"},"pl-PL":{Remove:"Usuń"},"ru-RU":{Remove:"Удалить"},"tr-TR":{Remove:"Kaldır"}},window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.TagList=window.Coral.templates.TagList||{},window.Coral.templates.TagList.input=function(a){var b=this.input=document.createElement("input");return b.setAttribute("handle","input"),b.setAttribute("type","hidden"),b.setAttribute("name",""),b.setAttribute("value",""),b},window.Coral.templates.TagList.tag=function(a){var b=this.button=document.createElement("button","coral-button");return b.setAttribute("handle","button"),b.setAttribute("is","coral-button"),b.setAttribute("type","button"),b.setAttribute("variant","minimal"),b.setAttribute("icon","close"),b.setAttribute("iconSize","XS"),b.className+=" coral3-Tag-removeButton",b.setAttribute("title",Coral.i18n.get("Remove")),b.setAttribute("tabindex","-1"),b.setAttribute("coral-close",""),b},function(){"use strict";function a(a){var b=a.getBoundingClientRect(),c=document.body,d=document.documentElement,e=window.pageYOffset||d.scrollTop||c.scrollTop,f=window.pageXOffset||d.scrollLeft||c.scrollLeft,g=d.clientTop||c.clientTop||0,h=d.clientLeft||c.clientLeft||0,i=b.left+b.width/2+f-h,j=b.top+b.height/2+e-g;return{x:Math.round(i),y:Math.round(j)}}var b="coral3-Tag",c={SMALL:"S",MEDIUM:"M",LARGE:"L"},d={DEFAULT:"",GREY:"grey",BLUE:"blue",LIGHT_BLUE:"lightblue",PERIWINKLE:"periwinkle",PLUM:"plum",FUCHSIA:"fuchsia",MAGENTA:"magenta",RED:"red",ORANGE:"orange",TANGERINE:"tangerine",YELLOW:"yellow",CHARTREUSE:"chartreuse",GREEN:"green",KELLY_GREEN:"kellygreen",SEA_FOAM:"seafoam",CYAN:"cyan"},e={S:"small",M:"medium",L:"large"},f=[];for(var g in c)f.push(b+"--"+e[c[g]]);var h=[];for(var i in d)h.push(b+"--"+d[i]);var j=b+"--quiet",k=b+"--multiline",l=null;Coral.register({name:"Tag",tagName:"coral-tag",className:b,events:{click:"_onClick","key:backspace":"_onRemoveButtonClick","key:delete":"_onRemoveButtonClick","key:space":"_onRemoveButtonClick",mousedown:"_onMouseDown"},properties:{label:Coral.property.contentZone({handle:"label",tagName:"coral-tag-label",defaultContentZone:!0,insert:function(a){this.appendChild(a)},sync:function(){this._updateAriaLabel()}}),closable:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){this.closable&&!this.contains(this._elements.button)&&this.insertBefore(this._elements.button,this.firstChild),this._elements.button.hidden=!this.closable,this._updateAriaLabel()}},value:{reflectAttribute:!0,transform:Coral.transform.string,trigger:"coral-tag:_valuechanged",get:function(){return"undefined"==typeof this._value?this.textContent.replace(/\s{2,}/g," ").trim():this._value}},quiet:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){this.classList.toggle(j,this.quiet)}},multiline:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){this.classList.toggle(k,this.multiline)}},size:{"default":c.LARGE,transform:function(a){return"string"==typeof a?a.toUpperCase():a},validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(c)],sync:function(){this.classList.remove.apply(this.classList,f),this.classList.add(this._className+"--"+e[this.size])}},color:{"default":d.DEFAULT,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(d)],sync:function(){this.classList.remove.apply(this.classList,h),this.color!==Coral.Tag.color.DEFAULT&&this.classList.add(this._className+"--"+this.color)}}},_onRemoveButtonClick:function(a){a.preventDefault(),this.closable&&(a.stopPropagation(),this.focus(),this.trigger("coral-tag:_buttonclicked"),this.remove())},_onClick:function(a){this._elements.button.disabled||(a.target===this._elements.button||this._elements.button.contains(a.target)||null!==l||a.clientX<=0&&a.clientY<=0)&&(this._onRemoveButtonClick(a),l=null)},_onMouseDown:function(b){var c=a(b.target);l=b.target===this&&Math.abs(b.pageX-c.x)<2&&Math.abs(b.pageY-c.y)<2?{x:b.pageX,y:b.pageY}:null,Coral.events.on("mouseup",this._onMouseUp)},_onMouseUp:function(a){null===l||a.pageX===l.x&&a.pageY===l.y||(l=null),Coral.events.off("mouseup",this._onMouseUp)},_render:function(){var a=document.createDocumentFragment(),b=this.querySelector("coral-tag-label")||document.createElement("coral-tag-label");for(b.parentNode&&this.removeChild(b);this.firstChild;){var c=this.firstChild;c.hasAttribute&&c.hasAttribute("handle")||c.nodeType===Node.COMMENT_NODE?(c.hasAttribute&&"button"===c.getAttribute("handle")&&(this._elements.button=c),a.appendChild(c)):b.appendChild(c)}this._elements.button||Coral.templates.TagList.tag.call(this._elements),this.hasAttribute("disabled")&&(this._elements.button.disabled=!0),this.appendChild(a),this.label=b},_updateAriaLabel:function(){var a=this._elements.button,b=this._elements.label;if("option"!==this.getAttribute("role"))return a.removeAttribute("aria-hidden"),void b.removeAttribute("aria-hidden");var c=[],d=a.getAttribute("title"),e=b.textContent;a.parentElement&&(b.parentElement&&e===d||(a.hidden||c.push(d),a.setAttribute("aria-hidden","true"))),b.parentElement&&(a.parentElement&&d===e||(c.push(e),b.setAttribute("aria-hidden","true"))),c.length?this.setAttribute("aria-label",c.join(" ")):this.removeAttribute("aria-label")}}),Coral.Tag.Label=function(){return document.createElement("coral-tag-label")},Coral.Tag.size=c,Coral.Tag.color=d}(),function(){"use strict";var a="coral-tag";Coral.register({name:"TagList",tagName:"coral-taglist",className:"coral3-TagList",mixins:[Coral.mixin.formField],events:{"capture:focus coral-tag":"_onItemFocus","capture:blur coral-tag":"_onItemBlur","key:right coral-tag":"_onNextItemFocus","key:down coral-tag":"_onNextItemFocus","key:pagedown coral-tag":"_onNextItemFocus","key:left coral-tag":"_onPreviousItemFocus","key:up coral-tag":"_onPreviousItemFocus","key:pageup coral-tag":"_onPreviousItemFocus","key:home coral-tag":"_onFirstItemFocus","key:end coral-tag":"_onLastItemFocus","coral-tag:_buttonclicked":"_onTagButtonClicked","coral-tag:_valuechanged":"_onTagValueChanged"},properties:{disabled:{set:function(a){this._disabled=a;var b=this;b.classList.toggle("is-disabled",b.disabled),b.setAttribute("aria-disabled",b.disabled),b.items.getAll().forEach(function(a){a[b.disabled?"setAttribute":"removeAttribute"]("disabled","");var c=a._input;c&&(c.disabled=b.disabled),a._elements&&(a._elements.button.disabled=b.disabled),b.disabled?a.removeAttribute("tabindex"):a.setAttribute("tabindex",0)})}},readOnly:{set:function(a){this._readOnly=a;var b=this;b.removeAttribute("aria-readonly"),b.items.getAll().forEach(function(a){a.closable=!b.readOnly})}},value:{transform:Coral.transform.string,validate:[function(a,b){return a!==b||""===b&&this.items.length}],get:function(){var a=this.items.getAll();return a.length?a[0].value:""},set:function(a){if("undefined"!=typeof this.value&&(this.items.clear(),a)){var b=(new Coral.Tag).set({label:{innerHTML:a},value:a});this._attachInputToItem(b,!0),this.items.add(b)}}},values:{get:function(){return this.items.getAll().map(function(a){return a.value})},set:function(a){var b=this;b.items.clear(),a.forEach(function(a){var c=(new Coral.Tag).set({label:{innerHTML:a},value:a});b._attachInputToItem(c,!0),b.items.add(c)})}},items:{set:function(){},get:function(){return this._items||(this._items=new Coral.Collection({host:this,itemTagName:a})),this._items}},name:{transform:Coral.transform.string,get:function(){return this._name},set:function(a){this._name=a,this.items.getAll().forEach(function(b){var c=b._input;c&&c.setAttribute("name",a)})}}},_getLabellableElement:function(){return this},_attachInputToItem:function(a,b){if(a._input)a._preAttachedInput&&(a._input=a._preAttachedInput,a._preAttachedInput=void 0);else{var c=a.querySelector("input[handle=input]")||Coral.templates.TagList.input.call(a._elements);c.disabled=this.disabled,c.name=this.name,c.value=a.value,a.appendChild(c),b?a._preAttachedInput=c:a._input=c}},_onItemAttached:function(b){var c=this.items.getAll();if(!b._input){var d=c.some(function(a){return a.value===b.value&&a!==b});if(d)return void b.remove();if(this._attachInputToItem(b),b.setAttribute("role","option"),b.setAttribute("aria-selected",!1),b.setAttribute("tabindex","-1"),b.closable=!this.readOnly,!this.querySelector(a+'[tabindex="0"]')){var e=c[0];e&&e.setAttribute("tabindex","0")}this.trigger("coral-collection:add",{item:b})}},_onItemDetached:function(a){a._input=void 0,a._preAttachedInput=void 0,a.removeAttribute("role"),a.removeAttribute("aria-selected"),a.removeAttribute("tabindex"),this._itemToFocusAfterDelete&&this._itemToFocusAfterDelete.focus(),this.trigger("coral-collection:remove",{item:a})},_onItemFocus:function(a){if(!this.disabled){this.setAttribute("aria-live","polite");var b=a.matchedTarget;b.setAttribute("aria-selected",!0),this.items.getAll().forEach(function(a){a!==b&&a.setAttribute("tabindex","-1")}),b.setAttribute("tabindex","0"),this._setItemToFocusOnDelete(b)}},_onItemBlur:function(a){if(!this.disabled){this.setAttribute("aria-live","off");var b=a.matchedTarget;b.setAttribute("aria-selected",!1),this._setItemToFocusOnDelete(b)}},_onSiblingItemFocus:function(b,c){if(!this.disabled){b.preventDefault();for(var d=b.target[c];d;){if(d.tagName.toLowerCase()===a&&!d.hidden){d.focus();break}d=d[c]}}},_onNextItemFocus:function(a){this._onSiblingItemFocus(a,"nextElementSibling")},_onPreviousItemFocus:function(a){this._onSiblingItemFocus(a,"previousElementSibling")},_onFirstItemFocus:function(a){a.preventDefault();var b=this.items.length;b>0&&this.items.getAll()[0].focus()},_onLastItemFocus:function(a){a.preventDefault();var b=this.items.length;b>0&&this.items.getAll()[b-1].focus()},_onTagButtonClicked:function(a){a.stopImmediatePropagation(),Coral.commons.nextFrame(function(){this.trigger("change")}.bind(this))},_onTagValueChanged:function(a){a.stopImmediatePropagation();var b=a.target,c=b._input;c&&(c.value=b.value)},_setItemToFocusOnDelete:function(b){for(var c=this,d=b.nextElementSibling;d;){if(d.tagName.toLowerCase()===a&&!d.hidden)return void(this._itemToFocusAfterDelete=d);d=d.nextElementSibling}for(d=b.previousElementSibling;d;){if(d.tagName.toLowerCase()===a&&!d.hidden){this._itemToFocusAfterDelete=d;break}d=d.previousElementSibling}Coral.commons.nextFrame(function(){null===b.parentElement||c.contains(document.activeElement)||(d=void 0)})},reset:function(){this.values=this._initialValues},_initialize:function(){this._itemToFocusAfterDelete=null,this.setAttribute("role","listbox"),this.setAttribute("aria-live","off"),this.setAttribute("aria-atomic","false"),this.setAttribute("aria-relevant","additions"),this._observer=new MutationObserver(function(a){var b=this;a.forEach(function(a){for(var c=0;c<a.addedNodes.length;c++){var d=a.addedNodes[c];window.CustomElements.upgrade(d),d instanceof Coral.Tag&&b._onItemAttached(d)}for(var e=0;e<a.removedNodes.length;e++){var f=a.removedNodes[e];f instanceof Coral.Tag&&b._onItemDetached(f)}})}.bind(this)),this._observer.observe(this,{childList:!0}),Coral.commons.ready(this,function(a){a.items.getAll().forEach(function(b){a._onItemAttached(b)}),a._initialValues=a.values})}})}(),window.Coral=window.Coral||{},window.Coral.strings=window.Coral.strings||{},window.Coral.strings["coralui-component-autocomplete"]={"en-US":{"No matching results&period;":"No matching results.","Show suggestion":"Show suggestion","Show {0} suggestions":"Show {0} suggestions","Show suggestions":"Show suggestions"},"de-DE":{"No matching results&period;":"Keine passenden Ergebnisse.","Show suggestion":"Vorschlag anzeigen","Show {0} suggestions":"{0} Vorschläge anzeigen","Show suggestions":"Vorschläge anzeigen"},"es-ES":{"No matching results&period;":"No hay resultados coincidentes.","Show suggestion":"Mostrar sugerencia","Show {0} suggestions":"Mostrar {0} sugerencias","Show suggestions":"Mostrar sugerencias"},"ko-KR":{"No matching results&period;":"일치하는 결과가 없습니다.","Show suggestion":"제안 사항 표시","Show {0} suggestions":"{0}제안 사항 표시","Show suggestions":"제안 사항 표시"},"fr-FR":{"No matching results&period;":"Aucun résultat correspondant.","Show suggestion":"Afficher la suggestion","Show {0} suggestions":"Afficher {0} suggestions","Show suggestions":"Afficher les suggestions"},"ja-JP":{"No matching results&period;":"一致する結果がありません。","Show suggestion":"入力候補を表示","Show {0} suggestions":"{0}入力候補を表示","Show suggestions":"入力候補を表示"},"zh-CN":{"No matching results&period;":"无匹配的结果。","Show suggestion":"显示建议","Show {0} suggestions":"显示 {0} 个建议","Show suggestions":"显示建议"},"zh-TW":{"No matching results&period;":"沒有相符的結果。","Show suggestion":"顯示建議","Show {0} suggestions":"顯示 {0} 個建議","Show suggestions":"顯示建議"},"pt-BR":{"No matching results&period;":"Nenhum resultado correspondente.","Show suggestion":"Mostrar sugestão","Show {0} suggestions":"Mostrar {0} sugestões","Show suggestions":"Mostrar sugestões"},"it-IT":{"No matching results&period;":"Nessun risultato corrispondente.","Show suggestion":"Mostra suggerimento","Show {0} suggestions":"Mostra {0} suggerimenti","Show suggestions":"Mostra suggerimenti"},"nl-NL":{"No matching results&period;":"Geen overeenkomende resultaten.","Show suggestion":"Voorstel tonen","Show {0} suggestions":"{0} voorstellen tonen","Show suggestions":"Voorstellen tonen"},"da-DK":{"No matching results&period;":"Ingen matchende resultater.","Show suggestion":"Vis forslag","Show {0} suggestions":"Vis  {0} forslag","Show suggestions":"Vis forslag"},"fi-FI":{"No matching results&period;":"Vastaavia tuloksia ei ole.","Show suggestion":"Näytä ehdotus","Show {0} suggestions":"Näytä {0} ehdotusta","Show suggestions":"Näytä ehdotukset"},"nb-NO":{"No matching results&period;":"Ingen tilsvarende resultater.","Show suggestion":"Vis forslag","Show {0} suggestions":"Vis {0} forslag","Show suggestions":"Vis forslag"},"sv-SE":{"No matching results&period;":"Inga matchande resultat.","Show suggestion":"Visa förslag","Show {0} suggestions":"Visa {0} förslag","Show suggestions":"Visa förslag"},"cs-CZ":{"No matching results&period;":"Neodpovídají žádné výsledky.","Show suggestion":"Zobrazit doporučení","Show {0} suggestions":"Zobrazit následující počet návrhů: {0}","Show suggestions":"Zobrazit doporučení"},"pl-PL":{"No matching results&period;":"Brak pasujących wyników.","Show suggestion":"Pokaż sugestię","Show {0} suggestions":"Wyświetl {0} sugestii","Show suggestions":"Pokaż sugestie"},"ru-RU":{"No matching results&period;":"Нет соответствующих результатов.","Show suggestion":"Показать предложение","Show {0} suggestions":"Показать предложения ({0})","Show suggestions":"Показать предложения"},"tr-TR":{"No matching results&period;":"Eşleşen sonuç yok.","Show suggestion":"Öneriyi göster","Show {0} suggestions":"{0} önerilerini göster","Show suggestions":"Önerileri göster"}},window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.Autocomplete=window.Coral.templates.Autocomplete||{},window.Coral.templates.Autocomplete.base=function(a){var b=document.createDocumentFragment(),c=this.field=document.createElement("input");c.setAttribute("type","hidden"),c.setAttribute("handle","field"),b.appendChild(c);var d=document.createTextNode("\n");b.appendChild(d);var e=this.inputGroup=document.createElement("div");e.className+=" coral-InputGroup coral-InputGroup--block coral3-Autocomplete-inputGroup",e.setAttribute("handle","inputGroup"),e.setAttribute("role","presentation");var f=document.createTextNode("\n  ");e.appendChild(f);var g=this.label=document.createElement("div");g.className+=" coral-InputGroup-input coral-DecoratedTextfield",g.setAttribute("handle","label"),g.setAttribute("role","presentation");var h=document.createTextNode("\n    ");g.appendChild(h);var i=this.icon=document.createElement("coral-icon");i.setAttribute("size","XS"),i.className+=" coral-DecoratedTextfield-icon coral3-Autocomplete-icon",i.setAttribute("handle","icon"),g.appendChild(i);var j=document.createTextNode("\n    ");g.appendChild(j);var k=this.input=document.createElement("input","coral-textfield");k.className+=" coral-DecoratedTextfield-input coral3-Autocomplete-input",k.setAttribute("type","text"),k.setAttribute("autocomplete","off"),k.setAttribute("handle","input"),k.setAttribute("role","textbox"),k.setAttribute("is","coral-textfield"),g.appendChild(k);var l=document.createTextNode("\n  ");g.appendChild(l),e.appendChild(g);var m=document.createTextNode("\n  ");e.appendChild(m);var n=document.createElement("span");n.className+=" coral-InputGroup-button",n.setAttribute("role","presentation");var o=document.createTextNode("\n    ");n.appendChild(o);var p=this.trigger=document.createElement("button","coral-button");p.setAttribute("tabindex","-1"),p.setAttribute("is","coral-button"),p.setAttribute("type","button"),p.setAttribute("icon","chevronDown"),p.setAttribute("iconsize","XS"),p.setAttribute("handle","trigger"),p.className+=" coral3-Autocomplete-trigger",p.setAttribute("aria-label",Coral.i18n.get("Show suggestions")),p.setAttribute("title",Coral.i18n.get("Show suggestions")),n.appendChild(p);var q=document.createTextNode("\n  ");n.appendChild(q),e.appendChild(n);var r=document.createTextNode("\n");e.appendChild(r),b.appendChild(e);var s=document.createTextNode("\n");b.appendChild(s);var t=this.overlay=document.createElement("coral-overlay");t.className+=" coral3-Autocomplete-overlay",t.setAttribute("returnfocus","off"),t.setAttribute("alignmy","left top"),t.setAttribute("alignat","left bottom"),t.setAttribute("target","_prev"),t.setAttribute("handle","overlay"),t.setAttribute("role","presentation");var u=document.createTextNode("\n  ");t.appendChild(u);var v=this.selectList=document.createElement("coral-buttonlist");v.id=Coral.commons.getUID(),v.className+=" coral3-Autocomplete-selectList",v.setAttribute("handle","selectList"),v.setAttribute("role","listbox"),v.setAttribute("interaction","off"),t.appendChild(v);var w=document.createTextNode("\n");t.appendChild(w),b.appendChild(t);var x=document.createTextNode("\n");b.appendChild(x);var y=this.tagList=document.createElement("coral-taglist");return y.className+=" coral3-Autocomplete-tagList",y.setAttribute("handle","tagList"),b.appendChild(y),b},window.Coral.templates.Autocomplete.loadIndicator=function(a){var b=document.createElement("div");b.className+=" coral3-Autocomplete-loading",b.setAttribute("role","progressbar");var c=document.createTextNode("\n  ");b.appendChild(c);var d=document.createElement("coral-wait");d.setAttribute("centered",""),b.appendChild(d);var e=document.createTextNode("\n");return b.appendChild(e),b},function(){"use strict";var a=50,b=100,c=0,d=function(a){Coral.Collection.call(this,arguments),this._host=a.host};d.prototype=Object.create(Coral.Collection.prototype),d.prototype.add=function(a,b){return a instanceof HTMLElement||(a=(new Coral.Autocomplete.Item).set(a,!0)),this._host.insertBefore(a,b||null),a},d.prototype.getAll=function(){return Array.prototype.slice.call(this._host.querySelectorAll("coral-autocomplete-item"))};var e={STARTSWITH:"startswith",CONTAINS:"contains"},f=Coral.validate.enumeration(e);Coral.register({name:"Autocomplete",tagName:"coral-autocomplete",className:"coral3-Autocomplete",mixins:[Coral.mixin.formField],properties:{items:{get:function(){return this._items||(this._items=new d({itemTagName:"coral-autocomplete-item",itemSelector:"coral-autocomplete-item",host:this})),this._items},set:function(){}},name:{set:function(a){this._name=a,this._setName()},get:function(){return this._name}},value:{override:!0,transform:function(a){return void 0!==a&&null!==a||(a=""),a},set:function(a){this.values=[a]},get:function(){var a=this.values;return a&&a.length>0?a[0]:""}},values:{validate:[Coral.validate.valueMustChange,function(a){return Array.isArray(a)}],set:function(a){void 0!==a&&null!==a||(a=[]);var b,c,d=[];if(this.forceSelection)for(b=0;b<a.length;b++)c=a[b],void 0!==this._optionsMap[c]&&d.push(c);else for(b=0;b<a.length;b++)c=a[b],d.push(c);if(this.multiple)for(this._clearValues(),b=0;b<d.length;b++)c=d[b],this._selectItem(c),this._addValue(c,null,!0);else this._values=d.length>0?[d[0]]:[],this._reflectCurrentValue()},get:function(){return this._values}},multiple:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,set:function(a){this._multiple=a,this._setName(),a?this._elements.tagList.hidden=!1:(this._elements.tagList.hidden=!0,this._elements.tagList.items.clear())},get:function(){return this._multiple},sync:function(){},alsoSync:"labelledBy"},delay:{"default":200,reflectAttribute:!0,transform:Coral.transform.number,validate:function(a,b){return"number"==typeof a&&a>=0}},forceSelection:{"default":!1,attribute:"forceselection",reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,set:function(a){this.forceSelection&&!a&&c&&console.warn("Coral.Autocomplete: Should check for invalid state"),this._forceSelection=a},get:function(){return this._forceSelection}},placeholder:{"default":"",reflectAttribute:!0,set:function(a){this._elements.input.setAttribute("placeholder",a)},get:function(){return this._elements.input.getAttribute("placeholder")}},maxLength:{attribute:"maxlength",reflectAttribute:!0,set:function(a){this._elements.input.maxLength=a},get:function(){return this._elements.input.maxLength}},icon:{"default":"",validate:[],reflectAttribute:!0,set:function(a){this._elements.icon.icon=a,this._elements.icon.hidden=!this._elements.icon.icon},get:function(){return this._elements.icon.icon}},match:{"default":e.CONTAINS,validate:function(a){return"string"==typeof a?f(a):"function"==typeof a},set:function(a){a===e.STARTSWITH?this._matchFunction=this._optionStartsWithValue:a===e.CONTAINS?this._matchFunction=this._optionContainsValue:"function"==typeof a&&(this._matchFunction=a),this._match=a}},invalid:{sync:function(){this.classList.toggle("is-invalid",this.invalid),this._elements.input.classList.toggle("is-invalid",this.invalid)}},disabled:{set:function(a){this._disabled=a,this._elements.input.disabled=this.disabled,this._elements.trigger.disabled=this.disabled||this.readOnly,this._elements.tagList.disabled=this.disabled||this.readOnly}},readOnly:{set:function(a){this._readOnly=a,this._elements.input.readOnly=this.readOnly,this._elements.trigger.disabled=this.readOnly||this.disabled}},required:{set:function(a){this._required=a,this._elements.input.required=this.required}},labelledBy:{sync:function(){this.labelledBy&&this.multiple?this._elements.tagList.setAttribute("aria-labelledby",this.labelledBy):this._elements.tagList.removeAttribute("aria-labelledby")}},loading:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,set:function(a){this._loading=a;var b=this._elements.loadIndicator;if(this.loading){b||(b=this._elements.loadIndicator=Coral.templates.Autocomplete.loadIndicator().firstChild);var c=this._elements.overlay,d=c.scrollTop>=c.scrollHeight-c.clientHeight;this._elements.overlay.appendChild(b),d&&(c.scrollTop=c.scrollHeight)}else b&&b.parentNode&&this._elements.overlay.removeChild(b)}}},events:{'key:up [handle="input"]':"_handleInputUpKeypress",'key:alt+up [handle="input"]':"_handleInputUpKeypress",'key:down [handle="input"]':"_handleInputDownKeypress",'key:alt+down [handle="input"]':"_handleInputDownKeypress",'key:tab [handle="input"]':"_handleInputTabKeypress",'key:shift+tab [handle="input"]':"_handleListFocusShift",'capture:change [handle="input"]':"_handleInput",'input [handle="input"]':"_handleInputEvent",keydown:"_handleInputKeypressEnter",'click [handle="trigger"]':"_handleTriggerClick",'mousedown [handle="trigger"]':"_handleTriggerMousedown","key:escape":"_hideSuggestionsAndFocus",'key:shift+tab [is="coral-buttonlist-item"]':"_handleListFocusShift","capture:blur":"_handleFocusOut",'capture:focus [handle="inputGroup"]':"_handleInputGroupFocusIn",'capture:blur [handle="inputGroup"]':"_handleInputGroupFocusOut",'coral-collection:remove [handle="tagList"]':"_handleTagRemoved",'change [handle="tagList"]':"_preventTagListChangeEvent",'key:enter button[is="coral-buttonlist-item"]':"_handleSelect",'click button[is="coral-buttonlist-item"]':"_handleSelect",'capture:scroll [handle="overlay"]':"_onScroll",'capture:mousewheel [handle="overlay"]':"_onMouseWheel",'mousedown button[is="coral-buttonlist-item"]':"_handleSelect",'capture:mouseenter [is="coral-buttonlist-item"]':"_handleListItemFocus","coral-overlay:positioned":"_handleOverlayPositioned",
"coralui-autocomplete-item:_valuechanged":"_handleItemValueChange","coralui-autocomplete-item:_selectedchanged":"_handleItemSelectedChange","coralui-autocomplete-item:_contentchanged":"_handleItemContentChange"},_render:function(){var a=document.createDocumentFragment();for(a.appendChild(Coral.templates.Autocomplete.base.call(this._elements));this.firstChild;){var b=this.firstChild;b.nodeType===Node.TEXT_NODE||b.hasAttribute&&!b.hasAttribute("handle")?a.appendChild(b):this.removeChild(b)}this.appendChild(a),this.setAttribute("role","presentation"),this._elements.input.setAttribute("role","combobox"),this._elements.input.setAttribute("aria-autocomplete","list"),this._elements.input.setAttribute("aria-haspopup","true"),this._elements.input.setAttribute("aria-controls",this._elements.selectList.id),this._elements.trigger.setAttribute("aria-haspopup","true"),this._elements.trigger.setAttribute("aria-controls",this._elements.selectList.id),this._tagMap={},this._values=[],this._options=[],this._optionsMap={},this._handleScrollBottom=this._handleScrollBottom.bind(this),this._observer=new MutationObserver(this._handleMutation.bind(this)),this._startObserving(),this._setStateFromDOM()},_initialize:function(){this._initialSelectedValues=this.values.slice(0)},reset:function(){this.values=this._initialSelectedValues},attachedCallback:function(){Coral.Component.prototype.attachedCallback.call(this),this._setStateFromDOM()},_startObserving:function(){this._observer.observe(this,{childList:!0})},_stopObserving:function(){this._observer.disconnect()},_setName:function(){this.multiple?(this._elements.tagList.name=this.name,this._elements.field.name=""):(this._elements.field.name=this.name,this._elements.tagList.name="")},_onInputChange:function(a){if(a.stopPropagation(),!this.multiple){var b=this._elements.input.value.toLowerCase();if(this.forceSelection||""===b)for(var c=this.items.getAll(),d=0;d<c.length;d++)c[d].value.toLowerCase()!==b&&(c[d].selected=!1)}},_handleMutation:function(a){for(var b=0;b<a.length;b++){var c=a[b],d=c.target;if("childList"===c.type&&d===this)return void this._setStateFromDOM()}},_setStateFromDOM:function(){this._createOptionsFromDOM(),this._setSelectedFromDOM()},_createOptionsFromDOM:function(){this._options.length=0,this._optionsMap={};for(var a=this.querySelectorAll("coral-autocomplete-item"),b=0;b<a.length;b++){var c=a[b],d={value:c.getAttribute("value"),icon:c.getAttribute("icon"),disabled:c.hasAttribute("disabled"),content:c.innerHTML};this._options.push(d),this._optionsMap[d.value]=d}},_setInputValues:function(a,b){this._elements.field.value=a,(this.multiple||""!==b)&&(this._elements.input.value=b.trim())},_reflectCurrentValue:function(){var a=this._values.length>0?this._values[0]:"";this._elements.field.value=a;var b="";if(""!==a){var c=this._optionsMap[a];b=c?c.content:a}this._setInputValues(a,b)},_setSelectedFromDOM:function(){var a=this.querySelectorAll("coral-autocomplete-item[selected]");if(a.length)if(this.hasAttribute("multiple")){this._resetValues();for(var b=0;b<a.length;b++){var c=a[b].getAttribute("value"),d=a[b].innerHTML;this._addValue(c,d,!0)}}else{var e=a[a.length-1];this._deselectExcept(e,a),this.value=e.getAttribute("value")}else this.hasAttribute("multiple")?this._resetValues():this.value=""},_deselectExcept:function(a,b){var c=b||this.querySelectorAll("coral-autocomplete-item[selected]");this._stopObserving();for(var d=0;d<c.length;d++)c[d]!==a&&c[d].removeAttribute("selected");this._startObserving()},_addValue:function(a,b,d){if(!b){var e=this._optionsMap[a];e?b=e.content:(b=a,c&&console.warn("Coral.Autocomplete: Did not have content for value %s",a))}var f=this._values.indexOf(a);f===-1?this._values.push(a):c&&console.warn("Coral.Autocomplete: Tried to add value that was already present");var g={};d?g.innerHTML=b:g.textContent=b;var h=(new Coral.Tag).set({label:g,value:a});this._tagMap[a]=h,this._elements.tagList.items.add(h),this._setInputValues("","")},_removeValue:function(a){var b=this._values.indexOf(a);if(b===-1)return void(c&&console.warn("Coral.Autocomplete: Tried to remove tag that is not in values"));this._values.splice(b,1);var d=this.querySelector("coral-autocomplete-item[value="+JSON.stringify(a)+"]");d?d.hasAttribute("selected")&&(this._stopObserving(),d.removeAttribute("selected"),this._startObserving()):c&&console.warn("Coral.Autocomplete: Tried to remove value without corresponding item");var e=this._tagMap[a];e&&(this._tagMap[a]=null,this._elements.tagList.items.remove(e)),b!==-1&&this.trigger("change")},_clearValues:function(){this._resetValues(),this._stopObserving();for(var a=this.querySelectorAll("coral-autocomplete-item[selected]"),b=0;b<a.length;b++)a[b].removeAttribute("selected");this._startObserving()},_resetValues:function(){this._values=[],this._tagMap={},this._elements.tagList.items.clear()},_focusNextItem:function(){var a,b,c=this._elements.selectList,d=c.querySelector(".is-focused"),e=this._elements.input,f=c._getSelectableItems(),g=this;d?(a=f.indexOf(d),a<f.length-1&&(b=f[a+1])):f&&f.length>0&&(b=f[0]),Coral.commons.nextFrame(function(){b&&(d&&d.classList.remove("is-focused"),g._scrollItemIntoView(b),b.classList.add("is-focused"),e.setAttribute("aria-activedescendant",b.id)),c.querySelector(".is-focused")||e.removeAttribute("aria-activedescendant")})},_focusPreviousItem:function(){var a,b,c=this._elements.selectList,d=c.querySelector(".is-focused"),e=this._elements.input,f=c._getSelectableItems(),g=this;d?(a=f.indexOf(d),a>0&&(b=f[a-1]),d.classList.remove("is-focused")):f&&f.length>0&&(b=f[f.length-1]),Coral.commons.nextFrame(function(){b&&(g._scrollItemIntoView(b),b.classList.add("is-focused"),e.setAttribute("aria-activedescendant",b.id)),c.querySelector(".is-focused")||e.removeAttribute("aria-activedescendant")})},_showSuggestions:function(){var a=this._elements.input.value;this.clearSuggestions();var b=this.trigger("coral-autocomplete:showsuggestions",{value:a,start:0});this._showSuggestionsCalled=!0,b.defaultPrevented?(this.loading=!0,this.showSuggestions()):(this.addSuggestions(this._getMatches(a.toLowerCase().trim(),this._optionContainsValue)),this.showSuggestions())},_onScroll:function(){clearTimeout(this._scrollTimeout),this._scrollTimeout=setTimeout(this._handleScrollBottom,b)},_onMouseWheel:function(a){var b=this._elements.overlay;(a.deltaY<0&&0===b.scrollTop||a.deltaY>0&&b.scrollTop>=b.scrollHeight-b.clientHeight)&&a.preventDefault()},_handleScrollBottom:function(){var b=this._elements.overlay,c=this._elements.selectList;if(b.scrollTop>=b.scrollHeight-b.clientHeight-a){var d=this._elements.input.value,e=this.trigger("coral-autocomplete:showsuggestions",{value:d,start:c.items.length});e.defaultPrevented&&(this.loading=!0)}},_handleFocusOut:function(a){var b=this,c=this._elements.selectList,d=a.target,e=d===this._elements.input;this._blurTimeout&&clearTimeout(this._blurTimeout),this._blurTimeout=setTimeout(function(){var f=document.activeElement,g=!b.contains(f);e&&g&&!b.multiple?b._handleInput(a):(!f||(e||f!==document.body)&&g||c.contains(d)&&!c.contains(f))&&b.hideSuggestions()},0)},_handleInputGroupFocusIn:function(){this.classList.add("is-focused")},_handleInputGroupFocusOut:function(a){this.classList.remove("is-focused")},_handleOverlayPositioned:function(a){"top"===a.detail.vertical?(this.classList.remove("is-openAbove"),this.classList.add("is-openBelow")):(this.classList.remove("is-openBelow"),this.classList.add("is-openAbove"))},_handleListFocusShift:function(a){this._elements.overlay.open&&(a.preventDefault(),a.stopImmediatePropagation(),this._hideSuggestionsAndFocus())},_hideSuggestionsAndFocus:function(a){this.hideSuggestions(),this._elements.input.focus()},_handleTriggerClick:function(){this._elements.overlay.open?this._hideSuggestionsAndFocus():(this._showSuggestions(),this._elements.input.focus())},_handleTriggerMousedown:function(){this._elements.trigger.focus()},_handleListItemFocus:function(a){var b=a.matchedTarget,c=this._elements.selectList,d=c.querySelector(".is-focused"),e=this._elements.input;d&&(d.classList.remove("is-focused"),e.removeAttribute("aria-activedescendant")),b.disabled||(this._scrollItemIntoView(b),b.classList.add("is-focused"),e.setAttribute("aria-activedescendant",b.id))},_scrollItemIntoView:function(a){var b=a.getBoundingClientRect(),c=this._elements.overlay.getBoundingClientRect();b.top<c.top?a.scrollIntoView():b.bottom>c.bottom+1&&a.scrollIntoView(!1)},_getMatches:function(a,b){b=b||this._matchFunction;for(var c=[],d=0;d<this._options.length;d++)b(this._options[d],a)&&c.push(this._options[d]);if(!c.length){var e=this._elements.selectList.items.getAll();for(d=0;d<e.length;d++){var f={value:e[d].value,content:e[d].textContent.trim()};b(f,a)&&c.push(f)}}return c},_handleInputKeypressEnter:function(a){13===a.which&&this._handleInput(a)},_handleInputEvent:function(a){this.invalid=!1,this.delay?(clearTimeout(this.timeout),this.timeout=setTimeout(this._showSuggestions.bind(this),this.delay)):this._showSuggestions()},_handleInput:function(a){var b;if(a.preventDefault(),this._elements.overlay.open&&this._elements.input.getAttribute("aria-activedescendant")){var c=this._elements.selectList.querySelector(".is-focused");c&&(b=c.textContent.trim())}var d=b||this._elements.input.value,e=!1,f=this._getMatches(d,this._optionEqualsValue);if(f.length){var g=f.filter(function(a){return a.content===d})[0]||f[0];e=this.value!==g.value,this._selectItem(g.value,g.content,!1),this.multiple?d.trim()&&this._addValue(g.value,g.content,!1):this.value=g.value,this.forceSelection&&(this.invalid=!1),this.hideSuggestions(),e===!0&&this.trigger("change")}else this.forceSelection?this.multiple?this.invalid=""!==d||1===this.values.length&&""===this.values[0]||0===this.values.length:this.invalid=!0:(e=this.value!==d,this.multiple?d.trim()&&this._addValue(d,null,!1):this.value=d,this.hideSuggestions(),e===!0&&this.trigger("change"));this._updateButtonAccessibilityLabel()},_selectItem:function(a,b,c){this._stopObserving();var d=this.querySelector("coral-autocomplete-item[value="+JSON.stringify(a)+"]");if(d)d.setAttribute("selected","");else{var e={};b="undefined"==typeof b?a:b,c?e.innerHTML=b:e.textContent=b,this.items.add((new Coral.Autocomplete.Item).set({value:a,content:e,selected:!0}))}this._startObserving()},_handleInputUpKeypress:function(a){a.preventDefault(),this._elements.overlay.open?a.altKey?this.hideSuggestions():this._focusPreviousItem():this._showSuggestions()},_handleInputDownKeypress:function(a){a.preventDefault(),this._elements.overlay.open?this._focusNextItem():this._showSuggestions()},_handleInputTabKeypress:function(a){this._elements.overlay.open&&this._elements.input.getAttribute("aria-activedescendant")&&a.preventDefault()},_handleSelect:function(a){var b=a.matchedTarget;if(b&&!b.disabled){this._selectItem(b.value,b.content.innerHTML,!0),this.multiple?this._addValue(b.value,b.content.innerHTML,!0):(this.value=b.value,this._setInputValues(this.value,b.content.textContent,!1));var c=this;Coral.commons.nextFrame(function(){c._elements.input.focus()}),this.hideSuggestions(),this.trigger("change")}},_preventTagListChangeEvent:function(a){a.stopImmediatePropagation()},_handleTagRemoved:function(a){for(var b=a.detail.item.value,c=!0,d=this._elements.tagList.items.getAll(),e=0;e<d.length;e++)if(d[e].value===b){c=!1;break}c&&this._removeValue(b),(1===this.values.length&&""===this.values[0]||0===this.values.length)&&this._elements.input.focus(),this._updateButtonAccessibilityLabel()},_handleItemValueChange:function(a){a.stopImmediatePropagation(),this._createOptionsFromDOM()},_handleItemContentChange:function(a){a.stopImmediatePropagation(),this._createOptionsFromDOM()},_handleItemSelectedChange:function(a){a.stopImmediatePropagation();var b=a.target,c=b.hasAttribute("selected");this.multiple?this[c?"_addValue":"_removeValue"](b.value,b.content.innerHTML,!0):c?(this._elements.input.value=b.content.textContent.replace(/\s{2,}/g," ").trim(),this.value=b.value,this.invalid=!1,this._deselectExcept(b)):this.value===b.value&&(this.value="",this.trigger("change"))},clear:function(){this.value="",this._elements.input.clear(),this.multiple&&this._clearValues()},clearSuggestions:function(){this._elements.selectList.items.clear(),this._updateButtonAccessibilityLabel()},addSuggestions:function(a,b){this.loading=!1,b&&this.clearSuggestions();for(var c=0;c<a.length;c++){var d=a[c].value,e=a[c].content,f=a[c].icon,g=!!a[c].disabled;this.multiple&&this.values.indexOf(d)!==-1||(this._elements.selectList.items.add({value:d,type:"button",icon:f,disabled:g,id:Coral.commons.getUID(),tabIndex:-1,content:{innerHTML:e}}),this._elements.selectList.items.last().setAttribute("role","option"))}a.length||this._elements.selectList.items.length?this._updateButtonAccessibilityLabel(this._elements.selectList.items.length):(this._elements.selectList.items.add({type:"button",content:{innerHTML:"<em>"+Coral.i18n.get("No matching results.")+"</em>"},disabled:!0}),this._elements.selectList.items.last().setAttribute("role","status"),this._elements.selectList.items.last().setAttribute("aria-live","polite"),this._elements.input.removeAttribute("aria-activedescendant"),this._updateButtonAccessibilityLabel()),this._elements.selectList.style.height="";var h=window.getComputedStyle(this._elements.selectList),i=parseInt(h.height,10),j=parseInt(h.maxHeight,10);i<j&&(this._elements.selectList.style.height=i-1+"px")},showSuggestions:function(){this._showSuggestionsCalled?this._showSuggestionsCalled=!1:this._showSuggestions(),this._elements.overlay.style.minWidth=this.offsetWidth+"px",this._elements.overlay.open?this._elements.overlay.reposition():this._elements.overlay.open=!0,this.setAttribute("aria-expanded","true"),this.classList.add("is-open")},hideSuggestions:function(){this._elements.overlay.open=!1,this.setAttribute("aria-expanded","false"),this.classList.remove("is-open","is-openBelow","is-openAbove"),this._elements.input.removeAttribute("aria-activedescendant"),clearTimeout(this.timeout),this.trigger("coral-autocomplete:hidesuggestions")},_optionContainsValue:function(a,b){return b=("string"==typeof b?b:"").toLowerCase(),a.content.toLowerCase().indexOf(b)!==-1},_optionStartsWithValue:function(a,b){return b=("string"==typeof b?b:"").toLowerCase(),0===a.content.toLowerCase().trim().indexOf(b)},_optionEqualsValue:function(a,b){return b=("string"==typeof b?b:"").toLowerCase(),a.content.toLowerCase().trim()===b},_updateButtonAccessibilityLabel:function(a){var b=Coral.i18n.get("Show suggestions");1===a?b=Coral.i18n.get("Show suggestion"):a>1&&(b=Coral.i18n.get("Show {0} suggestions",a)),this._elements.trigger.setAttribute("aria-label",b),this._elements.trigger.setAttribute("title",b)}}),Coral.register({name:"Autocomplete.Item",tagName:"coral-autocomplete-item",properties:{value:{reflectAttribute:!0,trigger:"coralui-autocomplete-item:_valuechanged",transform:Coral.transform.string,get:function(){return"undefined"==typeof this._value?this.textContent.replace(/\s{2,}/g," ").trim():this._value}},content:{contentZone:!0,set:function(){},get:function(){return this}},selected:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,trigger:"coralui-autocomplete-item:_selectedchanged"},disabled:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr}},_initialize:function(){this._observer=new MutationObserver(this._handleMutation.bind(this)),this._observer.observe(this,{characterData:!0,childList:!0,subtree:!0})},_handleMutation:function(a){this.trigger("coralui-autocomplete-item:_contentchanged",{content:this.textContent})}}),Coral.Autocomplete.match=e}(),window.Coral=window.Coral||{},window.Coral.strings=window.Coral.strings||{},window.Coral.strings["coralui-component-calendar"]={"en-US":{Previous:"Previous",Next:"Next","Today, {0} selected/[translation hint:date]":"Today, {0} selected","Today, {0}/[translation hint:date]":"Today, {0}","{0} selected/[translation hint:date]":"{0} selected"},"fr-FR":{Previous:"Précédent",Next:"Suivant","Today, {0} selected/[translation hint:date]":"Aujourd’hui, sélection de {0}","Today, {0}/[translation hint:date]":"Aujourd’hui, {0}","{0} selected/[translation hint:date]":"Sélection de {0}"},"de-DE":{Previous:"Zurück",Next:"Weiter","Today, {0} selected/[translation hint:date]":"Heute, {0} ausgewählt","Today, {0}/[translation hint:date]":"Heute, {0}","{0} selected/[translation hint:date]":"{0} ausgewählt"},"it-IT":{Previous:"Precedente",Next:"Successivo","Today, {0} selected/[translation hint:date]":"Oggi, {0} selezionati","Today, {0}/[translation hint:date]":"Oggi, {0}","{0} selected/[translation hint:date]":"{0} selezionati"},"es-ES":{Previous:"Anterior",Next:"Siguiente","Today, {0} selected/[translation hint:date]":"Hoy, {0} seleccionados","Today, {0}/[translation hint:date]":"Hoy, {0}","{0} selected/[translation hint:date]":"{0} seleccionados"},"pt-BR":{Previous:"Anterior",Next:"Próximo","Today, {0} selected/[translation hint:date]":"Hoje, {0} selecionados","Today, {0}/[translation hint:date]":"Hoje, {0}","{0} selected/[translation hint:date]":"{0} selecionados"},"ja-JP":{Previous:"前へ",Next:"次へ","Today, {0} selected/[translation hint:date]":"今日、{0} が選択されました","Today, {0}/[translation hint:date]":"今日、{0}","{0} selected/[translation hint:date]":"{0} が選択されました"},"ko-KR":{Previous:"이전으로",Next:"다음","Today, {0} selected/[translation hint:date]":"현재 {0}이(가) 선택됨","Today, {0}/[translation hint:date]":"현재 {0}","{0} selected/[translation hint:date]":"{0}이(가) 선택됨"},"zh-CN":{Previous:"上一步",Next:"下一步","Today, {0} selected/[translation hint:date]":"已选定今天 {0}","Today, {0}/[translation hint:date]":"今天 {0}","{0} selected/[translation hint:date]":"已选定 {0}"},"zh-TW":{Previous:"上一頁",Next:"下一頁","Today, {0} selected/[translation hint:date]":"今天，已選取 {0}","Today, {0}/[translation hint:date]":"今天，{0}","{0} selected/[translation hint:date]":"已選取 {0} "},"nl-NL":{Previous:"Vorige",Next:"Volgende","Today, {0} selected/[translation hint:date]":"Vandaag {0} geselecteerd","Today, {0}/[translation hint:date]":"Vandaag {0} ","{0} selected/[translation hint:date]":"{0} geselecteerd"},"da-DK":{Previous:"Foregående",Next:"Næste","Today, {0} selected/[translation hint:date]":"I dag, {0} valgt","Today, {0}/[translation hint:date]":"I dag, {0} ","{0} selected/[translation hint:date]":"{0} valgt"},"fi-FI":{Previous:"Edellinen",Next:"Seuraava","Today, {0} selected/[translation hint:date]":"Tänään, {0} valittu","Today, {0}/[translation hint:date]":"Tänään, {0}","{0} selected/[translation hint:date]":"{0} valittu"},"nb-NO":{Previous:"Forrige",Next:"Neste","Today, {0} selected/[translation hint:date]":"I dag, {0} valgt","Today, {0}/[translation hint:date]":"I dag, {0}","{0} selected/[translation hint:date]":"{0} valgt"},"sv-SE":{Previous:"Föregående",Next:"Nästa","Today, {0} selected/[translation hint:date]":"Idag, {0} vald","Today, {0}/[translation hint:date]":"Idag, {0}","{0} selected/[translation hint:date]":"{0} vald"},"cs-CZ":{Previous:"Předchozí",Next:"Další","Today, {0} selected/[translation hint:date]":"Dnes je vybráno: {0}","Today, {0}/[translation hint:date]":"Dnes, {0}","{0} selected/[translation hint:date]":"Vybráno: {0}"},"pl-PL":{Previous:"Wstecz",Next:"Dalej","Today, {0} selected/[translation hint:date]":"Dziś, wybrano {0}","Today, {0}/[translation hint:date]":"Dziś, {0}","{0} selected/[translation hint:date]":"wybrano {0}"},"ru-RU":{Previous:"Предыдущий",Next:"Следующий","Today, {0} selected/[translation hint:date]":"Сегодня, {0}, выбрано","Today, {0}/[translation hint:date]":"Сегодня, {0}","{0} selected/[translation hint:date]":"{0} выбрано"},"tr-TR":{Previous:"Önceki",Next:"İleri","Today, {0} selected/[translation hint:date]":"Bugün, {0} seçildi","Today, {0}/[translation hint:date]":"Bugün, {0}","{0} selected/[translation hint:date]":"{0} seçildi"}},window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.Calendar=window.Coral.templates.Calendar||{},window.Coral.templates.Calendar.calendar=function(a){var b=document.createDocumentFragment(),c=this.input=document.createElement("input");c.setAttribute("handle","input"),c.setAttribute("type","hidden"),c.setAttribute("name",""),b.appendChild(c);var d=document.createTextNode("\n");b.appendChild(d);var e=document.createElement("div");e.className+=" coral3-Calendar-calendarHeader";var f=document.createTextNode("\n  ");e.appendChild(f);var g=this.heading=document.createElement("div");g.setAttribute("handle","heading"),g.className+=" coral-Heading coral-Heading--2",g.id=Coral.commons.getUID(),g.setAttribute("role","heading"),g.setAttribute("aria-live","assertive"),g.setAttribute("aria-atomic","true"),e.appendChild(g);var h=document.createTextNode("\n  ");e.appendChild(h);var i=this.prev=document.createElement("button","coral-button");i.setAttribute("type","button"),i.setAttribute("handle","prev"),i.className+=" coral3-Calendar-prevMonth",i.setAttribute("is","coral-button"),i.setAttribute("variant","minimal"),i.setAttribute("icon","chevronLeft"),i.setAttribute("iconsize","XS"),i.setAttribute("aria-label",Coral.i18n.get("Previous")),i.setAttribute("title",Coral.i18n.get("Previous")),e.appendChild(i);var j=document.createTextNode("\n  ");e.appendChild(j);var k=this.next=document.createElement("button","coral-button");k.setAttribute("type","button"),k.setAttribute("handle","next"),k.className+=" coral3-Calendar-nextMonth",k.setAttribute("is","coral-button"),k.setAttribute("variant","minimal"),k.setAttribute("icon","chevronRight"),k.setAttribute("iconsize","XS"),k.setAttribute("aria-label",Coral.i18n.get("Next")),k.setAttribute("title",Coral.i18n.get("Next")),e.appendChild(k);var l=document.createTextNode("\n");e.appendChild(l),b.appendChild(e);var m=document.createTextNode("\n");b.appendChild(m);var n=this.body=document.createElement("div");return n.className+=" coral3-Calendar-calendarBody",n.setAttribute("handle","body"),n.setAttribute("role","grid"),n.setAttribute("tabindex","0"),n.setAttribute("aria-readonly","true"),b.appendChild(n),b},window.Coral.templates.Calendar.container=function(a){var b=this.container=document.createElement("div");return b.className+=" coral3-DatePicker-calendarSlidingContainer",b.setAttribute("handle","container"),b.setAttribute("style","width: "+a.width+"px; height: "+a.height+"px;"),b},window.Coral.templates.Calendar.table=function(a){var b=a="undefined"==typeof a?{}:a,c=this.table=document.createElement("table");c.setAttribute("handle","table"),c.setAttribute("role","presentation");var d=document.createTextNode("\n  ");c.appendChild(d);var e=document.createElement("thead");e.setAttribute("role","presentation");var f=document.createTextNode("\n    ");e.appendChild(f);var g=document.createElement("tr");g.setAttribute("role","row");var h=document.createTextNode("\n      ");g.appendChild(h);for(var i=a.dayNames,j=0,k=i.length;j<k;j++){var l=b=i[j],m=document.createTextNode("\n        ");g.appendChild(m);var n=document.createElement("th");n.setAttribute("role","columnheader"),n.setAttribute("scope","col");var o=document.createTextNode("\n          ");n.appendChild(o);var p=document.createElement("abbr");p.className+=" coral3-Calendar-dayOfWeek",p.setAttribute("title",l.dayFullName),p.textContent=l.dayAbbr,n.appendChild(p);var q=document.createTextNode("\n        ");n.appendChild(q),g.appendChild(n);var r=document.createTextNode("\n      ");g.appendChild(r)}var s=document.createTextNode("\n    ");g.appendChild(s),e.appendChild(g);var t=document.createTextNode("\n  ");e.appendChild(t),c.appendChild(e);var u=document.createTextNode("\n  ");c.appendChild(u);var v=document.createElement("tbody");v.setAttribute("role","presentation");var w=document.createTextNode("\n    ");v.appendChild(w);for(var i=a.weeks,j=0,k=i.length;j<k;j++){var l=b=i[j],x=document.createTextNode("\n      ");v.appendChild(x);var y=document.createElement("tr");y.setAttribute("role","row");var z=document.createTextNode("\n        ");y.appendChild(z);for(var A=l,B=0,C=A.length;B<C;B++){var D=b=A[B],E=document.createTextNode("\n          ");y.appendChild(E),b=D;var F,G=b.dateLabel+", "+b.formattedDate;F=b.isToday?b.ariaSelected?Coral.i18n.get("Today, {0} selected",G,"date"):Coral.i18n.get("Today, {0}",G,"date"):b.ariaSelected?Coral.i18n.get("{0} selected",G,"date"):F=G,D=b;var H=document.createTextNode("\n          ");y.appendChild(H);var I=document.createElement("td");I.setAttribute("role","gridcell"),I.id=Coral.commons.getUID()+"-row"+j+"-col"+B,I.className+=" "+D.cssClass,I.setAttribute("aria-selected",D.ariaSelected),D.isDisabled&&I.setAttribute("aria-disabled","true"),D.ariaInvalid&&I.setAttribute("aria-invalid","true"),D.formattedDate&&I.setAttribute("title",F);var J=document.createTextNode("\n            ");if(I.appendChild(J),D.dateAttr){var K=document.createTextNode("\n                ");I.appendChild(K);var L=document.createElement("a");L.setAttribute("role","presentation"),L.className+=" coral3-Calendar-date",L.setAttribute("data-date",D.dateAttr),L.textContent=D.dateText,I.appendChild(L);var M=document.createTextNode("\n              ");I.appendChild(M)}else{var N=document.createTextNode("\n                ");I.appendChild(N);var O=document.createElement("span");O.setAttribute("role","presentation"),O.className+=" coral3-Calendar-secondaryDate",O.textContent=D.dateText,I.appendChild(O);var P=document.createTextNode("\n            ");I.appendChild(P)}var Q=document.createTextNode("\n          ");I.appendChild(Q),y.appendChild(I);var R=document.createTextNode("\n        ");y.appendChild(R)}var S=document.createTextNode("\n      ");y.appendChild(S),v.appendChild(y);var T=document.createTextNode("\n    ");v.appendChild(T)}var U=document.createTextNode("\n  ");v.appendChild(U),c.appendChild(v);var V=document.createTextNode("\n  ");c.appendChild(V);var W=document.createElement("caption");W.className+=" u-coral-screenReaderOnly",W.setAttribute("aria-live","assertive"),W.setAttribute("aria-atomic","true"),c.appendChild(W);var X=document.createTextNode("\n");return c.appendChild(X),c},function(){"use strict";function a(a,b,c){return null===b&&null===c||(null===b?a<=c:null===c?a>=b:b<=a&&a<=c)}function b(a,b){if("today"===a)return moment().startOf("day");if(moment.isMoment(a))return a.isValid()?a.clone():null;var c=moment(a,a instanceof Date?null:b);return c.isValid()?c:null}function c(){}function d(a,b){return a=a||null,b=b||null,a!==b&&!moment(a).isSame(b,"day")&&(null===a||a.isValid())}function e(a){this.host=a,this._addContainerIfNotPresent=function(a,b){this.container||(Coral.templates.Calendar.container.call(this,{width:a,height:b}),this.host.appendChild(this.container))},this._removeContainerIfEmpty=function(){this.container&&0===this.container.children.length&&(this.host.removeChild(this.container),this.container=null)},this.slide=function(a,b){var c=void 0===b,d="left"===b,e=this.oldTable;if(c||!e)return e&&e.parentNode.removeChild(e),this.host.insertBefore(a,this.host.firstChild),void(this.oldTable=a);var f=e.getBoundingClientRect(),g=f.width,h=f.height;this._addContainerIfNotPresent(g,h),this.container.appendChild(e),this.container.appendChild(a),e.classList.add("coral3-Calendar-table--transit"),Coral.commons.transitionEnd(e,function(){e.parentNode.removeChild(e),this._removeContainerIfEmpty()}.bind(this)),a.classList.add("coral3-Calendar-table--transit"),a.style.left=(d?g:-g)+"px",Coral.commons.transitionEnd(a,function(){a.classList.remove("coral3-Calendar-table--transit"),this.host.appendChild(a),this._removeContainerIfEmpty()}.bind(this)),h=this.container.offsetWidth,e.style.left=(d?-g:g)+"px",a.style.left=0,this.oldTable=a}}var f=[0,0,0,0,0,0],g=[0,0,0,0,0,0,0],h="YYYY-MM-DD",i={YEAR:"year",MONTH:"month",WEEK:"week",DAY:"day"};Coral.register({name:"Calendar",tagName:"coral-calendar",className:"coral3-Calendar",mixins:[Coral.mixin.formField],events:{"click .coral3-Calendar-nextMonth,.coral3-Calendar-prevMonth":"_onNextOrPreviousMonthClick","click .coral3-Calendar-calendarBody .coral3-Calendar-date":"_onDayClick","mousedown .coral3-Calendar-calendarBody .coral3-Calendar-date":"_onDayMouseDown","key:up .coral3-Calendar-calendarBody":"_onUpKey","key:right .coral3-Calendar-calendarBody":"_onRightKey","key:down .coral3-Calendar-calendarBody":"_onDownKey","key:left .coral3-Calendar-calendarBody":"_onLeftKey","key:home .coral3-Calendar-calendarBody":"_onHomeOrEndKey","key:end .coral3-Calendar-calendarBody":"_onHomeOrEndKey","key:pageup":"_onPageUpKey","key:pagedown":"_onPageDownKey","key:meta+pageup":"_onCtrlPageUpKey","key:meta+pagedown":"_onCtrlPageDownKey","key:ctrl+pageup":"_onCtrlPageUpKey","key:ctrl+pagedown":"_onCtrlPageDownKey","key:enter .coral3-Calendar-calendarBody":"_onEnterKey","key:space .coral3-Calendar-calendarBody":"_onEnterKey"},properties:{startDay:{"default":"undefined"!=typeof moment&&"undefined"!=typeof moment.localeData().firstDayOfWeek?moment.localeData(Coral.i18n.locale).firstDayOfWeek():0,attribute:"startday",transform:Coral.transform.number,validate:[Coral.validate.valueMustChange,function(a){return a>=0&&a<7}],sync:c,alsoSync:["_renderCalendarFlag"]},headerFormat:{"default":"MMMM YYYY",attribute:"headerformat",sync:c,alsoSync:["_renderCalendarFlag"]},min:{"default":null,transform:function(a){return b(a,this.valueFormat)},validate:d,get:function(){return this._min?this._min.toDate():null},sync:c,alsoSync:["_renderCalendarFlag"]},max:{"default":null,transform:function(a){return b(a,this.valueFormat)},validate:d,get:function(){return this._max?this._max.toDate():null},sync:c,alsoSync:["_renderCalendarFlag"]},valueFormat:{"default":"YYYY-MM-DD",attribute:"valueformat",reflectAttribute:!0,set:function(a){this._valueFormat=a,this._elements.input.value=this.value}},value:{transform:function(a){return b(a,this.valueFormat)},validate:function(a,b){return d(a,this._value)},get:function(){return this._value?this._value.format(this.valueFormat):""},set:function(a){this._value=a,this._elements.input.value=this.value,this._cursor=null,this._queueSync("_renderCalendarFlag","required")}},valueAsDate:{attribute:null,transform:function(a){return a instanceof Date?moment(a):""},get:function(){return this._value?this._value.toDate():null},set:function(a){this.value=a}},name:{get:function(){return this._elements.input.name},set:function(a){this._elements.input.name=a}},required:{sync:function(){this.classList.toggle("is-required",this.required&&null===this._value)}},disabled:{sync:function(){this.classList.toggle("is-disabled",this.disabled),this._elements.prev.disabled=this.disabled,this._elements.next.disabled=this.disabled,this._elements.body.setAttribute("aria-disabled",this.disabled),this._elements.body[this.disabled?"removeAttribute":"setAttribute"]("tabindex","0")},alsoSync:["_renderCalendarFlag"]},invalid:{sync:function(){this.classList.toggle("is-invalid",this.invalid)},alsoSync:["_renderCalendarFlag"]},_renderCalendarFlag:{attribute:null,sync:function(){this._renderCalendar()}}},focus:function(){this.contains(document.activeElement)||this.disabled||(this._setActiveDescendant(),this._elements.body.focus())},_render:function(){for(;this.firstChild;)this.removeChild(this.firstChild);this.appendChild(Coral.templates.Calendar.calendar.call(this._elements))},_initialize:function(){this._cursor=null,this._activeDescendant=null,this._animator=new e(this._elements.body),this.setAttribute("role","region")},_renderCalendar:function(a){var b=this._requireCursor(),c=b.year(),d=b.month(),e=this,f=this._animator.oldTable;this._elements.heading.innerHTML=moment([c,d,1]).format(this.headerFormat);var g=this._renderTable(c,d+1);f&&Coral.commons.transitionEnd(g,function(){Coral.commons.nextFrame(function(){e._setActiveDescendant()})}),this._animator.slide(g,a);var h=this._elements.body.querySelector(".is-selected"),i=h?h.id:null;this._activeDescendant=i,this._setActiveDescendant()},_isBeforeMin:function(a){var b=this.min?moment(this.min):null;
return b&&a.isBefore(b)},_isAfterMax:function(a){var b=this.max?moment(this.max):null;return b&&a.isAfter(b)},_isInRange:function(a){return!(this._isBeforeMin(a)||this._isAfterMax(a))},_setActiveDescendant:function(){var a;if(!this._activeDescendant||!this._elements.body.querySelector("#"+this._activeDescendant+" [data-date]")){this._activeDescendant=null,a=this._elements.body.querySelector(".is-selected");var b=a?a.id:null;a=this._elements.body.querySelector(".is-today");var c=a?a.id:null;if(this._activeDescendant=b||c,!this._activeDescendant||!this._elements.body.querySelector("#"+this._activeDescendant+" [data-date]")){var d=this._value;if(d){var e=this._elements.body.querySelectorAll("[data-date]");e.length&&(this._isBeforeMin(d)?a=e[0]:this._isAfterMax(d)&&(a=e[e.length-1]))}a&&(this._activeDescendant=a.parentElement.id)}}a=this._elements.body.querySelector(".is-focused"),a&&a.classList.remove("is-focused"),this._elements.body.setAttribute("aria-activedescendant",this._activeDescendant),this._updateTableCaption(),this._activeDescendant&&(a=document.getElementById(this._activeDescendant),a&&a.classList.add("is-focused"))},_updateTableCaption:function(){var a=this,b=a._elements.body.querySelector("caption");if(b&&(b.firstChild&&b.removeChild(b.firstChild),this._activeDescendant)){var c=this._elements.body.querySelector("#"+this._activeDescendant),d=document.createTextNode(c.getAttribute("title"));b.appendChild(d)}},_renderTable:function(b,c){var d=moment([b,c-1,1]),e=(d.day()-this.startDay)%7,i=this._value?this._value.clone().startOf("day"):null;e<0&&(e+=7);var j={dayNames:g.map(function(a,b,c){var d=moment().day((b+this.startDay)%7),e={dayAbbr:d.format("dd"),dayFullName:d.format("dddd")};return e},this),weeks:f.map(function(d,f){return g.map(function(d,g){var j={},k=this.disabled?["is-disabled"]:[],l=!1,m=!1,n=7*f+g-e,o=moment([b,c-1]);o.add(n,"days");var p=o.month()+1===parseFloat(c),q=moment().day((g+this.startDay)%7).format("dddd"),r=o.isSame(moment(),"day"),s=o.clone().startOf("day");return r&&k.push("is-today"),i&&s.isSame(i,"day")&&(l=!0,k.push("is-selected"),this.invalid&&(m=!0,k.push("is-invalid"))),p&&(k.push("is-currentMonth"),!this.disabled&&a(o,this.min,this.max)&&(j.dateAttr=s.local().format(h),j.weekIndex=o.week(),j.formattedDate=o.format("LL"))),j.isDisabled=this.disabled||!j.dateAttr,j.dateText=o.date(),j.cssClass=k.join(" "),j.isToday=r,j.ariaSelected=l,j.ariaInvalid=m,j.dateLabel=q,j.weekIndex=o.week(),j},this)},this)},k={};return Coral.templates.Calendar.table.call(k,j),k.table},_requireCursor:function(){var a=this._cursor;return a&&a.isValid()||(a=(this._value?this._value.clone().startOf("day"):moment()).startOf("month"),this._cursor=a),a},_gotoPreviousOrNextTimeUnit:function(a,b){var c,d,e,f,g=b?"left":"right",h=b?"add":"subtract",j=this._elements.body.querySelector("td.is-focused .coral3-Calendar-date");if(a!==i.MONTH&&j)c=j.dataset.date,d=moment(c),e=d[h](1,a),this._isInRange(e)&&(f=Math.abs(moment(c).diff(e,"days")),this._getToNewMoment(null,g,h,f),this._setActiveDescendant());else{if(this._requireCursor(),!this._isInRange(this._cursor))return this._isBeforeMin(this._cursor)?e=this.min:this._isAfterMax(this._cursor)&&(e=this.max),e=moment(e),f=Math.abs(this._cursor.diff(e,"days")),this._getToNewMoment(null,g,h,f),void this._setActiveDescendant();this._cursor[h](1,a),this._renderCalendar(g)}},_validateCalendar:function(){this.invalid=!(null===this._value||a(this._value,this.min,this.max))},_onNextOrPreviousMonthClick:function(a){a.preventDefault(),this._gotoPreviousOrNextTimeUnit(i.MONTH,this._elements.next===a.matchedTarget),a.matchedTarget.focus(),this._validateCalendar()},_getToNewMoment:function(a,b,c,d){var e,f=this._elements.body.querySelector("td.is-focused .coral3-Calendar-date");f?e=f.dataset.date:(this._requireCursor(),e=this._cursor.local().format(h));var g=moment(e),i=g.month(),j=g.year(),k=g[c](d,"days"),l=k.month(),m=k.year(),n=k.local().format(h);l!==i?(this._requireCursor(),this._cursor[c](1,"months"),this._renderCalendar(b)):l===i&&m!==j&&(this._requireCursor(),this._cursor[c](1,"years"),this._renderCalendar(b));var o=".coral3-Calendar-date[data-date^="+JSON.stringify(n)+"]",p=this._elements.body.querySelector(o);if(p){var q=p.parentNode.getAttribute("id");this._activeDescendant=q}},_onDayMouseDown:function(a){this._activeDescendant=a.target.parentNode.id,this._setActiveDescendant(),this._elements.body.focus(),this._validateCalendar()},_onDayClick:function(a){a.preventDefault(),this._elements.body.focus();var b,c=moment(a.target.dataset.date,h);this._value&&(b=this._value.clone()),d(c,b)&&(this.value=c.local(),this.trigger("change")),this._validateCalendar()},_onEnterKey:function(a){a.preventDefault();var b=this._elements.body.querySelector("td.is-focused .coral3-Calendar-date");b&&b.click(),this._validateCalendar()},_onUpKey:function(a){a.preventDefault(),this._gotoPreviousOrNextTimeUnit(i.WEEK,!1),this._validateCalendar()},_onDownKey:function(a){a.preventDefault(),this._gotoPreviousOrNextTimeUnit(i.WEEK,!0),this._validateCalendar()},_onRightKey:function(a){a.preventDefault(),this._gotoPreviousOrNextTimeUnit(i.DAY,!0),this._validateCalendar()},_onLeftKey:function(a){a.preventDefault(),this._gotoPreviousOrNextTimeUnit(i.DAY,!1),this._validateCalendar()},_onHomeOrEndKey:function(a){a.preventDefault();var b=a.keyCode===Coral.Keys.keyToCode("home"),c="",d=b?"subtract":"add",e=this._elements.body.querySelector("td.is-focused .coral3-Calendar-date");if(e){var f=e.dataset.date,g=moment(f),h=b?g.date()-1:g.daysInMonth()-g.date();this._getToNewMoment(a,c,d,h),this._setActiveDescendant()}this._validateCalendar()},_onPageDownKey:function(a){a.preventDefault(),this._gotoPreviousOrNextTimeUnit(i.MONTH,!0),this._validateCalendar()},_onPageUpKey:function(a){a.preventDefault(),this._gotoPreviousOrNextTimeUnit(i.MONTH,!1),this._validateCalendar()},_onCtrlPageDownKey:function(a){a.preventDefault(),this._gotoPreviousOrNextTimeUnit(i.YEAR,!0),this._validateCalendar()},_onCtrlPageUpKey:function(a){a.preventDefault(),this._gotoPreviousOrNextTimeUnit(i.YEAR,!1),this._validateCalendar()}})}(),function(){"use strict";var a={DEFAULT:"default",CONDENSED:"condensed",INVERTED:"inverted",ASSET:"asset"},b="coral3-Card",c=[];for(var d in a)c.push(b+"--"+a[d]);Coral.register({name:"Card",tagName:"coral-card",className:b,events:{"capture:load coral-card-asset img":"_onLoad"},properties:{asset:Coral.property.contentZone({handle:"asset",tagName:"coral-card-asset",insert:function(a){this.insertBefore(a,this.info||this._elements.wrapper||null)}}),assetHeight:{"default":"",attribute:"assetheight",transform:Coral.transform.number,sync:function(){if(!this._loaded&&this._elements.asset&&this.assetWidth&&this.assetHeight){var a=this.getBoundingClientRect(),b=a.right-a.left,c=b/this.assetWidth;c>1?this._elements.asset.style.height=this.assetHeight+32+"px":this.variant!==Coral.Card.variant.CONDENSED&&this.variant!==Coral.Card.variant.INVERTED&&(this._elements.asset.style.height=c*this.assetHeight+"px")}}},assetWidth:{"default":"",attribute:"assetwidth",transform:Coral.transform.number},colorHint:{attribute:"colorhint",validate:[Coral.validate.valueMustChange,function(a){return/^#[0-9A-F]{6}$/i.test(a)}],sync:function(){this._loaded||(this._elements.asset.style["background-color"]=this.colorHint)}},content:Coral.property.contentZone({handle:"content",tagName:"coral-card-content",defaultContentZone:!0,insert:function(a){this._elements.wrapper.insertBefore(a,this.overlay||null)}}),info:Coral.property.contentZone({handle:"info",tagName:"coral-card-info",insert:function(a){this.appendChild(a)}}),fixedWidth:{"default":!1,attribute:"fixedwidth",reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){this.classList.toggle(this._className+"--fixedWidth",this.fixedWidth)}},overlay:Coral.property.contentZone({handle:"overlay",tagName:"coral-card-overlay",insert:function(a){this._elements.wrapper.appendChild(a)}}),stacked:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){this.classList.toggle(this._className+"--stacked",this.stacked)}},variant:{"default":a.DEFAULT,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(a)],sync:function(){this.classList.remove.apply(this.classList,c),this.variant!==Coral.Card.variant.DEFAULT&&this.classList.add(this._className+"--"+this.variant)},alsoSync:"assetHeight"}},_onLoad:function(a){this._loaded=!0,this._elements.asset.style.height="",a.target.classList.remove("is-loading")},_render:function(){var a=this.querySelector("coral-card-asset")||document.createElement("coral-card-asset"),b=this.querySelector("coral-card-info"),c=this.querySelector("coral-card-overlay"),d=this.querySelector("coral-card-content"),e=this._elements.wrapper=document.createElement("div");e.className="coral3-Card-wrapper";for(var f=a.querySelectorAll("img"),g=f.length,h=0;h<g;h++){var i=f[h];i.complete||i.classList.add("is-loading")}if(null===d)for(d=document.createElement("coral-card-content");this.firstChild;)this.firstChild.nodeType===Node.TEXT_NODE&&""===this.firstChild.textContent.trim()?this.removeChild(this.firstChild):d.appendChild(this.firstChild);c&&(this.overlay=c),this.content=d,b&&(this.info=b),this.appendChild(e),this.asset=a}}),Coral.Card.variant=a,Coral.Card.Asset=function(){return document.createElement("coral-card-asset")},Coral.Card.Overlay=function(){return document.createElement("coral-card-overlay")},Coral.Card.Info=function(){return document.createElement("coral-card-info")},Coral.Card.Content=function(){return document.createElement("coral-card-content")},Coral.Card.PropertyList=function(){return document.createElement("coral-card-propertylist")},Coral.register({name:"Card.Property",tagName:"coral-card-property",className:"coral3-Card-property",properties:{content:Coral.property.contentZone({handle:"content",tagName:"coral-card-property-content",defaultContentZone:!0,insert:function(a){this.appendChild(a)}}),icon:{get:function(){return this._elements.icon.icon},set:function(a){this._elements.icon.icon=a},sync:function(){""===this.icon?this._elements.icon.remove():this._elements.icon.parentNode||this.insertBefore(this._elements.icon,this.firstChild)}}},_render:function(){this._elements.icon=document.createElement("coral-icon"),this._elements.icon.size=Coral.Icon.size.EXTRA_SMALL,this._elements.icon.className+=" coral3-Card-property-icon";var a=this.querySelector("coral-card-property-content");if(null===a)for(a=document.createElement("coral-card-property-content");this.firstChild;)a.appendChild(this.firstChild);this.content=a}}),Coral.Card.Property.Content=function(){return document.createElement("coral-card-property-content")},Coral.register({name:"Card.Title",tagName:"coral-card-title",className:"coral3-Card-title",properties:{content:{contentZone:!0,set:function(){},get:function(){return this}}}}),Coral.register({name:"Card.Subtitle",tagName:"coral-card-subtitle",className:"coral3-Card-subtitle",properties:{content:{contentZone:!0,set:function(){},get:function(){return this}}}}),Coral.register({name:"Card.Context",tagName:"coral-card-context",className:"coral3-Card-context",properties:{content:{contentZone:!0,set:function(){},get:function(){return this}}}}),Coral.register({name:"Card.Description",tagName:"coral-card-description",className:"coral3-Card-description",properties:{content:{contentZone:!0,set:function(){},get:function(){return this}}}})}(),function(){"use strict";var a={PREVIOUS:"_prev",NEXT:"_next"};Coral.register({name:"CharacterCount",tagName:"coral-charactercount",className:"coral3-CharacterCount",properties:{target:{"default":a.PREVIOUS,validate:function(a){return"string"==typeof a||a instanceof Node},set:function(b){this._target=b,this._targetEl&&this._targetEl.removeEventListener("input",this._refreshCharCount.bind(this)),b===a.NEXT?this._targetEl=this.nextElementSibling:b===a.PREVIOUS?this._targetEl=this.previousElementSibling:"string"==typeof b?this._targetEl=document.querySelector(b):this._targetEl=b,this._targetEl&&(this._targetEl.addEventListener("input",this._refreshCharCount.bind(this)),this._targetEl.getAttribute("maxlength")&&(this.maxLength=this._targetEl.getAttribute("maxlength")))}},maxLength:{"default":null,attribute:"maxlength",reflectAttribute:!0,transform:Coral.transform.number,sync:function(){this._refreshCharCount()}}},_getCharCount:function(){var a=this._targetEl?this._targetEl.value.length:0;return this._maxLength?this._maxLength-a:a},_refreshCharCount:function(){var a=this._getCharCount();this.innerHTML=a;var b=a<0;this._targetEl&&(this._targetEl.classList.toggle("is-invalid",b),this.classList.toggle("is-invalid",b))}}),Coral.CharacterCount.target=a}(),window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.SelectList=window.Coral.templates.SelectList||{},window.Coral.templates.SelectList.loadIndicator=function(a){var b=this.loadIndicator=document.createElement("div");b.setAttribute("handle","loadIndicator"),b.className+=" coral3-SelectList-loading";var c=document.createTextNode("\n  ");b.appendChild(c);var d=document.createElement("coral-wait");d.setAttribute("centered",""),b.appendChild(d);var e=document.createTextNode("\n");return b.appendChild(e),b},function(){"use strict";var a=1e3,b=50,c=100,d="coral-selectlist-item",e="coral-selectlist-group",f=function(a,b){this._host=a,this._itemTagName=b};f.prototype=Object.create(Coral.Collection.prototype),f.prototype.add=function(a,b){if(!(a instanceof HTMLElement)){var c=a;a=document.createElement(this._itemTagName),a.set(c,!0)}return this._host.insertBefore(a,b||null)},f.prototype.getAll=function(){return this._host.id=this._host.id||Coral.commons.getUID(),Array.prototype.slice.call(this._host.getElementsByTagName(this._itemTagName))},Coral.register({name:"SelectList",tagName:"coral-selectlist",className:"coral3-SelectList",mixins:[Coral.mixin.selectionList({role:"listbox",itemTagName:d})],events:{scroll:"_onScroll","capture:focus":"_onFocus","capture:blur":"_onBlur","click coral-selectlist-item":"_onItemClick","capture:mouseenter coral-selectlist-item":"_onItemMouseEnter","capture:mouseleave coral-selectlist-item":"_onItemMouseLeave","key:space coral-selectlist-item":"_onToggleItemKey","key:return coral-selectlist-item":"_onToggleItemKey","key:pageup coral-selectlist-item":"_focusPreviousItem","key:left coral-selectlist-item":"_focusPreviousItem","key:up coral-selectlist-item":"_focusPreviousItem","key:pagedown coral-selectlist-item":"_focusNextItem","key:right coral-selectlist-item":"_focusNextItem","key:down coral-selectlist-item":"_focusNextItem","key:home coral-selectlist-item":"_onHomeKey","key:end coral-selectlist-item":"_onEndKey","keypress coral-selectlist-item":"_onKeyPress"},properties:{groups:{set:function(){},get:function(){return this._groups||(this._groups=new f(this,e)),this._groups}},loading:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,set:function(a){this._loading=a;var b=this._elements.loadIndicator;if(this.loading){b||(b=Coral.templates.SelectList.loadIndicator.call(this._elements));var c=this.scrollTop>=this.scrollHeight-this.clientHeight;this.appendChild(b),c&&(this.scrollTop=this.scrollHeight)}else b&&b.parentNode&&this.removeChild(b)}},_tabTarget:{"default":null,sync:function(){var a=this._tabTarget,b=this.items.getAll();b.forEach(function(b){b._isTabTarget=b===a})}}},_onItemMouseEnter:function(a){a.target.disabled||(this.classList.contains("is-focused")?this._focusItem(a.target):a.target.classList.add("is-highlighted"))},_onItemMouseLeave:function(a){a.target.classList.remove("is-highlighted")},_onFocus:function(a){this.classList.add("is-focused")},_onBlur:function(a){this._resetTabTarget(),this.classList.remove("is-focused")},_onItemClick:function(a){var b=a.matchedTarget;if(b){a.preventDefault(),a.stopPropagation();var c=b.selected;this._selectItem(b),this._focusItem(b),c===b.selected&&this.trigger("coral-selectlist:change",{oldSelection:this._getSelection(),selection:this._getSelection()})}},_focusItem:function(a){a&&a.focus(),this._tabTarget=a},_onToggleItemKey:function(a){a.preventDefault(),a.stopPropagation();var b=a.target,c=b.selected;this._selectItem(b),this._focusItem(b),c===b.selected&&this.trigger("coral-selectlist:change",{oldSelection:this._getSelection(),selection:this._getSelection()})},_focusPreviousItem:function(a){a.preventDefault(),a.stopPropagation(),this._focusItem(this.items.getPreviousSelectable(a.target))},_focusNextItem:function(a){a.preventDefault(),a.stopPropagation(),this._focusItem(this.items.getNextSelectable(a.target))},_onHomeKey:function(a){a.preventDefault(),a.stopPropagation(),this._focusItem(this.items.getFirstSelectable())},_onEndKey:function(a){a.preventDefault(),a.stopPropagation(),this._focusItem(this.items.getLastSelectable())},_keypressTimeoutID:null,_keypressSearchString:"",_onKeyPress:function(b){var c=this,d=String.fromCharCode(b.which);clearTimeout(this._keypressTimeoutID),d!==this._keypressSearchString&&(this._keypressSearchString+=d),this._keypressTimeoutID=setTimeout(function(){c._keypressSearchString=""},a);var e=this.items._getSelectableItems(),f=e.indexOf(this._tabTarget);this._keypressSearchString=this._keypressSearchString.trim().toLowerCase();var g;g=f===-1?0:1===this._keypressSearchString.length?f+1:f;for(var h,i,j,k=g;k<e.length;k++)if(j=e[k],i=j.textContent.trim().toLowerCase(),0===i.indexOf(this._keypressSearchString)){h=j;break}if(!h)for(var l=0;l<g;l++)if(j=e[l],i=j.textContent.trim().toLowerCase(),0===i.indexOf(this._keypressSearchString)){h=j;break}void 0!==h&&this._focusItem(h)},_onItemSelected:function(){this._resetTabTarget()},_onItemDeselected:function(){this._resetTabTarget()},_onItemAttached:function(){this._resetTabTarget()},_onItemDetached:function(){this._resetTabTarget()},_resetTabTarget:function(){this._resetTabTargetScheduled||(this._resetTabTargetScheduled=!0,Coral.commons.nextFrame(function(){this._resetTabTargetScheduled=!1;var a=this.items._getNonNestedItems().filter(function(a){return a.hasAttribute("selected")&&!a.hasAttribute("disabled")&&!a.hasAttribute("hidden")});this._tabTarget=a.length?a[0]:this.items.getFirstSelectable()}.bind(this)))},_onScroll:function(){clearTimeout(this._scrollTimeout),this._scrollTimeout=setTimeout(this._onDebouncedScroll,c)},_onDebouncedScroll:function(){this.scrollTop>=this.scrollHeight-this.clientHeight-b&&this.trigger("coral-selectlist:scrollbottom")},_initialize:function(){this._onDebouncedScroll=this._onDebouncedScroll.bind(this)},focus:function(){this.contains(document.activeElement)||(this._resetTabTarget(),this._focusItem(this._tabTarget))}}),Coral.register({name:"SelectList.Item",tagName:d,className:"coral3-SelectList-item",mixins:[Coral.mixin.selectionList.Item({listSelector:"coral-selectlist",role:"option"})],events:{focus:"_onFocus",blur:"_onBlur"},properties:{value:{reflectAttribute:!0,transform:Coral.transform.string,get:function(){return"undefined"==typeof this._value?this.textContent:this._value}},content:{contentZone:!0,set:function(){},get:function(){return this}},_isTabTarget:{"default":!1,sync:function(){this.setAttribute("tabindex",this.__isTabTarget?0:-1)}}},_onFocus:function(a){this.classList.add("is-highlighted")},_onBlur:function(a){this.classList.remove("is-highlighted")}}),Coral.register({name:"SelectList.Group",tagName:e,className:"coral3-SelectList-group",properties:{label:{reflectAttribute:!0,transform:Coral.transform.string,sync:function(){this.setAttribute("aria-label",this.label)}},items:{set:function(){},get:function(){return this._groups||(this._groups=new f(this,d)),this._groups}}},_initialize:function(){this.setAttribute("role","group")}})}(),window.Coral=window.Coral||{},window.Coral.strings=window.Coral.strings||{},window.Coral.strings["coralui-component-select"]={"en-US":{Select:"Select"},"fr-FR":{Select:"Sélectionner"},"de-DE":{Select:"Auswählen"},"it-IT":{Select:"Seleziona"},"es-ES":{Select:"Seleccionar"},"pt-BR":{Select:"Selecionar"},"ja-JP":{Select:"選択"},"ko-KR":{Select:"선택"},"zh-CN":{Select:"选择"},"zh-TW":{Select:"選取"},"nl-NL":{Select:"Selecteren"},"da-DK":{Select:"Vælg"},"fi-FI":{Select:"Valitse"},"nb-NO":{Select:"Velg"},"sv-SE":{Select:"Välj"},"cs-CZ":{Select:"Vybrat"},"pl-PL":{Select:"Wybierz"},"ru-RU":{Select:"Выберите"},"tr-TR":{Select:"Seç"}},window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.Select=window.Coral.templates.Select||{},window.Coral.templates.Select.base=function(a){var b=document.createDocumentFragment(),c=a="undefined"==typeof a?{}:a;c=a;var d=Coral.commons.getUID(),e=Coral.commons.getUID();a=c;var f=document.createTextNode("\n");b.appendChild(f);var g=this.button=document.createElement("button","coral-button");g.setAttribute("handle","button"),g.setAttribute("type","button"),g.setAttribute("is","coral-button"),g.setAttribute("block",""),g.setAttribute("role","combobox"),g.setAttribute("aria-expanded","false"),g.setAttribute("aria-haspopup","true"),g.id=d,g.setAttribute("aria-controls",e),g.setAttribute("aria-owns",e),g.className+=" coral3-Select-button";var h=document.createTextNode("\n  ");g.appendChild(h);var i=this.icon=document.createElement("coral-icon");i.setAttribute("handle","icon"),i.setAttribute("icon","chevronDown"),i.setAttribute("size","xs"),i.className+=" coral3-Select-openIcon",g.appendChild(i);var j=document.createTextNode("\n  ");g.appendChild(j);var k=this.label=document.createElement("span");k.setAttribute("handle","label"),k.className+=" coral3-Select-label",k.setAttribute("role","textbox"),k.setAttribute("aria-readonly","true"),k.textContent="​",g.appendChild(k);var l=document.createTextNode("\n");g.appendChild(l),b.appendChild(g);var m=document.createTextNode("\n");b.appendChild(m);var n=this.overlay=document.createElement("coral-overlay");n.setAttribute("handle","overlay"),n.className+=" coral3-Select-overlay",n.setAttribute("trapfocus","on"),n.setAttribute("focusonshow","on"),n.setAttribute("target","#"+d),n.setAttribute("role","presentation"),n.setAttribute("offset","-1"),n.setAttribute("alignmy","left top"),n.setAttribute("alignat","left bottom");var o=document.createTextNode("\n  ");n.appendChild(o);var p=this.list=document.createElement("coral-selectlist");p.setAttribute("handle","list"),p.className+=" coral3-Select-selectList",p.setAttribute("role","listbox"),p.id=e,n.appendChild(p);var q=document.createTextNode("\n");n.appendChild(q),b.appendChild(n);var r=document.createTextNode("\n");b.appendChild(r);var s=this.input=document.createElement("input");s.setAttribute("handle","input"),s.setAttribute("type","hidden"),b.appendChild(s);var t=document.createTextNode("\n");b.appendChild(t);var u=this.nativeSelect=document.createElement("select");u.setAttribute("handle","nativeSelect"),u.className+=" coral3-Select-select",u.setAttribute("tabindex","-1"),b.appendChild(u);var v=document.createTextNode("\n");b.appendChild(v);var w=this.taglist=document.createElement("coral-taglist");w.setAttribute("handle","taglist"),w.className+=" coral3-Select-tagList",b.appendChild(w);var x=document.createTextNode("\n");return b.appendChild(x),b},function(){"use strict";var a={DEFAULT:"default",QUIET:"quiet"},b={"default":-1,quiet:4},c="coral3-Select",d=[];for(var e in a)d.push(c+"--"+a[e]);var f=null!==navigator.userAgent.match(/iPhone|iPad|iPod|Android/i),g=function(a){var b=a.getAttribute("value");return null!==b?b:a.textContent.replace(/\s{2,}/g," ").trim()},h=function(a,b){return a.filter(function(a){return!b.some(function(b){return a===b})})};Coral.register({name:"Select",tagName:"coral-select",className:c,mixins:[Coral.mixin.formField],events:{"coral-collection:add coral-taglist":"_onInternalEvent","coral-collection:add coral-selectlist":"_onSelectListItemAdd","coral-collection:remove coral-taglist":"_onInternalEvent","coral-collection:remove coral-selectlist":"_onInternalEvent","coral-select-item:_valuechanged coral-select-item":"_onItemValueChange","coral-select-item:_contentchanged coral-select-item":"_onItemContentChange","coral-select-item:_disabledchanged coral-select-item":"_onItemDisabledChange","coral-select-item:_selectedchanged coral-select-item":"_onItemSelectedChange","coral-selectlist:change":"_onSelectListChange","coral-selectlist:scrollbottom":"_onSelectListScrollBottom","change coral-taglist":"_onTagListChange","change select":"_onNativeSelectChange","click select":"_onNativeSelectClick","click > .coral3-Select-button":"_onButtonClick","key:space > .coral3-Select-button":"_onSpaceKey","key:down > .coral3-Select-button":"_onSpaceKey","key:tab coral-selectlist-item":"_onTabKey","key:tab+shift coral-selectlist-item":"_onTabKey","coral-overlay:close":"_onOverlayToggle","coral-overlay:open":"_onOverlayToggle","coral-overlay:positioned":"_onOverlayPositioned","coral-overlay:beforeopen":"_onInternalEvent","coral-overlay:beforeclose":"_onInternalEvent","global:click":"_onGlobalClick","global:touchstart":"_onGlobalClick"},properties:{items:{get:function(){return this._items||(this._items=new Coral.SelectableCollection({host:this,itemTagName:"coral-select-item",onItemAdded:this._onItemAdded,onItemRemoved:this._onItemRemoved,onCollectionChange:this._onCollectionChange})),this._items},set:function(){}},multiple:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,set:function(a){this._multiple=a,a?this.appendChild(this._elements.taglist):this.removeChild(this._elements.taglist),this._nativeInput&&this.removeChild(this._elements.nativeSelect),this._elements.nativeSelect.multiple=a,this._elements.nativeSelect.selectedIndex=-1,this._nativeInput&&(a?this.insertBefore(this._elements.nativeSelect,this._elements.taglist):this.appendChild(this._elements.nativeSelect)),this._elements.list.multiple=a,this._setName(this.name),this._setStateFromDOM(),this.items.getAll().forEach(function(a){a._elements&&(this.multiple&&a.hasAttribute("selected")?(a._elements.selectListItem&&a._elements.selectListItem.setAttribute("hidden",""),this._addTagToTagList(a)):(a._elements.selectListItem&&a._elements.selectListItem.removeAttribute("hidden"),this._removeTagFromTagList(a),a.hasAttribute("selected")&&(this._elements.input.value=g(a))))},this)}},placeholder:{"default":"",reflectAttribute:!0,transform:Coral.transform.string,alsoSync:"selectedItem",sync:function(){if(!this.placeholder||!this.multiple&&this.selectedItem){if(this.multiple)this._elements.button.classList.add("is-placeholder"),this._elements.label.textContent=Coral.i18n.get("Select");else if(!this.selectedItem){this._elements.input.value="";var a=this.items._getFirstSelectable();this._elements.button.classList.remove("is-placeholder"),a?(a.setAttribute("selected",""),this._elements.label.innerHTML=a.innerHTML):this._elements.label.textContent=""}}else this._elements.button.classList.add("is-placeholder"),this._elements.label.textContent=this.placeholder}},name:{get:function(){return this.multiple?this._elements.taglist.name:this._elements.input.name},set:function(a){this._setName(a)}},value:{get:function(){return this.multiple?this._elements.taglist.value:this._elements.input.value},set:function(a){this.values=[a]}},values:{attribute:null,validate:[Coral.validate.valueMustChange,function(a){return Array.isArray(a)}],get:function(){return this.multiple?this._elements.taglist.values:this.selectedItem?[this._elements.input.value]:[]},set:function(a){!this.multiple&&a.length>1&&(a=[a[0]]);var b,c=this.items.getAll();if(this.multiple)c.forEach(function(c){b=g(c),c[a.indexOf(b)!==-1?"setAttribute":"removeAttribute"]("selected","")});else{var d,e=a[0]||"";c.forEach(function(a){return d||(b=g(a),b!==e)?void a.removeAttribute("selected"):(a.setAttribute("selected",""),void(d=a))}),d||this._setStateFromDOM()}}},required:{sync:function(){this._elements.input.required=this.required,this._elements.taglist.required=this.required}},invalid:{sync:function(){this.classList.toggle("is-invalid",this.invalid)}},disabled:{sync:function(){this._elements.button.disabled=this.disabled||this.readOnly,this._elements.input.disabled=this.disabled||this.readOnly,this._elements.taglist.disabled=this.disabled||this.readOnly}},readOnly:{sync:function(){this._elements.button.disabled=this.readOnly||this.disabled,this._elements.input.readOnly=this.readOnly||this.disabled,this._elements.taglist.readOnly=this.readOnly||this.disabled}},labelledBy:{sync:function(){this.labelledBy?this._elements.nativeSelect.setAttribute("aria-labelledby",this.labelledBy):this._elements.nativeSelect.removeAttribute("aria-labelledby"),this._elements.taglist.labelledBy=this.labelledBy}},selectedItem:{get:function(){return this.multiple?this.items._getFirstSelected():this.items._getLastSelected()},set:function(){},alsoSync:"placeholder",sync:function(){this.selectedItem&&!this.multiple&&(this._elements.button.classList.remove("is-placeholder"),this._elements.label.innerHTML=this.selectedItem.innerHTML)}},selectedItems:{get:function(){if(this.multiple)return this.items._getAllSelected();var a=this.selectedItem;return a?[a]:[]},set:function(){}},loading:{get:function(){return this._elements.list.loading},set:function(a){this._elements.list.loading=a}},variant:{"default":a.DEFAULT,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(a)],set:function(b){this._variant=b,this._elements.button.variant=b===a.DEFAULT?Coral.Button.variant.DEFAULT:Coral.Button.variant.QUIET},sync:function(){this.classList.remove.apply(this.classList,d),this.variant!==Coral.Select.variant.DEFAULT&&this.classList.add(this._className+"--"+this.variant),this._elements.overlay.offset=b[this.variant]}}},_setName:function(a){this.multiple?(this._elements.input.name="",this._elements.taglist.name=a):(this._elements.taglist.name="",this._elements.input.name=a)},_showOptions:function(a){if(a){var b=30,c=this._elements.list.scrollHeight,d=this._elements.list.clientHeight,e=this._elements.list.scrollTop,f=this._elements.list._elements.loadIndicator;if(f&&f.parentNode){var g=function(a){var b=a.offsetHeight,c=getComputedStyle(a);return b+=parseInt(c.marginTop)+parseInt(c.marginBottom)};c-=g(f)}if(e+d<c-b)return}this._useNativeInput||(this._elements.overlay.open=!0);var h=this.trigger("coral-select:showitems",{start:this.items.length});this._useNativeInput||(this._elements.list.loading=h.defaultPrevented)},_hideOptions:function(){this._elements.overlay.open=!1,this.trigger("coral-select:hideitems")},_onGlobalClick:function(a){if(this._elements.overlay.open){var b=this._elements.button.contains(a.target),c=this._elements.overlay.contains(a.target);b||c||this._hideOptions()}},_onSelectListItemAdd:function(a){a.stopImmediatePropagation(),this.loading=!1,this._elements.list.style.height="";var b=window.getComputedStyle(this._elements.list),c=parseInt(b.height,10),d=parseInt(b.maxHeight,10);c<d&&(this._elements.list.style.height=c-1+"px")},_onInternalEvent:function(a){a.stopImmediatePropagation()},_onItemAdded:function(a){var b=this._elements.list,c=a._elements.selectListItem||new Coral.SelectList.Item;b.appendChild(c),c.set({value:a.value,content:{innerHTML:a.content.innerHTML},disabled:a.disabled,selected:a.selected},!0);var d=a._elements.nativeOption||new Option;this._elements.nativeSelect.appendChild(d),this._initialValues.indexOf(a.value)!==-1&&d.setAttribute("selected","selected"),d.selected=a.selected,d.value=a.value,d.disabled=a.disabled,d.innerHTML=a.content.innerHTML,this.multiple?a.selected&&(c.hidden=!0,this._addTagToTagList(a)):a.selected&&(this._elements.input.value=a.value),a._elements.selectListItem=c,a._elements.nativeOption=d,c._elements.selectItem=a,d._selectItem=a},_onItemRemoved:function(a){a._elements&&a._elements.selectListItem&&(a._elements.selectListItem.remove(),a._elements.selectListItem._elements.selectItem=void 0,
a._elements.selectListItem=void 0),a._elements&&a._elements.nativeOption&&(this._elements.nativeSelect.removeChild(a._elements.nativeOption),a._elements.nativeOption._selectItem=void 0,a._elements.nativeOption=void 0),this._removeTagFromTagList(a,!0)},_onItemSelected:function(a){a._elements.selectListItem&&a._elements.selectListItem.parentNode||this._onItemAdded(a),a._elements.selectListItem.selected=!0,a._elements.nativeOption.selected=!0,this.multiple?(this._addTagToTagList(a),a._elements.selectListItem.hidden=!0):this._elements.input.value=a.value},_onItemDeselected:function(a){a._elements.selectListItem&&a._elements.selectListItem.parentNode||this._onItemAdded(a),a._elements.selectListItem.selected=!1,a._elements.nativeOption.selected=!1,this.multiple&&(this._removeTagFromTagList(a),a._elements.selectListItem.hidden=!1)},_onSelectListChange:function(a){if(a.stopImmediatePropagation(),!this._bulkSelectionChange){var b=a.detail.oldSelection||[];b=Array.isArray(b)?b:[b];var c=a.detail.selection||[];if(c=Array.isArray(c)?c:[c],a.detail.oldSelection!==a.detail.selection){this._bulkSelectionChange=!0;var d=h(b,c);d.forEach(function(a){a._elements.selectItem&&a._elements.selectItem.removeAttribute("selected")});var e=h(c,b);e.forEach(function(a){a._elements.selectItem&&a._elements.selectItem.setAttribute("selected","")}),this._bulkSelectionChange=!1,this._elements.overlay.open&&(this._hideOptions(),e.length&&this.trigger("change"))}else this._elements.overlay.open&&this._hideOptions()}},_onTagListChange:function(a){if(a.stopImmediatePropagation(),!this._bulkSelectionChange){this._bulkSelectionChange=!0;var b,c=a.target.values;this.items._getAllSelected().forEach(function(a){b=g(a),a[c.indexOf(b)!==-1?"setAttribute":"removeAttribute"]("selected","")}),this._bulkSelectionChange=!1,c.length||this._elements.button.focus(),this.trigger("change")}},_addTagToTagList:function(a){a._elements.tag=a._elements.tag||new Coral.Tag,a._elements.tag.set({value:a.value,multiline:!0,label:{innerHTML:a.content.innerHTML}},!0),this._elements.taglist.items.add(a._elements.tag)},_removeTagFromTagList:function(a,b){a._elements&&a._elements.tag&&(a._elements.tag.remove(),a._elements.tag=b?void 0:a._elements.tag)},_onSelectListScrollBottom:function(a){a.stopImmediatePropagation(),this._elements.overlay.open&&this._showOptions()},_onButtonClick:function(a){a.preventDefault(),this.disabled||this._useNativeInput||(this._elements.overlay.open?this._hideOptions():this._showOptions(!0))},_onNativeSelectClick:function(a){this._showOptions(!1)},_onSpaceKey:function(a){this.disabled||(a.preventDefault(),this._useNativeInput?this._elements.nativeSelect.dispatchEvent(new MouseEvent("mousedown")):this._elements.overlay.open&&a.keyCode!==Coral.Keys.keyToCode("space")||this._elements.button.click())},_onTabKey:function(a){a.preventDefault()},_onOverlayToggle:function(a){a.stopImmediatePropagation(),this._elements.button.classList.toggle("is-selected",a.target.open),this._elements.button.setAttribute("aria-expanded",a.target.open),a.target.open||this.classList.remove.apply(this.classList,["is-openAbove","is-openBelow"])},_onOverlayPositioned:function(a){a.stopImmediatePropagation(),this.classList.add("top"===a.detail.vertical?"is-openBelow":"is-openAbove"),this._elements.overlay.style.minWidth=this.offsetWidth+"px"},_onNativeSelectChange:function(a){if(a.stopImmediatePropagation(),!this._bulkSelectionChange){this._bulkSelectionChange=!0;var b=this.selectedItems.map(function(a){return a._elements.nativeOption}),c=Array.prototype.slice.call(a.target.querySelectorAll(":checked")),d=h(b,c);d.forEach(function(a){a._selectItem.selected=!1});var e=h(c,b);e.forEach(function(a){a._selectItem.selected=!0}),this._bulkSelectionChange=!1,this.multiple||(this._elements.button.focus(),this.trigger("coral-select:hideitems")),this.trigger("change")}},_onItemContentChange:function(a){a.stopImmediatePropagation();var b=a.target;b._elements.selectListItem&&b._elements.selectListItem.content&&(b._elements.selectListItem.content.innerHTML=b.content.innerHTML),b._elements.nativeOption&&(b._elements.nativeOption.innerHTML=b.content.innerHTML),b._elements.tag&&b._elements.tag.label&&(b._elements.tag.label.innerHTML=b.content.innerHTML),this._queueSync("placeholder","selectedItem")},_onItemValueChange:function(a){a.stopImmediatePropagation();var b=a.target;b._elements.selectListItem&&(b._elements.selectListItem.value=b.value),b._elements.nativeOption&&(b._elements.nativeOption.value=b.value),b._elements.tag&&(b._elements.tag.value=b.value)},_onItemDisabledChange:function(a){a.stopImmediatePropagation();var b=a.target;b._elements.selectListItem&&(b._elements.selectListItem.disabled=b.disabled),b._elements.nativeOption&&(b._elements.nativeOption.disabled=b.disabled)},_onItemSelectedChange:function(a){a.stopImmediatePropagation();var b=a.target;this._bulkSelectionChange=!0,b.selected?(this._onItemSelected(b),this.multiple||this.items._deselectAllExcept(b)):this._onItemDeselected(b),this._bulkSelectionChange=!1,this._updateLabel()},clear:function(){this.value=""},focus:function(){this.contains(document.activeElement)||this._elements.button.focus()},reset:function(){this.values=this._initialValues},attachedCallback:function(){this._delegateGlobalEvents()},detachedCallback:function(){this._undelegateGlobalEvents()},_validateInitialState:function(a){for(var b,c,d,e=0,f=a.length;e<f;e++)b=a[e],c=g(b),d=this._initialValues.indexOf(b.value),d!==-1&&this._initialValues.splice(d,1)},_onCollectionChange:function(a,b){this._validateInitialState(b),this._setStateFromDOM()},_updateLabel:function(){this._queueSync("placeholder","selectedItem")},_setStateFromDOM:function(){if(!this.multiple){this.items._deselectAllExceptLast();var a=this.items._getFirstSelected();if(!a&&(this._elements.input.value="",""===this.placeholder)){var b=this.items._getFirstSelectable();b&&(b.setAttribute("selected",""),this._elements.input.value=g(b))}}this._updateLabel()},_initialize:function(){this._useNativeInput=f,this.classList.toggle("coral3-Select--native",this._useNativeInput),!this._useNativeInput&&this.contains(this._elements.nativeSelect)&&this.removeChild(this._elements.nativeSelect),this._bulkSelectionChange=!1,this._setStateFromDOM(),Coral.commons.ready(this._elements.taglist,function(a){a.reset=function(){}}),this._initialValues=[],this.selectedItems.forEach(function(a){this._initialValues.push(g(a))},this),this.items._startHandlingItems()},_render:function(){for(var a=this.querySelectorAll("[handle]"),b=0;b<a.length;++b){var c=a[b];c.parentNode===this&&this.removeChild(c)}this.insertBefore(Coral.templates.Select.base.call(this._elements),this.firstChild||null),this._elements.list.style.maxHeight="252px",this._elements.overlay.returnFocusTo(this._elements.button)}}),Coral.Select.variant=a,Coral.register({name:"Select.Item",tagName:"coral-select-item",properties:{content:{contentZone:!0,set:function(){},get:function(){return this}},disabled:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,trigger:"coral-select-item:_disabledchanged"},selected:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,trigger:"coral-select-item:_selectedchanged"},value:{reflectAttribute:!0,transform:Coral.transform.string,trigger:"coral-select-item:_valuechanged",get:function(){return"undefined"==typeof this._value?this.textContent.replace(/\s{2,}/g," ").trim():this._value}}},attachedCallback:function(){},detachedCallback:function(){},_initialize:function(){this._observer=new MutationObserver(this._handleMutation.bind(this)),this._observer.observe(this,{characterData:!0,childList:!0,subtree:!0})},_handleMutation:function(a){this.trigger("coral-select-item:_contentchanged",{content:this.textContent})}})}(),window.Coral=window.Coral||{},window.Coral.strings=window.Coral.strings||{},window.Coral.strings["coralui-component-clock"]={"en-US":{am:"am",pm:"pm",Hours:"Hours",Minutes:"Minutes","AM/PM":"AM/PM"},"de-DE":{am:"vormittags",pm:"nachmittags",Hours:"Stunden",Minutes:"Minuten","AM/PM":"AM/PM"},"fr-FR":{am:"matin",pm:"après-midi",Hours:"Heures",Minutes:"Minutes","AM/PM":"AM/PM"},"ja-JP":{am:"午前",pm:"午後",Hours:"時間",Minutes:"分","AM/PM":"午前 / 午後"},"es-ES":{am:"a. m.",pm:"p. m.",Hours:"Horas",Minutes:"Minutos","AM/PM":"a. m./p. m."},"ko-KR":{am:"오전",pm:"오후",Hours:"시간",Minutes:"분","AM/PM":"오전/오후"},"zh-CN":{am:"上午",pm:"下午",Hours:"小时",Minutes:"分钟","AM/PM":"上午/下午"},"zh-TW":{am:"上午",pm:"下午",Hours:"小時",Minutes:"分鐘","AM/PM":"上午/下午"},"pt-BR":{am:"am",pm:"pm",Hours:"Horas",Minutes:"Minutos","AM/PM":"AM/PM"},"it-IT":{am:"am",pm:"pm",Hours:"Ore",Minutes:"Minuti","AM/PM":"AM/PM"},"nl-NL":{am:"am",pm:"pm",Hours:"Uren",Minutes:"Minuten","AM/PM":"AM/PM"},"da-DK":{am:"am",pm:"pm",Hours:"Timer",Minutes:"Minutter","AM/PM":"AM/PM"},"fi-FI":{am:"ap.",pm:"ip.",Hours:"Tunnit",Minutes:"Minuutit","AM/PM":"ap./ip."},"nb-NO":{am:"am",pm:"pm",Hours:"Timer",Minutes:"Minutter","AM/PM":"AM/PM"},"sv-SE":{am:"am",pm:"pm",Hours:"Timmar",Minutes:"Minuter","AM/PM":"AM/PM"},"cs-CZ":{am:"am",pm:"pm",Hours:"hodin",Minutes:"minut","AM/PM":"AM/PM"},"pl-PL":{am:"przed południem",pm:"po południu",Hours:"Godz.",Minutes:"Min","AM/PM":"Przed południem / Po południu"},"ru-RU":{am:"дп",pm:"пп",Hours:"ч.",Minutes:"мин.","AM/PM":"ДП/ПП"},"tr-TR":{am:"öö",pm:"ös",Hours:"Saat",Minutes:"Dakika","AM/PM":"ÖÖ/ÖS"}},window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.Clock=window.Coral.templates.Clock||{},window.Coral.templates.Clock.base=function(a){var b=document.createDocumentFragment(),c=a="undefined"==typeof a?{}:a;c=a;var d=Coral.commons.getUID();a=c;var e=document.createTextNode("\n");b.appendChild(e);var f=this.input=document.createElement("input");f.setAttribute("type","hidden"),f.setAttribute("name",""),f.setAttribute("handle","input"),b.appendChild(f);var g=document.createTextNode("\n");b.appendChild(g);var h=this.valueAsText=document.createElement("time");h.setAttribute("handle","valueAsText"),h.id=Coral.commons.getUID(),h.setAttribute("hidden",""),b.appendChild(h);var i=document.createTextNode("\n");b.appendChild(i);var j=this.hours=document.createElement("input","coral-textfield");j.setAttribute("is","coral-textfield"),j.setAttribute("type","number"),j.setAttribute("min","0"),j.setAttribute("max","23"),j.className+=" coral3-Clock-hour",j.setAttribute("handle","hours"),j.setAttribute("aria-label",Coral.i18n.get("Hours")),b.appendChild(j);var k=document.createTextNode("\n");b.appendChild(k);var l=document.createElement("span");l.className+=" coral3-Clock-divider",l.textContent=":",b.appendChild(l);var m=document.createTextNode("\n");b.appendChild(m);var n=this.minutes=document.createElement("input","coral-textfield");n.setAttribute("is","coral-textfield"),n.setAttribute("type","number"),n.setAttribute("min","0"),n.setAttribute("max","59"),n.className+=" coral3-Clock-minute",n.setAttribute("handle","minutes"),n.setAttribute("aria-label",Coral.i18n.get("Minutes")),b.appendChild(n);var o=document.createTextNode("\n");b.appendChild(o);var p=this.period=document.createElement("coral-select");p.setAttribute("handle","period"),p.className+=" coral3-Clock-period",p.setAttribute("hidden",""),p.setAttribute("labelledby",d);var q=document.createTextNode("\n  ");p.appendChild(q);var r=document.createElement("span");r.className+=" u-coral-screenReaderOnly",r.id=d,r.setAttribute("hidden",""),r.textContent=Coral.i18n.get("AM/PM"),p.appendChild(r);var s=document.createTextNode("\n  ");p.appendChild(s);var t=document.createElement("coral-select-item");t.setAttribute("value","am"),p.appendChild(t);var u=document.createTextNode("\n  ");p.appendChild(u);var v=document.createElement("coral-select-item");v.setAttribute("value","pm"),p.appendChild(v);var w=document.createTextNode("\n");p.appendChild(w),b.appendChild(p);var x=document.createTextNode("\n");return b.appendChild(x),b},function(){"use strict";var a="HH",b="mm",c=a+":"+b,d="(A|a|H{1,2}|h{1,2}|k{1,2}|m{1,2})",e=new RegExp(d+".*"+d+"|"+d),f=new RegExp("h{1,2}|H{1,2}|k{1,2}"),g=new RegExp("m{1,2}"),h={DEFAULT:"default",QUIET:"quiet"},i="coral3-Clock",j=[];for(var k in h)j.push(i+"--"+h[k]);Coral.register({name:"Clock",tagName:"coral-clock",className:i,mixins:[Coral.mixin.formField],events:{'change [handle="period"]':"_onPeriodChange"},properties:{displayFormat:{"default":c,attribute:"displayformat",transform:function(a){return this._extractTimeFormat(Coral.transform.string(a).trim(),e,c)},sync:function(){this._syncDisplay()}},valueFormat:{"default":c,attribute:"valueformat",transform:function(a){return this._extractTimeFormat(Coral.transform.string(a).trim(),e,c)},set:function(a){this._valueFormat=a,this._elements.input.value=this.value}},name:{get:function(){return this._elements.input.name},set:function(a){this._elements.input.name=a}},disabled:{sync:function(){this._elements.hours.disabled=this.disabled,this._elements.minutes.disabled=this.disabled,this._elements.input.disabled=this.disabled}},invalid:{sync:function(){this._elements.hours.invalid=this.invalid,this._elements.minutes.invalid=this.invalid}},readOnly:{sync:function(){this._elements.hours.readOnly=this.readOnly,this._elements.minutes.readOnly=this.readOnly,this._elements.input.readOnly=this.readOnly}},required:{sync:function(){this._elements.hours.required=this.required,this._elements.minutes.required=this.required,this._elements.input.required=this.required}},value:{validate:function(a,b){return"string"==typeof a},get:function(){return this._getValueAsString(this._value,this.valueFormat)},set:function(a){var b=moment(a,this.valueFormat,!0);this._value=b.isValid()?b:"",this._elements.input.value=this.value,this._syncValueAsText()},sync:function(){this._syncDisplay()}},labelledBy:{get:function(){var a=this._getLabellableElement().getAttribute("aria-labelledby");return a&&(a=a.replace(this._elements.valueAsText.id,"").trim(),a.length||(a=null)),a},sync:function(){var a=this.labelledBy,b=[this._elements.valueAsText.id];a?(b.unshift(a),this.getAttribute("labelledby")!==a&&this.setAttribute("labelledby",a)):this.removeAttribute("labelledby"),this._getLabellableElement().setAttribute("aria-labelledby",b.join(" "))}},valueAsDate:{attribute:null,transform:function(a){return a instanceof Date?moment(a).format(this.valueFormat):""},get:function(){return this._value?new Date(this._value.toDate().getTime()):null},set:function(a){this.value=a}},variant:{"default":h.DEFAULT,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(h)],set:function(a){this._variant=a,this._elements.hours.variant=a,this._elements.minutes.variant=a,this._elements.period.variant=a},sync:function(){this.classList.remove.apply(this.classList,j),this.variant!==Coral.Clock.variant.DEFAULT&&this.classList.add(this._className+"--"+this.variant)}}},focus:function(){this.contains(document.activeElement)||this._elements.hours.focus()},_extractTimeFormat:function(a,b,c){var d=b.exec(a);return d&&d.length&&""!==d[0]?d[0]:c},_syncDisplay:function(){var c=this._extractTimeFormat(this.displayFormat,f,a),d=this._extractTimeFormat(this.displayFormat,g,b);this._elements.hours.placeholder=c,this._elements.minutes.placeholder=d,this._elements.hours.value=this._getValueAsString(this._value,c),this._elements.minutes.value=this._getValueAsString(this._value,d),this._syncPeriod(),this._syncValueAsText()},_syncPeriod:function(){Coral.commons.ready(this._elements.period,function(a){var b=this._value,c=Coral.i18n.get("am"),d=Coral.i18n.get("pm"),e=a.items.getAll();b&&b.isValid()&&(b.hours()<12?a.value="am":a.value="pm"),this.displayFormat.indexOf("a")!==-1?(e[0].textContent=c,e[1].textContent=d,this._togglePeriod(!0)):this.displayFormat.indexOf("A")!==-1?(e[0].textContent=c.toUpperCase(),e[1].textContent=d.toUpperCase(),this._togglePeriod(!0)):this._togglePeriod(!1)}.bind(this))},_togglePeriod:function(a){this._elements.period.hidden=!a},_onPeriodChange:function(a){a.stopImmediatePropagation();var b=this._value,c=this._elements.period;b&&b.isValid()&&(this.displayFormat.indexOf("h")!==-1&&("am"===c.value?b.subtract(12,"h"):b.add(12,"h")),this.value=b.format(this.valueFormat),this.trigger("change"))},_syncValueAsText:function(){this._elements.valueAsText.textContent=this._getValueAsString(this._value,this.displayFormat),this.getAttribute("aria-labelledby")||this._queueSync("labelledBy")},_onInputChange:function(a){a.stopImmediatePropagation();var b=moment(),c=this._value,d=parseInt(this._elements.hours.value,10),e=parseInt(this._elements.minutes.value,10);window.isNaN(d)||window.isNaN(e)?b="":(this._elements.period.hidden||this.displayFormat.indexOf("h")===-1||"pm"!==this._elements.period.value||(d+=12),b.hours(d),b.minutes(e)),b&&b.isValid()?(this.invalid=!1,b.isSame(c,"hour")&&b.isSame(c,"minute")||(this.value=b.format(this.valueFormat),this.trigger("change"))):(this.invalid=!0,this._value="",b!==c&&this.trigger("change"))},_getLabellableElement:function(){return this},_getValueAsString:function(a,b){return a&&a.isValid()?a.format(b):""},_initialize:function(){this.setAttribute("role","group")},_render:function(){for(;this.firstChild;)this.removeChild(this.firstChild);this.appendChild(Coral.templates.Clock.base.call(this._elements))}}),Coral.Clock.variant=h}(),function(){"use strict";var a=Coral.Overlay.placement,b={left:"Right",right:"Left",top:"Down",bottom:"Up"},c="coral3-Tooltip",d=12,e={INFO:"info",ERROR:"error",WARNING:"warning",SUCCESS:"success",INSPECT:"inspect"},f={ON:"on",OFF:"off"},g=[];for(var h in e)g.push(c+"--"+e[h]);var i=[],j={};for(var k in a){var l=a[k],m=c+"--arrow"+b[l];j[l]=m,i.push(m)}Coral.register({name:"Tooltip",tagName:"coral-tooltip",className:c,extend:Coral.Overlay,_overlayAnimationTime:Coral.mixin.overlay.FADETIME,properties:{variant:{"default":e.INFO,reflectAttribute:!0,validate:Coral.validate.enumeration(e),sync:function(){this.classList.remove.apply(this.classList,g),this.classList.add(this._className+"--"+this.variant)}},delay:{"default":500,transform:Coral.transform.number},content:Coral.property.contentZone({handle:"content",tagName:"coral-tooltip-content",defaultContentZone:!0,insert:function(a){this.appendChild(a)}}),alignMy:{"default":Coral.Overlay.align.LEFT_CENTER},alignAt:{"default":Coral.Overlay.align.RIGHT_CENTER},focusOnShow:{"default":Coral.mixin.overlay.focusOnShow.OFF},offset:{"default":d},open:{sync:function(){this.open||this._cancelShow()}},target:{set:function(a){if(this.interaction===f.ON){var b=this._getTarget(a);this._addTargetListeners(b)}}},interaction:{"default":f.ON,set:function(a){var b=this._getTarget();b&&(a===f.ON?this._addTargetListeners(b):this._removeTargetListeners(b)),this._interaction=a}}},_render:function(){this._id=Coral.commons.getUID();var a=this.querySelector("coral-tooltip-content");if(null===a)for(a=document.createElement("coral-tooltip-content");this.firstChild;)a.appendChild(this.firstChild);this.content=a},_initialize:function(){this.tabIndex=-1,this.setAttribute("role","tooltip")},_applyPosition:function(a,b){var c=a.top,d=a.left;"left"===b.horizontal?this._setArrowClass(Coral.Overlay.placement.LEFT):"right"===b.horizontal?this._setArrowClass(Coral.Overlay.placement.RIGHT):"bottom"===b.vertical?this._setArrowClass(Coral.Overlay.placement.BOTTOM):"top"===b.vertical&&this._setArrowClass(Coral.Overlay.placement.TOP),this.style.top=c+"px",this.style.left=d+"px"},_setArrowClass:function(a){this.classList.remove.apply(this.classList,i),this.classList.add(j[a])},_handleFocus:function(){this._cancelHide(),Array.prototype.some.call(this.querySelectorAll(Coral.commons.FOCUSABLE_ELEMENT_SELECTOR),function(a){if(null!==a.offsetParent)return a.focus(),!0})},_handleFocusOut:function(){var a=this;Coral.commons.nextFrame(function(){var b=document.activeElement===a._getTarget(),c=a.contains(document.activeElement);b||c||(a._cancelShow(),a.open=!1)})},_cancelShow:function(){clearTimeout(this._showTimeout)},_cancelHide:function(){clearTimeout(this._hideTimeout)},_startHide:function(){if(0===this.delay)this._handleFocusOut();else{var a=this;this._hideTimeout=setTimeout(function(){a._handleFocusOut()},this.delay)}},_addTargetListeners:function(a){if(a&&!a["_hasCoralTooltipListeners"+this._id]){if(a["_hasCoralTooltipListeners"+this._id]=!0,this._oldTarget){var b=this._getTarget(this._oldTarget);b&&this._removeTargetListeners(b)}this._oldTarget=a;var c=this;this._targetEvents=new window.Vent(a),this._targetEvents.on("mouseenter.CoralTooltip"+this._id+" focusin.CoralTooltip"+this._id,function(a){c._cancelHide(),c.open||(c._cancelShow(),0===c.delay?c.show():c._showTimeout=setTimeout(function(){c.show()},c.delay))}),this._targetEvents.on("mouseleave.CoralTooltip"+this._id,function(a){c.interaction===f.ON&&c._startHide()}),this._targetEvents.on("focusout.CoralTooltip"+this._id,function(a){c.interaction===f.ON&&c._handleFocusOut()})}},_removeTargetListeners:function(a){this._targetEvents&&this._targetEvents.off(".CoralTooltip"+this._id),a["_hasCoralTooltipListeners"+this._id]=!1}}),Coral.register({name:"Tooltip.Content",tagName:"coral-tooltip-content"}),Coral.Tooltip.variant=e}(),window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.Slider=window.Coral.templates.Slider||{},window.Coral.templates.Slider.base=function(a){var b=document.createDocumentFragment(),c=a="undefined"==typeof a?{}:a;c=a,c.uid=Coral.commons.getUID(),a=c;var d=document.createTextNode("\n");b.appendChild(d);var e=document.createElement("div");e.className+=" coral3-Slider-bar";var f=document.createTextNode("\n  ");e.appendChild(f);var g=this.fillHandle=document.createElement("div");g.setAttribute("handle","fillHandle"),g.className+=" coral3-Slider-fill is-hidden",g.setAttribute("role","presentation"),e.appendChild(g);var h=document.createTextNode("\n");e.appendChild(h),b.appendChild(e);var i=document.createTextNode("\n");b.appendChild(i);var j=this.leftHandle=document.createElement("div");j.setAttribute("handle","leftHandle"),j.className+=" coral3-Slider-handle";var k=document.createTextNode("\n  ");j.appendChild(k);var l=this.leftInput=document.createElement("input");l.setAttribute("handle","leftInput"),l.setAttribute("type","range"),l.id=a.uid,l.className+=" coral3-Slider-input",j.appendChild(l);var m=document.createTextNode("\n  ");j.appendChild(m);var n=document.createElement("coral-tooltip");n.setAttribute("variant","inspect"),n.id=a.uid+"-tooltip",n.setAttribute("for",a.uid),n.setAttribute("interaction","off"),j.appendChild(n);var o=document.createTextNode("\n");return j.appendChild(o),b.appendChild(j),b},window.Coral.templates.Slider.range=function(a){var b=document.createDocumentFragment(),c=a="undefined"==typeof a?{}:a;c=a,c.uidMin=Coral.commons.getUID(),c.uidMax=Coral.commons.getUID(),a=c;var d=document.createTextNode("\n");b.appendChild(d);var e=document.createElement("div");e.className+=" coral3-Slider-bar";var f=document.createTextNode("\n  ");e.appendChild(f);var g=this.fillHandle=document.createElement("div");g.setAttribute("handle","fillHandle"),g.className+=" coral3-Slider-fill is-hidden",g.setAttribute("role","presentation"),e.appendChild(g);var h=document.createTextNode("\n");e.appendChild(h),b.appendChild(e);var i=document.createTextNode("\n");b.appendChild(i);var j=this.leftHandle=document.createElement("div");j.setAttribute("handle","leftHandle"),j.className+=" coral3-Slider-handle";var k=document.createTextNode("\n  ");j.appendChild(k);var l=this.leftLabel=document.createElement("label");l.setAttribute("handle","leftLabel"),l.className+=" u-coral-screenReaderOnly",l.id=a.uidMin+"-label",l.setAttribute("for",a.uidMin),l.setAttribute("aria-hidden","true"),l.textContent="Minimum",j.appendChild(l);var m=document.createTextNode("\n  ");j.appendChild(m);var n=this.leftInput=document.createElement("input");n.setAttribute("handle","leftInput"),n.setAttribute("type","range"),n.id=a.uidMin,n.className+=" coral3-Slider-input",j.appendChild(n);var o=document.createTextNode("\n  ");j.appendChild(o);var p=document.createElement("coral-tooltip");p.setAttribute("variant","inspect"),p.id=a.uidMin+"-tooltip",p.setAttribute("for",a.uidMin),p.setAttribute("interaction","off"),j.appendChild(p);var q=document.createTextNode("\n");j.appendChild(q),b.appendChild(j);var r=document.createTextNode("\n");b.appendChild(r);var s=this.rightHandle=document.createElement("div");s.setAttribute("handle","rightHandle"),s.className+=" coral3-Slider-handle";var t=document.createTextNode("\n  ");s.appendChild(t);var u=this.rightLabel=document.createElement("label");u.setAttribute("handle","rightLabel"),u.className+=" u-coral-screenReaderOnly",u.id=a.uidMax+"-label",u.setAttribute("for",a.uidMax),u.setAttribute("aria-hidden","true"),u.textContent="Maximum",s.appendChild(u);var v=document.createTextNode("\n  ");s.appendChild(v);var w=this.rightInput=document.createElement("input");w.setAttribute("handle","rightInput"),w.setAttribute("type","range"),w.id=a.uidMax,w.className+=" coral3-Slider-input",s.appendChild(w);var x=document.createTextNode("\n  ");s.appendChild(x);var y=document.createElement("coral-tooltip");y.setAttribute("variant","inspect"),y.id=a.uidMax+"-tooltip",y.setAttribute("for",a.uidMax),y.setAttribute("interaction","off"),s.appendChild(y);var z=document.createTextNode("\n");return s.appendChild(z),b.appendChild(s),b},function(){"use strict";var a="coral3-Slider",b="coral3-Slider-handle",c="coral3-Slider-input",d="coral-slider-item",e={HORIZONTAL:"horizontal",VERTICAL:"vertical"},f=function(a){this._slider=a};f.prototype=Object.create(Coral.Collection.prototype),f.prototype.add=function(a,b){var c;return a instanceof HTMLElement||(c=a,a=document.createElement(d)),this._slider.insertBefore(a,b),c&&a.set(c,!0),a},f.prototype.getAll=function(){return Array.prototype.slice.call(this._slider.getElementsByTagName(d))},Coral.register({name:"Slider",tagName:"coral-slider",className:a,mixins:[Coral.mixin.formField],events:{"key:up .coral3-Slider-handle":"_handleKey","key:right .coral3-Slider-handle":"_handleKey","key:down .coral3-Slider-handle":"_handleKey","key:left .coral3-Slider-handle":"_handleKey","key:pageUp .coral3-Slider-handle":"_handleKey","key:pageDown .coral3-Slider-handle":"_handleKey","key:home .coral3-Slider-handle":"_handleKey","key:end .coral3-Slider-handle":"_handleKey","capture:mouseenter .coral3-Slider-handle":"_onMouseEnter","capture:mouseleave .coral3-Slider-handle":"_onMouseLeave",input:"_onInputChangeHandler",touchstart:"_onMouseDown",mousedown:"_onMouseDown","capture:focus":"_focus","capture:blur":"_blur"},properties:{step:{"default":1,reflectAttribute:!0,transform:Coral.transform.number,validate:[Coral.validate.valueMustChange,function(a,b){return null!==a&&a>0}],sync:function(){var a=this;a._elements.inputs.forEach(function(b){b.setAttribute("step",a.step),b.setAttribute("aria-valuestep",a.step)})}},min:{"default":1,reflectAttribute:!0,transform:Coral.transform.number,sync:function(){var a=this;a.setAttribute("aria-valuemin",a.min),a._elements.inputs.forEach(function(b){b.setAttribute("min",a.min),b.setAttribute("aria-valuemin",a.min)})}},max:{"default":100,reflectAttribute:!0,transform:Coral.transform.number,sync:function(){var a=this;a._elements.inputs.forEach(function(b){b.setAttribute("max",a.max),b.setAttribute("aria-valuemax",a.max)})}},tooltips:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){}},orientation:{"default":e.HORIZONTAL,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(e)],sync:function(){var b=this,c=b.orientation===e.VERTICAL;b.classList.toggle(a+"--vertical",c),b.setAttribute("aria-orientation",b.orientation),b._elements.inputs.forEach(function(a){a.setAttribute("aria-orientation",b.orientation)}),b._moveHandles()}},value:{"default":function(){return String(this.min)},alsoSync:["filled"],transform:Coral.transform.number,get:function(){return this._elements.inputs[0].value},set:function(a){if(1===this._elements.handles.length){var b=this._elements.inputs[0];a=this._snapValueToStep(a,this.min,this.max,this.step),b.value=a,b.setAttribute("aria-valuenow",a),b.setAttribute("aria-valuetext",this._getLabel(a)),this._moveHandles();var c=this.getAttribute("value");b[c?"setAttribute":"removeAttribute"]("value",c)}},sync:function(){}},valueAsNumber:{attribute:null,transform:Coral.transform["float"],get:function(){return parseFloat(this.value)},set:function(a){this.value=a}},name:{get:function(){return this._elements.inputs[0].name},set:function(a){this._elements.inputs.forEach(function(b){b.name=a})}},_values:{attribute:null,"default":function(){return[this.min,this.max]},get:function(){var a=[];return this._elements.inputs.forEach(function(b){a.push(String(parseInt(b.value,10)))}),a},set:function(a){var b=this;a&&a.length===b._elements.handles.length&&(b._elements.inputs.forEach(function(c,d){var e=a[d]=b._snapValueToStep(a[d],b.min,b.max,b.step);c.value=e,c.setAttribute("aria-valuenow",e),c.setAttribute("aria-valuetext",b._getLabel(e))}),b._moveHandles())},sync:function(){},alsoSync:["filled"]},filled:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){this.filled&&this._updateFill(),this._elements.fillHandle.classList.toggle("is-hidden",!this.filled)}},disabled:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){var a=this;a.setAttribute("aria-disabled",a.disabled),a._elements.inputs.forEach(function(b,c){b[a.disabled?"setAttribute":"removeAttribute"]("disabled",""),a._elements.handles[c].setAttribute("aria-disabled",a.disabled)})}},labelledBy:{override:!0,attribute:"labelledby",transform:Coral.transform.string,get:function(){return 1===this._elements.handles.length?this._elements.inputs[0].getAttribute("aria-labelledby"):this.getAttribute("aria-labelledby")},set:function(a){var b,c=this;return a?(1===c._elements.handles.length?(c._elements.handles[0].setAttribute("aria-labelledby",a),c._elements.inputs[0].setAttribute("aria-labelledby",a)):(c.setAttribute("aria-labelledby",a),c._elements.handles.forEach(function(d,e){b=a+" "+d.querySelector("label").id,d.setAttribute("aria-labelledby",b),c._elements.inputs[e].setAttribute("aria-labelledby",b)})),void c._updateForAttributes(a,c._elements.inputs[0].id)):(c._updateForAttributes(c.labelledBy,c._elements.inputs[0].id,!0),c.removeAttribute("aria-labelledby"),void c._elements.handles.forEach(function(a,b){a.removeAttribute("aria-labelledby"),c._elements.inputs[b].removeAttribute("aria-labelledby")}))}},items:{set:function(){},get:function(){return this._items||(this._items=new f(this)),this._items}}},_onMouseDown:function(a){if(!(a instanceof MouseEvent&&1!==(a.which||a.button))){if(a.preventDefault(),this._currentHandle=a.target.closest("."+b),!this._currentHandle){var c=this._getPoint(a),d=this._getValueFromCoord(c.pageX,c.pageY,!0);this._currentHandle=this._findNearestHandle(c.pageX,c.pageY),this._updateValue(this._currentHandle,d),this._setHandleFocus(this._currentHandle)}if(this._currentHandle.classList.add("is-dragged"),document.body.classList.add("u-coral-closedHand"),this.tooltips){var e=this._elements.handles.indexOf(this._currentHandle);this._openTooltip(this._currentHandle,this._getLabel(this._values[e]))}this._draggingHandler=this._handleDragging.bind(this),this._mouseUpHandler=this._mouseUp.bind(this),Coral.events.on("mousemove",this._draggingHandler),Coral.events.on("mouseup",this._mouseUpHandler),Coral.events.on("touchmove",this._draggingHandler),Coral.events.on("touchend",this._mouseUpHandler),Coral.events.on("touchcancel",this._mouseUpHandler),this._setHandleFocus(this._currentHandle)}},_getPoint:function(a){return a.changedTouches&&a.changedTouches.length>0?a.changedTouches[0]:a.touches&&a.touches.length>0?a.touches[0]:a;
},_setHandleFocus:function(a){a.querySelector("."+c).focus()},_handleKey:function(a){a.preventDefault(),this._focus(a);var b=a.matchedTarget,c=this._elements.handles.indexOf(b),d=parseInt(this._values[c],10);a.keyCode===Coral.Keys.keyToCode("up")||a.keyCode===Coral.Keys.keyToCode("right")||a.keyCode===Coral.Keys.keyToCode("pageUp")?d+=this.step:a.keyCode===Coral.Keys.keyToCode("down")||a.keyCode===Coral.Keys.keyToCode("left")||a.keyCode===Coral.Keys.keyToCode("pageDown")?d-=this.step:a.keyCode===Coral.Keys.keyToCode("home")?d=this.min:a.keyCode===Coral.Keys.keyToCode("end")&&(d=this.max),this._updateValue(b,d)},_findNearestHandle:function(a,b){function c(a,b,c){var d=a.getBoundingClientRect(),e=d.top+window.pageYOffset,f=d.left+window.pageXOffset;return Math.floor(Math.sqrt(Math.pow(b-(f+d.width/2),2)+Math.pow(c-(e+d.height/2),2)))}var d,e=1/0;return this._elements.handles.forEach(function(f){var g=c(f,a,b);g<e&&(e=g,d=f)}),d},_moveHandles:function(){function a(a){return(a-b.min)/(b.max-b.min)*100}var b=this;b._elements.handles.forEach(function(c,d){var f=a(b._values[d]);b.orientation===e.VERTICAL?(c.style.bottom=f+"%",c.style.left=""):(c.style.left=f+"%",c.style.bottom=""),b._updateTooltip(c,b._getLabel(b._values[d]))})},_onInputChange:function(a){"undefined"==typeof a.target.oninput&&this._onInputChangeHandler(a)},_onInputChangeHandler:function(a){a.stopPropagation();var c=a.target.closest("."+b);a.target===document.activeElement&&this._focus(a),this._updateValue(c,a.target.value,!0)},_focus:function(a){var c=this,d=a.target.closest("."+b),e=this._elements.handles.indexOf(d);this.classList.add("is-focused"),d.classList.add("is-focused"),this.tooltips&&this._openTooltip(d,c._getLabel(c._values[e]));var f=function(a){c.contains(a.target)&&a.target.blur()};Coral.events.on("touchstart.CoralSlider",f),Coral.events.on("mousedown.CoralSlider",f)},_blur:function(a){var c=a.target.closest("."+b);this.classList.remove("is-focused"),c.classList.remove("is-focused"),this.tooltips&&this._closeTooltip(c),Coral.events.off(".CoralSlider")},_handleDragging:function(a){var b=this._getPoint(a);this._updateValue(this._currentHandle,this._getValueFromCoord(b.pageX,b.pageY)),a.preventDefault()},_updateValue:function(a,b,c){var d=this._elements.handles.indexOf(a),e=this._values;e[d]=b;var f=this._values;this.set("_values",e);var g=this._values;(c||f.join(":")!==g.join(":"))&&this.trigger("change")},_getValueFromCoord:function(a,b,c){var d,f=this,g=f.getBoundingClientRect();if(f.orientation===e.VERTICAL){var h=g.height;d=(g.top+h-b)/h}else{var i=g.width;d=(a-g.left)/i}if(c&&(d<0||d>1))return NaN;var j=1*f.min+(f.max-f.min)*d;return this._snapValueToStep(j,f.min,f.max,f.step)},_snapValueToStep:function(a,b,c,d){d=parseFloat(d);var e,f=(a-b)%d,g=d.toString().replace(/^(?:\d+)(?:\.(\d+))?$/g,"$1"),h=g.length;return e=2*Math.abs(f)>=d?a-Math.abs(f)+d:a-f,e<b?e=b:e>c&&(e=b+Math.floor((c-b)/d)*d),h>0&&(e=parseFloat(e.toFixed(h))),e},_onMouseEnter:function(a){var b=a.matchedTarget,c=this._elements.handles.indexOf(b);this.tooltips&&this._openTooltip(b,this._getLabel(this._values[c]))},_onMouseLeave:function(a){var b=a.matchedTarget;this.tooltips&&!b.classList.contains("is-dragged")&&this._closeTooltip(b)},_mouseUp:function(){this._currentHandle.classList.remove("is-dragged"),document.body.classList.remove("u-coral-closedHand"),this._closeTooltip(this._currentHandle),Coral.events.off("mousemove",this._draggingHandler),Coral.events.off("touchmove",this._draggingHandler),Coral.events.off("mouseup",this._mouseUpHandler),Coral.events.off("touchend",this._mouseUpHandler),Coral.events.off("touchcancel",this._mouseUpHandler),this._currentHandle=null,this._draggingHandler=null,this._mouseUpHandler=null},_updateFill:function(){var a=(this._values[0]-this.min)/(this.max-this.min)*100;this.orientation===e.VERTICAL?this._elements.fillHandle.style.height=a+"%":this._elements.fillHandle.style.width=a+"%"},_openTooltip:function(a,b){var c=a.querySelector("coral-tooltip"),d=this.orientation===e.VERTICAL?Coral.Overlay.placement.RIGHT:Coral.Overlay.placement.TOP;c.set({content:{textContent:b},target:a,placement:d}),c.open=!0},_updateTooltip:function(a,b){var c=a.querySelector("coral-tooltip");c.content.textContent=b},_closeTooltip:function(a){var b=a.querySelector("coral-tooltip");b&&(b.open=!1)},_getLabel:function(a){for(var b,c=this.items.getAll(),d=0;d<c.length;d++)if(Coral.transform.number(c[d].value)===Coral.transform.number(a)){b=c[d];break}return b?b.content.innerHTML:a},_renderTemplate:function(){var a;a=Coral.templates.Slider.base.call(this._elements),this.appendChild(a)},_render:function(){var a=this;a._renderTemplate(),a._elements.handles=Array.prototype.slice.call(a.querySelectorAll("."+b)),a._elements.inputs=Array.prototype.slice.call(a.querySelectorAll("."+c)),a.setAttribute("role","presentation")}}),Coral.Slider.orientation=e}(),function(){"use strict";var a="coral3-Slider-item";Coral.register({name:"Slider.Item",tagName:"coral-slider-item",className:a,properties:{value:{reflectAttribute:!0,transform:Coral.transform.string},content:{contentZone:!0,set:function(){},get:function(){return this}}}})}(),function(){"use strict";var a="coral3-Slider";Coral.register({name:"RangedSlider",tagName:"coral-rangedslider",className:a,extend:Coral.Slider,properties:{filled:{"default":!0,set:function(a){this._filled=!0}},value:Coral.property.proxy({path:"startValue"}),startValue:{attribute:"startvalue",transform:Coral.transform.string,set:function(a){var b=Coral.transform.number(a);b=this._snapValueToStep(b,this.min,this.max,this.step),a=String(b);var c=this.values;c[0]=a,this.values=c;var d=this._elements.inputs[0],e=this.getAttribute("startvalue")||this.getAttribute("value");d[e?"setAttribute":"removeAttribute"]("value",e)},get:function(){return this.values[0]}},endValue:{attribute:"endvalue",transform:Coral.transform.string,set:function(a){var b=Coral.transform.number(a);b=this._snapValueToStep(b,this.min,this.max,this.step),a=String(b);var c=this.values;c[1]=a,this.values=c;var d=this._elements.inputs[1],e=this.getAttribute("endvalue");d[e?"setAttribute":"removeAttribute"]("value",e)},get:function(){return this.values[1]}},values:Coral.property.proxy({path:"_values"})},clear:function(){this.startValue=this.min,this.endValue=this.max},reset:function(){var a=this.getAttribute("startvalue")||this.getAttribute("value"),b=this.getAttribute("endvalue");this.startValue=Coral.transform.string(a),this.endValue=Coral.transform.string(b)},_getHighestValue:function(){return Math.max.apply(null,this.values)},_getLowestValue:function(){return Math.min.apply(null,this.values)},_updateValue:function(a,b){var c=this._elements.handles.indexOf(a);0===c?(b>parseFloat(this.values[1])&&(b=this.values[1]),this._elements.rightInput.min=b,this._elements.rightHandle.setAttribute("aria-valuemin",b)):(b<parseFloat(this.values[0])&&(b=this.values[0]),this._elements.leftInput.max=b,this._elements.leftHandle.setAttribute("aria-valuemax",b));var d=[this.values[0],this.values[1]];d[c]=b;var e=this.get("values");this.set("values",d);var f=this.get("values");e.join(":")!==f.join(":")&&this.trigger("change")},_updateFill:function(){var a=100/(this.max-this.min),b=(this._getLowestValue()-this.min)*a,c=(this._getHighestValue()-this.min)*a-b;this.orientation===Coral.Slider.orientation.VERTICAL?(this._elements.fillHandle.style.bottom=b+"%",this._elements.fillHandle.style.height=c+"%"):(this._elements.fillHandle.style.left=b+"%",this._elements.fillHandle.style.width=c+"%")},_renderTemplate:function(){var a=Coral.templates.Slider.range.call(this._elements);this.appendChild(a)}})}(),window.Coral=window.Coral||{},window.Coral.strings=window.Coral.strings||{},window.Coral.strings["coralui-component-colorinput"]={"en-US":{Swatches:"Swatches",R:"R",G:"G",B:"B",A:"A",HEX:"HEX","Color Picker":"Color Picker",unset:"Not set",checked:"Checked","{value}, Color":"{value}, Color","Color not set":"Color not set"},"fr-FR":{Swatches:"Échantillons",R:"R",G:"G",B:"B",A:"A",HEX:"HEX","Color Picker":"Sélecteur de couleurs",unset:"Non défini",checked:"Activé","{value}, Color":"{value}, Couleur","Color not set":"Couleur non défini"},"de-DE":{Swatches:"Muster",R:"R",G:"G",B:"B",A:"A",HEX:"HEX","Color Picker":"Farbauswahl",unset:"Nicht gesetzt",checked:"Aktiviert","{value}, Color":"{value}, Farbe","Color not set":"Farbe nicht gesetzt"},"it-IT":{Swatches:"Campioni",R:"R",G:"G",B:"B",A:"A",HEX:"HEX","Color Picker":"Selettore colori",unset:"Non impostato",checked:"Selezionato","{value}, Color":"{value}, Colore","Color not set":"Colore non impostato"},"es-ES":{Swatches:"Muestras",R:"R",G:"G",B:"B",A:"A",HEX:"HEX","Color Picker":"Selector de colores",unset:"No establecido",checked:"Activado","{value}, Color":"{value}, Color","Color not set":"Color no establecido"},"pt-BR":{Swatches:"Amostras",R:"R",G:"G",B:"B",A:"A",HEX:"HEX","Color Picker":"Seletor de cores",unset:"Não definida",checked:"Selecionado","{value}, Color":"{value}, Cor","Color not set":"Cor não definida"},"ja-JP":{Swatches:"スウォッチ",R:"R",G:"G",B:"B",A:"A",HEX:"16 進","Color Picker":"カラー ピッカー",unset:"設定解除",checked:"選択","{value}, Color":"{value}, カラー","Color not set":"色が設定されていません"},"ko-KR":{Swatches:"견본",R:"R",G:"G",B:"B",A:"A",HEX:"HEX","Color Picker":"색 선택",unset:"설정 해제",checked:"선택됨","{value}, Color":"{value}, 색","Color not set":"색상이 설정되지 않았습니다."},"zh-CN":{Swatches:"色板",R:"R",G:"G",B:"B",A:"A",HEX:"十六进制","Color Picker":"颜色选取器",unset:"取消设置",checked:"已选中","{value}, Color":"{value}, 颜色","Color not set":"颜色未设定"},"zh-TW":{Swatches:"色票",R:"R",G:"G",B:"B",A:"A",HEX:"十六進位","Color Picker":"色彩選擇器",unset:"取消設定",checked:"已檢查","{value}, Color":"{value}, 色彩","Color not set":"顏色未設定"},"nl-NL":{Swatches:"Stalen",R:"R",G:"G",B:"B",A:"A",HEX:"HEX","Color Picker":"Kleurenkiezer",unset:"Niet ingesteld",checked:"Geselecteerd","{value}, Color":"{value}, Kleur","Color not set":"Kleur niet ingesteld"},"da-DK":{Swatches:"Farveprøver",R:"R",G:"G",B:"B",A:"A",HEX:"HEX","Color Picker":"Farvevælger",unset:"annuller indstilling",checked:"kontrolleret","{value}, Color":"{value}, Farve","Color not set":"Farve ikke indstillet"},"fi-FI":{Swatches:"Värimallit",R:"R",G:"G",B:"B",A:"A",HEX:"HEX","Color Picker":"Värimuokkain",unset:"poista asetus",checked:"valittu","{value}, Color":"{value}, väri","Color not set":"Väriä ei ole asetettu."},"nb-NO":{Swatches:"Fargekart",R:"R",G:"G",B:"B",A:"A",HEX:"HEX","Color Picker":"Fargevelger",unset:"fjern",checked:"avmerket","{value}, Color":"{value}, farge","Color not set":"Farge ikke angitt"},"sv-SE":{Swatches:"Färgrutor",R:"R",G:"G",B:"B",A:"A",HEX:"HEX","Color Picker":"Färgväljaren",unset:"ställ tillbaka",checked:"kontrollerade","{value}, Color":"{value}, Färg","Color not set":"Färg inte inställd"},"cs-CZ":{Swatches:"Vzorníky",R:"R",G:"G",B:"B",A:"A",HEX:"HEX","Color Picker":"Výběr barvy",unset:"nenastaveno",checked:"zkontrolováno","{value}, Color":"{value}, Barva","Color not set":"Barva není nastavena"},"pl-PL":{Swatches:"Próbki",R:"R",G:"G",B:"B",A:"A",HEX:"HEX","Color Picker":"Próbnik kolorów",unset:"usuń ustawienie",checked:"sprawdzono","{value}, Color":"{value}, kolor","Color not set":"Nie ustawiono koloru"},"ru-RU":{Swatches:"Цветовые образцы",R:"R",G:"G",B:"B",A:"A",HEX:"HEX","Color Picker":"Палитра цветов",unset:"не задано",checked:"проверено","{value}, Color":"{value}, цвет","Color not set":"Цвет не задан"},"tr-TR":{Swatches:"Renk Örnekleri",R:"R",G:"G",B:"B",A:"A",HEX:"HEX","Color Picker":"Renk Seçici",unset:"ayarı kaldır",checked:"denetlendi","{value}, Color":"{value}, Renk","Color not set":"Renk ayarlanmadı"}},window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.ColorInput=window.Coral.templates.ColorInput||{},window.Coral.templates.ColorInput.base=function(a){var b=document.createDocumentFragment(),c=a="undefined"==typeof a?{}:a;c=a;var d=Coral.commons.getUID();a=c;var e=document.createTextNode("\n");b.appendChild(e);var f=this.input=document.createElement("input","coral-textfield");f.setAttribute("handle","input"),f.setAttribute("is","coral-textfield"),f.className+=" coral3-ColorInput-input",f.setAttribute("type","text"),f.setAttribute("value",""),b.appendChild(f);var g=document.createTextNode("\n");b.appendChild(g);var h=document.createElement("div");h.className+=" coral3-ColorInput-buttonWrapper",h.setAttribute("role","presentation");var i=document.createTextNode("\n  ");h.appendChild(i);var j=this.colorPreview=document.createElement("button","coral-button");j.setAttribute("handle","colorPreview"),j.setAttribute("is","coral-button"),j.setAttribute("variant","default"),j.className+=" coral3-ColorInput-button coral3-ColorInput-preview",j.setAttribute("type","button"),j.setAttribute("aria-haspopup","true"),j.setAttribute("aria-expanded","false"),j.setAttribute("aria-controls",d);var k=document.createTextNode("\n    ");j.appendChild(k);var l=document.createElement("coral-button-label");l.id=d+"-coral-button-label",l.className+=" u-coral-screenReaderOnly",l.textContent=Coral.i18n.get("Color Picker"),j.appendChild(l);var m=document.createTextNode("\n  ");j.appendChild(m),h.appendChild(j);var n=document.createTextNode("\n");h.appendChild(n),b.appendChild(h);var o=document.createTextNode("\n");b.appendChild(o);var p=this.overlay=document.createElement("coral-overlay");return p.setAttribute("role","dialog"),p.setAttribute("focusonshow","on"),p.setAttribute("trapfocus","on"),p.setAttribute("handle","overlay"),p.setAttribute("alignmy","right top"),p.setAttribute("alignat","right bottom"),p.setAttribute("collision","fit"),p.setAttribute("offset","5"),p.id=d,p.setAttribute("aria-label",Coral.i18n.get("Color Picker")),b.appendChild(p),b},window.Coral.templates.ColorInput.colorProperties=function(a){var b=document.createDocumentFragment(),c=a="undefined"==typeof a?{}:a;c=a;var d=Coral.commons.getUID();a=c;var e=document.createTextNode("\n");b.appendChild(e);var f=document.createElement("div");f.className+=" coral3-ColorInput-propertiesSubview",f.setAttribute("role","group");var g=document.createTextNode("\n  ");f.appendChild(g);var h=document.createElement("div");h.className+=" coral3-ColorInput-previewView",h.setAttribute("role","presentation");var i=document.createTextNode("\n    ");h.appendChild(i);var j=document.createElement("div");j.className+=" coral3-ColorInput-preview-container",j.setAttribute("role","presentation");var k=document.createTextNode("\n      ");j.appendChild(k);var l=this.colorPreview2=document.createElement("button","coral-button");l.setAttribute("is","coral-button"),l.setAttribute("handle","colorPreview2"),l.className+=" coral3-ColorInput-preview",l.setAttribute("type","button"),l.setAttribute("aria-pressed","false"),j.appendChild(l);var m=document.createTextNode("\n    ");j.appendChild(m),h.appendChild(j);var n=document.createTextNode("\n    ");h.appendChild(n);var o=document.createElement("div");o.className+=" coral3-ColorInput-editHex",o.setAttribute("role","presentation");var p=document.createTextNode("\n      ");o.appendChild(p);var q=document.createElement("label"),r=document.createTextNode("\n        ");q.appendChild(r);var s=document.createElement("span");s.textContent="#",q.appendChild(s);var t=document.createTextNode("\n        ");q.appendChild(t);var u=this.hexInput=document.createElement("input","coral-textfield");u.setAttribute("type","text"),u.setAttribute("handle","hexInput"),u.setAttribute("is","coral-textfield"),u.setAttribute("aria-label",Coral.i18n.get("HEX")),u.setAttribute("placeholder",Coral.i18n.get("HEX")),u.setAttribute("maxlength","6"),u.setAttribute("value",""),u.setAttribute("variant","quiet"),q.appendChild(u);var v=document.createTextNode("\n      ");q.appendChild(v),o.appendChild(q);var w=document.createTextNode("\n    ");o.appendChild(w),h.appendChild(o);var x=document.createTextNode("\n  ");h.appendChild(x),f.appendChild(h);var y=document.createTextNode("\n  ");f.appendChild(y);var z=document.createElement("div");z.className+=" coral3-ColorInput-rgbaView coral3-ColorInput-editRgba",z.setAttribute("role","presentation");var A=document.createTextNode("\n    ");z.appendChild(A);var B=document.createElement("div");B.setAttribute("role","group"),B.setAttribute("labelledby",d+"-r");var C=document.createTextNode("\n      ");B.appendChild(C);var D=document.createElement("label");D.id=d+"-r",D.textContent=Coral.i18n.get("R"),B.appendChild(D);var E=document.createTextNode("\n      ");B.appendChild(E);var F=this.redSlider=document.createElement("coral-colorinput-slider");F.setAttribute("labelledby",d+"-r"),F.setAttribute("handle","redSlider"),F.setAttribute("min","0"),F.setAttribute("max","255"),F.setAttribute("value","0"),F.setAttribute("gradient","#000000 #FF0000"),B.appendChild(F);var G=document.createTextNode("\n      ");B.appendChild(G);var H=this.redInput=document.createElement("input","coral-textfield");H.setAttribute("labelledby",d+"-r"),H.setAttribute("handle","redInput"),H.setAttribute("is","coral-textfield"),H.setAttribute("type","number"),H.setAttribute("placeholder",Coral.i18n.get("R")),H.setAttribute("maxlength","3"),H.setAttribute("value",""),H.setAttribute("variant","quiet"),B.appendChild(H);var I=document.createTextNode("\n    ");B.appendChild(I),z.appendChild(B);var J=document.createTextNode("\n    ");z.appendChild(J);var K=document.createElement("div");K.setAttribute("role","group"),K.setAttribute("labelledby",d+"-g");var L=document.createTextNode("\n      ");K.appendChild(L);var M=document.createElement("label");M.id=d+"-g",M.textContent=Coral.i18n.get("G"),K.appendChild(M);var N=document.createTextNode("\n      ");K.appendChild(N);var O=this.greenSlider=document.createElement("coral-colorinput-slider");O.setAttribute("labelledby",d+"-g"),O.setAttribute("handle","greenSlider"),O.setAttribute("min","0"),O.setAttribute("max","255"),O.setAttribute("value","0"),O.setAttribute("gradient","#000000 #00FF00"),K.appendChild(O);var P=document.createTextNode("\n      ");K.appendChild(P);var Q=this.greenInput=document.createElement("input","coral-textfield");Q.setAttribute("labelledby",d+"-g"),Q.setAttribute("handle","greenInput"),Q.setAttribute("is","coral-textfield"),Q.setAttribute("type","number"),Q.className+=" coral3-ColorInput-editRgb",Q.setAttribute("placeholder",Coral.i18n.get("G")),Q.setAttribute("maxlength","3"),Q.setAttribute("value",""),Q.setAttribute("variant","quiet"),K.appendChild(Q);var R=document.createTextNode("\n    ");K.appendChild(R),z.appendChild(K);var S=document.createTextNode("\n    ");z.appendChild(S);var T=document.createElement("div");T.setAttribute("role","group"),T.setAttribute("labelledby",d+"-b");var U=document.createTextNode("\n      ");T.appendChild(U);var V=document.createElement("label");V.id=d+"-b",V.textContent=Coral.i18n.get("B"),T.appendChild(V);var W=document.createTextNode("\n      ");T.appendChild(W);var X=this.blueSlider=document.createElement("coral-colorinput-slider");X.setAttribute("labelledby",d+"-b"),X.setAttribute("handle","blueSlider"),X.setAttribute("min","0"),X.setAttribute("max","255"),X.setAttribute("value","0"),X.setAttribute("gradient","#000000 #0000FF"),T.appendChild(X);var Y=document.createTextNode("\n      ");T.appendChild(Y);var Z=this.blueInput=document.createElement("input","coral-textfield");Z.setAttribute("labelledby",d+"-b"),Z.setAttribute("handle","blueInput"),Z.setAttribute("is","coral-textfield"),Z.setAttribute("type","number"),Z.setAttribute("placeholder",Coral.i18n.get("B")),Z.setAttribute("maxlength","3"),Z.setAttribute("value",""),Z.setAttribute("variant","quiet"),T.appendChild(Z);var $=document.createTextNode("\n    ");T.appendChild($),z.appendChild(T);var _=document.createTextNode("\n    ");z.appendChild(_);var aa=document.createElement("div");aa.setAttribute("role","group"),aa.setAttribute("labelledby",d+"-a");var ba=document.createTextNode("\n      ");aa.appendChild(ba);var ca=document.createElement("label");ca.id=d+"-a",ca.textContent=Coral.i18n.get("A"),aa.appendChild(ca);var da=document.createTextNode("\n      ");aa.appendChild(da);var ea=this.alphaSlider=document.createElement("coral-colorinput-slider");ea.setAttribute("labelledby",d+"-a"),ea.setAttribute("handle","alphaSlider"),ea.setAttribute("min","0"),ea.setAttribute("max","100"),ea.setAttribute("value","100"),ea.setAttribute("gradient","rgba(255,255,255,0) rgba(255,255,255,1)"),aa.appendChild(ea);var fa=document.createTextNode("\n      ");aa.appendChild(fa);var ga=this.alphaInput=document.createElement("input","coral-textfield");ga.setAttribute("labelledby",d+"-a"),ga.setAttribute("handle","alphaInput"),ga.setAttribute("is","coral-textfield"),ga.setAttribute("type","number"),ga.setAttribute("placeholder",Coral.i18n.get("A")),ga.setAttribute("maxlength","3"),ga.setAttribute("value",""),ga.setAttribute("variant","quiet"),aa.appendChild(ga);var ha=document.createTextNode("\n    ");aa.appendChild(ha),z.appendChild(aa);var ia=document.createTextNode("\n  ");z.appendChild(ia),f.appendChild(z);var ja=document.createTextNode("\n");f.appendChild(ja),b.appendChild(f);var ka=document.createTextNode("\n");return b.appendChild(ka),b},window.Coral.templates.ColorInput.defaultColorPalette=function(a){var b=this.defaultPalette=document.createElement("div");b.setAttribute("handle","defaultPalette");var c=document.createTextNode("\n  ");b.appendChild(c);var d=document.createElement("coral-colorinput-item");d.setAttribute("value",""),b.appendChild(d);var e=document.createTextNode("\n  ");b.appendChild(e);var f=document.createElement("coral-colorinput-item");f.setAttribute("value","#001F3F"),b.appendChild(f);var g=document.createTextNode("\n  ");b.appendChild(g);var h=document.createElement("coral-colorinput-item");h.setAttribute("value","#0074D9"),b.appendChild(h);var i=document.createTextNode("\n  ");b.appendChild(i);var j=document.createElement("coral-colorinput-item");j.setAttribute("value","#7FDBFF"),b.appendChild(j);var k=document.createTextNode("\n  ");b.appendChild(k);var l=document.createElement("coral-colorinput-item");l.setAttribute("value","#39CCCC"),b.appendChild(l);var m=document.createTextNode("\n  ");b.appendChild(m);var n=document.createElement("coral-colorinput-item");n.setAttribute("value","#3D9970"),b.appendChild(n);var o=document.createTextNode("\n  ");b.appendChild(o);var p=document.createElement("coral-colorinput-item");p.setAttribute("value","#2ECC40"),b.appendChild(p);var q=document.createTextNode("\n  ");b.appendChild(q);var r=document.createElement("coral-colorinput-item");r.setAttribute("value","#01FF70"),b.appendChild(r);var s=document.createTextNode("\n  ");b.appendChild(s);var t=document.createElement("coral-colorinput-item");t.setAttribute("value","#FFDC00"),b.appendChild(t);var u=document.createTextNode("\n  ");b.appendChild(u);var v=document.createElement("coral-colorinput-item");v.setAttribute("value","#FF851B"),b.appendChild(v);var w=document.createTextNode("\n  ");b.appendChild(w);var x=document.createElement("coral-colorinput-item");x.setAttribute("value","#FF4136"),b.appendChild(x);var y=document.createTextNode("\n  ");b.appendChild(y);var z=document.createElement("coral-colorinput-item");z.setAttribute("value","#85144B"),b.appendChild(z);var A=document.createTextNode("\n  ");b.appendChild(A);var B=document.createElement("coral-colorinput-item");B.setAttribute("value","#F012BE"),b.appendChild(B);var C=document.createTextNode("\n  ");b.appendChild(C);var D=document.createElement("coral-colorinput-item");D.setAttribute("value","#B10DC9"),b.appendChild(D);var E=document.createTextNode("\n  ");b.appendChild(E);var F=document.createElement("coral-colorinput-item");F.setAttribute("value","#111111"),b.appendChild(F);var G=document.createTextNode("\n  ");b.appendChild(G);var H=document.createElement("coral-colorinput-item");H.setAttribute("value","#AAAAAA"),b.appendChild(H);var I=document.createTextNode("\n  ");b.appendChild(I);var J=document.createElement("coral-colorinput-item");J.setAttribute("value","#DDDDDD"),b.appendChild(J);var K=document.createTextNode("\n");return b.appendChild(K),b},window.Coral.templates.ColorInput.sliderBase=function(a){var b=document.createDocumentFragment(),c=a="undefined"==typeof a?{}:a;c=a;var d=Coral.commons.getUID();a=c;var e=document.createTextNode("\n");b.appendChild(e);var f=this.sliderBar=document.createElement("div");f.setAttribute("handle","sliderBar"),f.className+=" coral3-ColorInput-sliderBar coral3-Slider-bar";var g=document.createTextNode("\n  ");f.appendChild(g);var h=this.fillHandle=document.createElement("div");h.setAttribute("handle","fillHandle"),h.className+=" coral3-Slider-fill is-hidden",h.setAttribute("role","presentation"),f.appendChild(h);var i=document.createTextNode("\n");f.appendChild(i),b.appendChild(f);var j=document.createTextNode("\n");b.appendChild(j);var k=this.leftHandle=document.createElement("div");k.setAttribute("handle","leftHandle"),k.className+=" coral3-ColorInput-sliderHandle coral3-Slider-handle";var l=document.createTextNode("\n  ");k.appendChild(l);var m=this.leftInput=document.createElement("input");m.setAttribute("handle","leftInput"),m.setAttribute("type","range"),m.id=d,m.className+=" coral3-Slider-input",k.appendChild(m);var n=document.createTextNode("\n  ");k.appendChild(n);var o=document.createElement("coral-tooltip");o.setAttribute("variant","inspect"),o.id=d+"-tooltip",o.setAttribute("for",d),o.setAttribute("interaction","off"),k.appendChild(o);var p=document.createTextNode("\n");k.appendChild(p),b.appendChild(k);var q=document.createTextNode("\n");return b.appendChild(q),b},window.Coral.templates.ColorInput.swatchesHeader=function(a){var b=document.createElement("div");b.className+=" coral3-ColorInput-swatchesSubview",b.setAttribute("role","presentation");var c=document.createTextNode("\n  ");b.appendChild(c);var d=document.createElement("div");d.className+=" coral3-ColorInput-swatches-header-title",d.setAttribute("role","presentation"),d.setAttribute("aria-hidden","true");var e=document.createTextNode("\n    ");d.appendChild(e);var f=this.swatchesHeaderTitle=document.createElement("span");f.setAttribute("handle","swatchesHeaderTitle"),f.id=Coral.commons.getUID(),f.setAttribute("role","heading"),f.setAttribute("aria-level","2"),f.textContent="\n      "+Coral.i18n.get("Swatches"),d.appendChild(f);var g=document.createTextNode("\n  ");d.appendChild(g),b.appendChild(d);var h=document.createTextNode("\n  ");b.appendChild(h);var i=document.createElement("div");i.className+=" coral3-ColorInput-swatches-container",i.setAttribute("role","presentation"),i.setAttribute("aria-labelledby",Coral.commons.getUID());var j=document.createTextNode("\n    ");i.appendChild(j);var k=this.swatchesContainer=document.createElement("div");k.setAttribute("handle","swatchesContainer"),k.setAttribute("role","presentation"),i.appendChild(k);var l=document.createTextNode("\n  ");i.appendChild(l),b.appendChild(i);var m=document.createTextNode("\n");return b.appendChild(m),b},function(){"use strict";function a(a){return("0"+a.toString(16)).slice(-2)}function b(a,b){var c=[];return a=a.toLowerCase(),b=b.toLowerCase(),a.indexOf(b)!==-1&&(c=a.substring(a.indexOf(b)+b.length,a.lastIndexOf(")")).split(/,\s*/)),c}function c(a){var c=b(a,"rgb(");if(3!==c.length)return null;var d=parseInt(c[0],10),e=parseInt(c[1],10),f=parseInt(c[2],10);return isNaN(d)||isNaN(e)||isNaN(f)?null:d<0||d>255||e<0||e>255||f<0||f>255?null:{r:d,g:e,b:f}}function d(a){return a?"rgb("+a.r+","+a.g+","+a.b+")":""}function e(a){var c=b(a,"rgba(");if(4!==c.length)return null;var d=parseInt(c[0],10),e=parseInt(c[1],10),f=parseInt(c[2],10),g=parseFloat(c[3]);return isNaN(d)||isNaN(e)||isNaN(f)||isNaN(g)?null:d<0||d>255||e<0||e>255||f<0||f>255||g<0||g>1?null:{r:d,g:e,b:f,a:g}}function f(a){return a?"rgba("+a.r+","+a.g+","+a.b+","+a.a+")":""}function g(a){var c=b(a,"cmyk(");if(4!==c.length)return null;var d=parseFloat(c[0]),e=parseFloat(c[1]),f=parseFloat(c[2]),g=parseFloat(c[3]);return isNaN(d)||isNaN(e)||isNaN(f)||isNaN(g)?null:d<0||d>100||e<0||e>100||f<0||f>100||g<0||g>100?null:{c:d,m:e,y:f,k:g}}function h(a){if(a){var b=parseFloat(a.c.toFixed(2)),c=parseFloat(a.m.toFixed(2)),d=parseFloat(a.y.toFixed(2)),e=parseFloat(a.k.toFixed(2));return"cmyk("+b+","+c+","+d+","+e+")"}return""}function i(a){a=a.replace("#",""),3===a.length&&(a=a.charAt(0)+a.charAt(0)+a.charAt(1)+a.charAt(1)+a.charAt(2)+a.charAt(2));var b=/^[0-9A-F]{6}$/i.test(a);return b?parseInt(a,16):null}function j(b){if(null!==b){var c=k(b);return"#"+a(c.r)+a(c.g)+a(c.b)}return""}function k(a){return null!==a?{r:a>>16,g:(65280&a)>>8,b:255&a}:null}function l(b){return b?i(a(b.r)+a(b.g)+a(b.b)):null}function m(a){if(!a)return null;var b={r:0,g:0,b:0},c=parseFloat(a.c)/100,d=parseFloat(a.m)/100,e=parseFloat(a.y)/100,f=parseFloat(a.k)/100;return b.r=1-Math.min(1,c*(1-f)+f),b.g=1-Math.min(1,d*(1-f)+f),b.b=1-Math.min(1,e*(1-f)+f),b.r=Math.round(255*b.r),b.g=Math.round(255*b.g),b.b=Math.round(255*b.b),b}function n(a){if(!a)return null;var b={c:0,m:0,y:0,k:0};if(0===a.r&&0===a.g&&0===a.b)return b.k=100,b;var c=a.r/255,d=a.g/255,e=a.b/255;return b.k=Math.min(1-c,1-d,1-e),b.c=(1-c-b.k)/(1-b.k),b.m=(1-d-b.k)/(1-b.k),b.y=(1-e-b.k)/(1-b.k),b.c=Math.round(100*b.c),b.m=Math.round(100*b.m),b.y=Math.round(100*b.y),b.k=Math.round(100*b.k),b}function o(a){var c=b(a,"hsb(");if(3!==c.length)return null;var d=parseFloat(c[0]),e=parseFloat(c[1]),f=parseFloat(c[2]);return isNaN(d)||isNaN(e)||isNaN(f)?null:d<0||d>360||e<0||e>100||f<0||f>100?null:{h:d,s:e,b:f}}function p(a){if(a){var b=parseFloat(a.h.toFixed(2)),c=parseFloat(a.s.toFixed(2)),d=parseFloat(a.b.toFixed(2));return"hsb("+b+","+c+","+d+")"}return""}function q(a){if(!a)return null;var b,c,d,e,f,g,h,i,j=a.h/360,k=a.s/100,l=a.b/100;switch(e=Math.floor(6*j),f=6*j-e,g=l*(1-k),h=l*(1-f*k),i=l*(1-(1-f)*k),e%6){case 0:b=l,c=i,d=g;break;case 1:b=h,c=l,d=g;break;case 2:b=g,c=l,d=i;break;case 3:b=g,c=h,d=l;break;case 4:b=i,c=g,d=l;break;case 5:b=l,c=g,d=h}return{r:Math.round(255*b),g:Math.round(255*c),b:Math.round(255*d)}}function r(a){if(!a)return null;var b,c=a.r,d=a.g,e=a.b,f=Math.max(c,d,e),g=Math.min(c,d,e),h=f-g,i=0===f?0:h/f,j=f/255;switch(f){case g:b=0;break;case c:b=d-e+h*(d<e?6:0),b/=6*h;break;case d:b=e-c+2*h,b/=6*h;break;case e:b=c-d+4*h,b/=6*h}return{h:360*b,s:100*i,b:100*j}}function s(a){var c=b(a,"hsl(");if(3!==c.length)return null;var d=parseFloat(c[0]),e=parseFloat(c[1]),f=parseFloat(c[2]);return isNaN(d)||isNaN(e)||isNaN(f)?null:d<0||d>360||e<0||e>100||f<0||f>100?null:{h:d,s:e,l:f}}function t(a){if(a){var b=parseFloat(a.h.toFixed(2)),c=parseFloat(a.s.toFixed(2)),d=parseFloat(a.l.toFixed(2));return"hsl("+b+","+c+"%,"+d+"%)"}return""}function u(a){if(!a)return null;var b,c,d,e=a.h/360,f=a.s/100,g=a.l/100;if(0===f)b=c=d=g;else{var h=function(a,b,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?a+6*(b-a)*c:c<.5?b:c<2/3?a+(b-a)*(2/3-c)*6:a},i=g<.5?g*(1+f):g+f-g*f,j=2*g-i;b=h(j,i,e+1/3),c=h(j,i,e),d=h(j,i,e-1/3)}return{r:Math.round(255*b),g:Math.round(255*c),b:Math.round(255*d)}}function v(a){if(!a)return null;var b,c,d=a.r/255,e=a.g/255,f=a.b/255,g=Math.max(d,e,f),h=Math.min(d,e,f),i=(g+h)/2;if(g===h)b=c=0;else{var j=g-h;switch(c=i>.5?j/(2-g-h):j/(g+h),g){case d:b=(e-f)/j+(e<f?6:0);break;case e:b=(f-d)/j+2;break;case f:b=(d-e)/j+4}b/=6}return{h:360*b,s:100*c,l:100*i}}function w(a){var c=b(a,"hsla(");if(4!==c.length)return null;var d=parseFloat(c[0]),e=parseFloat(c[1]),f=parseFloat(c[2]),g=parseFloat(c[3]);return isNaN(d)||isNaN(e)||isNaN(f)?null:d<0||d>360||e<0||e>100||f<0||f>100||g<0||g>1?null:{h:d,s:e,l:f,a:g}}function x(a){if(a){var b=parseFloat(a.h.toFixed(2)),c=parseFloat(a.s.toFixed(2)),d=parseFloat(a.l.toFixed(2)),e=parseFloat(a.a.toFixed(2));return"hsla("+b+","+c+"%,"+d+"%,"+e+")"}return""}var y={RGB:"rgb",HEX:"hex",CMYK:"cmyk",HSB:"hsb",HSL:"hsl"};Coral.Color=function(){this._colorSpace=y.HEX,this._value="",this._alpha=1},Coral.Color.prototype={get value(){return this._value},set value(a){var b=e(a),f=w(a),h=c(a),j=g(a),k=o(a),l=s(a),m=i(a);null!==b?(this._colorSpace=y.RGB,this.alpha=b.a,
a=d({r:b.r,g:b.g,b:b.b})):null!==f?(this._colorSpace=y.HSL,this.alpha=f.a,a=t({h:f.h,s:f.s,l:f.l})):null!==h?this._colorSpace=y.RGB:null!==j?this._colorSpace=y.CMYK:null!==k?this._colorSpace=y.HSB:null!==l?this._colorSpace=y.HSL:null!==m?this._colorSpace=y.HEX:(this._colorSpace=y.HEX,a=""),this._value=a},get alpha(){return this._alpha},set alpha(a){isNaN(a)||a<0||a>1||(this._alpha=Coral.transform.number(a))},get rgb(){var a=null;if(this._colorSpace===y.RGB)a=c(this.value);else if(this._colorSpace===y.HEX){var b=i(this.value);a=k(b)}else if(this._colorSpace===y.CMYK){var d=g(this.value);a=m(d)}else if(this._colorSpace===y.HSB){var e=o(this.value);a=q(e)}else if(this._colorSpace===y.HSL){var f=s(this.value);a=u(f)}return a},set rgb(a){this.value=d(a)},get rgbValue(){return d(this.rgb)},set rgbValue(a){this.value=a},get rgba(){var a=this.rgb;return a?{r:a.r,g:a.g,b:a.b,a:this.alpha}:null},set rgba(a){this.value=f(a)},get rgbaValue(){return f(this.rgba)},set rgbaValue(a){this.value=a},get hex(){return l(this.rgb)},set hex(a){this.value=j(a)},get hexValue(){return j(this.hex)},set hexValue(a){this.value=a},get cmyk(){var a=null,b=null;if(this._colorSpace===y.RGB)b=c(this.value),a=n(b);else if(this._colorSpace===y.HEX){var d=i(this.value);b=k(d),a=n(b)}else if(this._colorSpace===y.CMYK)a=g(this.value);else if(this._colorSpace===y.HSB){var e=o(this.value);b=q(e),a=n(b)}else if(this._colorSpace===y.HSL){var f=s(this.value);b=u(f),a=n(b)}return a},set cmyk(a){this.value=h(a)},get cmykValue(){return h(this.cmyk)},set cmykValue(a){this.value=a},get hsb(){var a=null,b=null;if(this._colorSpace===y.RGB)b=c(this.value),a=r(b);else if(this._colorSpace===y.HEX){var d=i(this.value);b=k(d),a=r(b)}else if(this._colorSpace===y.CMYK){var e=g(this.value);b=m(e),a=r(b)}else if(this._colorSpace===y.HSB)a=o(this.value);else if(this._colorSpace===y.HSL){var f=s(this.value);b=u(f),a=r(b)}return a},set hsb(a){this.value=p(a)},get hsbValue(){return p(this.hsb)},set hsbValue(a){this.value=a},get hsl(){var a=null,b=null;if(this._colorSpace===y.RGB)b=c(this.value),a=v(b);else if(this._colorSpace===y.HEX){var d=i(this.value);b=k(d),a=v(b)}else if(this._colorSpace===y.CMYK){var e=g(this.value);b=m(e),a=v(b)}else if(this._colorSpace===y.HSB){var f=o(this.value);b=q(f),a=v(b)}else this._colorSpace===y.HSL&&(a=s(this.value));return a},set hsl(a){this.value=t(a)},get hslValue(){return t(this.hsl)},set hslValue(a){this.value=a},get hsla(){var a=this.hsl;return a?{h:a.h,s:a.s,l:a.l,a:this.alpha}:null},set hsla(a){this.value=x(a)},get hslaValue(){return x(this.hsla)},set hslaValue(a){this.value=a},clone:function(){var a=new Coral.Color;return a.value=this.value,a.alpha=this.alpha,a},isSimilarTo:function(a,b){if(null===this.rgb&&(!a||null===a.rgb))return!0;if(!a||null===a.rgb||null===this.rgb)return!1;var c=1,d=.01;b===!1&&(c=0,d=0);var e=this.rgb,f=a.rgb,g=Math.abs(f.r-e.r),h=Math.abs(f.g-e.g),i=Math.abs(f.b-e.b),j=Math.abs(this.alpha-a.alpha);return g<=c&&h<=c&&i<=c&&j<=d},calculateTintColors:function(a){var b=[],c=null,d=this.rgb;if(d)for(var e=d.r,f=d.g,g=d.b,h=1,i=1;i<=a;i++)h=i/(a+1),c=this.clone(),c.rgb={r:e+(255-e)*h,g:f+(255-f)*h,b:g+(255-g)*h},b.push(c);return b},calculateShadeColors:function(a){var b=[],c=null,d=this.rgb;if(d)for(var e=d.r,f=d.g,g=d.b,h=1,i=1;i<=a;i++)h=i/(a+1),c=this.clone(),c.rgb={r:e*(1-h),g:f*(1-h),b:g*(1-h)},b.push(c);return b}}}(),function(){"use strict";var a="coral-colorinput-item",b={DEFAULT:"default",SWATCH:"swatch"},c={OFF:"off",SHADES:"shades",TINTS:"tints"},d={ON:"on",OFF:"off"},e={ON:"on",OFF:"off"},f={ON:"on",OFF:"off"};Coral.register({name:"ColorInput",tagName:"coral-colorinput",className:"coral3-ColorInput",mixins:[Coral.mixin.formField,Coral.mixin.selectionList({itemTagName:a,allowSingleModeDeselect:!0,forceSelection:!1,supportMultiple:!1})],events:{"coral-collection:add":"_onItemAddedToCollection","coral-collection:remove":"_onItemRemovedFromCollection","coral-colorinput:change":"_onColorInputSelectColor","coral-overlay:beforeopen":"_beforeOverlayOpen","coral-overlay:close":"_onOverlayClose","key:down .coral3-ColorInput-input:not([readonly])":"_onKeyDown",'key:down [handle="colorPreview"]':"_onKeyDown",'click [handle="colorPreview"]':"_onColorPreviewClick","global:click":"_onGlobalClick","key:esc input":"_onKeyEsc","key:enter input":"_onKeyEsc"},properties:{variant:{"default":b.DEFAULT,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(b)],sync:function(){this.classList.toggle("coral3-ColorInput--swatch",this.variant===b.SWATCH),this.variant===b.SWATCH?(this._elements.input.setAttribute("tabindex",-1),this._elements.colorPreview.removeAttribute("tabindex")):(this._elements.input.removeAttribute("tabindex"),this._elements.colorPreview.setAttribute("tabindex",-1))}},value:{"default":"",validate:[],get:function(){return this._value?this._value:""},set:function(a){var b=new Coral.Color;b.value=this.value;var c=new Coral.Color;c.value=a,c.isSimilarTo(b,!1)||(this._value=a,this._selectColorInputColor(c),this.trigger("coral-colorinput:_valuechange")),this._elements.input.value=this.value},sync:function(){var a=this.valueAsColor;this._elements.colorPreview.style.backgroundColor=a?a.rgbaValue:"",this.classList.toggle("coral3-ColorInput--novalue",""===this.value)}},name:{get:function(){return this._elements.input.name},set:function(a){this._elements.input.name=a}},disabled:{sync:function(){this.classList.toggle("is-disabled",this.disabled);var a=this._elements.input,b=this._elements.colorPreview;a.disabled=this.disabled,b.disabled=this.disabled||this.readOnly,this._syncColorPreviewIcon()}},invalid:{sync:function(){this.classList.toggle("is-invalid",this.invalid),this._elements.input.invalid=this.invalid}},readOnly:{sync:function(a){var b=this._elements.input,c=this._elements.colorPreview;b.readOnly=this.readOnly,c.disabled=this.disabled||this.readOnly,this.removeAttribute("aria-readonly")}},required:{sync:function(){this._elements.input.required=this.required}},labelledBy:{sync:function(){this.labelledBy?(this.setAttribute("aria-labelledby",this.labelledBy),this._elements.colorPreview.setAttribute("aria-labelledby",[this.labelledBy,this._elements.colorPreview.label.id].join(" "))):(this.removeAttribute("aria-labelledby"),this._elements.colorPreview.removeAttribute("aria-labelledby"))}},valueAsColor:{attribute:null,get:function(){this._color||(this._color=new Coral.Color);var a=new Coral.Color;return a.value=this.value,this._color.isSimilarTo(a,!0)||(this._color.value=a.value,this._color.alpha=a.alpha),null===this._color.rgb?null:this._color.clone()},set:function(a){this._color||(this._color=new Coral.Color),a?(this._color=a,a.alpha<1?this.value=a.rgbaValue:this.value=a.value):(this._color.value="",this.value="")}},autoGenerateColors:{"default":c.OFF,attribute:"autogeneratecolors",validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(c)],sync:function(){this._recalculateGeneratedColors()}},showSwatches:{"default":d.ON,attribute:"showswatches",validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(d)],sync:function(){this._showOrHideView(this._elements.swatchesView,this._showSwatches===Coral.ColorInput.showSwatches.OFF)}},showProperties:{"default":e.ON,attribute:"showproperties",validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(e)],sync:function(){this._showOrHideView(this._elements.propertiesView,this._showProperties===Coral.ColorInput.showProperties.OFF)}},showDefaultColors:{"default":f.ON,attribute:"showdefaultcolors",validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(f)],sync:function(){var a=this._elements.defaultPalette;this._showDefaultColors===Coral.ColorInput.showDefaultColors.ON?a.parentNode||this.insertBefore(a,this.firstChild||null):a.parentNode&&a.parentNode.removeChild(a)}},placeholder:{reflectAttribute:!0,transform:Coral.transform.string,get:function(){return this._elements.input.placeholder},set:function(a){this._elements.input.placeholder=a}}},_onColorPreviewClick:function(a){this._elements.overlay.returnFocusTo(this.variant===b.SWATCH?a.matchedTarget:this._elements.input),this._elements.overlay.open=!this._elements.overlay.open},_onGlobalClick:function(a){this._elements.overlay.open&&(this.contains(a.target)||(this._elements.overlay.open=!1))},_onItemAddedToCollection:function(b){this._elements.overlay.open&&b.detail.item.tagName.toLowerCase()===a&&(this._elements.overlay.open=!1)},_onItemRemovedFromCollection:function(b){this._elements.overlay.open&&b.detail.item.tagName.toLowerCase()===a&&(this._elements.overlay.open=!1)},_onInputChange:function(a){if(a.target===this._elements.input){a.stopPropagation();var b=new Coral.Color;b.value=a.target[this._eventTargetProperty],this._setActiveColor(b)}},_onColorInputSelectColor:function(a){var b=a.detail.selection;b&&(this.value=b.value)},_onKeyDown:function(a){a.stopPropagation(),this._elements.overlay.returnFocusTo(this.variant===b.SWATCH?a.matchedTarget:this._elements.input),this._elements.overlay.open=!0},_onKeyEsc:function(){this._elements.overlay.open&&(this._elements.overlay.open=!1)},_beforeOverlayOpen:function(){this.showProperties===Coral.ColorInput.showProperties.ON?this._elements.overlay.focusOnShow=this._elements.propertiesView._elements.colorPreview2:this.showSwatches===Coral.ColorInput.showSwatches.ON&&(this._elements.overlay.focusOnShow=this._elements.overlay.querySelector("coral-colorinput-swatch[selected] > button")||"coral-colorinput-swatch > button"),this._elements.colorPreview.setAttribute("aria-expanded",!0)},_onOverlayClose:function(){this._elements.colorPreview.setAttribute("aria-expanded",!1)},_validateInputValue:function(){this.invalid=""!==this.value&&null===this.valueAsColor},_showOrHideView:function(a,b){a.hidden=b,this._elements.overlay.classList.remove("coral3-ColorInput-onlySwatchesView","coral3-ColorInput-onlyPropertiesView"),!this._elements.propertiesView.hidden&&this._elements.swatchesView.hidden?this._elements.overlay.classList.add("coral3-ColorInput-onlyPropertiesView"):this._elements.propertiesView.hidden&&!this._elements.swatchesView.hidden&&this._elements.overlay.classList.add("coral3-ColorInput-onlySwatchesView"),this.showProperties===Coral.ColorInput.showProperties.OFF&&this.showSwatches===Coral.ColorInput.showSwatches.ON?(this._elements.colorPreview.label.textContent=Coral.i18n.get("Swatches"),this._elements.overlay.setAttribute("aria-label",Coral.i18n.get("Swatches"))):(this._elements.colorPreview.label.textContent=Coral.i18n.get("Color Picker"),this._elements.overlay.setAttribute("aria-label",Coral.i18n.get("Color Picker")))},_recalculateGeneratedColors:function(){for(var a=this.querySelectorAll("coral-colorinput-item[coral-colorinput-generatedcolor]"),b=a.length,d=0;d<b;d++)a[d].remove();if(this.autoGenerateColors!==c.OFF){var e=this.items.getAll(),f=null,g=null,h=0,i=0,j=null,k=[];for(h=0;h<e.length;h++)for(f=e[h],g=new Coral.Color,g.value=f.value,k=this.autoGenerateColors===c.TINTS?g.calculateTintColors(5):g.calculateShadeColors(5),i=k.length-1;i>=0;i--)j=new Coral.ColorInput.Item,j.value=k[i].rgbaValue,j.setAttribute("coral-colorinput-generatedcolor",""),f.parentNode.insertBefore(j,f.nextSibling)}},_syncColorPreviewIcon:function(){var a=this._elements.colorPreview;a.icon=this.disabled&&this.variant===b.SWATCH?"lockOn":"",a.iconSize=Coral.Icon.size.SMALL},_setActiveColor:function(a){var b=this.valueAsColor?this.valueAsColor:new Coral.Color;this.valueAsColor=a,b.isSimilarTo(this.valueAsColor,!1)||(this._validateInputValue(),this.trigger("change"))},_selectColorInputColor:function(a){var b=!0;if(this.selectedItem){var c=new Coral.Color;c.value=this.selectedItem.value,b=!c.isSimilarTo(a,!0)}if(b){this.items.deselectAll();for(var d=this.items.getAll(),e=d.length,f=null,g=0;g<e;g++)if(f=new Coral.Color,f.value=d[g].getAttribute("value"),f.isSimilarTo(a,!0)){d[g].setAttribute("selected","true");break}}},_initialize:function(){this.setAttribute("role","combobox"),this.setAttribute("aria-expanded",!1)},_render:function(){this.appendChild(Coral.templates.ColorInput.defaultColorPalette.call(this._elements)),this.appendChild(Coral.templates.ColorInput.base.call(this._elements));var a=this._elements.overlay;a.target=this,this._elements.propertiesView=a.appendChild(new Coral.ColorInput.ColorProperties),this._elements.swatchesView=a.appendChild(new Coral.ColorInput.Swatches)}}),Coral.ColorInput.autoGenerateColors=c,Coral.ColorInput.showSwatches=d,Coral.ColorInput.showProperties=e,Coral.ColorInput.showDefaultColors=f,Coral.ColorInput.variant=b}(),function(){"use strict";Coral.register({name:"ColorInput.Item",tagName:"coral-colorinput-item",mixins:[Coral.mixin.selectionList.Item({listSelector:"coral-colorinput",alwaysEnabled:!0})],properties:{value:{"default":"",reflectAttribute:!0,transform:function(a){var b=new Coral.Color;return b.value=a,null!==b.rgb?a:""}}}})}(),function(){"use strict";Coral.register({name:"ColorInput.AbstractSubview",tagName:"coral-colorinput-abstractsubview",events:{"click .coral3-ColorInput-preview":"_onPreviewClicked"},attachedCallback:function(){var a=this.closest("coral-colorinput");a&&(this.__beforeOverlayOpen=this._beforeOverlayOpen.bind(this),this.__onColorInputChange=this._onColorInputChange.bind(this),this._colorinput=a,this._colorinput.on("coral-overlay:beforeopen",this.__beforeOverlayOpen),this._colorinput.on("coral-colorinput:_valuechange",this.__onColorInputChange),this._onColorInputChange())},detachedCallback:function(){this._colorinput&&(this._colorinput.off("coral-overlay:beforeopen",this.__beforeOverlayOpen),this._colorinput.off("coral-colorinput:_valuechange",this.__onColorInputChange)),this._colorinput=null},_onPreviewClicked:function(){null!==this._colorinput.valueAsColor?(Coral.ColorInput.AbstractSubview._lastValidColor=this._colorinput.valueAsColor,this._colorinput._setActiveColor(null)):null!==Coral.ColorInput.AbstractSubview._lastValidColor&&this._colorinput._setActiveColor(Coral.ColorInput.AbstractSubview._lastValidColor)},_beforeOverlayOpen:function(){},_onColorInputChange:function(){}}),Coral.ColorInput.AbstractSubview._lastValidColor=null}(),function(){"use strict";Coral.register({name:"ColorInput.Slider",tagName:"coral-colorinput-slider",className:"coral3-ColorInput-slider coral3-Slider",extend:Coral.Slider,properties:{gradient:{"default":"",sync:function(){var a=this._elements.sliderBar,b=a.style,c=this.gradient.split(" "),d=c.length;if(b.backgroundImage="none",b.filter="",!(d<2)){var e=0,f="";for(e=0;e<d;e++)f+=", "+c[e]+" "+Math.abs(100*e/(d-1))+"%";b.backgroundImage="-moz-linear-gradient(right"+f+")",b.backgroundImage="-ms-linear-gradient(right"+f+")",b.backgroundImage="-o-linear-gradient(right"+f+")",b.backgroundImage="-webkit-linear-gradient(left"+f+")",b.backgroundImage="linear-gradient(to right"+f+")",b.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+c[0]+"', endColorstr='"+c[1]+"', gradientType=1)"}}},labelledBy:{sync:function(){this.labelledBy&&this._updateForAttributes(this.labelledBy,this._getLabellableElement().id)}}},_getLabellableElement:function(){return this._elements.leftInput},_renderTemplate:function(){this.appendChild(Coral.templates.ColorInput.sliderBase.call(this._elements))}})}(),function(){"use strict";Coral.register({name:"ColorInput.ColorProperties",tagName:"coral-colorinput-colorproperties",className:"coral3-ColorInput-colorProperties",extend:Coral.ColorInput.AbstractSubview,events:{'change [handle="redSlider"]':"_onRedSliderChange",'change [handle="greenSlider"]':"_onGreenSliderChange",'change [handle="blueSlider"]':"_onBlueSliderChange",'change [handle="alphaSlider"]':"_onAlphaSliderChange","change .coral3-ColorInput-editHex":"_onChangeHex","change .coral3-ColorInput-editRgba":"_onChangeRgba"},_render:function(){this.appendChild(Coral.templates.ColorInput.colorProperties.call(this._elements))},_onColorInputChange:function(){var a,b=this._colorinput.valueAsColor,c=this._elements.colorPreview2;b?(a=b.rgba,c.style.backgroundColor=b.rgbValue,c.setAttribute("aria-pressed","false"),c.setAttribute("aria-label",Coral.i18n.get("{value}, Color",{value:1===parseFloat(a.a)?b.value:b.rgbaValue})),this._elements.hexInput.value=b.hexValue.substr(1)):(c.setAttribute("aria-pressed","true"),c.setAttribute("aria-label",Coral.i18n.get("Color not set")),this._elements.hexInput.value="");var d,e,f,g,h,i=["red","green","blue","alpha"],j=i.length;Coral.commons.ready(this,function(c){for(d=0;d<j;d++)e=i[d],f=e.substr(0,1),g=d===j-1,h=g?100:127,b&&(h=a?g?parseInt(100*a[f],10):a[f]:""),c._elements[e+"Slider"].value=c._elements[e+"Input"].value=h}),c===document.activeElement&&(c.blur(),setTimeout(function(){c.focus()},100))},_onRedSliderChange:function(a){this._elements.redInput.value=this._elements.redSlider.value,this._onChangeRgba(a)},_onGreenSliderChange:function(a){this._elements.greenInput.value=this._elements.greenSlider.value,this._onChangeRgba(a)},_onBlueSliderChange:function(a){this._elements.blueInput.value=this._elements.blueSlider.value,this._onChangeRgba(a)},_onAlphaSliderChange:function(a){this._elements.alphaInput.value=this._elements.alphaSlider.value,this._onChangeRgba(a)},_onChangeHex:function(a){a.stopPropagation();var b="#"+this._elements.hexInput.value,c=new Coral.Color;c.value=b,null===c.hex?(this._elements.hexInput.value="",null!==this._colorinput.valueAsColor&&(Coral.ColorInput.AbstractSubview._lastValidColor=this._colorinput.valueAsColor),this._colorinput._setActiveColor(null)):this._colorinput._setActiveColor(c)},_onChangeRgba:function(a){a.stopPropagation();var b=parseInt(this._elements.redInput.value,10),c=parseInt(this._elements.greenInput.value,10),d=parseInt(this._elements.blueInput.value,10),e=parseInt(this._elements.alphaInput.value,10),f=!0;if((isNaN(b)||b<0||b>255)&&(f=!1,this._elements.redInput.value=""),(isNaN(c)||c<0||c>255)&&(f=!1,this._elements.greenInput.value=""),(isNaN(d)||d<0||d>255)&&(f=!1,this._elements.blueInput.value=""),(isNaN(e)||e<0||e>100)&&(f=!1,this._elements.alphaInput.value=""),f){var g=new Coral.Color;g.rgba={r:b,g:c,b:d,a:e/100},this._colorinput._setActiveColor(g)}}})}(),function(){"use strict";var a="coral-colorinput-swatch";Coral.register({name:"ColorInput.Swatches",tagName:"coral-colorinput-swatches",className:"coral3-ColorInput-swatches",extend:Coral.ColorInput.AbstractSubview,mixins:[Coral.mixin.selectionList({itemTagName:a,allowSingleModeDeselect:!0,forceSelection:!1,supportMultiple:!1})],events:{"click coral-colorinput-swatch":"_onSwatchClicked","keydown .coral3-ColorInput-swatch":"_onKeyDown","capture:focus coral-colorinput-swatch":"_onFocus"},_render:function(){this.appendChild(Coral.templates.ColorInput.swatchesHeader.call(this._elements)),this.setAttribute("aria-labelledby",this._elements.swatchesHeaderTitle.id)},_beforeOverlayOpen:function(){var a=this._colorinput.items.getAll(),b=!1;if(this._cachedColorElements){if(this._cachedColorElements.length!==a.length)b=!0;else if(this._cachedColorElements.length===a.length)for(var c=0;c<a.length;c++)if(this._cachedColorElements[c]!==a[c]){b=!0;break}}else b=!0;this._cachedColorElements=a,b&&this._layoutColorSwatch(),this._ensureKeyboardAccess()},_onColorInputChange:function(){this._ensureKeyboardAccess()},_ensureKeyboardAccess:function(){if(!this.querySelector("coral-colorinput-swatch[selected]")){var a=this.querySelector("coral-colorinput-swatch");a&&(a.tabIndex=0)}},_layoutColorSwatch:function(){this._elements.swatchesContainer.innerHtml="";for(var a=this._colorinput.items.getAll(),b=a.length,c=!1,d=0;d<b;d++){var e=a[d],f=new Coral.ColorInput.Swatch;this._elements.swatchesContainer.appendChild(f),f.targetColor=e,e.selected&&(f.selected=e.selected,c=!0),f.setAttribute("aria-selected",f.selected),f.tabIndex=f.selected?0:-1}c||this._ensureKeyboardAccess()},_onSwatchClicked:function(b){b.stopPropagation();var c=b.target,d=c.closest(a);if(!d.selected){var e=new Coral.Color;e.value=d.targetColor?d.targetColor.value:"",this._colorinput._setActiveColor(e),d.selected=!0}d.firstChild.focus()},_onKeyDown:function(a){var b=this._colorinput._elements.overlay;if(b.open){var c=this.items.getAll(),d=c.indexOf(a.matchedTarget),e=!0,f=d;switch(a.which){case 13:Coral.commons.nextFrame(function(){b.open=!1});break;case 37:f-=1;break;case 38:f-=4;break;case 39:f+=1;break;case 40:f+=4;break;default:e=!1}if(e){if(a.preventDefault(),f<0||f>=c.length)return;var g=c[f],h=new Coral.Color;h.value=g.targetColor?g.targetColor.value:"",this._colorinput._setActiveColor(h),g.selected=!0,g.firstChild.focus()}}},_onFocus:function(a){for(var b=this.items.getAll(),c=0;c<b.length;c++){var d=b[c];d.contains(a.matchedTarget)||(d.tabIndex=-1)}a.matchedTarget.tabIndex=0}})}(),function(){"use strict";Coral.register({name:"ColorInput.Swatch",tagName:"coral-colorinput-swatch",className:"coral3-ColorInput-swatch",extend:Coral.ColorInput.AbstractSubview,mixins:[Coral.mixin.selectionList.Item({listSelector:"coral-colorinput-swatches",alwaysEnabled:!0})],properties:{targetColor:{"default":null,attribute:"targetcolor",set:function(a){"string"==typeof a&&(a=this.querySelector(a)),this._targetColor=a},sync:function(){var a="",b="";if(this._targetColor){var c=new Coral.Color;c.value=this._targetColor.value,a=c.rgbaValue,b=c.hexValue}a?(this._elements.colorButton.style.backgroundColor=a,this._elements.colorButton.label.textContent=b,this.setAttribute("aria-value",b)):(this._elements.colorButton.classList.add("coral3-ColorInput-swatch-novalue"),this._elements.colorButton.label.textContent=Coral.i18n.get("unset"),this.setAttribute("aria-value",""))}},disabled:Coral.property.proxy({path:"_elements.colorButton.disabled"}),selected:{sync:function(){this.selected?this._elements.colorButton.setAttribute("aria-label",Coral.i18n.get("checked")+" "+this._elements.colorButton.label.textContent):this._elements.colorButton.removeAttribute("aria-label")}},tabIndex:Coral.property.proxy({path:"_elements.colorButton.tabIndex"})},_render:function(){this._elements.colorButton=new Coral.Button,this._elements.colorButton.icon="check",this._elements.colorButton.type="button",this._elements.colorButton.setAttribute("role","presentation"),this._elements.colorButton.label.classList.add("u-coral-screenReaderOnly"),this.appendChild(this._elements.colorButton)},_onColorInputChange:function(){this.targetColor&&(this.selected=this.targetColor.selected)}})}(),window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.ColumnView=window.Coral.templates.ColumnView||{},window.Coral.templates.ColumnView.loadIndicator=function(a){var b=document.createElement("div");b.className+=" coral3-ColumnView-column-loading";var c=document.createTextNode("\n  ");b.appendChild(c);var d=document.createElement("coral-wait");d.setAttribute("centered",""),b.appendChild(d);var e=document.createTextNode("\n");return b.appendChild(e),b},function(){"use strict";function a(b,c,d,e){if(!(d<=0)){var f=c-b.scrollLeft,g=f/d*10;window.setTimeout(function(){b.scrollLeft=b.scrollLeft+g,b.scrollLeft===c?e&&e():a(b,c,d-10)},10)}}var b={NONE:"none",SINGLE:"single",MULTIPLE:"multiple"},c="coral3-ColumnView";Coral.register({name:"ColumnView",tagName:"coral-columnview",className:c,events:{"global:keyup":"_onGlobalKeyUp","global:keydown":"_onGlobalKeyDown","key:up":"_onKeyUp","key:down":"_onKeyDown","key:right":"_onKeyRight","key:left":"_onKeyLeft","key:shift+up":"_onKeyShiftAndUp","key:shift+down":"_onKeyShiftAndDown","key:space":"_onKeySpace","coral-columnview-column:_loaditems":"_onColumnLoadItems","coral-columnview-column:_activeitemchanged":"_onColumnActiveItemChanged","coral-columnview-column:_selecteditemchanged":"_onColumnSelectedItemChanged"},properties:{columns:{get:function(){return this._columns||(this._columns=new Coral.ColumnView.Collection({host:this,itemTagName:"coral-columnview-column"})),this._columns},set:function(){}},items:{get:function(){return this._items||(this._items=new Coral.ColumnView.Collection({host:this,itemTagName:"coral-columnview-item"})),this._items},set:function(){}},selectionMode:{"default":b.NONE,attribute:"selectionmode",validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(b)],set:function(a){this._selectionMode=a,this.columns.getAll().forEach(function(b){b.setAttribute("_selectionmode",a)})},sync:function(){this.classList.remove(this._className+"--selection"),this.selectionMode!==Coral.ColumnView.selectionMode.NONE&&this.classList.add(this._className+"--selection"),this.setAttribute("aria-multiselectable",this.selectionMode===Coral.ColumnView.selectionMode.MULTIPLE)}},selectedItem:{get:function(){return this.selectionMode!==b.NONE?this.items.getFirstSelected():null},set:function(){}},selectedItems:{get:function(){return this.selectionMode!==b.NONE?this.items.getSelected():[]},set:function(){}},activeItem:{get:function(){return this.items.getLastActive()},set:function(){}}},_onColumnActiveItemChanged:function(a){if(a.stopImmediatePropagation(),!this._bulkSelectionChange){var b=a.target;if(this._handleKeyboardMultiselect(null),this._bulkSelectionChange=!0,a.detail.activeItem){this.items.deselectAll();for(var c=b.nextElementSibling;c;)Array.prototype.forEach.call(c.querySelectorAll("coral-columnview-item[active]"),function(a){a.removeAttribute("active")}),c=c.nextElementSibling}else this._afterItemSelectedInColumn(b);this._bulkSelectionChange=!1,this._validateColumnViewChange()}},_onColumnLoadItems:function(a){a.stopImmediatePropagation(),this.trigger("coral-columnview:loaditems",{column:a.target,start:a.detail.start,item:a.detail.item})},_onColumnSelectedItemChanged:function(a){a.stopImmediatePropagation(),this._bulkSelectionChange||this.selectionMode===b.NONE||(this._bulkSelectionChange=!0,this._oldSelection.forEach(function(b){a.detail.selection.indexOf(b)===-1&&b.removeAttribute("selected")}),this._bulkSelectionChange=!1,this._validateColumnViewChange())},_onGlobalKeyUp:function(a){16===a.keyCode&&this.classList.remove("is-unselectable")},_onGlobalKeyDown:function(a){16===a.keyCode&&this.classList.add("is-unselectable")},_onKeyShiftAndUp:function(a){a.preventDefault();var b=this._oldSelection;if(this._isKeyBoardMultiselect=!0,0===b.length){var c=this.activeItem;c&&c.setAttribute("selected","")}var d,e=this._items._getSelectedItems(),f=this._lastSelected;if(f){if(f.item){if(d=f.item,d.matches(":first-child"))return void(this._isKeyBoardMultiselect=!1);f.direction&&"up"!==f.direction?(d!==f.firstSelectedItem?d.removeAttribute("selected"):f.direction="up",d=d.previousElementSibling,d.setAttribute("selected","")):(d=d.previousElementSibling,d.setAttribute("selected",""))}}else d=e[0].previousElementSibling,d.setAttribute("selected","");this._lastSelected={item:d,direction:f&&f.direction?f.direction:"up",firstSelectedItem:f&&f.firstSelectedItem?f.firstSelectedItem:d.nextElementSibling},this._isKeyBoardMultiselect=!1},_onKeyShiftAndDown:function(a){a.preventDefault();var b=this._oldSelection;if(this._isKeyBoardMultiselect=!0,0===b.length){var c=this.activeItem;c&&c.setAttribute("selected","")}var d,e=this._items._getSelectedItems(),f=this._lastSelected;if(f){if(f.item){if(d=f.item,d.matches(":last-child"))return void(this._isKeyBoardMultiselect=!1);f.direction&&"down"!==f.direction?(d!==f.firstSelectedItem?d.removeAttribute("selected"):f.direction="down",d=d.nextElementSibling,d.setAttribute("selected","")):(d=d.nextElementSibling,d.setAttribute("selected",""))}}else d=e[e.length-1].nextElementSibling,d.setAttribute("selected","");this._lastSelected={item:d,direction:f&&f.direction?f.direction:"down",firstSelectedItem:f&&f.firstSelectedItem?f.firstSelectedItem:d.previousElementSibling},this._isKeyBoardMultiselect=!1},_onKeyUp:function(a){a.preventDefault();var b,c=this._oldSelection;if(0!==c.length){var d=c[0];b=d.previousElementSibling,b&&(b=d)}else b=null===this._oldActiveItem?this.items._getSelectableItems().pop():this._oldActiveItem.previousElementSibling;b.click()},_onKeyDown:function(a){a.preventDefault();var b,c=this._oldSelection;if(0!==c.length){var d=c[c.length-1];b=d.nextElementSibling,b||(b=d)}else b=null===this._oldActiveItem?this.items._getSelectableItems()[0]:this._oldActiveItem.nextElementSibling;b.click()},_onKeyRight:function(a){a.preventDefault();var b=this.activeItem.closest("coral-columnview-column").nextElementSibling;b&&Coral.commons.ready(b,function(){b.items._getSelectableItems()[0].click()})},_onKeyLeft:function(a){a.preventDefault();var b,c=this._oldSelection;b=0!==c.length?c[0].closest("coral-columnview-column").previousElementSibling:this.activeItem.closest("coral-columnview-column").previousElementSibling,b&&Coral.commons.ready(b,function(){if(b.activeItem)b.activeItem.click();else{var a=b.items._getSelectedItems()[0];a?a.click():b.items._getSelectableItems()[0].click()}})},_onKeySpace:function(a){a.preventDefault();var b=this._oldSelection;if(0!==b.length)b[0].setAttribute("active","");else{var c=this.activeItem;c&&c.setAttribute("selected","")}},_arraysAreDifferent:function(a,b){var c=[];return b.length===a.length&&(c=b.filter(function(b){return a.indexOf(b)===-1})),b.length!==a.length||0!==c.length},_handleKeyboardMultiselect:function(a){this._isKeyBoardMultiselect||(this._lastSelected=void 0,a&&(this._lastSelected={item:a,direction:null,firstSelectedItem:a}))},_scrollColumnIntoView:function(b,c,d){var e,f=0;if(this.contains(b)){var g=this,h=function(){c&&g._removeEmptyColumnsWithSmoothTransition(d)};if(b.getBoundingClientRect().left+b.offsetWidth>=this.offsetWidth){for(var i=b.nextElementSibling;i;)i.parentNode.removeChild(i),i=b.nextElementSibling;f=this.scrollWidth-this.offsetWidth,e=f-this.scrollLeft,a(this,f,e,h)}else c&&this._removeEmptyColumnsWithSmoothTransition(d)}},_afterItemSelectedInColumn:function(a){this._emptyColumnsNextToColumn(a),this._scrollColumnIntoView(a,!0,!0)},_emptyColumnsNextToColumn:function(a){if(null!==a)for(var b=a.nextElementSibling;b&&b.innerHTML.length;)b.innerHTML="",b=b.nextElementSibling},_removeEmptyColumnsWithSmoothTransition:function(a){var b=Array.prototype.filter.call(this.querySelectorAll("coral-columnview-column, coral-columnview-preview"),function(a){return!a.firstChild}),c=this;b.forEach(function(d,e){d.style.visibility="hidden",d.classList.add("is-collapsing"),Coral.commons.transitionEnd(d,function(){d.remove(),e===b.length-1&&a&&c._validateNavigation(c.columns.last())}),d.style.width=0})},_triggerCollectionEvents:function(a,b){for(var c,d=a.length,e=0;e<d;e++)c=a[e],"CORAL-COLUMNVIEW-COLUMN"===c.tagName&&(c.setAttribute("_selectionmode",this.selectionMode),this.trigger("coral-collection:add",{item:c}));for(var f=b.length,g=0;g<f;g++)c=b[g],"CORAL-COLUMNVIEW-COLUMN"===c.tagName&&this.trigger("coral-collection:remove",{item:c})},_setStateFromDOM:function(){this._oldActiveItem=this.activeItem,this._oldSelection=this.selectedItems},_handleMutation:function(a){for(var b=a.length,c=0;c<b;c++){var d=a[c];this._triggerCollectionEvents(d.addedNodes,d.removedNodes)}this._setStateFromDOM()},_validateColumnViewChange:function(){var a=this.activeItem,c=this._oldActiveItem||null;if(a!==c&&(this.trigger("coral-columnview:activeitemchange",{activeItem:a,oldActiveItem:c}),this._oldActiveItem=a),this.selectionMode!==b.NONE){var d=this.selectedItems,e=this._oldSelection||[],f=d.filter(function(a){return e.indexOf(a)===-1});this._handleKeyboardMultiselect(f.length>0?f[0]:null),this._arraysAreDifferent(d,e)&&(this.trigger("coral-columnview:change",{selection:d,oldSelection:e}),this._oldSelection=d)}},_initialize:function(){this.setAttribute("role","tree"),this.setAttribute("tabindex","0"),this._bulkSelectionChange=!1,this._observer=new MutationObserver(this._handleMutation.bind(this)),this._observer.observe(this,{childList:!0}),this._setStateFromDOM()},focus:function(){var a=this.selectedItems[0]||this.activeItem;a&&a.focus()},setNextColumn:function(a,b,c){c="undefined"==typeof c||c;var d=b||null;if(null!==d&&this.contains(d)){var e=d.nextElementSibling;if(e){this._emptyColumnsNextToColumn(d);var f=e.nextElementSibling;
this.removeChild(e),this.insertBefore(a,f)}else this.appendChild(a)}else this.appendChild(a);var g=this;Coral.commons.ready(a,function(){c&&g._scrollColumnIntoView(a,!0,!1),g._validateNavigation(a)})},_validateNavigation:function(a){"CORAL-COLUMNVIEW-PREVIEW"===a.tagName&&0!==this._oldSelection.length||this.trigger("coral-columnview:navigate",{activeItem:this.activeItem,column:a})}}),Coral.ColumnView.selectionMode=b}(),function(){"use strict";var a=function(a){this._host=a.host,this._target=a.target||this._host,this._itemTagName=a.itemTagName};a.prototype=Object.create(Coral.Collection.prototype),a.prototype.add=function(a,b){if(!(a instanceof HTMLElement)){var c=a;a=document.createElement(this._itemTagName),a.set(c,!0)}return this._target.insertBefore(a,b),a},a.prototype.getAll=function(){return Array.prototype.slice.call(this._host.getElementsByTagName(this._itemTagName))},a.prototype.getSelected=function(){return this._getSelectedItems()},a.prototype.getFirstSelected=function(){return this._getSelectedItems()[0]||null},a.prototype.getLastSelected=function(){return this._getSelectedItems().pop()||null},a.prototype.getFirstActive=function(){return this._getActiveItems()[0]||null},a.prototype.getLastActive=function(){return this._getActiveItems().pop()||null},a.prototype.deselectAll=function(){this._getAllItems().forEach(function(a){a.hasAttribute("selected")&&a.removeAttribute("selected")})},a.prototype.deselectAllExcept=function(a){this._getAllItems().forEach(function(b){b.hasAttribute("selected")&&b!==a&&b.removeAttribute("selected")})},a.prototype.deselectAllExceptLast=function(){this._getAllItems().filter(function(a){return a.hasAttribute("selected")}).slice(0,-1).forEach(function(a){a.removeAttribute("selected")})},a.prototype.deselectAndDeactivateAll=function(){this._getAllItems().forEach(function(a){(a.hasAttribute("selected")||a.hasAttribute("active"))&&(a.removeAttribute("active"),a.removeAttribute("selected"))})},a.prototype.deselectAndDeactivateAllExcept=function(a){this._getAllItems().forEach(function(b){(b.hasAttribute("selected")||b.hasAttribute("active"))&&(b.removeAttribute("selected"),b!==a&&b.removeAttribute("active"))})},a.prototype.deactivateAll=function(a){this._getAllItems().forEach(function(a){a.hasAttribute("active")&&a.removeAttribute("active")})},a.prototype.deactivateAllExcept=function(a){this._getAllItems().forEach(function(b){b.hasAttribute("active")&&b!==a&&b.removeAttribute("active")})},a.prototype.deactivateAllExceptFirst=function(){this._getAllItems().filter(function(a){return a.hasAttribute("active")}).slice(1).forEach(function(a){a.removeAttribute("active")})},a.prototype._getAllItems=function(){return this.getAll()},a.prototype._getSelectableItems=function(){return this.getAll().filter(function(a){return!(a.hasAttribute("disabled")||a.hasAttribute("hidden"))})},a.prototype._getSelectedItems=function(){return this.getAll().filter(function(a){return a.hasAttribute("selected")&&!a.hasAttribute("disabled")})},a.prototype._getActiveItems=function(){return this.getAll().filter(function(a){return a.hasAttribute("active")&&!a.hasAttribute("disabled")})},Coral.ColumnView.Collection=a}(),function(){"use strict";var a=100,b=48;Coral.register({name:"ColumnView.Column",tagName:"coral-columnview-column",className:"coral3-ColumnView-column",events:{"capture:scroll coral-columnview-column-content":"_onContentScroll","click coral-columnview-column-content":"_onColumnContentClick","click coral-columnview-item":"_onItemClick","click coral-columnview-item-thumbnail":"_onItemThumbnailClick","coral-columnview-item:_activechanged coral-columnview-item":"_onItemActiveChange","coral-columnview-item:_selectedchanged coral-columnview-item":"_onItemSelectedChange"},properties:{activeItem:{get:function(){return this.items.getFirstActive()},set:function(){}},content:Coral.property.contentZone({handle:"content",tagName:"coral-columnview-column-content",defaultContentZone:!0,insert:function(a){this.appendChild(a)}}),items:{get:function(){return this._items||(this._items=new Coral.ColumnView.Collection({host:this,target:this.content,itemTagName:"coral-columnview-item"})),this._items},set:function(){}},selectedItem:{get:function(){return this._selectionMode!==Coral.ColumnView.selectionMode.NONE?this.items.getFirstSelected():null},set:function(){}},selectedItems:{get:function(){return this._selectionMode!==Coral.ColumnView.selectionMode.NONE?this.items.getSelected():[]},set:function(){}},_selectionMode:{attribute:"_selectionmode",validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(Coral.ColumnView.selectionMode)],set:function(a){this.__selectionMode=a,this._setStateFromDOM()}},_lastSelectedItems:{get:function(){return this.__lastSelectedItems||this.selectedItems},set:function(a){this.__lastSelectedItems=a}}},_onItemClick:function(a){a.matchedTarget.hasAttribute("active")?this._onItemActiveChange(a):a.matchedTarget.setAttribute("active","")},_onItemThumbnailClick:function(a){if(this._selectionMode&&this._selectionMode!==Coral.ColumnView.selectionMode.NONE){a.stopPropagation();var b=a.matchedTarget.parentElement,c=b.hasAttribute("selected");if(!c)if(this._selectionMode===Coral.ColumnView.selectionMode.SINGLE)b.setAttribute("active","");else if(a.shiftKey&&this._selectionMode===Coral.ColumnView.selectionMode.MULTIPLE){var d=this._lastSelectedItems[this._lastSelectedItems.length-1];if(d){for(var e=this.items.getAll(),f=e.indexOf(d),g=e.indexOf(b),h=g<f,i=[],j=f;g!==j;)j=h?j-1:j+1,i.push(e[j]);i.forEach(function(a){a!==b&&a.set("selected",!0,!0)})}}b[c?"removeAttribute":"setAttribute"]("selected","")}},_onItemActiveChange:function(a){if(a.stopImmediatePropagation(),!this._bulkSelectionChange){var b=a.matchedTarget;this._bulkSelectionChange=!0,this.items.deselectAndDeactivateAllExcept(b),this._bulkSelectionChange=!1,this._validateColumnChange(b),this._loadItems(0,b)}},_onItemSelectedChange:function(a){a.stopImmediatePropagation();var b=a.target,c=b.selected;if(c)this._lastSelectedItems.push(b);else{var d=this._lastSelectedItems.indexOf(b);d!==-1&&(this._lastSelectedItems=this._lastSelectedItems.splice(d,1))}this._bulkSelectionChange||(c&&(this._bulkSelectionChange=!0,this.items.deactivateAll(),this._selectionMode===Coral.ColumnView.selectionMode.SINGLE&&this.items.deselectAllExcept(b),this._bulkSelectionChange=!1),this._validateColumnChange())},_tryToLoadAdditionalItems:function(){if(!this._bulkCollectionChange){this._bulkCollectionChange=!0;var a=this;setTimeout(function(){a._bulkCollectionChange=!1,a._loadFittingAdditionalItems()},0)}},_onContentScroll:function(b){clearTimeout(this._scrollTimeout),this._scrollTimeout=setTimeout(this._onDebouncedScroll,a)},_onColumnContentClick:function(a){if(a.target===a.matchedTarget){if(a.preventDefault(),this._bulkSelectionChange)return!1;this._bulkSelectionChange=!0,this.items.deselectAndDeactivateAll(),this._bulkSelectionChange=!1,this._validateColumnChange()}},_onDebouncedScroll:function(){var a=20;this.content.scrollTop+this.offsetHeight>=this.content.scrollHeight-a&&this._loadItems(this.items.length,void 0)},_arraysAreDifferent:function(a,b){var c=[];return b.length===a.length&&(c=b.filter(function(b){return a.indexOf(b)===-1})),b.length!==a.length||0!==c.length},_validateColumnChange:function(a){var b=this.activeItem,c=this._oldActiveItem||null;b===c&&a!==b||(this.trigger("coral-columnview-column:_activeitemchanged",{activeItem:b,oldActiveItem:c}),this._oldActiveItem=b);var d=this.selectedItems,e=this._oldSelection;this._arraysAreDifferent(d,e)&&(this.trigger("coral-columnview-column:_selecteditemchanged",{selection:d,oldSelection:e}),this._oldSelection=d)},_loadFittingAdditionalItems:function(){var a=this.items.length,c=a*b;c<=this.offsetHeight&&this._loadItems(a,void 0)},_loadItems:function(a,b){b&&!b.hasAttribute("active")||this.trigger("coral-columnview-column:_loaditems",{start:a,item:b})},attachedCallback:function(){Coral.Component.prototype.attachedCallback.call(this);var a=this;setTimeout(function(){Coral.commons.ready(a,function(){a._loadFittingAdditionalItems()})},0)},_setStateFromDOM:function(){this._selectionMode&&(this._selectionMode===Coral.ColumnView.selectionMode.SINGLE?this.items.deselectAllExceptLast():this._selectionMode===Coral.ColumnView.selectionMode.NONE&&this.items.deselectAll(),this.items.deactivateAllExceptFirst())},_handleMutation:function(a){for(var b=a.length,c=0;c<b;c++){var d=a[c];this._triggerCollectionEvents(d.addedNodes,d.removedNodes)}this._setStateFromDOM(),this._validateColumnChange(),this._tryToLoadAdditionalItems()},_triggerCollectionEvents:function(a,b){for(var c,d=a.length,e=0;e<d;e++)c=a[e],"CORAL-COLUMNVIEW-ITEM"===c.tagName&&this.trigger("coral-collection:add",{item:c});for(var f=b.length,g=0;g<f;g++)c=b[g],"CORAL-COLUMNVIEW-ITEM"===c.tagName&&this.trigger("coral-collection:remove",{item:c})},_render:function(){var a=this.querySelector("coral-columnview-column-content");if(null===a)for(a=document.createElement("coral-columnview-column-content");this.firstChild;)a.appendChild(this.firstChild);this.content=a},_initialize:function(){this.setAttribute("role","group"),this._bulkSelectionChange=!1,this._onDebouncedScroll=this._onDebouncedScroll.bind(this),this._observer=new MutationObserver(this._handleMutation.bind(this)),this._observer.observe(this._elements.content,{childList:!0}),this._setStateFromDOM(),this._oldSelection=this.selectedItems,this._oldActiveItem=this.activeItem}}),Coral.ColumnView.Column.Content=function(){return document.createElement("coral-columnview-column-content")}}(),function(){"use strict";var a={DEFAULT:"default",DRILLDOWN:"drilldown"},b="coral3-ColumnView-item",c=[];for(var d in a)c.push(b+"--"+a[d]);Coral.register({name:"ColumnView.Item",tagName:"coral-columnview-item",className:b,properties:{content:Coral.property.contentZone({handle:"content",tagName:"coral-columnview-item-content",defaultContentZone:!0,insert:function(a){this.appendChild(a)}}),thumbnail:Coral.property.contentZone({handle:"thumbnail",tagName:"coral-columnview-item-thumbnail",insert:function(a){this.insertBefore(a,this.content||null)}}),variant:{"default":a.DEFAULT,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(a)],sync:function(){this.classList.remove.apply(this.classList,c),this.variant!==Coral.ColumnView.Item.variant.DEFAULT&&this.classList.add(this._className+"--"+this.variant)}},icon:{"default":"",transform:Coral.transform.string,sync:function(){this.icon&&(this._elements.icon||(this._elements.icon=document.createElement("coral-icon")),this._elements.icon.icon=this.icon,this._elements.icon.size=Coral.Icon.size.SMALL,this._elements.thumbnail.innerHTML="",this._elements.thumbnail.appendChild(this._elements.icon))}},selected:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,trigger:"coral-columnview-item:_selectedchanged",sync:function(){this.classList.toggle("is-selected",this.selected),this.setAttribute("aria-selected",this.selected||this.active)}},active:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,trigger:"coral-columnview-item:_activechanged",sync:function(){this.classList.toggle("is-active",this.active),this.setAttribute("aria-selected",this.active||this.selected)}}},_render:function(){var a=this.querySelector("coral-columnview-item-thumbnail")||document.createElement("coral-columnview-item-thumbnail"),b=this.querySelector("coral-columnview-item-content");if(a.parentNode||this.insertBefore(a,this.firstChild||null),null===b)for(b=document.createElement("coral-columnview-item-content");this.firstChild;)b.appendChild(this.firstChild);this.thumbnail=a,this.content=b},_initialize:function(){this.setAttribute("role","treeitem")}}),Coral.ColumnView.Item.variant=a,Coral.ColumnView.Item.Content=function(){return document.createElement("coral-columnview-item-content")},Coral.ColumnView.Item.Thumbnail=function(){return document.createElement("coral-columnview-item-thumbnail")}}(),function(){"use strict";Coral.register({name:"ColumnView.Preview",tagName:"coral-columnview-preview",className:"coral3-ColumnView-column",properties:{content:Coral.property.contentZone({handle:"content",tagName:"coral-columnview-preview-content",defaultContentZone:!0,insert:function(a){this.appendChild(a)}})},_render:function(){var a=this.querySelector("coral-columnview-preview-content");if(null===a)for(a=document.createElement("coral-columnview-preview-content");this.firstChild;)a.appendChild(this.firstChild);this.content=a}}),Coral.ColumnView.Preview.Content=function(){return document.createElement("coral-columnview-preview-content")},Coral.ColumnView.Preview.Asset=function(){return document.createElement("coral-columnview-preview-asset")},Coral.ColumnView.Preview.Label=function(){return document.createElement("coral-columnview-preview-label")},Coral.ColumnView.Preview.Value=function(){return document.createElement("coral-columnview-preview-value")},Coral.ColumnView.Preview.Separator=function(){return document.createElement("coral-columnview-preview-separator")}}(),window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.CycleButton=window.Coral.templates.CycleButton||{},window.Coral.templates.CycleButton.base=function(a){var b=document.createDocumentFragment(),c=this.button=document.createElement("button","coral-button");c.id=Coral.commons.getUID(),c.setAttribute("handle","button"),c.className+=" coral3-CycleButton-button",c.setAttribute("is","coral-button"),c.setAttribute("variant","quiet"),c.setAttribute("iconsize","S");var d=document.createTextNode("\n  ");c.appendChild(d);var e=this.openIcon=document.createElement("coral-icon");e.setAttribute("handle","openIcon"),e.setAttribute("icon","chevronDown"),e.setAttribute("size","xs"),e.className+=" coral3-CycleButton-openIcon",c.appendChild(e);var f=document.createTextNode("\n");c.appendChild(f),b.appendChild(c);var g=document.createTextNode("\n");b.appendChild(g);var h=this.overlay=document.createElement("coral-overlay");h.setAttribute("handle","overlay"),h.className+=" coral3-CycleButton-overlay",h.setAttribute("returnfocus","on"),h.setAttribute("focusonshow","on"),h.setAttribute("trapfocus","on"),h.setAttribute("placement","bottom");var i=document.createTextNode("\n  ");h.appendChild(i);var j=this.selectList=document.createElement("coral-selectlist");j.setAttribute("handle","selectList"),j.id=Coral.commons.getUID(),h.appendChild(j);var k=document.createTextNode("\n  ");h.appendChild(k);var l=this.actionList=document.createElement("coral-buttonlist");l.setAttribute("handle","actionList"),l.setAttribute("hidden",""),h.appendChild(l);var m=document.createTextNode("\n");return h.appendChild(m),b.appendChild(h),b},function(){"use strict";var a=/[\t\n\r ]+/g,b="coral-cyclebutton-item",c="coral-cyclebutton-action",d={ICON:"icon",TEXT:"text",ICON_TEXT:"icontext"};Coral.register({name:"CycleButton",tagName:"coral-cyclebutton",className:"coral3-CycleButton",mixins:[Coral.mixin.selectionList({itemTagName:b,supportMultiple:!1,forceSelection:!0,role:"presentation"})],events:{"click :not(coral-cyclebutton-action)":"_onItemClick",'click button[is="coral-buttonlist-item"]':"_onActionClick","key:down [aria-expanded=false]":"_onItemClick","coral-selectlist:change":"_onSelectListChange","coral-cyclebutton-item:_iconchanged coral-cyclebutton-item[selected]":"_onSelectedItemPropertyChange","coral-cyclebutton-item:_displaymodechanged coral-cyclebutton-item[selected]":"_onSelectedItemPropertyChange","global:click":"_onGlobalClick","global:touchstart":"_onGlobalClick","global:key:escape":"_onEscapeKey"},properties:{icon:{"default":"",sync:function(){this.selectedItem&&this._renderSelectedItem(this.selectedItem)}},threshold:{"default":3,transform:Coral.transform.number,validate:[Coral.validate.valueMustChange,function(a,b){return null!==a&&a>-1}],sync:function(){this._checkExtended()}},actions:{set:function(){},get:function(){return this._actions||(this._actions=new Coral.Collection({host:this,itemTagName:c,itemSelector:c})),this._actions}},displayMode:{"default":d.ICON,attribute:"displaymode",reflectAttribute:!0,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(d)],sync:function(){this.selectedItem&&this._renderSelectedItem(this.selectedItem)}}},_onEscapeKey:function(a){this._elements.overlay._isTopOverlay()&&this._hideOverlay()},_onGlobalClick:function(a){if(this._elements.overlay.open){var b=this._elements.overlay.contains(a.target),c=this.contains(a.target);b||c||this._hideOverlay()}},_onItemAttached:function(){this._checkExtended()},_onItemDetached:function(){this._checkExtended()},_onItemClick:function(a){a.preventDefault();var c=this.items.getAll(),d=c.length;a.matchedTarget!==this._elements.button&&a.matchedTarget.tagName.toLowerCase()!==b||(this._isExtended()?this._elements.overlay.open?this._hideOverlay():(this._showOverlay(),this._focusItem(this.selectedItem._elements.selectListItem)):d>1&&(this._selectCycleItem(this.selectedItem.nextElementSibling||c[0]),this._focusItem(this._elements.button)))},_renderSelectedItem:function(b){if(b){var c=this.displayMode,e=b.icon||this.icon||"";if(b.displayMode!==Coral.CycleButton.Item.displayMode.INHERIT&&(c=b.displayMode),b.content.textContent.trim()&&e.trim()||(c=d.ICON_TEXT),c===d.ICON){this._elements.button.icon=e,this._elements.button.label.innerHTML="";var f=b.content.textContent.replace(a," ");this._elements.button.setAttribute("aria-label",f),this._elements.button.setAttribute("title",f)}else c===d.TEXT&&(this._elements.button.icon=""),c===d.ICON_TEXT&&(this._elements.button.icon=e),this._elements.button.label.innerHTML=b.content.innerHTML,this._elements.button.removeAttribute("aria-label"),this._elements.button.removeAttribute("title")}},_onItemSelected:function(a){a&&this._renderSelectedItem(a)},_onSelectedItemPropertyChange:function(a){a.stopImmediatePropagation(),this._renderSelectedItem(a.target)},_onSelectListChange:function(a){a.stopImmediatePropagation(),a.preventDefault();var b=a.detail.selection;if(b){var c=b._elements.originalItem;this._selectCycleItem(c),this._focusItem(this._elements.button),this._hideOverlay()}},_onActionClick:function(a){a.stopPropagation();var b=a.matchedTarget,c=b._elements.originalItem.trigger("click");c.defaultPrevented||this._hideOverlay()},_isExtended:function(){var a=this.actions.getAll().length>0;return this.threshold>0&&this.items.getAll().length>=this.threshold||a},_checkExtended:function(){var a=this._isExtended();if(this.classList.toggle("coral3-CycleButton--extended",a),a){var b=this._elements.selectList.id;this._elements.button.setAttribute("aria-owns",b),this._elements.button.setAttribute("aria-controls",b),this._elements.button.setAttribute("aria-haspopup",!0),this._elements.button.setAttribute("aria-expanded",!1)}else this._elements.button.removeAttribute("aria-owns"),this._elements.button.removeAttribute("aria-controls"),this._elements.button.removeAttribute("aria-haspopup"),this._elements.button.removeAttribute("aria-expanded")},_focusItem:function(a){a&&Coral.commons.nextFrame(function(){a.focus()})},_hideOverlay:function(){this._elements.button.setAttribute("aria-expanded",!1),this._elements.overlay.hide()},_getSelectListItem:function(a){var b=new Coral.SelectList.Item;if(b.content.innerHTML=a.content.innerHTML,a.icon){var c=(new Coral.Icon).set({icon:a.icon,size:Coral.Icon.size.SMALL});b.content.insertBefore(c,b.content.firstChild)}return b._elements.originalItem=a,a._elements.selectListItem=b,b},_getActionListItem:function(a){var b=new Coral.ButtonList.Item;return b.icon=a.icon,b.content.innerHTML=a.content.innerHTML,b._elements.originalItem=a,a._elements.buttonListItem=b,b},_populateLists:function(){var a,b,c=this._elements.selectList,d=this._elements.actionList,e=this.items.getAll(),f=this.actions.getAll(),g=e.length,h=f.length;c.items.clear(),d.items.clear();for(var i=0;i<g;i++){var j=e[i];a=this._getSelectListItem(j),c.items.add(a),a.set({disabled:j.disabled,selected:j.selected},!0)}if(h>0){for(var k=0;k<h;k++){var l=f[k];b=this._getActionListItem(l),d.items.add(b),b.disabled=l.disabled}this._elements.actionList.removeAttribute("hidden")}else this._elements.actionList.setAttribute("hidden",!0)},_selectCycleItem:function(a){a.selected=!0},_showOverlay:function(){this._elements.button.setAttribute("aria-expanded",!0),this._populateLists(),this._elements.overlay.show()},_render:function(){for(var a=this.querySelectorAll("[handle]"),b=0;b<a.length;++b){var c=a[b];c.parentNode===this&&this.removeChild(c)}this.insertBefore(Coral.templates.CycleButton.base.call(this._elements),this.firstChild),this._elements.overlay.target=this._elements.button,this._elements.overlay.returnFocusTo(this._elements.button)},_initialize:function(){this._elements.button.setAttribute("aria-expanded",!1),this._checkExtended();var a=this;Coral.commons.nextFrame(function(){a._onItemSelected(a.selectedItem)})}}),Coral.CycleButton.displayMode=d}(),function(){"use strict";var a={ICON:"icon",TEXT:"text",ICON_TEXT:"icontext",INHERIT:"inherit"};Coral.register({name:"CycleButton.Item",tagName:"coral-cyclebutton-item",mixins:[Coral.mixin.selectionList.Item({listSelector:"coral-cyclebutton"})],properties:{icon:{"default":"",reflectAttribute:!0,trigger:"coral-cyclebutton-item:_iconchanged"},content:{contentZone:!0,get:function(){return this},set:function(){}},displayMode:{"default":a.INHERIT,attribute:"displaymode",reflectAttribute:!0,trigger:"coral-cyclebutton-item:_displaymodechanged",validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(a)]}}}),Coral.CycleButton.Item.displayMode=a}(),function(){"use strict";Coral.register({name:"CycleButton.Action",tagName:"coral-cyclebutton-action",properties:{icon:{"default":"",reflectAttribute:!0},content:{contentZone:!0,get:function(){return this},set:function(){}}}})}(),window.Coral=window.Coral||{},window.Coral.strings=window.Coral.strings||{},window.Coral.strings["coralui-component-datepicker"]={"en-US":{Time:"Time",Calendar:"Calendar"},"de-DE":{Time:"Zeit",Calendar:"Kalender"},"fr-FR":{Time:"Heure",Calendar:"Calendrier"},"it-IT":{Time:"Ora",Calendar:"Calendario"},"ja-JP":{Time:"時間",Calendar:"カレンダー"},"es-ES":{Time:"Hora",Calendar:"Calendario"},"ko-KR":{Time:"시간",Calendar:"달력"},"zh-CN":{Time:"时间",Calendar:"日历"},"zh-TW":{Time:"時間",Calendar:"日曆"},"pt-BR":{Time:"Hora",Calendar:"Calendário"},"nl-NL":{Time:"Tijd",Calendar:"Kalender"},"da-DK":{Time:"Tid",Calendar:"Kalender"},"fi-FI":{Time:"Aika",Calendar:"Kalenteri"},"nb-NO":{Time:"Klokkeslett",Calendar:"Kalender"},"sv-SE":{Time:"Tid",Calendar:"Kalender"},"cs-CZ":{Time:"Čas",Calendar:"Kalendář"},"pl-PL":{Time:"Czas",Calendar:"Kalendarz"},"ru-RU":{Time:"Время",Calendar:"Календарь"},"tr-TR":{Time:"Zaman",Calendar:"Takvim"}},window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.Datepicker=window.Coral.templates.Datepicker||{},window.Coral.templates.Datepicker.base=function(a){var b=document.createDocumentFragment(),c=this.hiddenInput=document.createElement("input");c.setAttribute("type","hidden"),c.setAttribute("handle","hiddenInput"),b.appendChild(c);var d=document.createTextNode("\n");b.appendChild(d);var e=this.input=document.createElement("input","coral-textfield");e.setAttribute("is","coral-textfield"),e.setAttribute("type","text"),e.setAttribute("handle","input"),e.className+=" coral-InputGroup-input",e.setAttribute("role","textbox"),b.appendChild(e);var f=document.createTextNode("\n");b.appendChild(f);var g=this.toggleButtonContainer=document.createElement("div");g.className+=" coral-InputGroup-button",g.setAttribute("handle","toggleButtonContainer");var h=document.createTextNode("\n  ");g.appendChild(h);var i=this.toggle=document.createElement("button","coral-button");i.setAttribute("is","coral-button"),i.setAttribute("type","button"),i.setAttribute("icon","calendar"),i.setAttribute("iconsize","S"),i.setAttribute("handle","toggle"),i.setAttribute("aria-haspopup","true"),i.setAttribute("aria-label",Coral.i18n.get("Calendar")),i.setAttribute("title",Coral.i18n.get("Calendar")),g.appendChild(i);var j=document.createTextNode("\n");g.appendChild(j),b.appendChild(g);var k=document.createTextNode("\n");b.appendChild(k);var l=this.popover=document.createElement("coral-popover");return l.setAttribute("handle","popover"),l.id=Coral.commons.getUID(),l.setAttribute("alignmy","right top"),l.setAttribute("alignat","right bottom"),l.setAttribute("collision","fit"),b.appendChild(l),b},window.Coral.templates.Datepicker.popovercontent=function(a){var b=document.createDocumentFragment(),c=a="undefined"==typeof a?{}:a;c=a;var d=Coral.commons.getUID();a=c;var e=document.createTextNode("\n");b.appendChild(e);var f=this.calendar=document.createElement("coral-calendar");f.setAttribute("handle","calendar"),f.className+=" u-coral-borderless",f.setAttribute("aria-labelledby",d+"-calendar");var g=document.createTextNode("\n  ");f.appendChild(g);var h=document.createElement("span");h.id=d+"-calendar",h.className+=" u-coral-screenReaderOnly",h.setAttribute("hidden",""),h.textContent=Coral.i18n.get("Calendar"),f.appendChild(h);var i=document.createTextNode("\n");f.appendChild(i),b.appendChild(f);var j=document.createTextNode("\n");b.appendChild(j);var k=this.clockContainer=document.createElement("div");k.className+=" coral3-Datepicker-clockContainer",k.setAttribute("handle","clockContainer");var l=document.createTextNode("\n  ");k.appendChild(l);var m=this.clock=document.createElement("coral-clock");m.setAttribute("handle","clock"),m.setAttribute("aria-labelledby",d+"-clock");var n=document.createTextNode("\n    ");m.appendChild(n);var o=document.createElement("span");o.id=d+"-clock",o.className+=" u-coral-screenReaderOnly",o.setAttribute("hidden",""),o.textContent=Coral.i18n.get("Time"),m.appendChild(o);var p=document.createTextNode("\n  ");m.appendChild(p),k.appendChild(m);var q=document.createTextNode("\n");return k.appendChild(q),b.appendChild(k),b},function(){"use strict";function a(a,b){if("today"===a)return moment();if(moment.isMoment(a))return a.isValid()?a.clone():null;var c=moment(a,a instanceof Date?null:b);return c.isValid()?c:null}var b={DEFAULT:"default",QUIET:"quiet"},c="coral-InputGroup",d=[];for(var e in b)d.push(c+"--"+b[e]);var f={DATE:"date",DATETIME:"datetime",TIME:"time"},g=null!==navigator.userAgent.match(/iPhone|iPad|iPod|Android/i),h={date:"YYYY-MM-DD",datetime:"YYYY-MM-DD[T]HH:mmZ",time:"HH:mm"};Coral.register({name:"Datepicker",tagName:"coral-datepicker",className:c,mixins:[Coral.mixin.formField],events:{'click coral-calendar [handle="table"] a':"_onCalendarDayClick","change coral-calendar,coral-clock":"_onChange",'coral-overlay:beforeopen [handle="popover"]':"_onPopoverBeforeOpen",'coral-overlay:open [handle="popover"]':"_onPopoverOpenOrClose",'coral-overlay:close [handle="popover"]':"_onPopoverOpenOrClose","key:esc coral-clock input[is=coral-textfield]":"_onEscapeKey",'key:alt+down [handle="input"],[handle="toggle"]':"_onAltDownKey",'key:down [handle="toggle"]':"_onAltDownKey"},properties:{type:{"default":f.DATE,reflectAttribute:!0,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(f)],sync:function(){var a=this.type===f.TIME,b=this.type===f.DATE;this._elements.toggle.icon=a?"clock":"calendar";var c=a?Coral.i18n.get("Time"):Coral.i18n.get("Calendar");this._elements.toggle.setAttribute("aria-label",c),this._elements.toggle.setAttribute("title",c),this._elements.clockContainer.style.display=b?"none":"",this._elements.clockContainer.setAttribute("aria-hidden",b),this._elements.calendar.style.display=a?"none":"",this._elements.calendar.setAttribute("aria-hidden",a)},alsoSync:["_useNativeInput"]},displayFormat:{attribute:"displayformat",transform:function(a){return a=Coral.transform.string(a).trim(),""===a?h[this.type]:a},get:function(){return this._useNativeInput&&this.type!==f.DATETIME?h[this.type]:"undefined"==typeof this._displayFormat?h[this.type]:this._displayFormat},set:function(a){this._displayFormat=a,this._elements.clock.displayFormat=a},sync:function(){this._elements.input.value=this._getValueAsString(this._value,this.displayFormat)}},valueFormat:{attribute:"valueformat",transform:function(a){return a=Coral.transform.string(a).trim(),""===a?h[this.type]:a},get:function(){return"undefined"==typeof this._valueFormat?h[this.type]:this._valueFormat},set:function(a){this._valueFormat=a,this._elements.calendar.valueFormat=a,this._elements.hiddenInput.value=this.value}},valueAsDate:{attribute:null,transform:function(a){return a instanceof Date?moment(a):""},get:function(){var a=this._value;return"date"===this.type&&a&&(a=a.startOf("day")),a?a.toDate():null},set:function(a){this.value=a}},min:{get:function(){return this._elements.calendar.min},set:function(a){this._elements.calendar.min=a}},max:{get:function(){return this._elements.calendar.max},set:function(a){this._elements.calendar.max=a}},headerFormat:Coral.property.proxyAttr({handle:"calendar",attribute:"headerformat"}),startDay:Coral.property.proxyAttr({handle:"calendar",attribute:"startday"}),value:{transform:function(b){return a(b,this.valueFormat)},get:function(){return this._getValueAsString(this._value,this.valueFormat)},set:function(a){this._value=a,this._elements.calendar.valueAsDate=this.valueAsDate,this._elements.clock.valueAsDate=this.valueAsDate,this._elements.input.value=this._getValueAsString(this._value,this.displayFormat),this._elements.hiddenInput.value=this.value}},name:{get:function(a){return this._elements.hiddenInput.name},set:function(a){this._elements.hiddenInput.name=a}},disabled:{set:function(a){this._disabled=a,this.classList.toggle("is-disabled",this.disabled),this._elements.input.disabled=this.disabled,this._elements.hiddenInput.disabled=this.disabled,this._elements.toggle.disabled=this.disabled||this.readOnly}},invalid:{sync:function(){var a=this.invalid;this.classList.toggle("is-invalid",a),this._elements.input.invalid=a,this._elements.input.setAttribute("aria-invalid",a)}},readOnly:{set:function(a){this._readOnly=a,this._elements.input.readOnly=this.readOnly,this._elements.toggle.disabled=this.readOnly||this.disabled}},required:{set:function(a){this._required=a,this._elements.input.required=this.required}},labelledBy:{sync:function(){this.labelledBy?this.setAttribute("aria-labelledby",this.labelledBy):this.removeAttribute("aria-labelledby")}},placeholder:{reflectAttribute:!0,transform:Coral.transform.string,get:function(){return this._elements.input.placeholder},set:function(a){this._elements.input.placeholder=a}},variant:{"default":b.DEFAULT,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(b)],set:function(a){this._variant=a,this._elements.toggle.variant=a===b.DEFAULT?Coral.Button.variant.DEFAULT:Coral.Button.variant.QUIET,this._elements.input.variant=a},sync:function(){this.classList.remove.apply(this.classList,d),this.variant!==Coral.Datepicker.variant.DEFAULT&&this.classList.add(this._className+"--"+this.variant)}},_useNativeInput:{attribute:null,sync:function(){this._useNativeInput&&this.type!==f.DATETIME?(this._elements.toggle.hidden=!0,this._elements.input.setAttribute("type",this.type),this.removeAttribute("aria-haspopup"),this.removeAttribute("aria-expanded"),this.removeAttribute("aria-owns")):(this._elements.toggle.hidden=!1,this._elements.input.setAttribute("type","text"),this._elements.popover.parentNode!==this&&this.insertBefore(this._elements.popover,this.firstChild),this.setAttribute("aria-haspopup","true"),this.setAttribute("aria-expanded","false"),this.setAttribute("aria-owns",this._elements.popover.id))}}},_getLabellableElement:function(){return this._elements.input},_render:function(){for(var a=this.querySelectorAll("[handle]"),b=0;b<a.length;++b){var c=a[b];c.parentNode===this&&this.removeChild(c)}this.appendChild(Coral.templates.Datepicker.base.call(this._elements)),this._calendarFragment=Coral.templates.Datepicker.popovercontent.call(this._elements),
this._elements.popover.target=this._elements.toggle},_renderCalendar:function(){""===this._elements.popover.content.innerHTML&&(this._elements.popover.content.appendChild(this._calendarFragment),this._calendarFragment=void 0)},_initialize:function(){this._useNativeInput=g,this.setAttribute("role","datepicker")},_onPopoverBeforeOpen:function(a){this._elements.calendar._validateCalendar(),this._renderCalendar()},_onPopoverOpenOrClose:function(a){var b=this;this.setAttribute("aria-expanded",this._elements.popover.open),this._elements.popover.open&&Coral.commons.nextFrame(function(){b.type===f.TIME?b._elements.clock.focus():b._elements.calendar.focus()})},_onCalendarDayClick:function(){this._elements.popover.open=!1},_onInputChange:function(a){a.stopPropagation(),this.value=moment(a.target.value,this.displayFormat),this._validateValue(),this.trigger("change")},_onChange:function(a){a.stopPropagation(),this.value=this._mergeCalendarAndClockDates(!0),this._validateValue(),this.trigger("change")},_onEscapeKey:function(a){this._elements.popover.open=!1},_onAltDownKey:function(a){a.preventDefault(),this._elements.popover.open||(this._elements.popover.open=!0)},_validateValue:function(){this._elements.calendar._validateCalendar(),this.type===f.DATE?this.invalid=this._elements.calendar.invalid:this.type===f.TIME?this.invalid=this._elements.clock.invalid:this.invalid=this._elements.calendar.invalid||this._elements.clock.invalid},_mergeCalendarAndClockDates:function(a){var b=moment(this._elements.calendar.valueAsDate),c=this._elements.clock.valueAsDate;return a&&b&&!c&&this.type===f.DATETIME&&(c=moment().toDate()),c&&(b.isValid()||(b=moment()),b.hours(c.getHours()),b.minutes(c.getMinutes())),b},_getValueAsString:function(a,b){return a&&a.isValid()?a.format(b):""}}),Coral.Datepicker.variant=b,Coral.Datepicker.type=f}(),window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.Drawer=window.Coral.templates.Drawer||{},window.Coral.templates.Drawer.base=function(a){var b=document.createDocumentFragment(),c=this.slider=document.createElement("div");c.setAttribute("handle","slider"),c.className+=" coral3-Drawer-slider";var d=document.createTextNode("\n  ");c.appendChild(d);var e=this.contentWrapper=document.createElement("div");e.setAttribute("handle","contentWrapper"),e.className+=" coral3-Drawer-content",c.appendChild(e);var f=document.createTextNode("\n");c.appendChild(f),b.appendChild(c);var g=document.createTextNode("\n");b.appendChild(g);var h=document.createElement("div");h.className+=" coral3-Drawer-toggle";var i=document.createTextNode("\n  ");h.appendChild(i);var j=this.toggle=document.createElement("button","coral-button");j.className+=" coral3-Drawer-toggleButton",j.setAttribute("type","button"),j.setAttribute("handle","toggle"),j.setAttribute("is","coral-button"),j.setAttribute("variant","minimal"),j.setAttribute("icon","chevronDown"),j.setAttribute("iconSize","XS"),j.setAttribute("aria-label","coral-drawer"),h.appendChild(j);var k=document.createTextNode("\n");return h.appendChild(k),b.appendChild(h),b},function(){"use strict";var a={DOWN:"down",UP:"up"},b="coral3-Drawer",c=[];for(var d in a)c.push(b+"--"+a[d]);Coral.register({name:"Drawer",tagName:"coral-drawer",className:b,events:{"click .coral3-Drawer-toggleButton:not(:disabled)":"_onClick"},properties:{disabled:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){this.setAttribute("aria-disabled",this.disabled),this.classList.toggle("is-disabled",this.disabled),this._elements.toggle.disabled=this.disabled}},content:Coral.property.contentZone({handle:"content",tagName:"coral-drawer-content",defaultContentZone:!0,insert:function(a){this._elements.contentWrapper.appendChild(a)}}),direction:{"default":a.DOWN,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(a)],sync:function(){this.classList.remove.apply(this.classList,c),this.classList.add(this._className+"--"+this.direction),this._updateIcon()}},open:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){var a=this;a.setAttribute("aria-expanded",a.open),a._updateIcon();var b=a._elements.slider;a._animate?(Coral.commons.transitionEnd(b,function(){a.open&&(b.style.height=""),a.trigger("coral-drawer:"+(a.open?"open":"close"))}),a.open||(b.style.height=b.scrollHeight+"px"),Coral.commons.nextFrame(function(){b.style.height=a.open?b.scrollHeight+"px":0})):(a._animate=!0,a.open||(b.style.height=0))}}},_onClick:function(){this.open=!this.open},_updateIcon:function(){this.direction===a.UP?this._elements.toggle.icon=this.open?"chevronDown":"chevronUp":this.direction===a.DOWN&&(this._elements.toggle.icon=this.open?"chevronUp":"chevronDown")},_render:function(){var a=document.createDocumentFragment();a.appendChild(Coral.templates.Drawer.base.call(this._elements));var b=this.querySelector("coral-drawer-content")||document.createElement("coral-drawer-content");for(this.content=b;this.firstChild;)b.appendChild(this.firstChild);this.appendChild(a)}}),Coral.register({name:"Drawer.Content",tagName:"coral-drawer-content"}),Coral.Drawer.direction=a}(),window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.FileUpload=window.Coral.templates.FileUpload||{},window.Coral.templates.FileUpload.base=function(a){var b=this.input=document.createElement("input");return b.setAttribute("handle","input"),b.className+=" coral3-FileUpload-input is-unselectable",b.setAttribute("tabindex","-1"),b.setAttribute("name",""),b.setAttribute("type","file"),b.setAttribute("accept",""),b},function(){"use strict";var a=["loadstart","progress","load","error","loadend","readystatechange","abort","timeout"],b={POST:"POST",PUT:"PUT",PATCH:"PATCH"},c=Coral.validate.enumeration(b),d=function(a){return"string"==typeof a?a.toUpperCase():a};Coral.register({name:"FileUpload",tagName:"coral-fileupload",className:"coral3-FileUpload",mixins:[Coral.mixin.formField],events:{"click [coral-fileupload-submit]":"_onSubmitButtonClick","click [coral-fileupload-clear]":"clear","click [coral-fileupload-select]":"_showFileDialog","click [coral-fileupload-abort]":"abort","click [coral-fileupload-abortfile]":"_onAbortFileClick","click [coral-fileupload-removefile]":"_onRemoveFileClick","click [coral-fileupload-uploadfile]":"_onUploadFileClick","dragenter [coral-fileupload-dropzone]":"_onDragAndDrop","dragover [coral-fileupload-dropzone]":"_onDragAndDrop",'dragleave [handle="input"]':"_onDragAndDrop",'drop [handle="input"]':"_onDragAndDrop","capture:focus [coral-fileupload-select]":"_onButtonFocusIn",'capture:focus [handle="input"]':"_onInputFocusIn",'capture:blur [handle="input"]':"_onInputFocusOut"},properties:{disabled:{set:function(a){this._disabled=a,this._elements.input.disabled=this.disabled},sync:function(){this.classList.toggle("is-disabled",this.disabled),this._setElementState()}},invalid:{set:function(a){this._invalid=a,this._elements.input.setAttribute("aria-invalid",this.invalid)},sync:function(){this.classList.toggle("is-invalid",this.invalid),this._setElementState()}},readOnly:{set:function(a){this._readOnly=a,this._elements.input.disabled=this.readOnly},sync:function(){this.classList.toggle("is-readOnly",this.readOnly),this._setElementState()}},required:{set:function(a){this._elements.input.required=a},get:function(){return this._elements.input.required},sync:function(){this.classList.toggle("is-required",this.required),this._setElementState()}},value:{set:function(a){if(""!==a&&null!==a)throw new Error("Coral.FileUpload accepts a filename, which may only be programmatically set to the empty string.");this._clearQueue(),this._clearFileInputValue()},get:function(){var a=this._uploadQueue?this._getQueueItem(0):null;return a?"C:\\fakepath\\"+a.file.name:""}},values:{validate:[Coral.validate.valueMustChange,function(a){return Array.isArray(a)}],set:function(a){a.length?this.value=a[0]:this.value=""},get:function(){var a=this._uploadQueue.map(function(a){return"C:\\fakepath\\"+a.file.name});return a.length&&!this.multiple&&(a=[a[0]]),a}},labelledBy:{sync:function(){var a=this.labelledBy,b=[],c=this.querySelector("[coral-fileupload-select]");c&&b.push(c.id),a&&b.unshift(a),this._elements.input.setAttribute("aria-labelledby",b.join(" "))}},name:{get:function(){return this._elements.input.name},set:function(a){this._elements.input.name=a}},parameters:{"default":function(){return[]},attribute:null,validate:[Coral.validate.valueMustChange,function(a,b){return Array.isArray(a)&&a.every(function(a){return a&&a.name})}],sync:function(){this.async||(Array.prototype.forEach.call(this.querySelectorAll('input[type="hidden"]'),function(a){a.parentNode.removeChild(a)}),this.parameters.forEach(function(a){var b=document.createElement("input");b.type="hidden",b.name=a.name,b.value=a.value,this.appendChild(b)}.bind(this)))}},async:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,set:function(a){this._async=a,this._async||this._syncProp("parameters"),this._uploadQueue&&(this._clearQueue(),this._clearFileInputValue())}},action:{"default":"",attribute:"action",transform:Coral.transform.string,attributeTransform:Coral.transform.string,set:function(a){this._action=a,this._buttonAction=null}},method:{"default":b.POST,transform:d,validate:[Coral.validate.valueMustChange,c],set:function(a){this._method=a,this._buttonMethod=null}},multiple:Coral.property.proxy({reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,path:"_elements.input.multiple"}),sizeLimit:{"default":0,attribute:"sizelimit",transform:Coral.transform.number,attributeTransform:Coral.transform.number},accept:Coral.property.proxy({reflectAttribute:!0,path:"_elements.input.accept"}),autoStart:{"default":!1,attribute:"autostart",reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr},uploadQueue:{attribute:null,set:function(){}}},_onButtonFocusIn:function(a){var b=this._elements.input,c=a.matchedTarget;c.parentNode.insertBefore(b,c.nextElementSibling),window.setTimeout(function(){b.focus()},100)},_onInputFocusIn:function(a){var b=this.querySelector("[coral-fileupload-select]");b&&(b.tabIndex=-1,b.setAttribute("aria-hidden",!0),b.classList.add("is-focused"))},_onInputFocusOut:function(a){var b=this.querySelector("[coral-fileupload-select].is-focused");b.classList.remove("is-focused"),Coral.commons.nextFrame(function(){b.tabIndex=0,b.removeAttribute("aria-hidden")})},_onAbortFileClick:function(a){if(!this.async)throw new Error("Coral.FileUpload does not support aborting file(s) upload on synchronous mode.");var b=a.target.getAttribute("coral-fileupload-abortfile");b&&this._abortFile(b)},_onRemoveFileClick:function(a){if(!this.async)throw new Error("Coral.FileUpload does not support removing a file from the queue on synchronous mode.");var b=a.target.getAttribute("coral-fileupload-removefile");b&&this._clearFile(b)},_onUploadFileClick:function(a){if(!this.async)throw new Error("Coral.FileUpload does not support uploading a file from the queue on synchronous mode.");var b=a.target.getAttribute("coral-fileupload-uploadfile");b&&this.upload(b)},_onDragAndDrop:function(a){"dragenter"===a.type||"dragover"===a.type?this._addDragClass():"dragleave"!==a.type&&"drop"!==a.type||this._removeDragClass(),this.trigger("coral-fileupload:"+a.type)},_addDragClass:function(){clearTimeout(this._removeClassTimeout),this._removeClassTimeout=setTimeout(this._doAddDragClass,10)},_doAddDragClass:function(){this.classList.add("is-dragging");var a=this.querySelector("[coral-fileupload-dropzone]");a&&a.classList.add("is-dragging"),this._elements.input.classList.remove("is-unselectable")},_removeDragClass:function(){clearTimeout(this._removeClassTimeout),this._removeClassTimeout=setTimeout(this._doRemoveDragClass,10)},_doRemoveDragClass:function(){this.classList.remove("is-dragging");var a=this.querySelector("[coral-fileupload-dropzone]");a&&a.classList.remove("is-dragging"),this._elements.input.classList.add("is-unselectable")},_onSubmitButtonClick:function(a){var b=a.matchedTarget;this._buttonAction=b.getAttribute("formaction")||null;var e=d(b.getAttribute("formmethod"));this._buttonMethod=e&&c(e)?e:null,this.upload()},_onInputChange:function(a){if(a.stopPropagation(),!this.disabled){var b=this,c=[],d=[];if(a.target.files&&a.target.files.length)this._clearQueue(),c=a.target.files,this.multiple||(c=[c[0]]);else{if(!(a.dataTransfer&&a.dataTransfer.files&&a.dataTransfer.files.length))return;this._clearQueue(),c=a.dataTransfer.files,this.multiple||(c=[c[0]])}for(var e=0;e<c.length;e++)d.push(new Coral.FileUpload.Item(c[e]));d.forEach(function(a){b._getQueueItemByFilename(a.file.name)||(b.sizeLimit&&a.file.size>b.sizeLimit?b.trigger("coral-fileupload:filesizeexceeded",{item:a}):b.accept&&!a._isMimeTypeAllowed(b.accept)?b.trigger("coral-fileupload:filemimetyperejected",{item:a}):(b._uploadQueue.push(a),b.trigger("coral-fileupload:fileadded",{item:a})))}),this.autoStart&&this.upload(),this._triggerChangeEvent&&this.trigger("change"),this.async&&this._clearFileInputValue()}},_setElementState:function(){Array.prototype.forEach.call(this.querySelectorAll("[coral-fileupload-select],[coral-fileupload-dropzone],[coral-fileupload-submit],[coral-fileupload-clear],[coral-fileupload-abort],[coral-fileupload-abortfile],[coral-fileupload-removefile],[coral-fileupload-uploadfile]"),function(a){a.classList.toggle("is-invalid",this.invalid),a.classList.toggle("is-disabled",this.disabled),a.classList.toggle("is-required",this.required),a.classList.toggle("is-readOnly",this.readOnly),a[this.disabled||this.readOnly?"setAttribute":"removeAttribute"]("disabled","")}.bind(this))},_clearQueue:function(){this._uploadQueue.slice().forEach(function(a){this._clearFile(a.file.name)}.bind(this))},clear:function(a){if(this.async)"string"==typeof a?this._clearFile(a):this._clearQueue();else{if("string"==typeof a)throw new Error("Coral.FileUpload does not support removing a file from the queue on synchronous mode.");this._clearQueue(),this._clearFileInputValue()}},_clearFileInputValue:function(){this._elements.input.value=""},_clearFile:function(a){var b=this._getQueueItemByFilename(a);b&&(this._abortFile(a),this._uploadQueue.splice(this._getQueueIndex(a),1),this.trigger("coral-fileupload:fileremoved",{item:b}))},_uploadFile:function(a){var b=this._getQueueItemByFilename(a);b&&(this._abortFile(a),this._ajaxUpload(b))},upload:function(a){if(this.async)if("string"==typeof a)this._uploadFile(a);else{var b=this;b._uploadQueue.forEach(function(a){b._abortFile(a.file.name),b._ajaxUpload(a)})}else{if("string"==typeof a)throw new Error("Coral.FileUpload does not support uploading a file from the queue on synchronous mode.");var c=this.closest("form");c||(c=document.createElement("form"),c.method=this.method.toLowerCase(),c.enctype="multipart/form-data",c.action=this.action,c.hidden=!0,c.appendChild(this._elements.input),Array.prototype.forEach.call(this.querySelectorAll('input[type="hidden"]'),function(a){c.appendChild(a)}),this.appendChild(c));var d=document.createElement("input");d.type="hidden",d.name="_charset_",d.value="utf-8",c.submit()}},_showFileDialog:function(a){this._elements.input.click()},_abortFile:function(a){var b=this._getQueueItemByFilename(a);b&&b._xhr&&(b._xhr.abort(),b._xhr=null)},abort:function(a){if(!this.async)throw new Error("Coral.FileUpload does not support aborting file(s) upload on synchronous mode.");if("string"==typeof a)this._abortFile(a);else{var b=this;b._uploadQueue.forEach(function(a){b._abortFile(a.file.name)})}},_ajaxUpload:function(b){var c=this,d=this._buttonAction||this.action,e=this._buttonMethod?this._buttonMethod.toUpperCase():this.method,f=c.parameters.concat(b.parameters),g=new FormData;f.forEach(function(a){g.append(a.name,a.value)}),g.append("_charset_","utf-8"),g.append(this.name,b._originalFile),b._xhr=new XMLHttpRequest,b._xhr.open(e,d),b._xhr.timeout=b.timeout,b._xhr.responseType=b.responseType,b._xhr.withCredentials=b.withCredentials,a.forEach(function(a){var f="progress"===a;(f?b._xhr.upload:b._xhr).addEventListener(a,function(g){var h={item:b,action:d,method:e};f&&(h.lengthComputable=g.lengthComputable,h.loaded=g.loaded,h.total=g.total),c.trigger("coral-fileupload:"+a,h)})}),b._xhr.send(g)},_getLabellableElement:function(){return this},_getQueueItemByFilename:function(a){return this._getQueueItem(this._getQueueIndex(a))},_getQueueItem:function(a){return a>-1?this._uploadQueue[a]:null},_getQueueIndex:function(a){var b=-1;return this._uploadQueue.some(function(c,d){if(c.file.name===a)return b=d,!0}),b},_getTargetChangeInput:function(){return this._elements.input},_positionInputOnDropZone:function(){var a=this._elements.input,b=this.querySelector("[coral-fileupload-dropzone]");if(b){var c=b.getBoundingClientRect();a.style.top=parseInt(b.offsetTop,10)+"px",a.style.left=parseInt(b.offsetLeft,10)+"px",a.style.width=parseInt(c.width,10)+"px",a.style.height=parseInt(c.height,10)+"px"}else a.style.width="0",a.style.height="0"},_initialize:function(){this.setAttribute("role","group"),this._uploadQueue=[],this._doAddDragClass=this._doAddDragClass.bind(this),this._doRemoveDragClass=this._doRemoveDragClass.bind(this),this._positionInputOnDropZone=this._positionInputOnDropZone.bind(this),Coral.commons.nextFrame(function(){Coral.commons.addResizeListener(this,this._positionInputOnDropZone)}.bind(this));var a=this.querySelector("[coral-fileupload-select]");a&&(a.id=a.id||Coral.commons.getUID()),this._queueSync(["labelledBy"]),this._observer=new MutationObserver(this._positionInputOnDropZone),this._observer.observe(this,{childList:!0,attributes:!0,attributeFilter:["coral-fileupload-dropzone"],subtree:!0})},_render:function(){var a=[];Array.prototype.forEach.call(this.querySelectorAll('input[type="hidden"]'),function(b){a.push({name:b.name,value:b.value})}),this.parameters=a;var b=this.querySelector('[handle="input"]');b&&b.parentNode.removeChild(b);var c=this.querySelector("object");c&&c.parentNode.removeChild(c),this.appendChild(Coral.templates.FileUpload.base.call(this._elements))}}),Coral.FileUpload.method=b}(),function(){"use strict";var a={TEXT:"text",ARRAY_BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json"},b=/(.+)\/(.+)$/,c=/\.(.+)$/,d=/.*/,e="audio/*",f="image/*",g="video/*",h={".123":"application/vnd.lotus-1-2-3",".3dml":"text/vnd.in3d.3dml",".3g2":"video/3gpp2",".3gp":"video/3gpp",".a":"application/octet-stream",".aab":"application/x-authorware-bin",".aac":"audio/x-aac",".aam":"application/x-authorware-map",".aas":"application/x-authorware-seg",".abw":"application/x-abiword",".acc":"application/vnd.americandynamics.acc",".ace":"application/x-ace-compressed",".acu":"application/vnd.acucobol",".acutc":"application/vnd.acucorp",".adp":"audio/adpcm",".aep":"application/vnd.audiograph",".afm":"application/x-font-type1",".afp":"application/vnd.ibm.modcap",".ai":"application/postscript",".aif":"audio/x-aiff",".aifc":"audio/x-aiff",".aiff":"audio/x-aiff",".air":"application/vnd.adobe.air-application-installer-package+zip",".ami":"application/vnd.amiga.ami",".apk":"application/vnd.android.package-archive",".application":"application/x-ms-application",".apr":"application/vnd.lotus-approach",".asc":"application/pgp-signature",".asf":"video/x-ms-asf",".asm":"text/x-asm",".aso":"application/vnd.accpac.simply.aso",".asx":"video/x-ms-asf",".atc":"application/vnd.acucorp",".atom":"application/atom+xml",".atomcat":"application/atomcat+xml",".atomsvc":"application/atomsvc+xml",".atx":"application/vnd.antix.game-component",".au":"audio/basic",".avi":"video/x-msvideo",".aw":"application/applixware",".azf":"application/vnd.airzip.filesecure.azf",".azs":"application/vnd.airzip.filesecure.azs",".azw":"application/vnd.amazon.ebook",".bat":"application/x-msdownload",".bcpio":"application/x-bcpio",".bdf":"application/x-font-bdf",".bdm":"application/vnd.syncml.dm+wbxml",".bh2":"application/vnd.fujitsu.oasysprs",".bin":"application/octet-stream",".bmi":"application/vnd.bmi",".bmp":"image/bmp",".book":"application/vnd.framemaker",".box":"application/vnd.previewsystems.box",".boz":"application/x-bzip2",".bpk":"application/octet-stream",".btif":"image/prs.btif",".bz":"application/x-bzip",".bz2":"application/x-bzip2",".c":"text/x-c",".c4d":"application/vnd.clonk.c4group",".c4f":"application/vnd.clonk.c4group",".c4g":"application/vnd.clonk.c4group",".c4p":"application/vnd.clonk.c4group",".c4u":"application/vnd.clonk.c4group",".cab":"application/vnd.ms-cab-compressed",".car":"application/vnd.curl.car",".cat":"application/vnd.ms-pki.seccat",".cc":"text/x-c",".cct":"application/x-director",".ccxml":"application/ccxml+xml",".cdbcmsg":"application/vnd.contact.cmsg",".cdf":"application/x-netcdf",".cdkey":"application/vnd.mediastation.cdkey",".cdx":"chemical/x-cdx",".cdxml":"application/vnd.chemdraw+xml",".cdy":"application/vnd.cinderella",".cer":"application/pkix-cert",".cgm":"image/cgm",".chat":"application/x-chat",".chm":"application/vnd.ms-htmlhelp",".chrt":"application/vnd.kde.kchart",".cif":"chemical/x-cif",".cii":"application/vnd.anser-web-certificate-issue-initiation",".cil":"application/vnd.ms-artgalry",".cla":"application/vnd.claymore",".class":"application/java-vm",".clkk":"application/vnd.crick.clicker.keyboard",".clkp":"application/vnd.crick.clicker.palette",".clkt":"application/vnd.crick.clicker.template",".clkw":"application/vnd.crick.clicker.wordbank",".clkx":"application/vnd.crick.clicker",".clp":"application/x-msclip",".cmc":"application/vnd.cosmocaller",".cmdf":"chemical/x-cmdf",".cml":"chemical/x-cml",".cmp":"application/vnd.yellowriver-custom-menu",".cmx":"image/x-cmx",".cod":"application/vnd.rim.cod",".com":"application/x-msdownload",".conf":"text/plain",".cpio":"application/x-cpio",".cpp":"text/x-c",".cpt":"application/mac-compactpro",".crd":"application/x-mscardfile",".crl":"application/pkix-crl",".crt":"application/x-x509-ca-cert",".csh":"application/x-csh",".csml":"chemical/x-csml",".csp":"application/vnd.commonspace",".css":"text/css",".cst":"application/x-director",".csv":["text/csv","application/vnd.ms-excel"],".cu":"application/cu-seeme",".curl":"text/vnd.curl",".cww":"application/prs.cww",".cxt":"application/x-director",".cxx":"text/x-c",".daf":"application/vnd.mobius.daf",".dataless":"application/vnd.fdsn.seed",".davmount":"application/davmount+xml",".dcr":"application/x-director",".dcurl":"text/vnd.curl.dcurl",".dd2":"application/vnd.oma.dd2+xml",".ddd":"application/vnd.fujixerox.ddd",".deb":"application/x-debian-package",".def":"text/plain",".deploy":"application/octet-stream",".der":"application/x-x509-ca-cert",".dfac":"application/vnd.dreamfactory",".dic":"text/x-c",".diff":"text/plain",".dir":"application/x-director",".dis":"application/vnd.mobius.dis",".dist":"application/octet-stream",".distz":"application/octet-stream",".djv":"image/vnd.djvu",".djvu":"image/vnd.djvu",".dll":"application/x-msdownload",".dmg":"application/octet-stream",".dms":"application/octet-stream",".dna":"application/vnd.dna",".doc":"application/msword",".docm":"application/vnd.ms-word.document.macroenabled.12",".docx":"application/vnd.openxmlformats-officedocument.wordprocessingml.document",".dot":"application/msword",".dotm":"application/vnd.ms-word.template.macroenabled.12",".dotx":"application/vnd.openxmlformats-officedocument.wordprocessingml.template",".dp":"application/vnd.osgi.dp",".dpg":"application/vnd.dpgraph",".dsc":"text/prs.lines.tag",".dtb":"application/x-dtbook+xml",".dtd":"application/xml-dtd",".dts":"audio/vnd.dts",".dtshd":"audio/vnd.dts.hd",".dump":"application/octet-stream",".dvi":"application/x-dvi",".dwf":"model/vnd.dwf",".dwg":"image/vnd.dwg",".dxf":"image/vnd.dxf",".dxp":"application/vnd.spotfire.dxp",".dxr":"application/x-director",".ecelp4800":"audio/vnd.nuera.ecelp4800",".ecelp7470":"audio/vnd.nuera.ecelp7470",".ecelp9600":"audio/vnd.nuera.ecelp9600",".ecma":"application/ecmascript",".edm":"application/vnd.novadigm.edm",".edx":"application/vnd.novadigm.edx",".efif":"application/vnd.picsel",".ei6":"application/vnd.pg.osasli",".elc":"application/octet-stream",".eml":"message/rfc822",".emma":"application/emma+xml",".eol":"audio/vnd.digital-winds",".eot":"application/vnd.ms-fontobject",".eps":"application/postscript",".epub":"application/epub+zip",".es3":"application/vnd.eszigno3+xml",".esf":"application/vnd.epson.esf",".et3":"application/vnd.eszigno3+xml",".etx":"text/x-setext",".exe":"application/x-msdownload",".ext":"application/vnd.novadigm.ext",".ez":"application/andrew-inset",".ez2":"application/vnd.ezpix-album",".ez3":"application/vnd.ezpix-package",".f":"text/x-fortran",".f4v":"video/x-f4v",".f77":"text/x-fortran",".f90":"text/x-fortran",".fbs":"image/vnd.fastbidsheet",".fdf":"application/vnd.fdf",".fe_launch":"application/vnd.denovo.fcselayout-link",".fg5":"application/vnd.fujitsu.oasysgp",".fgd":"application/x-director",".fh":"image/x-freehand",".fh4":"image/x-freehand",".fh5":"image/x-freehand",".fh7":"image/x-freehand",".fhc":"image/x-freehand",".fig":"application/x-xfig",".fli":"video/x-fli",".flo":"application/vnd.micrografx.flo",".flv":"video/x-flv",".flw":"application/vnd.kde.kivio",".flx":"text/vnd.fmi.flexstor",".fly":"text/vnd.fly",".fm":"application/vnd.framemaker",".fnc":"application/vnd.frogans.fnc",".for":"text/x-fortran",".fpx":"image/vnd.fpx",".frame":"application/vnd.framemaker",".fsc":"application/vnd.fsc.weblaunch",".fst":"image/vnd.fst",".ftc":"application/vnd.fluxtime.clip",".fti":"application/vnd.anser-web-funds-transfer-initiation",".fvt":"video/vnd.fvt",".fzs":"application/vnd.fuzzysheet",".g3":"image/g3fax",".gac":"application/vnd.groove-account",".gdl":"model/vnd.gdl",".geo":"application/vnd.dynageo",".gex":"application/vnd.geometry-explorer",".ggb":"application/vnd.geogebra.file",".ggt":"application/vnd.geogebra.tool",".ghf":"application/vnd.groove-help",".gif":"image/gif",".gim":"application/vnd.groove-identity-message",".gmx":"application/vnd.gmx",".gnumeric":"application/x-gnumeric",".gph":"application/vnd.flographit",".gqf":"application/vnd.grafeq",".gqs":"application/vnd.grafeq",".gram":"application/srgs",".gre":"application/vnd.geometry-explorer",".grv":"application/vnd.groove-injector",".grxml":"application/srgs+xml",".gsf":"application/x-font-ghostscript",".gtar":"application/x-gtar",".gtm":"application/vnd.groove-tool-message",".gtw":"model/vnd.gtw",".gv":"text/vnd.graphviz",".gz":"application/x-gzip",".h":"text/x-c",".h261":"video/h261",".h263":"video/h263",".h264":"video/h264",".hbci":"application/vnd.hbci",".hdf":"application/x-hdf",".hh":"text/x-c",".hlp":"application/winhlp",".hpgl":"application/vnd.hp-hpgl",".hpid":"application/vnd.hp-hpid",".hps":"application/vnd.hp-hps",".hqx":"application/mac-binhex40",".htke":"application/vnd.kenameaapp",".htm":"text/html",".html":"text/html",".hvd":"application/vnd.yamaha.hv-dic",".hvp":"application/vnd.yamaha.hv-voice",".hvs":"application/vnd.yamaha.hv-script",".icc":"application/vnd.iccprofile",".ice":"x-conference/x-cooltalk",".icm":"application/vnd.iccprofile",".ico":"image/x-icon",".ics":"text/calendar",".ief":"image/ief",".ifb":"text/calendar",".ifm":"application/vnd.shana.informed.formdata",".iges":"model/iges",".igl":"application/vnd.igloader",".igs":"model/iges",".igx":"application/vnd.micrografx.igx",".iif":"application/vnd.shana.informed.interchange",".imp":"application/vnd.accpac.simply.imp",".ims":"application/vnd.ms-ims",".in":"text/plain",".ipk":"application/vnd.shana.informed.package",".irm":"application/vnd.ibm.rights-management",".irp":"application/vnd.irepository.package+xml",".iso":"application/octet-stream",".itp":"application/vnd.shana.informed.formtemplate",".ivp":"application/vnd.immervision-ivp",".ivu":"application/vnd.immervision-ivu",".jad":"text/vnd.sun.j2me.app-descriptor",".jam":"application/vnd.jam",".jar":"application/java-archive",".java":"text/x-java-source",".jisp":"application/vnd.jisp",".jlt":"application/vnd.hp-jlyt",".jnlp":"application/x-java-jnlp-file",".joda":"application/vnd.joost.joda-archive",".jpe":"image/jpeg",".jpeg":"image/jpeg",".jpg":"image/jpeg",".jpgm":"video/jpm",".jpgv":"video/jpeg",".jpm":"video/jpm",".js":"application/javascript",".json":"application/json",".kar":"audio/midi",".karbon":"application/vnd.kde.karbon",".kfo":"application/vnd.kde.kformula",".kia":"application/vnd.kidspiration",".kil":"application/x-killustrator",".kml":"application/vnd.google-earth.kml+xml",".kmz":"application/vnd.google-earth.kmz",".kne":"application/vnd.kinar",".knp":"application/vnd.kinar",".kon":"application/vnd.kde.kontour",".kpr":"application/vnd.kde.kpresenter",".kpt":"application/vnd.kde.kpresenter",".ksh":"text/plain",".ksp":"application/vnd.kde.kspread",".ktr":"application/vnd.kahootz",".ktz":"application/vnd.kahootz",".kwd":"application/vnd.kde.kword",".kwt":"application/vnd.kde.kword",".latex":"application/x-latex",".lbd":"application/vnd.llamagraphics.life-balance.desktop",".lbe":"application/vnd.llamagraphics.life-balance.exchange+xml",".les":"application/vnd.hhe.lesson-player",".lha":"application/octet-stream",".link66":"application/vnd.route66.link66+xml",".list":"text/plain",".list3820":"application/vnd.ibm.modcap",".listafp":"application/vnd.ibm.modcap",".log":"text/plain",".lostxml":"application/lost+xml",".lrf":"application/octet-stream",".lrm":"application/vnd.ms-lrm",".ltf":"application/vnd.frogans.ltf",".lvp":"audio/vnd.lucent.voice",".lwp":"application/vnd.lotus-wordpro",".lzh":"application/octet-stream",".m13":"application/x-msmediaview",".m14":"application/x-msmediaview",".m1v":"video/mpeg",".m2a":"audio/mpeg",".m2v":"video/mpeg",".m3a":"audio/mpeg",".m3u":"audio/x-mpegurl",".m4u":"video/vnd.mpegurl",".m4v":"video/x-m4v",".ma":"application/mathematica",".mag":"application/vnd.ecowin.chart",".maker":"application/vnd.framemaker",".man":"text/troff",".mathml":"application/mathml+xml",".mb":"application/mathematica",".mbk":"application/vnd.mobius.mbk",".mbox":"application/mbox",".mc1":"application/vnd.medcalcdata",".mcd":"application/vnd.mcd",".mcurl":"text/vnd.curl.mcurl",".mdb":"application/x-msaccess",".mdi":"image/vnd.ms-modi",".me":"text/troff",".mesh":"model/mesh",".mfm":"application/vnd.mfmp",".mgz":"application/vnd.proteus.magazine",".mht":"message/rfc822",".mhtml":"message/rfc822",".mid":"audio/midi",".midi":"audio/midi",".mif":"application/vnd.mif",".mime":"message/rfc822",".mj2":"video/mj2",".mjp2":"video/mj2",".mlp":"application/vnd.dolby.mlp",".mmd":"application/vnd.chipnuts.karaoke-mmd",".mmf":"application/vnd.smaf",".mmr":"image/vnd.fujixerox.edmics-mmr",".mny":"application/x-msmoney",".mobi":"application/x-mobipocket-ebook",".mov":"video/quicktime",".movie":"video/x-sgi-movie",".mp2":"audio/mpeg",".mp2a":"audio/mpeg",".mp3":"audio/mpeg",".mp4":"video/mp4",".mp4a":"audio/mp4",".mp4s":"application/mp4",".mp4v":"video/mp4",".mpa":"video/mpeg",".mpc":"application/vnd.mophun.certificate",".mpe":"video/mpeg",".mpeg":"video/mpeg",".mpg":"video/mpeg",".mpg4":"video/mp4",".mpga":"audio/mpeg",".mpkg":"application/vnd.apple.installer+xml",".mpm":"application/vnd.blueice.multipass",".mpn":"application/vnd.mophun.application",".mpp":"application/vnd.ms-project",".mpt":"application/vnd.ms-project",".mpy":"application/vnd.ibm.minipay",".mqy":"application/vnd.mobius.mqy",".mrc":"application/marc",".ms":"text/troff",".mscml":"application/mediaservercontrol+xml",".mseed":"application/vnd.fdsn.mseed",".mseq":"application/vnd.mseq",".msf":"application/vnd.epson.msf",".msh":"model/mesh",".msi":"application/x-msdownload",".msl":"application/vnd.mobius.msl",".msty":"application/vnd.muvee.style",".mts":"model/vnd.mts",".mus":"application/vnd.musician",".musicxml":"application/vnd.recordare.musicxml+xml",".mvb":"application/x-msmediaview",".mwf":"application/vnd.mfer",
".mxf":"application/mxf",".mxl":"application/vnd.recordare.musicxml",".mxml":"application/xv+xml",".mxs":"application/vnd.triscape.mxs",".mxu":"video/vnd.mpegurl",".n-gage":"application/vnd.nokia.n-gage.symbian.install",".nb":"application/mathematica",".nc":"application/x-netcdf",".ncx":"application/x-dtbncx+xml",".ngdat":"application/vnd.nokia.n-gage.data",".nlu":"application/vnd.neurolanguage.nlu",".nml":"application/vnd.enliven",".nnd":"application/vnd.noblenet-directory",".nns":"application/vnd.noblenet-sealer",".nnw":"application/vnd.noblenet-web",".npx":"image/vnd.net-fpx",".nsf":"application/vnd.lotus-notes",".nws":"message/rfc822",".o":"application/octet-stream",".oa2":"application/vnd.fujitsu.oasys2",".oa3":"application/vnd.fujitsu.oasys3",".oas":"application/vnd.fujitsu.oasys",".obd":"application/x-msbinder",".obj":"application/octet-stream",".oda":"application/oda",".odb":"application/vnd.oasis.opendocument.database",".odc":"application/vnd.oasis.opendocument.chart",".odf":"application/vnd.oasis.opendocument.formula",".odft":"application/vnd.oasis.opendocument.formula-template",".odg":"application/vnd.oasis.opendocument.graphics",".odi":"application/vnd.oasis.opendocument.image",".odp":"application/vnd.oasis.opendocument.presentation",".ods":"application/vnd.oasis.opendocument.spreadsheet",".odt":"application/vnd.oasis.opendocument.text",".oga":"audio/ogg",".ogg":"audio/ogg",".ogv":"video/ogg",".ogx":"application/ogg",".onepkg":"application/onenote",".onetmp":"application/onenote",".onetoc":"application/onenote",".onetoc2":"application/onenote",".opf":"application/oebps-package+xml",".oprc":"application/vnd.palm",".org":"application/vnd.lotus-organizer",".osf":"application/vnd.yamaha.openscoreformat",".osfpvg":"application/vnd.yamaha.openscoreformat.osfpvg+xml",".otc":"application/vnd.oasis.opendocument.chart-template",".otf":"application/x-font-otf",".otg":"application/vnd.oasis.opendocument.graphics-template",".oth":"application/vnd.oasis.opendocument.text-web",".oti":"application/vnd.oasis.opendocument.image-template",".otm":"application/vnd.oasis.opendocument.text-master",".otp":"application/vnd.oasis.opendocument.presentation-template",".ots":"application/vnd.oasis.opendocument.spreadsheet-template",".ott":"application/vnd.oasis.opendocument.text-template",".oxt":"application/vnd.openofficeorg.extension",".p":"text/x-pascal",".p10":"application/pkcs10",".p12":"application/x-pkcs12",".p7b":"application/x-pkcs7-certificates",".p7c":"application/pkcs7-mime",".p7m":"application/pkcs7-mime",".p7r":"application/x-pkcs7-certreqresp",".p7s":"application/pkcs7-signature",".pas":"text/x-pascal",".pbd":"application/vnd.powerbuilder6",".pbm":"image/x-portable-bitmap",".pcf":"application/x-font-pcf",".pcl":"application/vnd.hp-pcl",".pclxl":"application/vnd.hp-pclxl",".pct":"image/x-pict",".pcurl":"application/vnd.curl.pcurl",".pcx":"image/x-pcx",".pdb":"application/vnd.palm",".pdf":"application/pdf",".pfa":"application/x-font-type1",".pfb":"application/x-font-type1",".pfm":"application/x-font-type1",".pfr":"application/font-tdpfr",".pfx":"application/x-pkcs12",".pgm":"image/x-portable-graymap",".pgn":"application/x-chess-pgn",".pgp":"application/pgp-encrypted",".pic":"image/x-pict",".pkg":"application/octet-stream",".pki":"application/pkixcmp",".pkipath":"application/pkix-pkipath",".pl":"text/plain",".plb":"application/vnd.3gpp.pic-bw-large",".plc":"application/vnd.mobius.plc",".plf":"application/vnd.pocketlearn",".pls":"application/pls+xml",".pml":"application/vnd.ctc-posml",".png":"image/png",".pnm":"image/x-portable-anymap",".portpkg":"application/vnd.macports.portpkg",".pot":"application/vnd.ms-powerpoint",".potm":"application/vnd.ms-powerpoint.template.macroenabled.12",".potx":"application/vnd.openxmlformats-officedocument.presentationml.template",".ppa":"application/vnd.ms-powerpoint",".ppam":"application/vnd.ms-powerpoint.addin.macroenabled.12",".ppd":"application/vnd.cups-ppd",".ppm":"image/x-portable-pixmap",".pps":"application/vnd.ms-powerpoint",".ppsm":"application/vnd.ms-powerpoint.slideshow.macroenabled.12",".ppsx":"application/vnd.openxmlformats-officedocument.presentationml.slideshow",".ppt":"application/vnd.ms-powerpoint",".pptm":"application/vnd.ms-powerpoint.presentation.macroenabled.12",".pptx":"application/vnd.openxmlformats-officedocument.presentationml.presentation",".pqa":"application/vnd.palm",".prc":"application/x-mobipocket-ebook",".pre":"application/vnd.lotus-freelance",".prf":"application/pics-rules",".ps":"application/postscript",".psb":"application/vnd.3gpp.pic-bw-small",".psd":"image/vnd.adobe.photoshop",".psf":"application/x-font-linux-psf",".ptid":"application/vnd.pvi.ptid1",".pub":"application/x-mspublisher",".pvb":"application/vnd.3gpp.pic-bw-var",".pwn":"application/vnd.3m.post-it-notes",".pwz":"application/vnd.ms-powerpoint",".py":"text/x-python",".pya":"audio/vnd.ms-playready.media.pya",".pyc":"application/x-python-code",".pyo":"application/x-python-code",".pyv":"video/vnd.ms-playready.media.pyv",".qam":"application/vnd.epson.quickanime",".qbo":"application/vnd.intu.qbo",".qfx":"application/vnd.intu.qfx",".qps":"application/vnd.publishare-delta-tree",".qt":"video/quicktime",".qwd":"application/vnd.quark.quarkxpress",".qwt":"application/vnd.quark.quarkxpress",".qxb":"application/vnd.quark.quarkxpress",".qxd":"application/vnd.quark.quarkxpress",".qxl":"application/vnd.quark.quarkxpress",".qxt":"application/vnd.quark.quarkxpress",".ra":"audio/x-pn-realaudio",".ram":"audio/x-pn-realaudio",".rar":"application/x-rar-compressed",".ras":"image/x-cmu-raster",".rcprofile":"application/vnd.ipunplugged.rcprofile",".rdf":"application/rdf+xml",".rdz":"application/vnd.data-vision.rdz",".rep":"application/vnd.businessobjects",".res":"application/x-dtbresource+xml",".rgb":"image/x-rgb",".rif":"application/reginfo+xml",".rl":"application/resource-lists+xml",".rlc":"image/vnd.fujixerox.edmics-rlc",".rld":"application/resource-lists-diff+xml",".rm":"application/vnd.rn-realmedia",".rmi":"audio/midi",".rmp":"audio/x-pn-realaudio-plugin",".rms":"application/vnd.jcp.javame.midlet-rms",".rnc":"application/relax-ng-compact-syntax",".roff":"text/troff",".rpm":"application/x-rpm",".rpss":"application/vnd.nokia.radio-presets",".rpst":"application/vnd.nokia.radio-preset",".rq":"application/sparql-query",".rs":"application/rls-services+xml",".rsd":"application/rsd+xml",".rss":"application/rss+xml",".rtf":"application/rtf",".rtx":"text/richtext",".s":"text/x-asm",".saf":"application/vnd.yamaha.smaf-audio",".sbml":"application/sbml+xml",".sc":"application/vnd.ibm.secure-container",".scd":"application/x-msschedule",".scm":"application/vnd.lotus-screencam",".scq":"application/scvp-cv-request",".scs":"application/scvp-cv-response",".scurl":"text/vnd.curl.scurl",".sda":"application/vnd.stardivision.draw",".sdc":"application/vnd.stardivision.calc",".sdd":"application/vnd.stardivision.impress",".sdkd":"application/vnd.solent.sdkm+xml",".sdkm":"application/vnd.solent.sdkm+xml",".sdp":"application/sdp",".sdw":"application/vnd.stardivision.writer",".see":"application/vnd.seemail",".seed":"application/vnd.fdsn.seed",".sema":"application/vnd.sema",".semd":"application/vnd.semd",".semf":"application/vnd.semf",".ser":"application/java-serialized-object",".setpay":"application/set-payment-initiation",".setreg":"application/set-registration-initiation",".sfd-hdstx":"application/vnd.hydrostatix.sof-data",".sfs":"application/vnd.spotfire.sfs",".sgl":"application/vnd.stardivision.writer-global",".sgm":"text/sgml",".sgml":"text/sgml",".sh":"application/x-sh",".shar":"application/x-shar",".shf":"application/shf+xml",".si":"text/vnd.wap.si",".sic":"application/vnd.wap.sic",".sig":"application/pgp-signature",".silo":"model/mesh",".sis":"application/vnd.symbian.install",".sisx":"application/vnd.symbian.install",".sit":"application/x-stuffit",".sitx":"application/x-stuffitx",".skd":"application/vnd.koan",".skm":"application/vnd.koan",".skp":"application/vnd.koan",".skt":"application/vnd.koan",".sl":"text/vnd.wap.sl",".slc":"application/vnd.wap.slc",".sldm":"application/vnd.ms-powerpoint.slide.macroenabled.12",".sldx":"application/vnd.openxmlformats-officedocument.presentationml.slide",".slt":"application/vnd.epson.salt",".smf":"application/vnd.stardivision.math",".smi":"application/smil+xml",".smil":"application/smil+xml",".snd":"audio/basic",".snf":"application/x-font-snf",".so":"application/octet-stream",".spc":"application/x-pkcs7-certificates",".spf":"application/vnd.yamaha.smaf-phrase",".spl":"application/x-futuresplash",".spot":"text/vnd.in3d.spot",".spp":"application/scvp-vp-response",".spq":"application/scvp-vp-request",".spx":"audio/ogg",".src":"application/x-wais-source",".srx":"application/sparql-results+xml",".sse":"application/vnd.kodak-descriptor",".ssf":"application/vnd.epson.ssf",".ssml":"application/ssml+xml",".stc":"application/vnd.sun.xml.calc.template",".std":"application/vnd.sun.xml.draw.template",".stf":"application/vnd.wt.stf",".sti":"application/vnd.sun.xml.impress.template",".stk":"application/hyperstudio",".stl":"application/vnd.ms-pki.stl",".str":"application/vnd.pg.format",".stw":"application/vnd.sun.xml.writer.template",".sus":"application/vnd.sus-calendar",".susp":"application/vnd.sus-calendar",".sv4cpio":"application/x-sv4cpio",".sv4crc":"application/x-sv4crc",".svd":"application/vnd.svd",".svg":"image/svg+xml",".svgz":"image/svg+xml",".swa":"application/x-director",".swf":"application/x-shockwave-flash",".swi":"application/vnd.arastra.swi",".sxc":"application/vnd.sun.xml.calc",".sxd":"application/vnd.sun.xml.draw",".sxg":"application/vnd.sun.xml.writer.global",".sxi":"application/vnd.sun.xml.impress",".sxm":"application/vnd.sun.xml.math",".sxw":"application/vnd.sun.xml.writer",".t":"text/troff",".tao":"application/vnd.tao.intent-module-archive",".tar":"application/x-tar",".tcap":"application/vnd.3gpp2.tcap",".tcl":"application/x-tcl",".teacher":"application/vnd.smart.teacher",".tex":"application/x-tex",".texi":"application/x-texinfo",".texinfo":"application/x-texinfo",".text":"text/plain",".tfm":"application/x-tex-tfm",".tgz":"application/x-gzip",".tif":"image/tiff",".tiff":"image/tiff",".tmo":"application/vnd.tmobile-livetv",".torrent":"application/x-bittorrent",".tpl":"application/vnd.groove-tool-template",".tpt":"application/vnd.trid.tpt",".tr":"text/troff",".tra":"application/vnd.trueapp",".trm":"application/x-msterminal",".tsv":"text/tab-separated-values",".ttc":"application/x-font-ttf",".ttf":"application/x-font-ttf",".twd":"application/vnd.simtech-mindmapper",".twds":"application/vnd.simtech-mindmapper",".txd":"application/vnd.genomatix.tuxedo",".txf":"application/vnd.mobius.txf",".txt":"text/plain",".u32":"application/x-authorware-bin",".udeb":"application/x-debian-package",".ufd":"application/vnd.ufdl",".ufdl":"application/vnd.ufdl",".umj":"application/vnd.umajin",".unityweb":"application/vnd.unity",".uoml":"application/vnd.uoml+xml",".uri":"text/uri-list",".uris":"text/uri-list",".urls":"text/uri-list",".ustar":"application/x-ustar",".utz":"application/vnd.uiq.theme",".uu":"text/x-uuencode",".vcd":"application/x-cdlink",".vcf":"text/x-vcard",".vcg":"application/vnd.groove-vcard",".vcs":"text/x-vcalendar",".vcx":"application/vnd.vcx",".vis":"application/vnd.visionary",".viv":"video/vnd.vivo",".vor":"application/vnd.stardivision.writer",".vox":"application/x-authorware-bin",".vrml":"model/vrml",".vsd":"application/vnd.visio",".vsf":"application/vnd.vsf",".vss":"application/vnd.visio",".vst":"application/vnd.visio",".vsw":"application/vnd.visio",".vtu":"model/vnd.vtu",".vxml":"application/voicexml+xml",".w3d":"application/x-director",".wad":"application/x-doom",".wav":"audio/x-wav",".wax":"audio/x-ms-wax",".wbmp":"image/vnd.wap.wbmp",".wbs":"application/vnd.criticaltools.wbs+xml",".wbxml":"application/vnd.wap.wbxml",".wcm":"application/vnd.ms-works",".wdb":"application/vnd.ms-works",".wiz":"application/msword",".wks":"application/vnd.ms-works",".wm":"video/x-ms-wm",".wma":"audio/x-ms-wma",".wmd":"application/x-ms-wmd",".wmf":"application/x-msmetafile",".wml":"text/vnd.wap.wml",".wmlc":"application/vnd.wap.wmlc",".wmls":"text/vnd.wap.wmlscript",".wmlsc":"application/vnd.wap.wmlscriptc",".wmv":"video/x-ms-wmv",".wmx":"video/x-ms-wmx",".wmz":"application/x-ms-wmz",".wpd":"application/vnd.wordperfect",".wpl":"application/vnd.ms-wpl",".wps":"application/vnd.ms-works",".wqd":"application/vnd.wqd",".wri":"application/x-mswrite",".wrl":"model/vrml",".wsdl":"application/wsdl+xml",".wspolicy":"application/wspolicy+xml",".wtb":"application/vnd.webturbo",".wvx":"video/x-ms-wvx",".x32":"application/x-authorware-bin",".x3d":"application/vnd.hzn-3d-crossword",".xap":"application/x-silverlight-app",".xar":"application/vnd.xara",".xbap":"application/x-ms-xbap",".xbd":"application/vnd.fujixerox.docuworks.binder",".xbm":"image/x-xbitmap",".xdm":"application/vnd.syncml.dm+xml",".xdp":"application/vnd.adobe.xdp+xml",".xdw":"application/vnd.fujixerox.docuworks",".xenc":"application/xenc+xml",".xer":"application/patch-ops-error+xml",".xfdf":"application/vnd.adobe.xfdf",".xfdl":"application/vnd.xfdl",".xht":"application/xhtml+xml",".xhtml":"application/xhtml+xml",".xhvml":"application/xv+xml",".xif":"image/vnd.xiff",".xla":"application/vnd.ms-excel",".xlam":"application/vnd.ms-excel.addin.macroenabled.12",".xlb":"application/vnd.ms-excel",".xlc":"application/vnd.ms-excel",".xlm":"application/vnd.ms-excel",".xls":"application/vnd.ms-excel",".xlsb":"application/vnd.ms-excel.sheet.binary.macroenabled.12",".xlsm":"application/vnd.ms-excel.sheet.macroenabled.12",".xlsx":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",".xlt":"application/vnd.ms-excel",".xltm":"application/vnd.ms-excel.template.macroenabled.12",".xltx":"application/vnd.openxmlformats-officedocument.spreadsheetml.template",".xlw":"application/vnd.ms-excel",".xml":"application/xml",".xo":"application/vnd.olpc-sugar",".xop":"application/xop+xml",".xpdl":"application/xml",".xpi":"application/x-xpinstall",".xpm":"image/x-xpixmap",".xpr":"application/vnd.is-xpr",".xps":"application/vnd.ms-xpsdocument",".xpw":"application/vnd.intercon.formnet",".xpx":"application/vnd.intercon.formnet",".xsl":"application/xml",".xslt":"application/xslt+xml",".xsm":"application/vnd.syncml+xml",".xspf":"application/xspf+xml",".xul":"application/vnd.mozilla.xul+xml",".xvm":"application/xv+xml",".xvml":"application/xv+xml",".xwd":"image/x-xwindowdump",".xyz":"chemical/x-xyz",".zaz":"application/vnd.zzazz.deck+xml",".zip":"application/zip",".zir":"application/vnd.zul",".zirz":"application/vnd.zul",".zmm":"application/vnd.handheld-entertainment+xml"};Coral.FileUpload.Item=function(a){this._originalFile=a,this._xhr=null,this._parameters=[],this._withCredentials=!1,this._timeout=0,this._responseType=Coral.FileUpload.Item.responseType.TEXT,this._readyState=0,this._response=null,this._responseText="",this._responseXML=null,this._status=0,this._statusText=""},Coral.FileUpload.Item.prototype={},Object.defineProperty(Coral.FileUpload.Item.prototype,"file",{get:function(){return this._originalFile},set:function(a){}}),Object.defineProperty(Coral.FileUpload.Item.prototype,"parameters",{get:function(){return this._parameters},set:function(a){if(Coral.validate.valueMustChange(a,this._parameters)){var b=Array.isArray(a)&&a.every(function(a){return a&&a.name});b&&(this._parameters=a)}}}),Object.defineProperty(Coral.FileUpload.Item.prototype,"withCredentials",{get:function(){return this._withCredentials},set:function(a){a=Coral.transform["boolean"](a),Coral.validate.valueMustChange(a,this._withCredentials)&&(this._withCredentials=a)}}),Object.defineProperty(Coral.FileUpload.Item.prototype,"timeout",{get:function(){return this._timeout},set:function(a){if(Coral.validate.valueMustChange(a,this._timeout)){var b=Coral.transform.number(a);null!==b&&(this._timeout=b,this._xhr&&(this._xhr.timeout=b))}}}),Object.defineProperty(Coral.FileUpload.Item.prototype,"responseType",{get:function(){return this._responseType},set:function(b){Coral.validate.valueMustChange(b,this._responseType)&&Coral.validate.enumeration(a)(b)&&(this._responseType=b,this._xhr&&(this._xhr.responseType=b))}}),Object.defineProperty(Coral.FileUpload.Item.prototype,"readyState",{get:function(){return this._xhr?this._xhr.readyState:this._readyState},set:function(a){}}),Object.defineProperty(Coral.FileUpload.Item.prototype,"response",{get:function(){return this._xhr?this._xhr.response:this._response},set:function(a){}}),Object.defineProperty(Coral.FileUpload.Item.prototype,"responseText",{get:function(){return this._xhr?this._xhr.responseText:this._responseText},set:function(a){}}),Object.defineProperty(Coral.FileUpload.Item.prototype,"responseXML",{get:function(){return this._xhr?this._xhr.responseXML:this._responseXML},set:function(a){}}),Object.defineProperty(Coral.FileUpload.Item.prototype,"status",{get:function(){return this._xhr?this._xhr.status:this._status},set:function(a){}}),Object.defineProperty(Coral.FileUpload.Item.prototype,"statusText",{get:function(){return this._xhr?this._xhr.statusText:this._statusText},set:function(a){}}),Coral.FileUpload.Item.prototype._isMimeTypeAllowed=function(a){var i=!1,j=this.file.type||"application/unknown";return!!j.match(b)&&a.split(",").some(function(a){if(a=a.trim(),"*"===a||".*"===a||"*/*"===a||"application/unknown"===j)i=!0;else if(a.match(b))i=a===e?0===j.indexOf(e.slice(0,-1)):a===f?0===j.indexOf(f.slice(0,-1)):a===g?0===j.indexOf(g.slice(0,-1)):j===a;else if(a.match(c)){var k=h[a];i=Array.isArray(k)?k.some(function(a){return j===a}):j===h[a]}else a.match(d)&&(i=j.split("/")[0]===a);return i}.bind(this))},Coral.FileUpload.Item.responseType=a}(),function(){"use strict";function a(a){return a&&"CORAL-MASONRY-ITEM"===a.tagName&&!a._removing}function b(a){return a._removing||!a.parentNode}function c(a,b){var c=a.getBoundingClientRect(),d=b.getBoundingClientRect();return{left:d.left-c.left,top:d.top-c.top}}function d(a,b,c,d,e,f){return Math.sqrt(Math.pow((c-a)/e,2)+Math.pow((d-b)/f,2))}function e(b){var c=b.previousElementSibling;return a(c)?c:null}function f(a){this._masonry=a}var g=0;document.addEventListener("error",function(a){var b=a.target;b&&"IMG"===b.tagName&&(b._loadError=!0)},!0),Coral.register({name:"Masonry",tagName:"coral-masonry",className:"coral3-Masonry",events:{resize:"_onResize","global:resize":"_onWindowResize","global:load":"_updateLoaded","capture:load img":"_updateLoaded","capture:error img":"_updateLoaded","coral-dragaction:dragstart coral-masonry-item":"_onItemDragStart","coral-dragaction:dragover coral-masonry-item":"_onItemDragMove","coral-dragaction:dragend coral-masonry-item":"_onItemDragEnd","capture:focus coral-masonry-item":"_onItemFocus"},properties:{items:{get:function(){return this._items},set:function(){}},layout:{"default":"",reflectAttribute:!0,get:function(){return this._layoutName},set:function(a){var b=Coral.Masonry&&Coral.Masonry._layouts;return b?(""===a&&(a=Object.keys(b)[0]),void(a!==this._layoutName&&(b[a]?(this._layoutName=a,this._scheduleLayout("new layout")):window.console&&g&&console.error("Coral.Masonry: Unknown layout:",a)))):void window.setTimeout(function(){this.layout=a}.bind(this),0)}},selectedItem:{get:function(){for(var a=this.items.getAll(),b=0;b<a.length;b++){var c=a[b];if(c.selected)return c}return null},set:function(){}},selectedItems:{get:function(){for(var a=[],b=this.items.getAll(),c=0;c<b.length;c++){var d=b[c];d.selected&&a.push(d)}return a},set:function(){}},spacing:{"default":null,transform:function(a){var b=Coral.transform.number(a);return null!==b?Math.max(0,b):null},sync:function(){this._scheduleLayout("spacing")}},orderable:{"default":!1,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){this._updateDragActions()}}},selectAll:function(){this._setAllSelected(!0)},deselectAll:function(){this._setAllSelected(!1)},_setAllSelected:function(a){for(var b=this.items.getAll(),c=0;c<b.length;c++){var d=b[c];d.selected!==a&&(d.selected=a)}},_scheduleLayout:function(a){this._forceDebounce||this._layoutScheduled||(Coral.commons.nextFrame(function(){this._layoutScheduled&&(this._doLayout(a),this._layoutScheduled=!1)}.bind(this)),this._layoutScheduled=!0)},_scheduleDebouncedLayout:function(a,b){b&&this._layouted&&(this._forceDebounce=!0),window.clearTimeout(this._debounceId),this._debounceId=window.setTimeout(function(){this._forceDebounce=!1,this._scheduleLayout("window resize")}.bind(this),500)},_onResize:function(){this._componentReady&&(this._layouted?this._scheduleDebouncedLayout("resize",!1):this._doLayout("became visible"))},_onWindowResize:function(){this._scheduleDebouncedLayout("window resize",!0)},_doLayout:function(a){var c=!!this.offsetParent,d=Coral.Masonry._layouts[this.layout];if(!this._forceDebounce&&d&&c){this._layout?this._layout.name!==this.layout&&(this._layout.destroy(),this._layout=new d(this)):this._layout=new d(this);var e,f=this._newItems;for(e=0;e<f.length;e++)f[e]._insert();for(this._layout.layout(),this._layouted=!0,e=0;e<f.length;e++)f[e].classList.add("is-managed");f.length=0,this.classList.toggle("is-loaded",this._loaded);var g=this._tabbableItem;g&&!b(g)||this._setTabbableItem(this.items.first());var h=this._focusedItem;h&&(b(h)&&this._focusedItemNext?this._focusedItemNext.focus():h!==document.activeElement&&(this._focusedItem=null,this._focusedItemNext=null)),this._observer.takeRecords()}},_initialize:function(){this._loaded=!1,this._layouted=!1,this._layoutScheduled=!1,this._forceDebounce=!1,this._debounceId=null,this._items=new Coral.Collection({host:this,itemTagName:"CORAL-MASONRY-ITEM",filter:a}),this._newItems=[],this._tabbableItem=null,this._observer=new MutationObserver(this._scheduleLayout.bind(this,"mutation")),this._observer.observe(this,{childList:!0,subtree:!0,characterData:!0,attributes:!0})},attachedCallback:function(){Coral.Component.prototype.attachedCallback.call(this),this._attaching=!0,Coral.commons.nextFrame(function(){this._attaching=!1,this._updateLoaded()}.bind(this))},_updateLoaded:function(){if(!this._loaded&&"complete"===document.readyState){for(var a=!0,b=this.querySelectorAll("img"),c=0;c<b.length;c++){var d=b[c];if(d.src&&!d.complete&&!d._loadError){a=!1;break}}this._loaded=a}this._scheduleLayout()},_onItemAdded:function(a){a._updateDragAction(this.orderable),this._newItems.push(a),this._attaching&&null===a.nextElementSibling&&this._doLayout("last item attached"),this.trigger("coral-collection:add",{item:a})},_onItemRemoved:function(a){a._updateDragAction(!1),a.classList.remove("is-managed"),this.trigger("coral-collection:remove",{item:a})},_onItemFocus:function(b){var c=b.target;c===b.matchedTarget&&(this._setTabbableItem(c),this._focusedItem=c,this._focusedItemNext=[c.nextElementSibling,c.previousElementSibling].filter(a)[0])},_setTabbableItem:function(a){this._tabbableItem&&this._tabbableItem._setTabbable(!1),a&&a._setTabbable(!0),this._tabbableItem=a},_updateDragActions:function(){for(var a=this.items.getAll(),b=0;b<a.length;b++)a[b]._updateDragAction(this.orderable)},_onItemDragStart:function(a){var b=a.target;if(b===a.matchedTarget){this._layout.detach(b),b._oldBefore=e(b);var c=b._dropPlaceholder=new Coral.Masonry.Item,d=document.createElement("div");d.style.width=b.clientWidth+"px",d.style.height=b.clientHeight+"px",c.appendChild(d),c.classList.add("coral3-Masonry-item--placeholder"),this.insertBefore(c,b)}},_onItemDragMove:function(a){var b=a.target,d=b._dropPlaceholder;if(b===a.matchedTarget&&d){var e=b._prevDragPos,f=c(this,b);if(!e||!this._isApproachingPlaceholder(f,e,d)){var g=this._layout.itemAt(f.left,f.top);g&&g!==d&&(d.compareDocumentPosition(g)&document.DOCUMENT_POSITION_PRECEDING?g.parentNode.insertBefore(d,g):g.parentNode.insertBefore(d,g.nextSibling))}b._prevDragPos=f}},_isApproachingPlaceholder:function(a,b,e){var f=c(this,e),g=e.offsetWidth,h=e.offsetHeight,i=f.left+g/2,j=f.top+h/2;return d(i,j,a.left,a.top,g,h)<=d(i,j,b.left,b.top,g,h)},_onItemDragEnd:function(a){var b=a.target,c=b._dropPlaceholder;b===a.matchedTarget&&c&&(this.replaceChild(b,c),b.trigger("coral-masonry:order",{item:b,oldBefore:b._oldBefore,before:e(b)},!0,!1),this._layout.reattach(b),b.classList.add("is-dropping"),Coral.commons.transitionEnd(b,function(){b.classList.remove("is-dropping")})),b._oldBefore=null,b._dropPlaceholder=null,b._prevDragPos=null}}),f.prototype={layout:function(){},destroy:function(){},detach:function(a){},reattach:function(a){},itemAt:function(a,b){}},Coral.Masonry.Layout=f,Coral.Masonry._layouts={},Coral.Masonry.registerLayout=function(a,b){b.prototype.name=a,Coral.Masonry._layouts[a]=b}}(),function(){"use strict";Coral.register({name:"Masonry.Item",tagName:"coral-masonry-item",className:"coral3-Masonry-item",properties:{content:{contentZone:!0,set:function(){},get:function(){return this}},_removing:{"default":!1,sync:function(){this.classList.toggle("is-removing",this._removing)}},selected:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){this.classList.toggle("is-selected",this.selected),this.setAttribute("aria-selected",this.selected)}}},_initialize:function(){this._masonry=null,this.setAttribute("tabindex","-1"),this._dragAction=null},attachedCallback:function(){if(Coral.Component.prototype.attachedCallback.call(this),!this._removing){var a=this.parentNode;a&&"CORAL-MASONRY"===a.tagName&&a!==this._masonry&&(this._masonry=a,this.classList.add("is-beforeInserting"),a._onItemAdded(this))}},_insert:function(){this.classList.contains("is-beforeInserting")&&(this.classList.remove("is-beforeInserting"),this.classList.add("is-inserting"),Coral.commons.transitionEnd(this,function(){this.classList.remove("is-inserting")}.bind(this)))},detachedCallback:function(){if(!this.parentNode){var a=this._masonry;!this._removing&&a?(this._removing=!0,a.appendChild(this),Coral.commons.transitionEnd(this,function(){this.remove()}.bind(this))):(this._removing=!1,this._masonry=null,a&&a._onItemRemoved(this))}Coral.Component.prototype.detachedCallback.call(this)},_setTabbable:function(a){this.setAttribute("tabindex",a?0:-1)},_updateDragAction:function(a){var b;a&&(null!==this.getAttribute("coral-masonry-draghandle")?b=this:(b=this.querySelector("[coral-masonry-draghandle]"),b||(a=!1))),a?(this._dragAction||(this._dragAction=new Coral.DragAction(this),this._dragAction.dropZone=this.parentNode),this._dragAction.handle=b):this._dragAction&&(this._dragAction.destroy(),this._dragAction=null)}})}(),function(){"use strict";function a(a,b){return parseFloat(window.getComputedStyle(a)[b],10)}function b(a,b,c,d){var e=a[b];return void 0===e&&(e=a.getAttribute(c)),e=parseInt(e,10),(e<=0||isNaN(e))&&(e=d),e}function c(a){Coral.Masonry.Layout.apply(this,arguments),this._columns=[];var b=this._moveFocusVertically.bind(this,!0),c=this._moveFocusVertically.bind(this,!1),d=this._moveFocusHorizontally.bind(this,!0),e=this._moveFocusHorizontally.bind(this,!1),f=this._moveFocusHomeEnd.bind(this,!0),g=this._moveFocusHomeEnd.bind(this,!1),h=this._keys=new Coral.Keys(a,{context:this});h.on("up",b).on("k",b),h.on("down",c).on("j",c),h.on("left",d).on("h",d),h.on("right",e).on("l",e),h.on("home",f),h.on("end",g)}function d(a,b){for(var c=0,d=0;d<b.length;d++){var e=b[d];if(c+=e._layoutData.colspan,c>=a.length)return a.length}return c}function e(a){c.apply(this,arguments)}function f(a){c.apply(this,arguments)}function g(a){c.apply(this,arguments)}function h(a){g.apply(this,arguments)}function i(a,b){a.style.setProperty("-webkit-transform",b),a.style.setProperty("-ms-transform",b),a.style.transform=b}function j(a,b){a.style.setProperty("-webkit-transition",b),a.style.setProperty("-ms-transition",b),a.style.transition=b}c.prototype=Coral.commons.extend(Object.create(Coral.Masonry.Layout.prototype),{layout:function(a){var b=this._masonry,c=b.items.getAll();c.length>0?(this._init(c),this._writeStyles(c),this._readStyles(c),this._positionItems(c)):this._columns.length=0;var d=this._getContentHeight();b.style.height=d-this._verSpacing+this._verPadding+"px",a||this._masonryInnerWidth===b.clientWidth?this._postLayout(d):this.layout(!0)},_init:function(c){var d=c[0],e=this._masonry;this._columnWidth=b(e,"columnWidth","columnwidth",200),this._zeroOffsetLeft=-a(d,"marginLeft"),this._masonryInnerWidth=e.clientWidth;var f=this._masonry.spacing;"number"==typeof f?(this._horSpacing=f,this._verSpacing=f,this._offsetLeft=f+this._zeroOffsetLeft,this._offsetTop=f-a(d,"marginTop"),this._verPadding=2*f,this._masonryAvailableWidth=e.clientWidth-f):(this._horSpacing=a(d,"marginLeft")+a(d,"marginRight"),this._verSpacing=a(d,"marginTop")+a(d,"marginBottom"),this._offsetLeft=a(e,"paddingLeft"),this._offsetTop=a(e,"paddingTop"),this._verPadding=this._offsetTop+this._verSpacing+a(e,"paddingBottom"),this._masonryAvailableWidth=e.clientWidth-this._offsetLeft-a(e,"paddingRight"));var g=Math.max(1,Math.floor(this._masonryAvailableWidth/(this._columnWidth+this._horSpacing)));this._columns.length=g;for(var h=0;h<g;h++)this._columns[h]={height:this._offsetTop,items:[]};for(var i=0;i<c.length;i++){var j=c[i],k=j._layoutData;k||(j._layoutData=k={}),k.colspan=Math.min(b(j,"colspan","colspan",1),this._columns.length)}},_writeStyles:function(a){for(var b=0;b<a.length;b++){var c=a[b],d=c._layoutData,e=Math.round(this._getItemWidth(d.colspan));d.width!==e&&(c.style.width=e+"px",d.width=e),this._writeItemStyle(c)}},_getItemWidth:function(a){},_writeItemStyle:function(a){},_readStyles:function(a){for(var b=0;b<a.length;b++){var c=a[b],d=c._layoutData;d.height=Math.round(c.getBoundingClientRect().height),d.ignored=d.detached||!c.offsetParent}},_positionItems:function(a){for(var b,c=0;c<a.length;c++){var d=a[c],e=d._layoutData;if(!e.ignored){var f,g=this._columns.length-(e.colspan-1),h=-1;for(b=0;b<g;b++){for(var j=this._offsetTop,k=0;k<e.colspan;k++)j=Math.max(j,this._columns[b+k].height);(h===-1||j<f)&&(h=b,f=j)}var l=f,m=Math.round(this._getItemLeft(h));e.left===m&&e.top===l||(e.columnIndex=h,e.itemIndex=this._columns[h].items.length,e.left=m,e.top=l,i(d,"translate("+m+"px, "+l+"px)"));var n=l+e.height+this._verSpacing;for(b=0;b<e.colspan;b++){var o=this._columns[h+b];o.height=n,o.items.push(d)}}}},_getItemLeft:function(a){},_getContentHeight:function(){return this._columns.reduce(function(a,b){return Math.max(a,b.height)},0)-this._offsetTop},_postLayout:function(a){},_moveFocusVertically:function(a,b){var c=b.target._layoutData;if(c){var d=c.itemIndex+(a?-1:1),e=this._columns[c.columnIndex].items[d];e&&(e.focus(),b.preventDefault())}},_moveFocusHorizontally:function(a,b){var c=b.target._layoutData;if(c){var d,e=c.columnIndex+(a?-1:c.colspan),f=this._columns[e];if(f)for(var g=c.top+c.height,h=0,i=0;i<f.items.length;i++){var j=f.items[i],k=j._layoutData,l=k.top+k.height;if(c.top<=l&&g>=k.top){var m=(c.height-Math.max(0,k.top-c.top)-Math.max(0,g-l))/k.height;m>h&&(h=m,d=j)}else if(c.top+c.height<k.top)break}d&&(d.focus(),b.preventDefault())}},_moveFocusHomeEnd:function(a,b){var c=b.target._layoutData;if(c){var d,e=this._columns;if(a)d=e[0]&&e[0].items[0];else for(var f=e.length-1;f>-1;f--)if(e[f].items.length>0){d=e[f].items[e[f].items.length-1];break}d&&(d.focus(),b.preventDefault())}},destroy:function(){this._keys.destroy();for(var a=this._masonry.items.getAll(),b=0;b<a.length;b++){var c=a[b];delete c._layoutData,i(c,""),this._resetItem(c)}},_resetItem:function(a){},detach:function(a){a._layoutData.detached=!0},reattach:function(a){var b=a._layoutData;b.detached=!1;var c=a.getBoundingClientRect();j(a,"none"),a.style.left="",a.style.top="",i(a,"");var d=a.getBoundingClientRect();b.left=c.left-d.left,b.top=c.top-d.top,i(a,"translate("+b.left+"px, "+b.top+"px)"),a.getBoundingClientRect(),j(a,"")},itemAt:function(a,b){for(var c=this._masonry.items.getAll(),d=0;d<c.length;d++){var e=c[d],f=e._layoutData;if(f&&!f.ignored&&f.left<=a&&f.left+f.width>=a&&f.top<=b&&f.top+f.height>=b)return e;
}return null}}),e.prototype=Coral.commons.extend(Object.create(c.prototype),{_writeStyles:function(a){this._outerColumnWidth=this._columnWidth+this._horSpacing;var b=d(this._columns,a);this._offsetLeft+=(this._masonryAvailableWidth-b*this._outerColumnWidth)/2,c.prototype._writeStyles.apply(this,arguments)},_getItemWidth:function(a){return this._columnWidth*a+this._horSpacing*(a-1)},_getItemLeft:function(a){return this._offsetLeft+this._outerColumnWidth*a}}),Coral.Masonry.registerLayout("fixed-centered",e),f.prototype=Coral.commons.extend(Object.create(c.prototype),{_writeStyles:function(a){var b=this._columns;if(this._alignLeft=d(b,a)<b.length,!this._alignLeft){var e=this._masonryInnerWidth-this._columnWidth*b.length;this._horSpacing=e/(b.length+1)}c.prototype._writeStyles.apply(this,arguments)},_getItemWidth:function(a){return this._columnWidth*a+this._horSpacing*(a-1)},_getItemLeft:function(a){return this._zeroOffsetLeft+this._columnWidth*a+this._horSpacing*(a+1)}}),Coral.Masonry.registerLayout("fixed-spread",f),g.prototype=Coral.commons.extend(Object.create(c.prototype),{_getItemWidth:function(a){return this._masonryAvailableWidth/this._columns.length*a-this._horSpacing},_getItemLeft:function(a){return this._offsetLeft+this._masonryAvailableWidth*a/this._columns.length}}),Coral.Masonry.registerLayout("variable",g),h.prototype=Coral.commons.extend(Object.create(g.prototype),{_writeItemStyle:function(a){this._resetItem(a)},_postLayout:function(a){for(var b=0;b<this._columns.length;b++)for(var c=this._columns[b],d=a+this._offsetTop,e=c.items.length-1;e>=0;e--){var f=c.items[e],g=f._layoutData;if(g.columnIndex===b){var h=d-g.top-this._verSpacing;f.style.height=h+"px"}d=g.top}},_resetItem:function(a){a.style.height=""}}),Coral.Masonry.registerLayout("dashboard",h)}(),window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.Multifield=window.Coral.templates.Multifield||{},window.Coral.templates.Multifield.item=function(a){var b=document.createDocumentFragment(),c=this.remove=document.createElement("button","coral-button");c.setAttribute("type","button"),c.setAttribute("is","coral-button"),c.setAttribute("handle","remove"),c.setAttribute("variant","quiet"),c.setAttribute("icon","delete"),c.setAttribute("iconsize","S"),c.className+=" coral3-Multifield-remove",b.appendChild(c);var d=document.createTextNode("\n");b.appendChild(d);var e=this.move=document.createElement("button","coral-button");return e.setAttribute("type","button"),e.setAttribute("is","coral-button"),e.setAttribute("handle","move"),e.setAttribute("variant","quiet"),e.setAttribute("icon","moveUpDown"),e.setAttribute("iconsize","S"),e.className+=" coral3-Multifield-move",b.appendChild(e),b},function(){"use strict";var a="coral-multifield-item",b="is-dragging",c="is-after",d="is-before",e="content"in document.createElement("template"),f=function(a){Coral.Collection.apply(this,arguments)};f.prototype=Object.create(Coral.Collection.prototype),f.prototype.add=function(a,b){if(this._container&&this._itemTagName)return a instanceof HTMLElement||(a=document.createElement(this._itemTagName).set(a,!0)),b||(b=this.last(),b&&(b=b.nextElementSibling)),this._container.insertBefore(a,b||this._container.firstChild),a},Coral.register({name:"Multifield",tagName:"coral-multifield",className:"coral3-Multifield",events:{"coral-dragaction:dragstart coral-multifield-item":"_onDragStart","coral-dragaction:drag coral-multifield-item":"_onDrag","coral-dragaction:dragend coral-multifield-item":"_onDragEnd","click [coral-multifield-add]":"_onAddItemClick","click .coral3-Multifield-remove":"_onRemoveItemClick"},properties:{items:{get:function(){return this._items||(this._items=new f({host:this,itemTagName:a,itemSelector:":scope > "+a})),this._items},set:function(){}},template:Coral.property.contentZone({tagName:"template",handle:"template",insert:function(a){this.appendChild(a)},set:function(a){if(a.set||(a.set=this._internalTemplateSet),!e){for(var b=document.createDocumentFragment();a.firstChild;)b.appendChild(a.firstChild);a.content=b}}})},_onAddItemClick:function(a){var b=a.target.closest("coral-multifield");b&&b===this&&(this.items.add(new Coral.Multifield.Item),this.trigger("change"))},_onRemoveItemClick:function(a){a.matchedTarget.parentNode.parentNode===this&&(a.matchedTarget.parentNode.remove(),this.trigger("change"))},_onDragStart:function(a){if(a.target.parentNode===this){var e=a.detail.dragElement,f=this.items.getAll(),g=f.indexOf(e);e.classList.add(b),f.forEach(function(a,b){b<g?a.classList.add(d):b>g&&a.classList.add(c)})}},_onDrag:function(a){if(a.target.parentNode===this){var e=this.items.getAll(),f=0;e.length&&(f=parseFloat(window.getComputedStyle(e[0]).marginBottom)),e.forEach(function(g){if(!g.classList.contains(b)){var h=a.detail.dragElement,i=h.getBoundingClientRect(),j=g.getBoundingClientRect(),k=j.top+document.body.scrollTop,l=a.detail.pageY<k+j.height/2,m=i.height+f+"px";if(g.classList.toggle(c,l),g.classList.toggle(d,!l),g.classList.contains(c)&&(g.style.top=e.indexOf(g)<e.indexOf(h)?m:""),g.classList.contains(d)){var n=e.indexOf(g)>e.indexOf(h);g.style.top=n?"-"+m:""}}})}},_onDragEnd:function(a){if(a.target.parentNode===this){var e=a.detail.dragElement,f=this.items.getAll(),g=[],h=[];f.forEach(function(a){a.classList.contains(c)?h.push(a):a.classList.contains(d)&&g.push(a),a.classList.remove(b,c,d),a.style.top="",a.style.position=""});var i=h.shift(),j=g.pop();i&&(this.insertBefore(e,i),this.trigger("change")),j&&(this.insertBefore(e,j.nextElementSibling),this.trigger("change"))}},_render:function(){this.items._startHandlingItems();var a=this.querySelector("#"+this.id+" > template[coral-multifield-template]");a||(a=document.createElement("template"),a.setAttribute("coral-multifield-template",""),this.appendChild(a)),a.set||(a.set=this._internalTemplateSet),this.template=a},_internalTemplateSet:function(a){var b,c;for(b in a)c=a[b],this[b]=c},_renderTemplate:function(a){if(!a.content.firstChild){if(!e){var b=this.template.content.querySelectorAll("template[coral-multifield-template]");Array.prototype.forEach.call(b,function(a){for(;a.content.firstChild;)a.appendChild(a.content.firstChild)})}a.content.appendChild(document.importNode(this.template.content,!0))}},_initialize:function(){var b=this;b.setAttribute("role","list");var c=function(a){b._renderTemplate(a)};b._observer=new MutationObserver(function(d){d.forEach(function(d){for(var e=0;e<d.addedNodes.length;e++){var f=d.addedNodes[e],g=b.template;g.contains(f)&&g!==f&&(g.content.appendChild(f),b.items.getAll().forEach(c)),f.tagName&&f.tagName.toLowerCase()===a&&f.parentNode===b&&b._renderTemplate(f)}})}),b._observer.observe(b,{childList:!0,subtree:!0}),Coral.commons.ready(b,function(){b.items.getAll().forEach(c)})}}),Coral.register({name:"Multifield.Item",tagName:"coral-multifield-item",className:"coral3-Multifield-item",properties:{content:Coral.property.contentZone({handle:"content",tagName:"coral-multifield-item-content",defaultContentZone:!0,insert:function(a){this.insertBefore(a,this.firstChild)}})},_render:function(){var a=this.querySelector('[handle="move"]'),b=this.querySelector('[handle="remove"]'),c=this.querySelector("coral-multifield-item-content");if(a&&b&&c)this._elements.move=a,this._elements.remove=b,this.content=c;else{var d=document.createDocumentFragment();for(c=c||document.createElement("coral-multifield-item-content");this.firstChild;)c.appendChild(this.firstChild);d.appendChild(Coral.templates.Multifield.item.call(this._elements)),this.content=c,this.appendChild(d)}},_initialize:function(){this.setAttribute("role","listitem");var a=new Coral.DragAction(this);a.axis="vertical",a.handle=this._elements.move}}),Coral.Multifield.Item.Content=function(){return document.createElement("coral-multifield-item-content")}}(),window.Coral=window.Coral||{},window.Coral.strings=window.Coral.strings||{},window.Coral.strings["coralui-component-numberinput"]={"en-US":{Decrement:"Decrement",Increment:"Increment"},"fr-FR":{Decrement:"Décrémenter",Increment:"Incrémenter"},"de-DE":{Decrement:"Reduzieren",Increment:"Erhöhen"},"it-IT":{Decrement:"Decrementare",Increment:"Incrementare"},"es-ES":{Decrement:"Reducir",Increment:"Aumentar"},"pt-BR":{Decrement:"Decrementar",Increment:"Incrementar"},"ja-JP":{Decrement:"減らす",Increment:"増やす"},"ko-KR":{Decrement:"감소",Increment:"증가"},"zh-CN":{Decrement:"减量",Increment:"增量"},"zh-TW":{Decrement:"減量",Increment:"增量"},"nl-NL":{Decrement:"Verlagen",Increment:"Verhogen"},"da-DK":{Decrement:"Reduktion",Increment:"Dataændring"},"fi-FI":{Decrement:"Vähennys",Increment:"Lisäys"},"nb-NO":{Decrement:"Reduser",Increment:"Øk"},"sv-SE":{Decrement:"Minskning",Increment:"Ökning"},"cs-CZ":{Decrement:"Odpočet",Increment:"Přírůstek"},"pl-PL":{Decrement:"Zmniejsz",Increment:"Zwiększ"},"ru-RU":{Decrement:"Снижение",Increment:"Прирост"},"tr-TR":{Decrement:"Azaltma",Increment:"Artırma"}},window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.NumberInput=window.Coral.templates.NumberInput||{},window.Coral.templates.NumberInput.base=function(a){var b=document.createDocumentFragment(),c=a="undefined"==typeof a?{}:a;c=a,c.uid=Coral.commons.getUID(),a=c;var d=document.createTextNode("\n");b.appendChild(d);var e=document.createElement("span");e.className+=" coral-InputGroup-button",e.setAttribute("role","presentation");var f=document.createTextNode("\n  ");e.appendChild(f);var g=this.stepUp=document.createElement("button","coral-button");g.className+=" coral3-NumberInput-stepUp",g.setAttribute("type","button"),g.setAttribute("is","coral-button"),g.setAttribute("handle","stepUp"),g.setAttribute("title",Coral.i18n.get("Increment")),g.setAttribute("aria-label",Coral.i18n.get("Increment")),g.setAttribute("icon","chevronUp"),g.setAttribute("iconsize","XS"),g.setAttribute("tabindex","-1"),g.setAttribute("aria-controls",a.uid),e.appendChild(g);var h=document.createTextNode("\n  ");e.appendChild(h);var i=this.stepDown=document.createElement("button","coral-button");i.className+=" coral3-NumberInput-stepDown",i.setAttribute("type","button"),i.setAttribute("is","coral-button"),i.setAttribute("handle","stepDown"),i.setAttribute("title",Coral.i18n.get("Decrement")),i.setAttribute("aria-label",Coral.i18n.get("Decrement")),i.setAttribute("icon","chevronDown"),i.setAttribute("iconsize","XS"),i.setAttribute("tabindex","-1"),i.setAttribute("aria-controls",a.uid),e.appendChild(i);var j=document.createTextNode("\n  ");e.appendChild(j);var k=this.liveregion=document.createElement("span");k.setAttribute("role","presentation"),k.setAttribute("handle","liveregion"),k.setAttribute("aria-live","assertive"),k.setAttribute("aria-atomic","true"),k.setAttribute("aria-relevant","additions text"),k.className+=" u-coral-screenReaderOnly",k.setAttribute("aria-hidden","true"),e.appendChild(k);var l=document.createTextNode("\n");e.appendChild(l),b.appendChild(e);var m=document.createTextNode("\n");b.appendChild(m);var n=this.input=document.createElement("input","coral-textfield");return n.setAttribute("is","coral-textfield"),n.setAttribute("handle","input"),n.setAttribute("type","number"),n.className+=" coral3-NumberInput-input coral-InputGroup-input",n.id=a.uid,b.appendChild(n),b},function(){"use strict";function a(a,b,c){var d="+"===a?b+c:b-c;if(b%1!==0||c%1!==0){var e=b.toString().split("."),f=c.toString().split("."),g=e[1]&&e[1].length||0,h=f[1]&&f[1].length||0,i=Math.pow(10,Math.max(g,h));b=Math.round(b*i),c=Math.round(c*i),d="+"===a?b+c:b-c,d/=i}return d}var b,c=3e3,d=4,e=!1,f=!1;Coral.register({name:"NumberInput",tagName:"coral-numberinput",className:"coral3-NumberInput coral-InputGroup",mixins:[Coral.mixin.formField],events:{"key:up":"_onKeyUp","key:pageup":"_onKeyUp","key:down":"_onKeyDown","key:pagedown":"_onKeyDown","key:home":"_onKeyHome","key:end":"_onKeyEnd","touchstart [handle=stepUp], [handle=stepDown]":"_onTouchStart","pointerdown [handle=stepUp], [handle=stepDown]":"_onTouchStart","MSPointerDown [handle=stepUp], [handle=stepUp]":"_onTouchStart","MSPointerDown [handle=stepDown], [handle=stepDown]":"_onTouchStart","click [handle=stepUp]":"_onStepUpButtonClick","click [handle=stepDown]":"_onStepDownButtonClick",'mousewheel [handle="input"]':"_onInputMouseWheel",'DOMMouseScroll [handle="input"]':"_onInputMouseWheel","capture:focus":"_onFocus","capture:blur":"_onBlur"},properties:{value:{transform:function(a){return isNaN(a)?"":String(a)},get:function(){return this._elements.input.value},set:function(a){this._elements.input.value=a;var b=this.getAttribute("value");this._elements.input[b?"setAttribute":"removeAttribute"]("value",b)},alsoSync:["invalid","disabled"],sync:function(){this._elements.input.setAttribute("aria-valuenow",this.value),this._elements.input.setAttribute("aria-valuetext",this.value),f||window.chrome?this._updateLiveRegion(this.value):this._updateLiveRegion(),f=!1}},valueAsNumber:{attribute:null,transform:Coral.transform["float"],get:function(){return parseFloat(this.value)},set:function(a){this._elements.input.value=a,this._queueSync("value","invalid","disabled")}},min:{"default":null,reflectAttribute:!0,transform:Coral.transform.number,alsoSync:["invalid","disabled"],sync:function(){null===this.min?(this._elements.input.removeAttribute("aria-valuemin"),this._elements.input.removeAttribute("min")):(this._elements.input.setAttribute("aria-valuemin",this.min),this._elements.input.min=this.min)}},max:{"default":null,reflectAttribute:!0,transform:Coral.transform.number,alsoSync:["invalid","disabled"],sync:function(){null===this.max?(this._elements.input.removeAttribute("aria-valuemax"),this._elements.input.removeAttribute("max")):(this._elements.input.setAttribute("aria-valuemax",this.max),this._elements.input.max=this.max)}},step:{"default":1,transform:function(a){return"any"===a?a:Coral.transform.number(a)},validate:[Coral.validate.valueMustChange,function(a,b){return null!==a&&(a>0||"any"===a)}],sync:function(){this._elements.input.step=this.step}},name:{get:function(){return this._elements.input.name},set:function(a){this._elements.input.name=a}},disabled:{sync:function(){this.classList.toggle("is-disabled",this.disabled),this._elements.input.disabled=this.disabled,this._setButtonState()}},invalid:{sync:function(){this.classList.toggle("is-invalid",this.invalid),this._elements.input.invalid=this.invalid}},readOnly:{sync:function(){this._elements.input.readOnly=this.readOnly,this._setButtonState()}},required:{sync:function(){this._elements.input.required=this.required}},labelledBy:{sync:function(){this[this.labelledBy?"setAttribute":"removeAttribute"]("aria-labelledby",this.labelledBy)}},placeholder:{reflectAttribute:!0,transform:Coral.transform.string,get:function(){return this._elements.input.placeholder},set:function(a){this._elements.input.placeholder=a}}},reset:function(){this._elements.input.reset()},clear:function(){this._elements.input.clear()},stepUp:function(){var b=this.valueAsNumber,c=this._getActualStep();if(isNaN(b))this.value=null!==this.max?Math.min(c,this.max):c;else{var d=a("+",b,c);this.value=null!==this.max?Math.min(d,this.max):d}},stepDown:function(){var b=this.valueAsNumber,c=this._getActualStep();if(isNaN(b))this.value=null!==this.min?Math.max(-c,this.min):-c;else{var d=a("-",b,c);this.value=null!==this.min?Math.max(d,this.min):d}},_getActualStep:function(){return"any"===this.step?this._properties.step["default"]:this.step},_validateInputValue:function(){this.invalid=""!==this.value&&(window.isNaN(Number(this.value))||null!==this.max&&this.value>this.max||null!==this.min&&this.value<this.min||"any"!==this.step&&this.value%this._getActualStep()!==0)},_setButtonState:function(){this._elements.stepUp.disabled=this.disabled||null!==this.max&&this.value>=this.max||this.readOnly,this._elements.stepDown.disabled=this.disabled||null!==this.min&&this.value<=this.min||this.readOnly},_triggerChange:function(a,b){a!==b&&this.trigger("change")},_onTouchStart:function(a){("touchstart"===a.type||"mouse"!==a.pointerType&&a.pointerType!==d)&&(e=!0)},_setFocusToInput:function(){e||document.activeElement===this._elements.input||this._elements.input.focus(),e=!1},_onStepUpButtonClick:function(a){a.preventDefault();var b=this.value;f="click"===a.type,this._setFocusToInput(),this.stepUp(),this._validateInputValue(),this._triggerChange(this.value,b)},_onStepDownButtonClick:function(a){a.preventDefault();var b=this.value;f="click"===a.type,this._setFocusToInput(),this.stepDown(),this._validateInputValue(),this._triggerChange(this.value,b)},_onKeyHome:function(a){if(a.preventDefault(),!this.disabled&&!this.readOnly){if(null!==this.max){var b=this.value;f=!0,this.value=this.max,this._triggerChange(this.value,b)}this._setFocusToInput()}},_onKeyEnd:function(a){if(a.preventDefault(),!this.disabled&&!this.readOnly){if(null!==this.min){var b=this.value;f=!0,this.value=this.min,this._triggerChange(this.value,b)}this._setFocusToInput()}},_onKeyUp:function(a){a.preventDefault(),this.disabled||this.readOnly||this._onStepUpButtonClick(a)},_onKeyDown:function(a){a.preventDefault(),this.disabled||this.readOnly||this._onStepDownButtonClick(a)},_onInputMouseWheel:function(a){if(!this.disabled&&!this.readOnly&&this._elements.input===document.activeElement){a.preventDefault();var b=this.value,c=Math.max(-1,Math.min(1,a.wheelDelta||-a.detail||a.deltaY));c<0?this.stepDown():this.stepUp(),this._triggerChange(this.value,b)}},_onInputChange:function(a){a.stopPropagation(),this._validateInputValue(),this._queueSync("value","invalid","disabled"),this.trigger("change")},_onFocus:function(a){this.classList.add("is-focused"),this._elements.input.classList.add("is-focused"),this._elements.liveregion.removeAttribute("role"),this._elements.liveregion.removeAttribute("aria-hidden")},_onBlur:function(a){this.contains(document.activeElement)||(this.classList.remove("is-focused"),this._elements.input.classList.remove("is-focused")),this._elements.liveregion.setAttribute("role","presentation"),this._elements.liveregion.setAttribute("aria-hidden",!0),this._clearLiveRegion()},_getLabellableElement:function(){return this._elements.input},_clearLiveRegion:function(){var a=this._elements.liveregion;a.firstChild&&a.removeChild(a.firstChild)},_updateLiveRegion:function(a){var d,e=this;clearTimeout(b),this._clearLiveRegion(),a&&""!==a&&(d=document.createTextNode(a),Coral.commons.nextFrame(function(){e._elements.liveregion.appendChild(d),b=setTimeout(e._clearLiveRegion.bind(e),c)}))},_initialize:function(){this.setAttribute("role","group"),"text"===this._elements.input.type&&this._elements.input.setAttribute("role","spinbutton"),this._elements.input.setAttribute("aria-valuenow",""),this._elements.input.setAttribute("aria-valuetext","")},_render:function(){for(;this.firstChild;)this.removeChild(this.firstChild);this.appendChild(Coral.templates.NumberInput.base.call(this._elements))}})}(),function(){"use strict";Coral.register({name:"PanelStack",tagName:"coral-panelstack",className:"coral3-PanelStack",mixins:[Coral.mixin.selectionList({itemTagName:"coral-panel",supportMultiple:!1,forceSelection:!1,role:"presentation"})],properties:{selectedItem:{get:function(){return this.items.getLastSelected()},set:function(){}}}}),Coral.register({name:"Panel",tagName:"coral-panel",className:"coral3-Panel",mixins:[Coral.mixin.selectionList.Item({listSelector:"coral-panelstack",alwaysEnabled:!0,role:"tabpanel"})],properties:{content:Coral.property.contentZone({handle:"content",tagName:"coral-panel-content",defaultContentZone:!0,insert:function(a){this.appendChild(a)}}),selected:{sync:function(){this.setAttribute("aria-hidden",!this.selected)}}},_render:function(){var a=this.querySelector("coral-panel-content");if(null===a)for(a=document.createElement("coral-panel-content");this.firstChild;)a.appendChild(this.firstChild);this.content=a}}),Coral.Panel.Content=function(){return document.createElement("coral-panel-content")}}(),window.Coral=window.Coral||{},window.Coral.strings=window.Coral.strings||{},window.Coral.strings["coralui-component-quickactions"]={"en-US":{"More actions":"More actions"},"fr-FR":{"More actions":"Autres actions"},"de-DE":{"More actions":"Weitere Aktionen"},"it-IT":{"More actions":"Altre azioni"},"es-ES":{"More actions":"Más acciones"},"pt-BR":{"More actions":"Mais ações"},"ja-JP":{"More actions":"その他のアクション"},"ko-KR":{"More actions":"추가 작업"},"zh-CN":{"More actions":"更多操作"},"zh-TW":{"More actions":"更多動作"},"nl-NL":{"More actions":"Meer acties"},"da-DK":{"More actions":"Flere handlinger"},"fi-FI":{"More actions":"Lisää toimintoja"},"nb-NO":{"More actions":"Flere handlinger"},"sv-SE":{"More actions":"Fler åtgärder"},"cs-CZ":{"More actions":"Další akce"},"pl-PL":{"More actions":"Więcej czynności"},"ru-RU":{"More actions":"Другие действия"},"tr-TR":{"More actions":"Daha fazla işlem"}},window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.QuickActions=window.Coral.templates.QuickActions||{},window.Coral.templates.QuickActions.base=function(a){var b=document.createDocumentFragment(),c=this.moreButton=document.createElement("button","coral-button");c.className+=" coral3-QuickActions-button",c.setAttribute("is","coral-button"),c.setAttribute("type","button"),c.setAttribute("icon","more"),c.setAttribute("iconsize","S"),c.setAttribute("handle","moreButton"),c.setAttribute("title",Coral.i18n.get("More actions")),c.setAttribute("role","menuitem"),c.setAttribute("aria-haspopup","true"),c.setAttribute("aria-label",Coral.i18n.get("More actions")),b.appendChild(c);var d=document.createTextNode("\n");b.appendChild(d);var e=this.overlay=document.createElement("coral-overlay");return e.className+=" coral3-QuickActions-overlay",e.setAttribute("offset","5"),e.setAttribute("placement","bottom"),e.setAttribute("target","_prev"),e.setAttribute("handle","overlay"),b.appendChild(e),b},window.Coral.templates.QuickActions.overlaycontent=function(a){var b=this.buttonList=document.createElement("coral-buttonlist");return b.id=Coral.commons.getUID(),b.className+=" coral3-QuickActions-buttonList",b.setAttribute("handle","buttonList"),b.setAttribute("tabindex","-1"),b},function(){"use strict";function a(a){for(var b=[],c=0,d=b.length=a.length;c<d;c++)b[c]=a[c];return b}var b=10,c=5,d=".coral3-QuickActions-button:not([disabled]):not([hidden])",e={ON:"on",OFF:"off"},f={PARENT:"_parent",PREVIOUS:"_prev",NEXT:"_next"},g={TOP:"top",CENTER:"center",BOTTOM:"bottom"};Coral.register({name:"QuickActions",tagName:"coral-quickactions",className:"coral3-QuickActions",extend:Coral.Overlay,_overlayAnimationTime:Coral.mixin.overlay.FADETIME,events:{"global:resize":"_onWindowResize",mouseout:"_onMouseOut","capture:blur":"_onBlur","global:click":"_onGlobalClick","global:key:escape":"_onEscapeKeypress","key:home > .coral3-QuickActions-button":"_onHomeKeypress","key:end > .coral3-QuickActions-button":"_onEndKeypress","key:pagedown > .coral3-QuickActions-button":"_onButtonKeypressNext","key:right > .coral3-QuickActions-button":"_onButtonKeypressNext","key:down > .coral3-QuickActions-button":"_onButtonKeypressNext","key:pageup > .coral3-QuickActions-button":"_onButtonKeypressPrevious","key:left > .coral3-QuickActions-button":"_onButtonKeypressPrevious","key:up > .coral3-QuickActions-button":"_onButtonKeypressPrevious",'click > .coral3-QuickActions-button:not([handle="moreButton"])':"_onButtonClick","coral-overlay:beforeopen":"_onOverlayBeforeOpen","coral-overlay:beforeclose":"_onOverlayBeforeClose","coral-overlay:open":"_onOverlayOpen","coral-overlay:close":"_onOverlayClose","coral-overlay:positioned":"_onOverlayPositioned","click [coral-list-item]":"_onButtonListItemClick","coral-quickactions-item:_contentchanged":"_onItemChange","coral-quickactions-item:_iconchanged":"_onItemChange","coral-quickactions-item:_hrefchanged":"_onItemChange","coral-quickactions-item:_typechanged":"_onItemTypeChange"},properties:{items:{get:function(){return this._items||(this._items=new Coral.Collection({host:this,itemTagName:"coral-quickactions-item",onItemRemoved:this._onItemRemoved,onCollectionChange:this._onCollectionChange})),this._items},set:function(){}},threshold:{"default":4,reflectAttribute:!0,attribute:"threshold",transform:Coral.transform.number},target:{set:function(a){var b=this,c=this._getTarget(a),d=c!==b._previousTarget;if(c&&d){if(b._previousTarget){var e=b._getTarget(b._previousTarget);e&&(b._removeTargetEventListeners(e),c.removeAttribute("aria-haspopup"),c.removeAttribute("aria-owns"))}b._addTargetEventListeners(),c.setAttribute("aria-haspopup","true");var f=c.getAttribute("aria-owns");f=f&&f.length?f.trim()+" "+this.id:this.id,c.setAttribute("aria-owns",f),b._previousTarget=c}}},interaction:{"default":e.ON,set:function(a){this._interaction=a,a===e.ON?this._addTargetEventListeners():this._removeTargetEventListeners()}},alignMy:{"default":Coral.Overlay.align.CENTER_TOP},alignAt:{"default":Coral.Overlay.align.CENTER_TOP},offset:{"default":10},placement:{validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(g)],set:function(a){var b=this._placementAlignValues[a];this.alignMy=b.alignMy,this.alignAt=b.alignAt,this._placement=a}},open:{sync:function(){var a=this;if(this.open&&!this._openedBefore){for(var b=this.items.getAll(),d=0,e=b.length;d<e;d++)this._attachItem(b[d],d);this._openedBefore=!0}var f=function(){a.style.marginTop=""};a.open?(clearTimeout(this._slideTimeout),f(),a._layout(),a.style.marginTop=-c+"px",Coral.commons.nextFrame(function(){a.style.visibility="visible",a.focus()})):Coral.commons.nextFrame(function(){a._overlayAnimationTime?a._slideTimeout=setTimeout(f,a._overlayAnimationTime):f()});var g=this._getTarget();g&&g.classList.toggle("is-selected",this.open)}}},focus:function(){if(this.open&&!this.contains(document.activeElement)){var a=this._getFirstFocusableButton();a&&a.focus()}},attachedCallback:function(){Coral.Component.prototype.attachedCallback.call(this),this.target=this.target},_getTarget:function(a){if(a=a||this.target,a instanceof Node)return a;var b=null;return"string"==typeof a&&(b=a===f.PARENT?this.parentNode:Coral.Overlay.prototype._getTarget.call(this,a)),b},_addTargetEventListeners:function(a){var b=this,c=a?a:b._getTarget();c&&b.interaction===e.ON&&(c.addEventListener("mouseenter",b._onTargetMouseEnter),c.addEventListener("keyup",b._onTargetKeyUp),c.addEventListener("keydown",b._onTargetKeyDown),c.addEventListener("mouseleave",b._onTargetMouseLeave))},_removeTargetEventListeners:function(a){var b=a?a:this._getTarget();b&&(b.removeEventListener("mouseenter",this._onTargetMouseEnter),b.removeEventListener("keyup",this._onTargetKeyUp),b.removeEventListener("keydown",this._onTargetKeyDown),b.removeEventListener("mouseleave",this._onTargetMouseLeave))},_toggleTabbable:function(a,b){a&&(b?a.hasAttribute("tabIndex")&&a.removeAttribute("tabIndex"):a.setAttribute("tabIndex","-1"))},_getFocusableNeighbour:function(b,c){var d=a(this._getFocusableButtons()),e=d.indexOf(b);if(e>=0)if(c){if(0!==e)return d[e-1]}else if(e<d.length-1)return d[e+1]},_getButtons:function(a){var b=".coral3-QuickActions-button";return b=a?b+':not([handle="moreButton"])':b,this.querySelectorAll(b)},_getFocusableButtons:function(){return this.querySelectorAll(d)},_getFirstFocusableButton:function(){return this.querySelector(d)},_proxyClick:function(a){var b=a.trigger("click");b.defaultPrevented||this.interaction!==e.ON||this.hide()},_getItemData:function(a){return{htmlContent:a.innerHTML,textContent:a.textContent,icon:a.getAttribute("icon")||""}},_attachItem:function(a,b){if(a._elements.button)return void this._updateItem(a);"undefined"==typeof b&&(b=Array.prototype.indexOf.call(this.items.getAll(),a));var c,d=this._getItemData(a),e=Coral.QuickActions.Item.type;a.type===e.BUTTON?c=(new Coral.Button).set({icon:d.icon,iconsize:Coral.Icon.size.SMALL,type:"button"},!0):a.type===e.ANCHOR&&(c=(new Coral.AnchorButton).set({icon:d.icon,iconsize:Coral.Icon.size.SMALL,href:a.href},!0)),c.classList.add("coral3-QuickActions-button"),c.setAttribute("tabindex","-1"),c.setAttribute("title",d.textContent.trim()),c.setAttribute("aria-label",d.textContent.trim()),c.setAttribute("role","menuitem"),this.insertBefore(c,this.children[b]||null);var f;a.type===e.BUTTON?f=new Coral.ButtonList.Item:a.type===e.ANCHOR&&(f=new Coral.AnchorList.Item,f.href=a.href);var g=this._elements.buttonList;g.insertBefore(f,g.children[b]||null),f.tabIndex=-1,f.content.innerHTML=d.htmlContent,f.icon=d.icon,a._elements.button=c,a._elements.buttonListItem=f,f._elements.quickActionsItem=a,c._elements.quickActionsItem=a},_layout:function(){this._setWidth();var a=this._getButtons(!0);if(a.length){var c=this._elements.buttonList.items.getAll(),d=this.style.display,e=!1;this.open||(this.style.left-=1e4,this.style.top-=1e4,this.style.display="block",e=!0);for(var f=this.offsetWidth-b,g=window.getComputedStyle(a[0],null).getPropertyValue("min-width"),h=Math.round(parseFloat(g,10)),i=h+b,j=0,k=0;f>k;)k+=i,f>k&&j++;for(var l=this.threshold>0,m=l&&a.length>this.threshold,n=a.length>j||m,o=n&&l&&this.threshold+1<j,p=n?o?this.threshold+1:j:a.length,q=0;q<a.length;q++)this._toggleTabbable(a[q],!1),a[q].show(),c[q]&&c[q].show();if(this._toggleTabbable(this._elements.moreButton,!1),n){if(p>0){for(var r=p-1;r<a.length;r++)a[r].hide();for(var s=0;s<p-1;s++)c[s].hide();this._toggleTabbable(a[0],!0)}else this._toggleTabbable(this._elements.moreButton,!0);this._elements.moreButton.show()}else this._toggleTabbable(a[0],!0),this._elements.moreButton.hide();var t=p*i,u=Math.round((f-t)/2);this.style.paddingLeft=u+"px",e&&(this.style.left+=1e4,this.style.top+=1e4,this.style.display=d),this._position()}},_setWidth:function(){var a=this._getTarget();a&&(this.style.width=a.offsetWidth+"px")},_setButtonListHeight:function(){this._elements.buttonList.style.height="";var a=window.getComputedStyle(this._elements.buttonList),b=parseInt(a.height,10),c=parseInt(a.maxHeight,10);b<c&&(this._elements.buttonList.style.height=b-1+"px")},_isInternalToComponent:function(a){var b=this._getTarget();return a&&(this.contains(a)||b&&b.contains(a))},_onWindowResize:function(){this._layout()},_onMouseOut:function(a){var b=a.toElement||a.relatedTarget;this._isInternalToComponent(b)||this.interaction!==e.ON||this.hide()},_onBlur:function(a){var b=this,c=a.toElement||a.relatedTarget;this.interaction===e.ON&&(c?b._isInternalToComponent(c)||this.hide():Coral.commons.nextFrame(function(){c=document.activeElement,b._isInternalToComponent(c)||b.hide()}))},_onTargetMouseEnter:function(a){var b=a.fromElement||a.relatedTarget;this.open||this._isInternalToComponent(b)||this.show()},_onTargetKeyUp:function(a){var b=a.keyCode;(a.shiftKey&&121===b||a.ctrlKey&&32===b)&&(this.open||(this.interaction===e.ON&&(this._previousTrapFocus=this.trapFocus,this._previousReturnFocus=this.returnFocus,this.trapFocus=Coral.mixin.overlay.trapFocus.ON,this.returnFocus=Coral.mixin.overlay.returnFocus.ON),this.show()))},_onTargetKeyDown:function(a){var b=a.keyCode;(a.shiftKey&&121===b||a.ctrlKey&&32===b)&&a.preventDefault()},_onTargetMouseLeave:function(a){var b=a.toElement||a.relatedTarget;this._isInternalToComponent(b)||this.hide()},_onEscapeKeypress:function(a){this.interaction===e.ON&&(this._elements.overlay.open&&this._elements.overlay._isTopOverlay()?this._elements.overlay.hide():this.open&&this._isTopOverlay()&&this.hide())},_onHomeKeypress:function(a){a.preventDefault();var b=this._getFirstFocusableButton();b&&b.focus()},_onEndKeypress:function(a){a.preventDefault();var b=this._getFocusableButtons(),c=b[b.length-1];c&&c.focus()},_onButtonKeypressNext:function(a){a.preventDefault();var b=this._getFocusableNeighbour(a.matchedTarget);b&&b.focus()},_onButtonKeypressPrevious:function(a){a.preventDefault();var b=this._getFocusableNeighbour(a.matchedTarget,!0);b&&b.focus()},_onButtonClick:function(a){var b=this;if(a.stopPropagation(),!b._preventClick){var c=a.matchedTarget,d=c._elements.quickActionsItem;b._proxyClick(d),setTimeout(function(){b._preventClick=!1;
},b._overlayAnimationTime),b._preventClick=!0}},_onGlobalClick:function(a){if(this._elements.moreButton.contains(a.target))this._elements.overlay.open=!this._elements.overlay.open;else{var b=this._elements.overlay.contains(a.target);b||(this._elements.overlay.open=!1)}},_onOverlayBeforeOpen:function(a){a.target===this?(this._preventClick=!1,this._layout()):a.target===this._elements.overlay&&(a.stopImmediatePropagation(),this._setButtonListHeight())},_onOverlayBeforeClose:function(a){a.target===this._elements.overlay&&a.stopImmediatePropagation()},_onOverlayOpen:function(a){var b=this;a.target===this._elements.overlay&&(a.stopImmediatePropagation(),Coral.commons.nextFrame(function(){var a=b._elements.buttonList.items.getAll().filter(function(a){return!a.hasAttribute("hidden")&&!a.hasAttribute("disabled")});a.length>0&&a[0].focus()}))},_onOverlayClose:function(a){var b=this;a.target===b?(b._elements.overlay.open=!1,Coral.commons.nextFrame(function(){b._previousTrapFocus&&(b.trapFocus=b._previousTrapFocus,b._previousTrapFocus=void 0),b._previousReturnFocus&&(b.returnFocus=b._previousReturnFocus,b._previousReturnFocus=void 0)})):a.target===b._elements.overlay&&a.stopImmediatePropagation()},_onOverlayPositioned:function(a){this.style.maxWidth="none",a.target===this._elements.overlay&&a.stopImmediatePropagation()},_onButtonListItemClick:function(a){var b=this;a.stopImmediatePropagation();var c=a.matchedTarget;if(c){var d=c._elements.quickActionsItem;b._proxyClick(d)}},_onItemRemoved:function(a){this._removeItemElements(a)},_onCollectionChange:function(a,b){if(this._openedBefore){for(var c,d=this.items.getAll(),e=0,f=a.length;e<f;e++)c=Array.prototype.indexOf.call(d,a[e]),this._attachItem(a[e],c);this._layout()}},_onItemChange:function(a){a.stopImmediatePropagation(),this._updateItem(a.target)},_onItemTypeChange:function(a){a.stopImmediatePropagation();var b=a.target;this._removeItemElements(b),this._attachItem(b),this._layout()},_removeItemElements:function(a){a._elements.button&&(a._elements.button.remove(),a._elements.button._elements.quickActionsItem=void 0,a._elements.button=void 0),a._elements.buttonListItem&&(a._elements.buttonListItem.remove(),a._elements.buttonListItem._elements.quickActionsItem=null,a._elements.buttonListItem=void 0)},_updateItem:function(a){var b=this._getItemData(a),c=Coral.QuickActions.Item.type,d=a._elements.button;d&&(d.icon=b.icon,d.setAttribute("title",b.textContent.trim()),d.setAttribute("aria-label",b.textContent.trim()),d[a.type===c.ANCHOR?"setAttribute":"removeAttribute"]("href",a.href));var e=a._elements.buttonListItem;e&&(e.content.innerHTML=b.htmlContent,e[a.type===c.ANCHOR?"setAttribute":"removeAttribute"]("href",a.href),e.icon=b.icon)},_render:function(){this.id=this.id||Coral.commons.getUID(),["moreButton","overlay"].forEach(function(a){var b=this.querySelector('[handle="'+a+'"]');b&&this.removeChild(b)},this),this.insertBefore(Coral.templates.QuickActions.base.call(this._elements),this.items.first()),this._elements.overlay.appendChild(Coral.templates.QuickActions.overlaycontent.call(this._elements)),this._onTargetMouseEnter=this._onTargetMouseEnter.bind(this),this._onTargetKeyUp=this._onTargetKeyUp.bind(this),this._onTargetMouseLeave=this._onTargetMouseLeave.bind(this)},_initialize:function(){this._openedBefore=!1,this.setAttribute("tabIndex","-1"),this.setAttribute("role","menu"),this.items._startHandlingItems()},_placementAlignValues:{top:{alignMy:"center top",alignAt:"center top"},center:{alignMy:"center center",alignAt:"center center"},bottom:{alignMy:"center bottom",alignAt:"center bottom"}}}),Coral.QuickActions.target=f,Coral.QuickActions.interaction=e,Coral.QuickActions.placement=g}(),function(){"use strict";var a={BUTTON:"button",ANCHOR:"anchor"};Coral.register({name:"QuickActions.Item",tagName:"coral-quickactions-item",properties:{content:{contentZone:!0,get:function(){return this},set:function(){}},href:{"default":"",reflectAttribute:!0,transform:Coral.transform.string,trigger:"coral-quickactions-item:_hrefchanged"},icon:{"default":"",reflectAttribute:!0,transform:Coral.transform.string,trigger:"coral-quickactions-item:_iconchanged"},type:{"default":a.BUTTON,reflectAttribute:!0,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(a)],trigger:"coral-quickactions-item:_typechanged"}},_onMutation:function(){this.trigger("coral-quickactions-item:_contentchanged")},_initialize:function(){this._observer=new MutationObserver(this._onMutation.bind(this)),this._observer.observe(this,{characterData:!0,childList:!0,subtree:!0})}}),Coral.QuickActions.Item.type=a}(),window.Coral=window.Coral||{},window.Coral.strings=window.Coral.strings||{},window.Coral.strings["coralui-component-search"]={"it-IT":{"Clear search":"Azzera ricerca"},"ja-JP":{"Clear search":"検索をクリア"},"es-ES":{"Clear search":"Borrar búsqueda"},"ko-KR":{"Clear search":"검색 지우기"},"zh-CN":{"Clear search":"清除搜索"},"zh-TW":{"Clear search":"清除搜尋"},"pt-BR":{"Clear search":"Limpar busca"},"nl-NL":{"Clear search":"Zoekopdracht wissen"},"en-US":{"Clear search":"Clear search"},"de-DE":{"Clear search":"Suche löschen"},"fr-FR":{"Clear search":"Effacer la recherche"},"da-DK":{"Clear search":"Slet søgning"},"fi-FI":{"Clear search":"Tyhjennä haku"},"nb-NO":{"Clear search":"Fjern søk"},"sv-SE":{"Clear search":"Rensa sökningen"},"cs-CZ":{"Clear search":"Vymazat hledání"},"pl-PL":{"Clear search":"Wyczyść wyniki wyszukiwania"},"ru-RU":{"Clear search":"Очистить поиск"},"tr-TR":{"Clear search":"Aramayı temizle"}},window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.search=window.Coral.templates.search||{},window.Coral.templates.search.base=function(a){var b=document.createDocumentFragment(),c=this.icon=document.createElement("coral-icon");c.className+=" coral-DecoratedTextfield-icon",c.setAttribute("size","S"),c.setAttribute("handle","icon"),b.appendChild(c);var d=document.createTextNode("\n");b.appendChild(d);var e=this.input=document.createElement("input","coral-textfield");e.setAttribute("type","text"),e.className+=" coral-DecoratedTextfield-input coral3-Search-input",e.setAttribute("is","coral-textfield"),e.setAttribute("handle","input"),b.appendChild(e);var f=document.createTextNode("\n");b.appendChild(f);var g=this.clearButton=document.createElement("button","coral-button");return g.setAttribute("type","button"),g.setAttribute("aria-label",Coral.i18n.get("Clear search")),g.setAttribute("is","coral-button"),g.setAttribute("variant","minimal"),g.setAttribute("icon","close"),g.setAttribute("iconsize","XS"),g.className+=" coral-DecoratedTextfield-button",g.setAttribute("handle","clearButton"),b.appendChild(g),b},function(){"use strict";var a={DEFAULT:"default",QUIET:"quiet"};Coral.register({name:"Search",tagName:"coral-search",className:"coral3-Search coral-DecoratedTextfield",mixins:[Coral.mixin.formField],events:{"keydown [handle=input]":"_onEnterKey","keyup [handle=input]":"_onKeyUp","input [handle=input]":"_triggerInputEvent","key:escape [handle=input]":"_clearInput","click [handle=clearButton]:not(:disabled)":"_clearInput"},properties:{value:{get:function(){return this._elements.input.value},set:function(a){this._elements.input.value=a}},name:{get:function(){return this._elements.input.name},set:function(a){this._elements.input.name=a}},disabled:{sync:function(){this.classList.toggle("is-disabled",this.disabled),this._elements.input.disabled=this.disabled,this._elements.clearButton.disabled=this.disabled}},invalid:{sync:function(){this.classList.toggle("is-invalid",this.invalid),this._elements.input.classList.toggle("is-invalid",this.invalid),this._elements.input.setAttribute("aria-invalid",this.invalid)}},required:{sync:function(){this._elements.input.required=this.required}},labelledBy:{sync:function(){this.labelledBy?this.setAttribute("aria-labelledby",this.labelledBy):this.removeAttribute("aria-labelledby")}},placeholder:{"default":"",reflectAttribute:!0,transform:Coral.transform.string,get:function(){return this._elements.input.placeholder},set:function(a){this._elements.input.placeholder=a}},maxLength:{attribute:"maxlength",reflectAttribute:!0,set:function(a){this._elements.input.maxLength=a},get:function(){return this._elements.input.maxLength}},icon:{"default":"search",validate:[],reflectAttribute:!0,set:function(a){this._elements.icon.icon=a,this._elements.icon.hidden=!this._elements.icon.icon},get:function(){return this._elements.icon.icon}},variant:{"default":a.DEFAULT,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(a)],sync:function(){this._elements.input.variant=this.variant}}},_triggerInputEvent:function(){this.trigger("coral-search:input")},_onEnterKey:function(a){if(13===a.which){if(a.preventDefault(),this.disabled)return;this.trigger("coral-search:submit")}},_onKeyUp:function(a){this._updateClearButton()},_updateClearButton:function(){""===this._elements.input.value?this._elements.clearButton.style.display="none":this._elements.clearButton.style.display=""},_clearInput:function(a){this._elements.input.value="",this._updateClearButton(),this._elements.input.focus(),this.trigger("coral-search:clear")},_getLabellableElement:function(){return this._elements.input},_initialize:function(){this._updateClearButton()},_render:function(){this.appendChild(Coral.templates.search.base.call(this._elements))}}),Coral.Search.variant=a}(),window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.StepList=window.Coral.templates.StepList||{},window.Coral.templates.StepList.step=function(a){var b=document.createDocumentFragment(),c=this.stepMarkerContainer=document.createElement("span");c.className+=" coral3-Step-markerContainer",c.setAttribute("handle","stepMarkerContainer");var d=document.createTextNode("\n  ");c.appendChild(d);var e=document.createElement("span");e.className+=" coral3-Step-marker",c.appendChild(e);var f=document.createTextNode("\n");c.appendChild(f),b.appendChild(c);var g=document.createTextNode("\n");b.appendChild(g);var h=this.tooltip=document.createElement("coral-tooltip");h.setAttribute("handle","tooltip"),h.setAttribute("target","_prev"),h.setAttribute("placement","top"),h.setAttribute("variant","inspect"),h.setAttribute("interaction","off"),h.setAttribute("offset","5"),b.appendChild(h);var i=document.createTextNode("\n");b.appendChild(i);var j=document.createElement("span");return j.className+=" coral3-Step-line",b.appendChild(j),b},function(){"use strict";function a(a){if(a instanceof Node)return a;var b=null;return"string"==typeof a&&""!==a.trim()&&(b=document.querySelector(a)),b}var b={ON:"on",OFF:"off"},c={SMALL:"S",LARGE:"L"},d="coral3-StepList";Coral.register({name:"StepList",tagName:"coral-steplist",className:d,mixins:[Coral.mixin.selectionList({itemTagName:"coral-step",supportMultiple:!1,forceSelection:!0,role:"tablist"})],events:{'click > coral-step > [handle="stepMarkerContainer"]':"_onStepMarkerClick","click > coral-step > coral-step-label":"_onStepMarkerClick","capture:focus > coral-step":"_onStepMarkerMouseEnter","capture:mouseenter > coral-step":"_onStepMarkerMouseEnter","capture:blur > coral-step":"_onStepMarkerMouseLeave","capture:mouseleave > coral-step":"_onStepMarkerMouseLeave","key:enter > coral-step":"_onStepKeyboardSelect","key:space > coral-step":"_onStepKeyboardSelect","key:home > coral-step":"_onHomeKey","key:end > coral-step":"_onEndKey","key:pagedown > coral-step":"_selectNextItem","key:right > coral-step":"_selectNextItem","key:down > coral-step":"_selectNextItem","key:pageup > coral-step":"_selectPreviousItem","key:left > coral-step":"_selectPreviousItem","key:up > coral-step":"_selectPreviousItem"},properties:{target:{"default":null,validate:function(a){return null===a||"string"==typeof a||a instanceof Node},sync:function(){var b=a(this.target);if(b)for(var c,d,e=this.items.getAll(),f=b.items?b.items.getAll():b.children,g=Math.max(e.length,f.length),h=0;h<g;h++)c=e[h],d=f[h],c&&c.target&&""!==c.target.trim()||(c&&d?(c.id=c.id||Coral.commons.getUID(),d.id=d.id||Coral.commons.getUID(),c.setAttribute("aria-controls",d.id),d.setAttribute("aria-labelledby",c.id)):c?c.removeAttribute("aria-controls"):d.removeAttribute("aria-labelledby"))}},size:{"default":c.LARGE,reflectAttribute:!0,transform:function(a){return"string"==typeof a?a.toUpperCase():a},validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(c)],sync:function(){this.classList.toggle(d+"--small",this.size===c.SMALL)}},interaction:{"default":b.OFF,reflectAttribute:!0,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(b)],sync:function(){var a=this.interaction===b.ON;this.classList.toggle(d+"--interactive",a);for(var c=this.items.getAll(),e=c.length,f=0;f<e;f++)c[f]._syncTabIndex(a)}}},_onSelectionChange:function(a,b){this._setStateClasses()},_setStateClasses:function(){var a=1/0;this.items.getAll().forEach(function(b,c){b.hasAttribute("selected")&&(a=c),b.classList.toggle("is-complete",c<a)})},_onStepKeyboardSelect:function(a){if(this.interaction===b.ON){a.preventDefault(),a.stopPropagation();var c=a.matchedTarget;this._selectAndFocusItem(c)}},_onStepMarkerClick:function(a){if(this.interaction===b.ON){a.preventDefault(),a.stopPropagation();var c=a.matchedTarget.parentNode;this._selectAndFocusItem(c)}},_onStepMarkerMouseEnter:function(a){if(this.size===c.SMALL||this._isHybridMode){var b=a.matchedTarget;if(b.selected&&this._isHybridMode)return;""!==b._elements.label.innerHTML.trim()&&(b._elements.tooltip.content.innerHTML=b._elements.label.innerHTML,b._elements.tooltip.open=!0)}},_onStepMarkerMouseLeave:function(a){if(this.size===c.SMALL||this._isHybridMode){var b=a.matchedTarget;b._elements.tooltip.open=!1}},_onHomeKey:function(a){if(this.interaction===b.ON){a.preventDefault();var c=this.items.getFirstSelectable();this._selectAndFocusItem(c)}},_onEndKey:function(a){if(this.interaction===b.ON){a.preventDefault();var c=this.items.getLastSelectable();this._selectAndFocusItem(c)}},_selectNextItem:function(a){this.interaction===b.ON&&(a.preventDefault(),this.next())},_selectPreviousItem:function(a){this.interaction===b.ON&&(a.preventDefault(),this.previous())},_selectAndFocusItem:function(a){a&&(this._selectItem(a),a.focus())},_setHybridLabel:function(a){if(a)if(this._isHybridMode){var b=this.items.getAll(),c=b.indexOf(a),d=b.length/2,e=120,f=(d-c)*e-e/2;a.label.style.marginLeft=f+"px",a.label.dataset.coralStepIndex=" ("+(c+1)+"/"+b.length+")"}else a.label.style.marginLeft=""},_updateLabels:function(){var a=!1,b=d+"--hybrid";if(this._isHybridMode=!1,this.classList.remove(b),this.size!==c.SMALL){var e,f=this.items.getAll(),g=f.length;for(e=0;e<g;e++)if(f[e]._labelIsHidden){a=!0,this._isHybridMode=!0,this.classList.add(b);break}for(e=0;e<g;e++)if(f[e].label){var h=!(f[e].hasAttribute("selected")||!a);f[e].label.hidden=h}this._setHybridLabel(this.selectedItem)}},_onItemAttached:function(a){var b=a.target,c=b.clientWidth;b.label&&b.label.clientWidth>c&&(b._labelIsHidden=!0),this._allChildrenAdded&&this._updateLabels()},_onItemDetached:function(){this._updateLabels()},_onItemSelected:function(){this._updateLabels()},_initialize:function(){this.setAttribute("aria-multiselectable","false"),this._setStateClasses();var a=this;Coral.commons.ready(this,function(){a._allChildrenAdded=!0,a._updateLabels()})},next:function(){var a=this.selectedItem;a&&(a=this.items.getNextSelectable(a),this._selectAndFocusItem(a))},previous:function(){var a=this.selectedItem;a&&(a=this.items.getPreviousSelectable(a),this._selectItem(a),a.focus())}}),Coral.StepList.size=c,Coral.StepList.interaction=b,Coral.register({name:"Step",tagName:"coral-step",className:"coral3-Step",mixins:[Coral.mixin.selectionList.Item({listSelector:"coral-steplist",role:"tab",alwaysEnabled:!0})],properties:{label:Coral.property.contentZone({handle:"label",tagName:"coral-step-label",defaultContentZone:!0,insert:function(a){this.appendChild(a)}}),selected:{sync:function(){this.classList.toggle("is-selected",this.selected),this.setAttribute("aria-selected",this.selected);var c=this.parentNode;if(c&&this._syncTabIndex(c.interaction===b.ON),this.selected){var d=a(this.target);if(d)d.setAttribute("selected","");else if(c&&c.target&&(d=a(c.target))){var e=c.items.getAll().indexOf(this),f=(d.items?d.items.getAll():d.children)[e];f&&f.setAttribute("selected","")}}}},target:{"default":null,validate:function(a){return null===a||"string"==typeof a||a instanceof Node},sync:function(){var b=a(this.target);b&&(this.setAttribute("aria-controls",b.id),b.setAttribute("aria-labelledby",this.id))}}},_syncTabIndex:function(a){a?(this.setAttribute("tabindex",this.selected?"0":"-1"),this.removeAttribute("aria-readonly")):(this.removeAttribute("tabindex"),this.setAttribute("aria-readonly","true"))},_render:function(){var a=this.querySelector("coral-step-label");if(null===a)for(a=document.createElement("coral-step-label");this.firstChild;)a.appendChild(this.firstChild);this.label=a;var b=this.querySelector("coral-tooltip");null===b?this.appendChild(Coral.templates.StepList.step.call(this._elements)):this._elements.tooltip=b},_initialize:function(){this.id=this.id||Coral.commons.getUID()}}),Coral.register({name:"Step.Label",tagName:"coral-step-label",className:"coral3-Step-label"})}(),window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.Switch=window.Coral.templates.Switch||{},window.Coral.templates.Switch.base=function(a){var b=document.createDocumentFragment(),c=this.input=document.createElement("input");c.className+=" coral3-Switch-input",c.setAttribute("handle","input"),c.setAttribute("type","checkbox"),c.id=Coral.commons.getUID(),b.appendChild(c);var d=this.label=document.createElement("span");return d.className+=" coral3-Switch-label",d.setAttribute("handle","label"),d.setAttribute("aria-hidden","true"),b.appendChild(d),b},function(){"use strict";Coral.register({name:"Switch",tagName:"coral-switch",className:"coral3-Switch",mixins:[Coral.mixin.formField],properties:{checked:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,set:function(a){this._checked=a,this._elements.input.checked=a}},value:{"default":"on",get:function(){return this._elements.input.value},set:function(a){this._elements.input.value=a}},name:{get:function(){return this._elements.input.name},set:function(a){this._elements.input.name=a}},disabled:{sync:function(){this.classList.toggle("is-disabled",this.disabled),this._elements.input.disabled=this.disabled}},required:{sync:function(){this._elements.input.required=this.required}}},_componentTargetProperty:"checked",_eventTargetProperty:"checked",clear:function(){this.checked=!1},reset:function(){this.checked=this._initialCheckedState},_render:function(){var a=document.createDocumentFragment();for(a.appendChild(Coral.templates.Switch.base.call(this._elements));this.firstChild;){var b=this.firstChild;b.nodeType===Node.TEXT_NODE||b.hasAttribute&&!b.hasAttribute("handle")?a.appendChild(b):this.removeChild(b)}this.appendChild(a)},_initialize:function(){this._initialCheckedState=this.checked}})}(),window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.Table=window.Coral.templates.Table||{},window.Coral.templates.Table.base=function(a){var b=document.createDocumentFragment(),c=this.container=document.createElement("div");c.setAttribute("handle","container"),c.className+=" coral-Table-wrapper-container",c.setAttribute("role","presentation"),c.setAttribute("coral-table-scroll","");var d=document.createTextNode("\n  ");c.appendChild(d);var e=this.table=document.createElement("table");e.setAttribute("handle","table"),e.className+=" coral-Table",e.setAttribute("role","grid"),c.appendChild(e);var f=document.createTextNode("\n");c.appendChild(f),b.appendChild(c);var g=document.createTextNode("\n");return b.appendChild(g),b},function(){"use strict";function a(a){var b=a.parentNode;return b?Array.prototype.indexOf.call(b.children,a):-1}function b(a,b,c){var d=[];if(c){var e=0===c.indexOf("next")?"nextElementSibling":"previousElementSibling";if(c.indexOf("Until")!==-1)for(var f=function(){return"string"==typeof b?a[e].matches(b):a[e]===b};a[e]&&!f();)d.push(a=a[e]);else{if(c.indexOf("All")===-1){var g=a[e];return g&&g.matches(b)?g:null}for(;a[e];)a=a[e],a.matches(b)&&d.push(a)}}else["previousElementSibling","nextElementSibling"].forEach(function(c){for(var e=a;e[c];)e=e[c],e.matches(b)&&d.push(e)});return d}var c={DEFAULT:"default",LIST:"list"},d={NONE:"none",ROW:"row",COLUMN:"column",CELL:"cell"},e="coral-Table-wrapper",f=[];for(var g in c)f.push(e+"--"+c[g]);var h="is-hidden",i="is-disabled",j="is-sorted",k="is-unselectable",l="is-draggedFirstItem",m="is-draggedLastItem",n="is-dragging",o="is-before",p="is-after",q=navigator.userAgent.indexOf("MSIE")!==-1||navigator.appVersion.indexOf("Trident/")>0||window.navigator.userAgent.indexOf("Edge")!==-1,r=navigator.userAgent.indexOf("Firefox")!==-1,s=Coral.Keys.keyToCode("space"),t=document.documentElement;if(t.className.indexOf("wf-inactive")!==-1||t.className.indexOf("wf-loading")!==-1){var u=new MutationObserver(function(){if(t.className.indexOf("wf-active")!==-1){u.disconnect();var a=new window.Vent(t);a.dispatch("coral-commons:_webfontload")}}.bind(this));u.observe(t,{attributes:!0,attributeFilter:["class"]})}var v=function(a){this._table=a};v.prototype=Object.create(Coral.Collection.prototype),v.prototype.add=function(a,b){if(!(a instanceof HTMLElement)){var c=a;a=document.createElement("tr","coral-table-row"),a.set(c,!0)}var d=this._table._elements.body;return d||(d=document.createElement("tbody","coral-table-body"),this._table._elements.table.appendChild(d)),d.insertBefore(a,b||null)},v.prototype.getAll=function(){return this._table._getRows(["body"])},Coral.register({name:"Table",tagName:"coral-table",className:e,baseTagName:"table",extend:HTMLTableElement,events:{"global:coral-commons:_webfontload":"_resetLayout","change [coral-table-select]":"_onSelectAll",'capture:scroll [handle="container"]':"_onScroll",'click thead[is="coral-table-head"] th[is="coral-table-headercell"]':"_onHeaderCellSort",'coral-dragaction:dragstart thead[is="coral-table-head"] th[is="coral-table-headercell"]':"_onHeaderCellDragStart",'coral-dragaction:drag thead[is="coral-table-head"] tr[is="coral-table-row"] > th[is="coral-table-headercell"]':"_onHeaderCellDrag",'coral-dragaction:dragend thead[is="coral-table-head"] tr[is="coral-table-row"] > th[is="coral-table-headercell"]':"_onHeaderCellDragEnd",'key:enter th[is="coral-table-headercell"]':"_onHeaderCellSort",'key:space th[is="coral-table-headercell"]':"_onHeaderCellSort",'click tbody[is="coral-table-body"] [coral-table-rowselect]':"_onRowSelect",'click tbody[is="coral-table-body"] [coral-table-rowlock]':"_onRowLock",'click tbody[is="coral-table-body"] tr[is="coral-table-row"][selectable] [coral-table-cellselect]':"_onCellSelect",'capture:mousedown tbody[is="coral-table-body"] [coral-table-roworder]:not([disabled])':"_onRowOrder",'capture:touchstart tbody[is="coral-table-body"] [coral-table-roworder]:not([disabled])':"_onRowOrder",'coral-dragaction:dragstart tbody[is="coral-table-body"] tr[is="coral-table-row"]':"_onRowDragStart",'coral-dragaction:drag tbody[is="coral-table-body"] tr[is="coral-table-row"]':"_onRowDrag",'coral-dragaction:dragover tbody[is="coral-table-body"] tr[is="coral-table-row"]':"_onRowDragOver",'coral-dragaction:dragend tbody[is="coral-table-body"] tr[is="coral-table-row"]':"_onRowDragEnd",'mousedown tbody[is="coral-table-body"] [coral-table-rowselect]':"_onRowDown",'key:enter tbody[is="coral-table-body"] tr[is="coral-table-row"]':"_onRowSelect",'key:space tbody[is="coral-table-body"] tr[is="coral-table-row"]':"_onRowSelect",'key:pageup tbody[is="coral-table-body"] tr[is="coral-table-row"]':"_onFocusPreviousItem",'key:pagedown tbody[is="coral-table-body"] tr[is="coral-table-row"]':"_onFocusNextItem",'key:left tbody[is="coral-table-body"] tr[is="coral-table-row"]':"_onFocusPreviousItem",'key:right tbody[is="coral-table-body"] tr[is="coral-table-row"]':"_onFocusNextItem",'key:up tbody[is="coral-table-body"] tr[is="coral-table-row"]':"_onFocusPreviousItem",'key:down tbody[is="coral-table-body"] tr[is="coral-table-row"]':"_onFocusNextItem",'key:home tbody[is="coral-table-body"] tr[is="coral-table-row"]':"_onFocusFirstItem",'key:end tbody[is="coral-table-body"] tr[is="coral-table-row"]':"_onFocusLastItem",'key:shift+pageup tbody[is="coral-table-body"] tr[is="coral-table-row"]':"_onSelectPreviousItem",'key:shift+pagedown tbody[is="coral-table-body"] tr[is="coral-table-row"]':"_onSelectNextItem",'key:shift+left tbody[is="coral-table-body"] tr[is="coral-table-row"]':"_onSelectPreviousItem",'key:shift+right tbody[is="coral-table-body"] tr[is="coral-table-row"]':"_onSelectNextItem",'key:shift+up tbody[is="coral-table-body"] tr[is="coral-table-row"]':"_onSelectPreviousItem",'key:shift+down tbody[is="coral-table-body"] tr[is="coral-table-row"]':"_onSelectNextItem","coral-table-row:_multiplechanged":"_onRowMultipleChanged","coral-table-row:_beforeselectedchanged":"_onBeforeRowSelectionChanged","coral-table-row:_selectedchanged":"_onRowSelectionChanged","coral-table-row:_lockedchanged":"_onRowLockedChanged","coral-table-row:_change":"_onRowChange","coral-table-row:_contentchanged":"_onRowContentChanged","coral-table-headercell:_contentchanged":"_resetLayout","coral-table-head:_contentchanged":"_onHeadContentChanged","coral-table-body:_contentchanged":"_onBodyContentChanged","coral-table-body:_empty":"_onBodyEmpty","coral-table-column:_fixedwidthchanged":"_resetLayout","coral-table-column:_fixedwidthsync":"_onFixedWidthSync","coral-table-column:_orderablesync":"_onColumnOrderableSync","coral-table-column:_sortablesync":"_onColumnSortableSync","coral-table-column:_sortabledirectionsync":"_onColumnSortableDirectionSync","coral-table-column:_hiddensync":"_onColumnHiddenSync","coral-table-column:_beforecolumnsort":"_onBeforeColumnSort","coral-table-column:_sort":"_onColumnSort","coral-table-head:_stickysync":"_onHeadStickySync"},properties:{head:Coral.property.contentZone({tagName:"thead",handle:"head",insert:function(a){this._elements.table.tHead=a}}),body:Coral.property.contentZone({tagName:"tbody",handle:"body",defaultContentZone:!0,insert:function(a){this._elements.table.appendChild(a)}}),foot:Coral.property.contentZone({tagName:"tfoot",handle:"foot",insert:function(a){this._elements.table.tFoot=a}}),columns:Coral.property.contentZone({tagName:"colgroup",handle:"columnGroup",insert:function(a){this._elements.table.appendChild(a)}}),variant:{"default":c.DEFAULT,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(c)],sync:function(){this.classList.remove.apply(this.classList,f),this.classList.add(e+"--"+this.variant)}},selectable:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){var a=this._getRows(["body"]);this.selectable?a.forEach(function(a){a._toggleSelectable(!0)}):(a.forEach(function(a){a._toggleSelectable(!1)}),this.trigger("coral-table:change",{selection:[],oldSelection:this._oldSelection}),this._oldSelection=[],this._lastSelectedItems.items=[]),this._toggleFocusable()}},orderable:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){this._getRows(["body"]).forEach(function(a){a._toggleOrderable(this.orderable)}.bind(this)),this._toggleFocusable()}},multiple:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){var a=this._elements.body;if(a&&this._elements.table.setAttribute("aria-multiselectable",this.multiple),!this.multiple){var b=this.selectedItems;if(b.length>1){b.forEach(function(a,c){a.set("selected",c===b.length-1,!0)});var c=this.selectedItems;c.length?this._setSelectAllHandleState("indeterminate"):this._setSelectAllHandleState("unchecked"),this.trigger("coral-table:change",{selection:c,oldSelection:b}),this._oldSelection=c,this._lastSelectedItems.items=c}}}},selectedItems:{get:function(){return this._getRows(["body"]).filter(function(a){return a.selected})},set:function(){}},selectedItem:{get:function(){var a=this.selectedItems;return a.length?a[0]:null},set:function(){}},items:{get:function(){return this._items||(this._items=new v(this)),this._items},set:function(){}},lockable:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){this._getRows(["body"]).forEach(function(a){a._toggleLockable(this.lockable)}.bind(this)),this._toggleFocusable()}}},_onSelectAll:function(a){if(this.selectable){var b=this._getRows(["body"]);if(b.length)if(this.multiple){var c=a.target.checked;b.forEach(function(a){a.set("selected",c,!0)}),b=c?b:[],this._setSelectAllHandleState(c?"checked":"unchecked"),this.trigger("coral-table:change",{selection:b,oldSelection:this._oldSelection}),this._oldSelection=b,this._lastSelectedItems.items=b}else{var d=b[b.length-1];d.selected=!d.selected}}},_triggerChangeEvent:function(){if(!this._preventTriggeringEvents){var a=this.selectedItems;this.trigger("coral-table:change",{oldSelection:this._oldSelection,selection:a}),this._oldSelection=a}},_onRowOrder:function(b){var c=this,d=b.target.closest('tr[is="coral-table-row"]');if(d&&c.orderable){var e=c._elements.head,f=c._elements.body,g=e&&e.sticky,h=d.getAttribute("style"),i=a(d),j=d.nextElementSibling,k=new Coral.DragAction(d),n=c.items.getAll(),o=c.getBoundingClientRect(),p=d.getBoundingClientRect();d===n[0]?c.classList.add(l):d===n[n.length-1]&&c.classList.add(m),k.axis="vertical",k.scroll=!1,k.handle=d.querySelector("[coral-table-roworder]");var q=d.cloneNode(!0);q.classList.add(q._className+"--placeholder"),d.style.top=p.top-o.top+"px",c._preventTriggeringEvents=!0,f.insertBefore(q,d.nextElementSibling),Coral.commons.nextFrame(function(){c._preventTriggeringEvents=!1});var r={placeholder:q,index:i,oldBefore:j,style:{row:h}};g&&(r.sticky=g,r.tableTop=o.top,r.tableSize=o.height,r.headSize=parseFloat(c._elements.container.style.marginTop),r.dragElementSize=p.height),d.dragAction._dragData=r}},_onHeaderCellSort:function(a){var b=this,c=a.matchedTarget;if(!c._isDragging){var d=b._getColumn(c);d&&d.sortable&&(a.preventDefault(),d._sort(),c.focus())}},_onHeaderCellDragStart:function(c){var d=this,e=c.matchedTarget,f=c.detail.dragElement,g=e===f?'th[is="coral-table-headercell"]':'th[is="coral-table-headercell"] coral-table-headercell-content',h=d.getBoundingClientRect();f.dragAction._dragData={draggedColumnIndex:a(e),tableLeft:h.left,tableSize:h.width,dragElementSize:e.getBoundingClientRect().width,tableScrollWidth:d._elements.container.scrollWidth},b(e,g,"prevAll").forEach(function(a){a.classList.add(o)}),b(e,g,"nextAll").forEach(function(a){a.classList.add(p)})},_onHeaderCellDrag:function(c){var d=this,e=d._elements.container,f=c.matchedTarget,g=c.detail.dragElement,h=g.dragAction._dragData,i=f.parentElement,j=f===g,k=e.scrollLeft,l=document.body.scrollLeft;f._isDragging=!0;var m=g.getBoundingClientRect().left-h.tableLeft,q=0,r=h.tableSize-h.dragElementSize,s=10;m<q?e.scrollLeft-=s:m>r&&k+h.tableSize<h.tableScrollWidth&&(e.scrollLeft+=s),i._getCells(["headerCells"]).forEach(function(d){var e=j?d:d.content;if(!e.classList.contains(n)){var g=e.getBoundingClientRect().left+l,h=c.detail.pageX<g+e.offsetWidth/3;e.classList.toggle(p,h),e.classList.toggle(o,!h);var i=a(d),m=a(f);if(e.classList.contains(p))if(i<m){var q=window.getComputedStyle(e),r=parseFloat(q.paddingLeft)+parseFloat(q.paddingRight);if(j){var s=parseFloat(q.width);e.style.left=s+r+"px"}else{var t=b(d,'th[is="coral-table-headercell"]',"next"),u=t.getBoundingClientRect().left+l;e.style.left=u-r+k+"px"}}else e.style.left="";if(e.classList.contains(o))if(i>m){var v=b(d,'th[is="coral-table-headercell"]',"prev"),w=window.getComputedStyle(v),x=parseFloat(w.paddingLeft)+parseFloat(w.paddingRight);
if(j){var y=parseFloat(w.width);e.style.left=-(y+x)+"px"}else{var z=v.getBoundingClientRect().left+l;e.style.left=z-x+k+"px"}}else e.style.left=""}})},_onHeaderCellDragEnd:function(b){var c=this,d=b.matchedTarget,e=b.detail.dragElement,f=c.columns,g=e.dragAction._dragData,h=c._getColumn(d),i=c._getRows(["head"]),j=d===e,k=d.parentElement,l=function(a){var b=[];return c._getRows(["body","foot"]).forEach(function(c){var d=c._getCellByIndex(a);d&&b.push(d)}),b},m=l(a(d)),n=null,q=null;j?(n=k.querySelector('th[is="coral-table-headercell"].'+p),q=k.querySelectorAll('th[is="coral-table-headercell"].'+o),q=q.length?q[q.length-1]:null):(n=k.querySelector('th[is="coral-table-headercell"] > coral-table-headercell-content.'+p),n=n?n.parentNode:null,q=k.querySelectorAll('th[is="coral-table-headercell"] > coral-table-headercell-content.'+o),q=q.length?q[q.length-1].parentNode:null);var r=!(n&&n.previousElementSibling===d||q&&q.nextElementSibling===d);if(r){var s=n?c._getColumn(n):null,t=c.trigger("coral-table:beforecolumndrag",{column:h,before:s}),u=h.nextElementSibling;if(!t.defaultPrevented){if(n){var v=a(n),w=l(v);m.forEach(function(a,b){a.parentNode.insertBefore(a,w[b])});var x=c._getColumns()[v];x&&h&&f.insertBefore(h,x),k.insertBefore(d,n)}if(q){var y=a(q),z=l(y);m.forEach(function(a,b){a.parentNode.insertBefore(a,z[b].nextElementSibling)});var A=c._getColumns()[y];A&&h&&f.insertBefore(h,A.nextElementSibling),k.insertBefore(d,q.nextElementSibling)}if(g.draggedColumnIndex!==a(d)){var B=c._getColumns()[a(h)+1];c.trigger("coral-table:columndrag",{column:h,oldBefore:u,before:B||null})}}}i.forEach(function(a){a._getCells(["headerCells"]).forEach(function(a){a=j?a:a.content,a.classList.remove(p),a.classList.remove(o),a.style.left=""})}),c._resetLayout(),Coral.commons.nextFrame(function(){d._isDragging=void 0,c._toggleElementTabIndex(e,null,!0)})},_onCellSelect:function(a){var b=a.target.closest('td[is="coral-table-cell"]');b&&(b.selected=!b.selected)},_onRowSelect:function(c){var d=this,e=c.target.closest('tr[is="coral-table-row"]');if(e&&(d.classList.remove(k),d.selectable&&(Coral.Keys.filterInputs(c)||!e.hasAttribute("coral-table-rowselect")))){if(c.keyCode===s&&c.preventDefault(),c.shiftKey){var f=d._lastSelectedItems.items[d._lastSelectedItems.items.length-1],g=d._lastSelectedItems.direction;if(!d.selectedItem){var h=d._elements.body._elements.rows;h.length&&(f=h[0],f.selected=!0)}if(f&&a(e)!==a(f)){var i=a(e)<a(f),j=i?"prevUntil":"nextUntil";if(d._lastSelectedItems.direction=i?"up":"down",e.selected){var l=b(f,e,j);l.some(function(a){return!a.hasAttribute("selected")})?(l.forEach(function(a){a.selected=!0}),b(e,'tr[is="coral-table-row"]:not([selected])',j).forEach(function(a){a.selected=!1})):(l[i?"push":"unshift"](f),l.forEach(function(a){a.selected=!1}))}else{var m=b(f,'tr[is="coral-table-row"]:not([selected])',j);m[i?"push":"unshift"](f),(!i&&"up"===g||i&&"down"===g)&&m.forEach(function(a){a.selected=!1});var n=m[i?0:m.length-1];n.selected=!0,b(n,e,j).forEach(function(a){a.selected=!0})}}}else d._lastSelectedItems.direction=null;e.selected=!!c.shiftKey||!e.selected,d._focusItem(e,c.target===c.matchedTarget||c.target.tabIndex<0)}},_onRowLock:function(a){var b=this;if(b.lockable){var c=a.target.closest('tr[is="coral-table-row"]');c&&(a.preventDefault(),a.stopPropagation(),c.locked=!c.locked,Coral.commons.nextFrame(function(){b._focusItem(c,!0)}))}},_onRowDown:function(a){var b=this;if(b.selectedItem&&a.shiftKey){b.classList.add(k);var c=document.onselectstart;document.onselectstart=function(){return!1},Coral.commons.nextFrame(function(){document.onselectstart=c})}},_onRowDragStart:function(a){var b=this,c=b._elements.body,d=a.detail.dragElement,e=d.dragAction._dragData;e.style.cells=[],d._getCells().forEach(function(a){e.style.cells.push(a.content.getAttribute("style")),a.content.style.width=window.getComputedStyle(a).width}),d.style.position="absolute",d.dragAction.dropZone=c.querySelectorAll('tr[is="coral-table-row"]:not(.'+n+")"),d.classList.add("is-focused")},_onRowDrag:function(a){var b=this,c=b._elements.body,d=a.detail.dragElement,e=d.dragAction._dragData,f=c._elements.rows[0];if(d.getBoundingClientRect().top<=f.getBoundingClientRect().top&&(b._preventTriggeringEvents=!0,c.insertBefore(e.placeholder,f),Coral.commons.nextFrame(function(){b._preventTriggeringEvents=!1})),e.sticky){var g=d.getBoundingClientRect().top,h=g-e.tableTop-e.headSize,i=0,j=e.tableSize-e.dragElementSize-e.headSize,k=10;Coral.commons.nextFrame(function(){h<i?b._elements.container.scrollTop-=k:h>j&&(b._elements.container.scrollTop+=k)})}},_onRowDragOver:function(a){var b=this,c=b._elements.body,d=a.detail.dragElement,e=a.detail.dropElement,f=d.dragAction._dragData;d.getBoundingClientRect().top>=e.getBoundingClientRect().top&&(b._preventTriggeringEvents=!0,c.insertBefore(f.placeholder,e.nextElementSibling),Coral.commons.nextFrame(function(){b._preventTriggeringEvents=!1}))},_onRowDragEnd:function(a){var b=this,c=b._elements.body,d=a.detail.dragElement,e=d.dragAction._dragData,f=e.placeholder.nextElementSibling;b.classList.remove(l),b.classList.remove(m),c.removeChild(e.placeholder),d.dragAction.destroy(),d.setAttribute("style",e.style.row),d._getCells().forEach(function(a,b){a.content.setAttribute("style",e.style.cells[b])});var g=b.trigger("coral-table:beforeroworder",{row:d,before:f});if(!g.defaultPrevented){var h=b._getRows(["body"]).filter(function(a){return a!==d});e.index!==h.indexOf(e.placeholder)&&(b._preventTriggeringEvents=!0,c.insertBefore(d,f),Coral.commons.nextFrame(function(){b._preventTriggeringEvents=!1}),b.trigger("coral-table:roworder",{row:d,oldBefore:e.oldBefore,before:f}))}Coral.commons.nextFrame(function(){d.classList.remove("is-focused"),b._focusItem(d,!0)})},_onRowMultipleChanged:function(a){a.stopImmediatePropagation();var b=this,c=a.target;if(!c.multiple){var d=c.selectedItems;b._preventTriggeringEvents=!0,d.forEach(function(a,b){a.selected=b===d.length-1}),Coral.commons.nextFrame(function(){b._preventTriggeringEvents=!1,b.trigger("coral-table:rowchange",{oldSelection:d,selection:c.selectedItems,row:c})})}},_onBeforeRowSelectionChanged:function(a){a.stopImmediatePropagation();var b=this.selectedItem;this.multiple||!b||a.target.selected||(b.set("selected",!1,!0),this._removeLastSelectedItem(b))},_syncSelectAllHandle:function(a,b){b.length&&a.length===b.length?this._setSelectAllHandleState("checked"):a.length?this._setSelectAllHandleState("indeterminate"):this._setSelectAllHandleState("unchecked")},_setSelectAllHandleState:function(a){var b=this.querySelector("[coral-table-select]");b&&("checked"===a?("undefined"!=typeof b.indeterminate&&(b.indeterminate=!1),"undefined"!=typeof b.checked&&(b.checked=!0)):"unchecked"===a?("undefined"!=typeof b.indeterminate&&(b.indeterminate=!1),"undefined"!=typeof b.checked&&(b.checked=!1)):"indeterminate"===a&&"undefined"!=typeof b.indeterminate&&(b.indeterminate=!0))},_onRowSelectionChanged:function(a){a.stopImmediatePropagation(),this._triggerChangeEvent();var c=this,d=a.target;Coral.commons.nextFrame(function(){var a=c._elements.body;if(a&&a.contains(d)){var e=c.selectedItems,f=a._elements.rows;c._syncSelectAllHandle(e,f),c[d.selected?"_addLastSelectedItem":"_removeLastSelectedItem"](d);var g=c._lastSelectedItems.items[c._lastSelectedItems.items.length-1],h="down"===c._lastSelectedItems.direction;d.selected&&g&&g.selected&&b(g,'tr[is="coral-table-row"][selected]',h?"next":"prev")&&b(g,'tr[is="coral-table-row"]:not([selected])',h?"nextUntil":"prevUntil").forEach(function(a){c._addLastSelectedItem(a)})}})},_onRowLockedChanged:function(b){b.stopImmediatePropagation();var c=this,d=this._elements.body,e=b.target;if(d&&d.contains(e))if(e.locked)e._rowIndex=a(e),c._preventTriggeringEvents=!0,d.insertBefore(e,d._elements.rows[0]||null),Coral.commons.nextFrame(function(){c._preventTriggeringEvents=!1}),c.trigger("coral-table:rowlock",{row:e});else{if(e._rowIndex>=0){var f=d._elements.rows[e._rowIndex];f&&(c._preventTriggeringEvents=!0,d.insertBefore(e,f.nextElementSibling),Coral.commons.nextFrame(function(){c._preventTriggeringEvents=!1}))}c.trigger("coral-table:rowunlock",{row:e})}},_onHeadContentChanged:function(a){a.stopImmediatePropagation();for(var b=this,c=b._elements.head,d=a.detail.addedNodes,e=0;e<d.length;e++){var f=d[e];f instanceof Coral.Table.HeaderCell&&b._toggleStickyHeaderCell(f,c.sticky)}},_onBodyContentChanged:function(a){a.stopImmediatePropagation&&a.stopImmediatePropagation();for(var b=this,c=a.target,d=a.detail.addedNodes,e=a.detail.removedNodes,f=null,g=function(a){a.selected=a===f},h=!1,i=0;i<d.length;i++)if(f=d[i],f instanceof Coral.Table.Row){h=!0,f._toggleSelectable(b.selectable),f._toggleOrderable(b.orderable),f._toggleLockable(b.lockable);var j=b.selectedItems;f.selected&&(!b.multiple&&j.length>1&&j.forEach(g),b._triggerChangeEvent(),f._syncProp("selected")),f.selectable&&f.trigger("coral-table-row:_contentchanged",{addedNodes:f._elements.cells,removedNodes:[]}),b._preventTriggeringEvents||b.trigger("coral-collection:add",{item:f}),b._toggleFocusable()}for(var k=0;k<e.length;k++){var l=e[k];if(l instanceof Coral.Table.Row){if(h=!0,"0"===l.getAttribute("tabindex")){var m=c._elements.rows[0];m&&b._focusItem(m)}l.selected&&b._triggerChangeEvent();var n=b._lastSelectedItems.items.indexOf(l);n!==-1&&(b._lastSelectedItems.items=b._lastSelectedItems.items.splice(n,1)),b._preventTriggeringEvents||b.trigger("coral-collection:remove",{item:l})}}if(h){var o=b.items.getAll();b._syncSelectAllHandle(b.selectedItems,o),b._toggleInteractivity(0===o.length)}},_onBodyEmpty:function(a){a.stopImmediatePropagation(),this._toggleInteractivity(!0)},_onRowChange:function(a){a.stopImmediatePropagation(),this._preventTriggeringEvents||this.trigger("coral-table:rowchange",{oldSelection:a.detail.oldSelection,selection:a.detail.selection,row:a.target})},_onRowContentChanged:function(a){a.stopImmediatePropagation();for(var b=this,c=a.target,d=a.detail.addedNodes,e=null,f=a.detail.removedNodes,g=function(a){a.selected=a===e},h=0;h<d.length;h++)if(e=d[h],e instanceof Coral.Table.Cell){e._toggleSelectable(c.selectable);var i=c.selectedItems;e.selected&&(!c.multiple&&i.length>1&&i.forEach(g),c._triggerChangeEvent(),e._syncProp("selected")),b._preventTriggeringEvents||c.trigger("coral-collection:add",{item:e})}else e instanceof Coral.Table.HeaderCell&&b._setHeaderCellScope(e,c.parentNode);for(var j=0;j<f.length;j++){var k=f[j];k instanceof Coral.Table.Cell&&(k.selected&&c._triggerChangeEvent(),b._preventTriggeringEvents||c.trigger("coral-collection:remove",{item:k}))}},_toggleInteractivity:function(a){var b=this,c=b.querySelector("[coral-table-select]");c&&(c.disabled=a),b.classList.toggle(i,a)},_onFixedWidthSync:function(b){b.stopImmediatePropagation();var c=this,d=c._elements.head,e=b.target;if(d&&d._elements){var f=d._elements.rows,g=a(b.target);Array.prototype.forEach.call(f,function(a){var b=a._getCellByIndex(g,["headerCell"]);b&&b[e.fixedWidth?"setAttribute":"removeAttribute"]("fixedwidth","")})}},_onColumnOrderableSync:function(a){a.stopImmediatePropagation();var b=this,c=this._elements.head,d=a.target,e=b._getColumnHeaderCell(d);e&&(b._toggleDragActionHandle(e,c&&c.sticky),b._resetLayout())},_onColumnSortableSync:function(a){a.stopImmediatePropagation();var b=this,c=this._elements.head,d=a.target,e=b._getColumnHeaderCell(d);e&&(e[d.sortable?"setAttribute":"removeAttribute"]("sortable",""),b._toggleHeaderCellTabIndex(e,c&&c.sticky),b._resetLayout())},_onColumnSortableDirectionSync:function(a){a.stopImmediatePropagation();var b=this,c=a.target,d=Coral.Table.Column.sortableDirection;b.classList.toggle(j,b._isSorted());var e=b._getColumnHeaderCell(c);e&&(e.setAttribute("sortabledirection",c.sortableDirection),e.setAttribute("aria-sort",c.sortableDirection===d.DEFAULT?"none":c.sortableDirection))},_onColumnHiddenSync:function(a){a.stopImmediatePropagation(),this._syncHiddenColumn(a.target,!0)},_onBeforeColumnSort:function(a){a.stopImmediatePropagation();var b=this,c=a.target,d=a.detail.newSortableDirection,e=b.trigger("coral-table:beforecolumnsort",{column:c,direction:d});e.defaultPrevented||(c.sortableDirection=d)},_onColumnSort:function(c){c.stopImmediatePropagation();var d=this,e=d._elements.body,f=c.target,g=a(f),h=d._getColumnHeaderCell(f),i=c.detail.onInitialization,j=c.detail.sortableDirection,k=c.detail.sortableType,l=d._getRows(["body"]),m=[];d&&(d._preventTriggeringEvents=!0),l.forEach(function(a,b){"undefined"==typeof a._defaultRowIndex&&(a._defaultRowIndex=b);var c=a._getCellByIndex(g);c&&m.push(c)}),f.sortableDirection===j.ASCENDING?(b(f,'col[is="coral-table-column"]').forEach(function(a){a._preventSort=!0,a.sortableDirection=j.DEFAULT,a._preventSort=!1}),h&&b(h,'th[is="coral-table-headercell"]').forEach(function(a){a.setAttribute("sortabledirection",j.DEFAULT),a.setAttribute("aria-sort","none")}),m.sort(function(a,b){if(f.sortableType===k.ALPHANUMERIC){var c=a.value?a.value:a.textContent,d=b.value?b.value:b.textContent;return c.localeCompare(d)}if(f.sortableType===k.NUMBER){var e=parseFloat(a.value?a.value:a.textContent.replace(/\s+/g,"").replace(/,/g,".")),g=parseFloat(b.value?b.value:b.textContent.replace(/\s+/g,"").replace(/,/g,"."));return e>g?1:-1}if(f.sortableType===k.DATE){var h=a.value?new Date(parseInt(a.value,10)):new Date(a.textContent),i=b.value?new Date(parseInt(b.value,10)):new Date(b.textContent);return h>i?1:-1}}),f.sortableType!==k.CUSTOM&&(e&&m.forEach(function(a){var b=a.parentElement;b.locked||e.appendChild(b)}),d.trigger("coral-table:columnsort",{column:f})),l.forEach(function(a){a.dragAction&&a.dragAction.destroy()})):f.sortableDirection===j.DESCENDING?(b(f,'col[is="coral-table-column"]').forEach(function(a){a._preventSort=!0,a.sortableDirection=j.DEFAULT,a._preventSort=!1}),h&&b(h,'th[is="coral-table-headercell"]').forEach(function(a){a.setAttribute("sortabledirection",j.DEFAULT),a.setAttribute("aria-sort","none")}),m.sort(function(a,b){if(f.sortableType===k.ALPHANUMERIC){var c=a.value?a.value:a.textContent,d=b.value?b.value:b.textContent;return d.localeCompare(c)}if(f.sortableType===k.NUMBER){var e=parseFloat(a.value?a.value:a.textContent.replace(/\s+/g,"").replace(/,/g,".")),g=parseFloat(b.value?b.value:b.textContent.replace(/\s+/g,"").replace(/,/g,"."));return e<g?1:-1}if(f.sortableType===k.DATE){var h=a.value?new Date(parseInt(a.value,10)):new Date(a.textContent),i=b.value?new Date(parseInt(b.value,10)):new Date(b.textContent);return h<i?1:-1}}),f.sortableType!==k.CUSTOM&&(e&&m.forEach(function(a){var b=a.parentElement;b.locked||e.appendChild(b)}),d.trigger("coral-table:columnsort",{column:f})),l.forEach(function(a){a.dragAction&&a.dragAction.destroy()})):f.sortableDirection!==j.DEFAULT||i||f.sortableType!==k.CUSTOM&&(l.sort(function(a,b){return a._defaultRowIndex>b._defaultRowIndex?1:-1}),l.forEach(function(a){e&&!a.locked&&e.appendChild(a)}),d.trigger("coral-table:columnsort",{column:f})),Coral.commons.nextFrame(function(){d._preventTriggeringEvents=!1})},_onHeadStickySync:function(a){a.stopImmediatePropagation();var b=this,c=a.target;c.classList.toggle(h,c.sticky),b._resetContainerLayout(c.sticky?c.getBoundingClientRect().height+"px":null),b._getRows(["head"]).forEach(function(a){a._getCells(["headerCells"]).forEach(function(a){b._toggleStickyHeaderCell(a,c.sticky)})}),b.classList.toggle(e+"--sticky",c.sticky),b._resetLayout()},_getColumnHeaderCell:function(b){var c=this,d=null,e=c._elements.head;if(e&&e._elements){var f=e._elements.rows,g=a(b);f.length&&(d=f[f.length-1]._getCellByIndex(g,["headerCell"]))}return d},_getColumn:function(b){return this._getColumns()[a(b)]||null},_toggleStickyHeaderCell:function(a,b){this._layoutStickyCell(a,b),this._toggleDragActionHandle(a,b),this._toggleHeaderCellTabIndex(a,b)},_layoutStickyCell:function(a,b){if(b){var c=window.getComputedStyle(a);if(!a.style.minWidth){var d=a.content.getBoundingClientRect().width;d>0&&(a.style.minWidth=d+"px")}var e=parseFloat(c.width),f=parseFloat(c.paddingLeft)+parseFloat(c.paddingRight),g=parseFloat(c.borderRightWidth);a.content.style.width=e+f+g+"px"}else a.style.minWidth="",a.content.style.width="",a.content.style.height="",a.content.style.top="",a.content.style.marginLeft="",(q||r)&&(a.content.style.paddingTop="")},_toggleDragActionHandle:function(a,b){var c=this._getColumn(a);if(a.dragAction&&a.dragAction.destroy(),a.content.dragAction&&a.content.dragAction.destroy(),c&&c.orderable){var d=new Coral.DragAction(b?a.content:a);d.axis="horizontal",d.scroll=!1,a.setAttribute("orderable","")}else a.removeAttribute("orderable")},_toggleFocusable:function(){var a=this._getRows(["body"])[0];if(a){var b=this._getFocusableItem();this.selectable||this.lockable||this.orderable?b||this._toggleElementTabIndex(a):b&&b.removeAttribute("tabindex")}},_toggleElementTabIndex:function(a,b,c){b&&b.removeAttribute("tabindex"),a.setAttribute("tabindex","0"),c&&a.focus()},_toggleHeaderCellTabIndex:function(a,b){var c=this._getColumn(a),d=c&&(c.sortable||c.orderable);a[d&&!b?"setAttribute":"removeAttribute"]("tabindex","0"),a.content[d&&b?"setAttribute":"removeAttribute"]("tabindex","0")},_syncHiddenColumn:function(b,c){var d=this,e=a(b);e!==-1&&(d._getRows().forEach(function(a){var c=a._getCellByIndex(e);c&&(c.hidden=b.hidden)}),c&&d._resetLayout())},_isSorted:function(a){return this._getColumns().some(function(a){return a.sortableDirection!==Coral.Table.Column.sortableDirection.DEFAULT})},_focusEdgeItem:function(a,b){var c=this._elements.body._elements.rows;if(c.length){a.preventDefault();var d=this._getFocusableItem();d&&d.removeAttribute("tabindex"),d=c[b?0:c.length-1],d.setAttribute("tabindex","0"),d.focus()}},_focusSiblingItem:function(a,c){var d=this._getFocusableItem();if(d){a.preventDefault();var e=b(d,'tr[is="coral-table-row"]',c?"next":"prev");e&&(d.removeAttribute("tabindex"),e.setAttribute("tabindex","0"),e.focus())}},_selectSiblingItem:function(a){if(this.selectable&&this.multiple){var c=this.selectedItems,d=this._lastSelectedItems.items[this._lastSelectedItems.items.length-1];if(c.length){if(a&&d.matches(":last-of-type")||!a&&d.matches(":first-of-type"))return;var e=b(d,'tr[is="coral-table-row"]',a?"next":"prev");e.hasAttribute("selected")||(d=e),this._lastSelectedItems.direction=a?"down":"up",d.selected=!d.selected}else if(this._elements.body&&this._elements.body._elements.rows.length){var f=this._getFocusableItem();this._lastSelectedItems.direction=a?"down":"up",f.selected=!0}}Coral.commons.nextFrame(function(){var a=this._lastSelectedItems.items[this._lastSelectedItems.items.length-1];a&&this._focusItem(a,!0)}.bind(this))},_getFocusableItem:function(){return this._elements.body&&this._elements.body.querySelector('tr[is="coral-table-row"][tabindex="0"]')},_getFocusableHeaderCell:function(){return this._elements.head&&this._elements.head.querySelector('th[is="coral-table-headercell"][tabindex="0"], coral-table-headercell-label[tabindex="0"]')},_addLastSelectedItem:function(a){this._lastSelectedItems.items.indexOf(a)===-1?this._lastSelectedItems.items.push(a):(this._removeLastSelectedItem(a),this._addLastSelectedItem(a))},_removeLastSelectedItem:function(a){this._lastSelectedItems.items.splice(this._lastSelectedItems.items.indexOf(a),1)},_focusItem:function(a,b){this._toggleElementTabIndex(a,this._getFocusableItem(),b)},_onFocusFirstItem:function(a){this._focusEdgeItem(a,!0)},_onFocusLastItem:function(a){this._focusEdgeItem(a,!1)},_onFocusNextItem:function(a){this._focusSiblingItem(a,!0)},_onFocusPreviousItem:function(a){this._focusSiblingItem(a,!1)},_onSelectNextItem:function(a){this._selectSiblingItem(!0)},_onSelectPreviousItem:function(a){this._selectSiblingItem(!1)},_setContentZone:function(a,b,c,d,e){if(!(a instanceof c))throw new Error("DOMException: Failed to set the '"+b+"' property on '"+this.toString()+"': The provided value is not of type '"+d+"'.");e.call(this,a)},_render:function(){var a=this,b=document.createDocumentFragment();(q||r)&&a.classList.add(a._className+"--IE"),b.appendChild(Coral.templates.Table.base.call(a._elements));for(var c in a._properties){var d=a._properties[c];if(d.contentZone){var e=d.tagName,f="colgroup"!==e?e+'[is="coral-table-'+e.slice(1)+'"]':"colgroup",g=a._elements[d.handle]=a.querySelector(f);if("body"===c&&!g){g=a._elements.body=document.createElement("tbody","coral-table-body");var h=a.querySelector("tbody");if(h){for(;h.firstChild;)g.appendChild(h.firstChild);h.parentNode.removeChild(h)}}g&&d.insert.call(a,g)}}a.appendChild(b)},_resetLayout:function(){var a=this;a._preventResetLayout||(null!==a._timeout&&window.clearTimeout(a._timeout),a._timeout=window.setTimeout(function(){a._timeout=null,a._resizeStickyHead(),a._resizeContainer()},a._wait))},_resizeStickyHead:function(){var a=this,b=a._elements.head;b&&b.sticky&&a._getRows(["head"]).forEach(function(b){b._getCells(["headerCells"]).forEach(function(b){a._layoutStickyCell(b,!0)})})},_resizeContainer:function(){var a=this,b=a._elements.head;if(b&&b.sticky){var c=0,d=0;this._getRows(["head"]).forEach(function(b,e){var f=b._getCells(["headerCells"]);if(f.length){var g=window.getComputedStyle(f[0].content),h=0,i=parseFloat(g.minHeight),j=parseFloat(g.borderTopWidth);f.forEach(function(a){a.content.style.height="",h=Math.max(h,a.content.getBoundingClientRect().height)}),c+=h,f.forEach(function(b){if(h-j!==i&&(b.content.style.height=h+"px"),(q||r)&&b.content.textContent.trim().length){var c=b.content.getBoundingClientRect().height,f=document.createElement("span");for(a._preventResetLayout=!0;b.content.firstChild;)f.appendChild(b.content.firstChild);b.content.appendChild(f);for(var g=f.getBoundingClientRect().height,k=(c-g)/2;f.firstChild;)b.content.appendChild(f.firstChild);b.content.removeChild(f),b.content.style.paddingTop=k+"px",Coral.commons.nextFrame(function(){a._preventResetLayout=!1})}d=d||h,b.content.style.top=(e>0?d*e+j*(e-1):0)+"px"})}});var e=window.getComputedStyle(this._elements.container),f=parseFloat(e.borderTopWidth),g=parseFloat(e.borderBottomWidth),i=f+g,j=c+"px",k="calc(100% - "+(c+i)+"px)";this._resetContainerLayout(j,k),b.classList.remove(h)}else this._resetContainerLayout()},_resetContainerLayout:function(a,b){this._elements.container.style.marginTop=a?a:"",this._elements.container.style.height=b?b:""},_resetHiddenColumns:function(){var a=this;a._getColumns().forEach(function(b){a._syncHiddenColumn(b)})},_onScroll:function(a){var b=this,c=b._elements.container.scrollLeft;if(b._lastScrollLeft!==c){b._lastScrollLeft=c;var d=b._elements.head;d&&d.sticky&&(d.style.margin="1px",Coral.commons.nextFrame(function(){if(d.style.margin="",!b._preventLayoutStickyCellOnScroll){var a=d.querySelector('tr[is="coral-table-row"] th[is="coral-table-headercell"]');a&&(b._layoutStickyCellOnScroll||1===a.content.offsetLeft?(b._layoutStickyCellOnScroll=!0,b._getRows(["head"]).forEach(function(a){a._getCells(["headerCells"]).forEach(function(a){var b=parseFloat(window.getComputedStyle(a).paddingLeft);a.content.style.marginLeft="-"+(c+b)+"px"})})):b._preventLayoutStickyCellOnScroll=!0)}}))}},_setHeaderCellScope:function(a,b){var c="THEAD"===b.nodeName||"TFOOT"===b.nodeName?"col":"row",d="col"===c?"columnheader":"rowheader";a.setAttribute("role",d),a.setAttribute("scope",c)},_getRows:function(a){a=a?a:["head","body","foot"];var b=[];return a.forEach(function(a){var c=this._elements[a];c&&c._elements&&b.push.apply(b,Array.prototype.slice.call(c._elements.rows))}.bind(this)),b},_getColumns:function(){return Array.prototype.slice.call(this.querySelectorAll('col[is="coral-table-column"]'))},_initialize:function(){var a=this;a.setAttribute("role","presentation"),a._oldSelection=[],a._lastSelectedItems={items:[],direction:null},a._timeout=null,a._wait=50,Coral.commons.addResizeListener(a,a._resetLayout),a._observer=new MutationObserver(function(b){var c=!1;b.forEach(function(b){for(var d=0;d<b.addedNodes.length;d++){var e=b.addedNodes[d];window.CustomElements.upgrade(e),e instanceof Coral.Table.Head&&e.trigger("coral-table-head:_contentchanged",{addedNodes:e._elements.rows,removedNodes:[]}),e instanceof Coral.Table.Body&&(a._syncProp("multiple"),e.trigger("coral-table-body:_contentchanged",{addedNodes:e._elements.rows,removedNodes:[]})),c=c||e instanceof Coral.Table.HeaderCell||e instanceof Coral.Table.Cell||e instanceof Coral.Table.Row||e instanceof Coral.Table.Head||e instanceof Coral.Table.Body||e instanceof Coral.Table.Foot}for(var f=0;f<b.removedNodes.length;f++){var g=b.removedNodes[f];g instanceof Coral.Table.Body&&a._onBodyContentChanged({target:g,detail:{addedNodes:[],removedNodes:g._elements.rows}})}}),c&&a._resetHiddenColumns(),a._resetLayout()}),a._observer.observe(a,{childList:!0,subtree:!0}),a._toggleInteractivity(!a._elements.body),Coral.commons.ready(a,function(){if(a.selectable){var b=a.selectedItems,c=a.items.getAll();a._syncSelectAllHandle(b,c),b.length&&(a._oldSelection=b,a._lastSelectedItems.items=b)}a._getRows().forEach(function(b){b._getCells(["headerCells"]).forEach(function(c){a._setHeaderCellScope(c,b.parentNode)})})})}}),Coral.Table.variant=c,Coral.Table.divider=d}(),function(){"use strict";var a=[];for(var b in Coral.Table.divider)a.push("coral-Table-divider--"+Coral.Table.divider[b]);var c={divider:{"default":Coral.Table.divider.ROW,reflectAttribute:!0,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(Coral.Table.divider)],sync:function(){this.classList.remove.apply(this.classList,a),this.classList.add("coral-Table-divider--"+this.divider)}}},d={_initialize:function(){this.setAttribute("role","rowgroup")},_render:function(){var a=this;Object.defineProperty(a._elements,"rows",{get:function(){return a.querySelectorAll('tr[is="coral-table-row"]')}})}};Coral.mixin.tableSection=function(a,b){Coral.commons.augment(a,d,function(a,b,c){return Coral.commons.callAll(b,a)}),Coral.register.augmentProperties(b.properties,c)}}(),function(){"use strict";Coral.register({name:"Table.Head",tagName:"coral-table-head",className:"coral-Table-head",baseTagName:"thead",extend:HTMLTableSectionElement,mixins:[Coral.mixin.tableSection],properties:{sticky:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){this.trigger("coral-table-head:_stickysync")}}},_initialize:function(){var a=this;a.setAttribute("role","rowgroup"),a._observer=new MutationObserver(function(b){b.forEach(function(b){a.trigger("coral-table-head:_contentchanged",{addedNodes:b.addedNodes,removedNodes:b.removedNodes})})}),a._observer.observe(a,{childList:!0,subtree:!0})}})}(),function(){"use strict";Coral.register({name:"Table.Body",tagName:"coral-table-body",className:"coral-Table-body",baseTagName:"tbody",extend:HTMLTableSectionElement,mixins:[Coral.mixin.tableSection],_initialize:function(){var a=this;a.setAttribute("role","rowgroup"),a._observer=new MutationObserver(function(b){b.forEach(function(b){a.trigger("coral-table-body:_contentchanged",{addedNodes:b.addedNodes,removedNodes:b.removedNodes})})}),a._observer.observe(a,{childList:!0,subtree:!0}),0===a._elements.rows.length&&a.trigger("coral-table-body:_empty")}})}(),function(){"use strict";Coral.register({name:"Table.Foot",tagName:"coral-table-foot",className:"coral-Table-foot",baseTagName:"tfoot",extend:HTMLTableSectionElement,mixins:[Coral.mixin.tableSection]})}(),function(){"use strict";Coral.register({name:"Table.Row",tagName:"coral-table-row",className:"coral-Table-row",baseTagName:"tr",extend:HTMLTableRowElement,events:{"coral-table-cell:_beforeselectedchanged":"_onBeforeCellSelectionChanged","coral-table-cell:_selectedchanged":"_onCellSelectionChanged"},properties:{locked:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,trigger:"coral-table-row:_lockedchanged"},selected:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,triggerBefore:"coral-table-row:_beforeselectedchanged",trigger:"coral-table-row:_selectedchanged",sync:function(){this._syncAriaSelectedState(),this._syncSelectHandle()}},selectable:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){var a=this._getCells(["cells"]);a.forEach(function(a){a._toggleSelectable(this.selectable)}.bind(this))}},multiple:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,trigger:"coral-table-row:_multiplechanged"},selectedItems:{get:function(){return this._getCells(["cells"]).filter(function(a){return a.selected})},set:function(){}},selectedItem:{get:function(){var a=this.selectedItems;return a.length?a[0]:null},set:function(){}},items:{get:function(){return this._items||(this._items=new Coral.Collection({host:this,itemBaseTagName:"td",itemTagName:"coral-table-cell"})),this._items},set:function(){}}},_triggerChangeEvent:function(){var a=this.selectedItems;this.trigger("coral-table-row:_change",{oldSelection:this._oldSelection,selection:a}),this._oldSelection=a},_onCellSelectionChanged:function(a){a.stopImmediatePropagation(),this._triggerChangeEvent()},_onBeforeCellSelectionChanged:function(a){a.stopImmediatePropagation();var b=this.selectedItem;this.multiple||!b||a.target.selected||b.set("selected",!1,!0)},_syncAriaSelectedState:function(){this.classList.toggle("is-selected",this.selected),this.setAttribute("aria-selected",this.selected)},_syncSelectHandle:function(){var a=this.querySelector("[coral-table-rowselect]");a&&("undefined"!=typeof a.indeterminate&&(a.indeterminate=!1),"undefined"!=typeof a.checked&&(a.checked=this.selected))},_toggleSelectable:function(a){a?this._setHandle("coral-table-rowselect"):this.set("selected",!1,!0)},_toggleOrderable:function(a){a?this._setHandle("coral-table-roworder"):this.dragAction&&this.dragAction.destroy()},_toggleLockable:function(a){a&&this._setHandle("coral-table-rowlock")},_setHandle:function(a){this.querySelector("["+a+"]")||this.setAttribute(a,"")},_getCells:function(a){a=a?a:["headerCells","cells"];var b=[];return a.forEach(function(a){b.push.apply(b,Array.prototype.slice.call(this._elements[a]))}.bind(this)),b},_getCellByIndex:function(a,b){b=b?b:["headerCell","cell"];var c=[];return a++,b.indexOf("headerCell")!==-1&&c.push('th[is="coral-table-headercell"]:nth-child('+a+")"),b.indexOf("cell")!==-1&&c.push('td[is="coral-table-cell"]:nth-child('+a+")"),this.querySelector(c.join(", "))},_initialize:function(){var a=this;a.setAttribute("role","row"),a._oldSelection=[],a._observer=new MutationObserver(function(b){b.forEach(function(b){a.trigger("coral-table-row:_contentchanged",{addedNodes:b.addedNodes,removedNodes:b.removedNodes})})}),a._observer.observe(a,{childList:!0})},_render:function(){var a=this;Object.defineProperty(a._elements,"headerCells",{get:function(){return a.querySelectorAll('th[is="coral-table-headercell"]')}}),Object.defineProperty(a._elements,"cells",{get:function(){return a.querySelectorAll('td[is="coral-table-cell"]')}})}})}(),function(){"use strict";Coral.register({name:"Table.Cell",tagName:"coral-table-cell",className:"coral-Table-cell",baseTagName:"td",extend:HTMLTableCellElement,properties:{content:{contentZone:!0,set:function(){},get:function(){return this}},selected:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,triggerBefore:"coral-table-cell:_beforeselectedchanged",trigger:"coral-table-cell:_selectedchanged",sync:function(){this._syncAriaSelectedState(),this._syncSelectHandle()}},value:{"default":"",reflectAttribute:!0,transform:Coral.transform.string}},_setHandle:function(a){this.querySelector("["+a+"]")||this.setAttribute(a,"")},_toggleSelectable:function(a){a?this._setHandle("coral-table-cellselect"):this.selected=!1},_syncAriaSelectedState:function(){this.classList.toggle("is-selected",this.selected),this.setAttribute("aria-selected",this.selected)},_syncSelectHandle:function(){
var a=this.querySelector("[coral-table-cellselect]");a&&("undefined"!=typeof a.indeterminate&&(a.indeterminate=!1),"undefined"!=typeof a.checked&&(a.checked=this.selected))},_initialize:function(){this.setAttribute("role","gridcell")}})}(),function(){"use strict";Coral.register({name:"Table.HeaderCell",tagName:"coral-table-headercell",className:"coral-Table-headerCell",baseTagName:"th",extend:HTMLTableCellElement,properties:{content:Coral.property.contentZone({handle:"content",tagName:"coral-table-headercell-content",insert:function(a){this.appendChild(a)}})},_render:function(){var a=this._elements.content=this.querySelector("coral-table-headercell-content");if(null===a)for(a=document.createElement("coral-table-headercell-content");this.firstChild;)a.appendChild(this.firstChild);this.content=a},_initialize:function(){this._stickyCellObserver=new MutationObserver(function(){this.trigger("coral-table-headercell:_contentchanged")}.bind(this)),this._stickyCellObserver.observe(this.content,{childList:!0,subtree:!0})}}),Coral.Table.HeaderCell.Content=function(){return document.createElement("coral-table-headercell-content")}}(),function(){"use strict";var a={DEFAULT:"default",ASCENDING:"ascending",DESCENDING:"descending"},b={ALPHANUMERIC:"alphanumeric",NUMBER:"number",DATE:"date",CUSTOM:"custom"};Coral.register({name:"Table.Column",tagName:"coral-table-column",className:"coral-Table-column",baseTagName:"col",extend:HTMLTableColElement,properties:{fixedWidth:{"default":!1,attribute:"fixedwidth",reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,trigger:"coral-table-column:_fixedwidthchanged",sync:function(){this.trigger("coral-table-column:_fixedwidthsync")}},hidden:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){this.trigger("coral-table-column:_hiddensync")}},orderable:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){this.trigger("coral-table-column:_orderablesync")}},sortable:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){this.trigger("coral-table-column:_sortablesync")}},sortableType:{"default":b.ALPHANUMERIC,attribute:"sortabletype",reflectAttribute:!0,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(b)]},sortableDirection:{attribute:"sortabledirection","default":a.DEFAULT,reflectAttribute:!0,validate:[Coral.validate.enumeration(a)],set:function(a){var b=Coral.transform["boolean"](this._sortableDirection);this._sortableDirection=a,b&&!this._preventSort&&this._doSort()},sync:function(){this.trigger("coral-table-column:_sortabledirectionsync")}}},_sort:function(){var b;this.sortableDirection===a.DEFAULT?b=a.ASCENDING:this.sortableDirection===a.ASCENDING?b=a.DESCENDING:this.sortableDirection===a.DESCENDING&&(b=a.DEFAULT),this.trigger("coral-table-column:_beforecolumnsort",{newSortableDirection:b})},_doSort:function(c){this.trigger("coral-table-column:_sort",{onInitialization:c,sortableDirection:a,sortableType:b})},_initialize:function(){Coral.commons.nextFrame(function(){this.sortable&&this._doSort(!0)}.bind(this))}}),Coral.Table.Column.sortableDirection=a,Coral.Table.Column.sortableType=b}(),function(){"use strict";function a(a){if(a instanceof Node)return a;var b=null;return"string"==typeof a&&""!==a.trim()&&(b=document.querySelector(a)),b}var b={MEDIUM:"M",LARGE:"L"},c={HORIZONTAL:"horizontal",VERTICAL:"vertical"},d="coral3-TabList";Coral.register({name:"TabList",tagName:"coral-tablist",className:d,mixins:[Coral.mixin.selectionList({itemTagName:"coral-tab",supportMultiple:!1,forceSelection:!0,role:"tablist"})],events:{"click > coral-tab":"_onTabClick","key:home > coral-tab":"_onHomeKey","key:end > coral-tab":"_onEndKey","key:pagedown > coral-tab":"_selectNextItem","key:right > coral-tab":"_selectNextItem","key:down > coral-tab":"_selectNextItem","key:pageup > coral-tab":"_selectPreviousItem","key:left > coral-tab":"_selectPreviousItem","key:up > coral-tab":"_selectPreviousItem"},properties:{selectedItem:{get:function(){return this.items.getLastSelected()},set:function(){}},target:{"default":null,validate:function(a){return null===a||"string"==typeof a||a instanceof Node},sync:function(){var b=a(this.target);if(b)for(var c,d,e=this.items.getAll(),f=b.items?b.items.getAll():b.children,g=Math.max(e.length,f.length),h=0;h<g;h++)c=e[h],d=f[h],c&&c.target&&""!==c.target.trim()||(c&&d?(c.id=c.id||Coral.commons.getUID(),d.id=d.id||Coral.commons.getUID(),c.setAttribute("aria-controls",d.id),d.setAttribute("aria-labelledby",c.id)):c?c.removeAttribute("aria-controls"):d.removeAttribute("aria-labelledby"))}},size:{"default":b.MEDIUM,transform:function(a){return"string"==typeof a?a.toUpperCase():a},validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(b)],sync:function(){this.classList[this.size===b.LARGE?"add":"remove"](d+"--large")}},orientation:{"default":c.HORIZONTAL,reflectAttribute:!0,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(c)],sync:function(){this.classList[this.orientation===c.VERTICAL?"add":"remove"](d+"--vertical")}}},_onTabClick:function(a){a.preventDefault();var b=a.matchedTarget;this._selectAndFocusItem(b)},_onHomeKey:function(a){a.preventDefault();var b=this.items.getFirstSelectable();this._selectAndFocusItem(b)},_onEndKey:function(a){a.preventDefault();var b=this.items.getLastSelectable();this._selectAndFocusItem(b)},_selectNextItem:function(a){a.preventDefault();var b=this.selectedItem;b&&(b=this.items.getNextSelectable(b),this._selectAndFocusItem(b))},_selectPreviousItem:function(a){a.preventDefault();var b=this.selectedItem;b&&(b=this.items.getPreviousSelectable(b),this._selectItem(b),b.focus())},_selectAndFocusItem:function(a){a&&(this._selectItem(a),a.focus())},_initialize:function(){this.setAttribute("aria-multiselectable","false")},attachedCallback:function(){Coral.Component.prototype.attachedCallback.call(this),this._syncProp("target")}}),Coral.TabList.orientation=c,Coral.TabList.size=b,Coral.register({name:"Tab",tagName:"coral-tab",className:"coral3-Tab",mixins:[Coral.mixin.selectionList.Item({listSelector:"coral-tablist",role:"tab"})],properties:{label:Coral.property.contentZone({handle:"label",tagName:"coral-tab-label",defaultContentZone:!0,insert:function(a){this.appendChild(a)}}),icon:{get:function(){var a=this._elements.icon;return a?a.icon:""},set:function(a){var b=this._getOrCreateIconElement();b.icon=a,""===this.icon?b.remove():b.parentNode||this.insertBefore(b,this.firstChild)}},invalid:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){this.classList.toggle("is-invalid",this.invalid),this.setAttribute("aria-invalid",this.invalid)}},disabled:{alsoSync:"selected",sync:function(){this.classList.toggle("is-disabled",this.disabled),this.setAttribute("aria-disabled",this.disabled)}},selected:{set:function(a){this._selected=a,this._selected&&this._selectTarget()},sync:function(){this.classList.toggle("is-selected",this.selected),this.setAttribute("tabindex",this.selected?"0":"-1"),this.setAttribute("aria-selected",this.selected)}},target:{"default":null,validate:function(a){return null===a||"string"==typeof a||a instanceof Node},sync:function(){var b=a(this.target);b&&(this.setAttribute("aria-controls",b.id),b.setAttribute("aria-labelledby",this.id))}}},_getOrCreateIconElement:function(){return this._elements.icon||(this._elements.icon=document.createElement("coral-icon"),this._elements.icon.setAttribute("size",Coral.Icon.size.SMALL)),this._elements.icon},_selectTarget:function(){var b=a(this.target);if(b)b.setAttribute("selected","");else{var c=this.parentNode;if(c&&c.target&&(b=a(c.target))){var d=c.items.getAll().indexOf(this),e=(b.items?b.items.getAll():b.children)[d];e&&e.setAttribute("selected","")}}},_render:function(){var a=this.querySelector("coral-tab-label"),b=a||document.createElement("coral-tab-label");if(!a)for(;this.firstChild;)b.appendChild(this.firstChild);this.label=b},_initialize:function(){this.id=this.id||Coral.commons.getUID()},attachedCallback:function(){Coral.Component.prototype.attachedCallback.call(this),this.selected&&(this._selectTarget(),this._syncProp("target"))}}),Coral.Tab.Label=function(){return document.createElement("coral-tab-label")}}(),function(){"use strict";var a={HORIZONTAL:"horizontal",VERTICAL:"vertical"},b="coral3-TabView";Coral.register({name:"TabView",tagName:"coral-tabview",className:b,events:{"coral-tablist:change > coral-tablist":"_onTabListChange","coral-panelstack:change > coral-panelstack":"_onPanelStackChange","coral-collection:add > coral-tablist":"_syncTabListAndPanelStack","coral-collection:remove > coral-tablist":"_syncTabListAndPanelStack","coral-collection:add > coral-panelstack":"_syncTabListAndPanelStack","coral-collection:remove > coral-panelstack":"_syncTabListAndPanelStack"},properties:{orientation:{reflectAttribute:!0,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(a)],get:function(){return this.tabList.getAttribute("orientation")},set:function(a){this.tabList.setAttribute("orientation",a)},sync:function(){this.orientation===a.VERTICAL?this.classList.add(b+"--vertical"):this.classList.remove(b+"--vertical")}},tabList:Coral.property.contentZone({handle:"tabList",tagName:"coral-tablist",insert:function(a){this.insertBefore(a,this.panelStack||null)}}),panelStack:Coral.property.contentZone({handle:"panelStack",tagName:"coral-panelstack",insert:function(a){this.appendChild(a)}})},_onTabListChange:function(a){this.trigger("coral-tabview:change",{selection:a.detail.selection,oldSelection:a.detail.oldSelection})},_onPanelStackChange:function(a){if(a.detail.selection){var b=a.detail.selection.getAttribute("aria-labelledby"),c=document.getElementById(b);c&&null===c.getAttribute("selected")&&c.setAttribute("selected","")}},_syncTabListAndPanelStack:function(a){this.tabList._queueSync(["target"])},_render:function(){var a=this.querySelector("coral-tablist")||document.createElement("coral-tablist"),b=this.querySelector("coral-panelstack")||document.createElement("coral-panelstack");b.id=b.id||Coral.commons.getUID(),a.setAttribute("target","#"+b.id),this.panelStack=b,this.tabList=a}}),Coral.TabView.orientation=a}(),window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.Tree=window.Coral.templates.Tree||{},window.Coral.templates.Tree.item=function(a){var b=document.createDocumentFragment(),c=this.header=document.createElement("div");c.className+=" coral3-Tree-header",c.setAttribute("tabindex","-1"),c.setAttribute("role","tab"),c.id=Coral.commons.getUID(),c.setAttribute("handle","header");var d=document.createTextNode("\n  ");c.appendChild(d);var e=this.icon=document.createElement("coral-icon");e.className+=" coral3-Tree-collapseExpand",e.setAttribute("size","xs"),e.setAttribute("handle","icon"),e.setAttribute("role","img"),e.setAttribute("icon","chevronRight"),c.appendChild(e);var f=document.createTextNode("\n  ");c.appendChild(f);var g=this.contentContainer=document.createElement("div");g.className+=" coral3-Tree-contentContainer",g.setAttribute("handle","contentContainer"),c.appendChild(g);var h=document.createTextNode("\n");c.appendChild(h),b.appendChild(c);var i=document.createTextNode("\n");b.appendChild(i);var j=this.subTreeContainer=document.createElement("div");return j.className+=" coral3-Tree-subTree",j.setAttribute("handle","subTreeContainer"),j.id=Coral.commons.getUID(),j.setAttribute("role","tabpanel"),b.appendChild(j),b},window.Coral.templates.Tree.itemspacer=function(a){var b=document.createElement("span");return b.className+=" coral3-Tree-item-spacer",b},function(){"use strict";Coral.register({name:"Tree",tagName:"coral-tree",className:"coral3-Tree",events:{"click .coral3-Tree-header":"_onItemClick","click .coral3-Tree-collapseExpand":"_onExpandCollapseClick","coral-collection:add coral-tree-item":"_onCollectionChange","coral-collection:remove coral-tree-item":"_onCollectionChange","key:space .coral3-Tree-header":"_onItemClick","key:enter .coral3-Tree-header":"_onExpandCollapseClick","key:pageup .coral3-Tree-header":"_onFocusPreviousItem","key:left .coral3-Tree-header":"_onFocusPreviousItem","key:up .coral3-Tree-header":"_onFocusPreviousItem","key:pagedown .coral3-Tree-header":"_onFocusNextItem","key:right .coral3-Tree-header":"_onFocusNextItem","key:down .coral3-Tree-header":"_onFocusNextItem","key:home .coral3-Tree-header":"_onFocusFirstItem","key:end .coral3-Tree-header":"_onFocusLastItem","coral-tree-item:_beforeselectedchanged":"_onBeforeItemSelectionChanged","coral-tree-item:_selectedchanged":"_onItemSelectionChanged","coral-tree-item:_disabledchanged":"_onFocusableChanged","coral-tree-item:_expandedchanged":"_onFocusableChanged","coral-tree-item:_afterexpandedchanged":"_onExpandedChanged","coral-tree-item:_hiddenchanged":"_onFocusableChanged"},properties:{multiple:{"default":!1,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){this.setAttribute("aria-multiselectable",this.multiple),!this.multiple&&this.selectedItems.length>1&&(this._preventTriggeringEvents=!0,this.items._deselectAllExceptLast(),Coral.commons.nextFrame(function(){this._preventTriggeringEvents=!1,this._triggerChangeEvent()}.bind(this)))}},items:{get:function(){return this._items||(this._items=new Coral.SelectableCollection({host:this,itemTagName:"coral-tree-item"})),this._items},set:function(){}},selectedItem:{get:function(){return this.selectedItems[0]||null},set:function(){}},selectedItems:{get:function(){return this.items._getAllSelected()},set:function(){}}},_onBeforeItemSelectionChanged:function(a){a.stopImmediatePropagation();var b=this.selectedItem;this.multiple||!b||a.target.selected||b.set("selected",!1,!0)},_onItemSelectionChanged:function(a){a.stopImmediatePropagation(),this._triggerChangeEvent()},_triggerChangeEvent:function(){if(!this._preventTriggeringEvents){var a=this.selectedItems;this.trigger("coral-tree:change",{oldSelection:this._oldSelection,selection:a}),this._oldSelection=a}},_onCollectionChange:function(a){a.stopImmediatePropagation()},_onItemClick:function(a){if(!a.target.hasAttribute("coral-interactive")&&!a.target.closest("[coral-interactive]")){var b=a.target.closest("coral-tree-item");if(b&&!b.disabled){a.preventDefault(),a.stopPropagation(),b.selected=!b.selected;var c=this._getFocusable();c&&c.setAttribute("tabindex","-1"),b._elements.header.setAttribute("tabindex","0"),b._elements.header.focus()}}},_onExpandCollapseClick:function(a){a.preventDefault(),a.stopPropagation();var b=a.target.closest("coral-tree-item");if(b){if(b.disabled)return;b.expanded=!b.expanded}},_focusSiblingItem:function(a,b){var c=this._getFocusableItems();if(!(c.length<2)){var d=c.indexOf(a)+(b?1:-1),e=null;for(d>c.length-1?e=c[0]:d<0&&(e=c[c.length-1]);!e;)e=c[d],e.parentNode.closest("coral-tree-item.is-collapsed")&&(b?(d++,e=d>c.length-1?a:null):(d--,e=d<0?a:null));e!==a&&(a._elements.header.setAttribute("tabindex","-1"),e._elements.header.setAttribute("tabindex","0"),e._elements.header.focus())}},_focusEdgeItem:function(a){var b=this._getFocusable();if(b){var c=this._getFocusableItems(),d=c[a?c.length-1:0];d!==b&&(b.setAttribute("tabindex","-1"),d._elements.header.setAttribute("tabindex","0"),d._elements.header.focus())}},_onFocusNextItem:function(a){a.preventDefault(),a.stopPropagation();var b=a.target.closest("coral-tree-item");b&&this._focusSiblingItem(b,!0)},_onFocusPreviousItem:function(a){a.preventDefault(),a.stopPropagation();var b=a.target.closest("coral-tree-item");b&&this._focusSiblingItem(b,!1)},_onFocusFirstItem:function(a){a.preventDefault(),a.stopPropagation(),this._focusEdgeItem(!1)},_onFocusLastItem:function(a){a.preventDefault(),a.stopPropagation(),this._focusEdgeItem(!0)},_onFocusableChanged:function(a){a.preventDefault(),a.stopPropagation(),a.target.contains(this._getFocusable())&&this._resetFocusableItem()},_onExpandedChanged:function(a){a.stopImmediatePropagation();var b=a.target;this.trigger("coral-tree:"+(b.expanded?"expand":"collapse"),{item:b})},_getFocusable:function(){return this.querySelector('coral-tree-item > .coral3-Tree-header[tabindex="0"]')},_getFocusableItems:function(){return this.items.getAll().filter(function(a){return!a.closest("coral-tree-item[disabled]")&&!a.closest("coral-tree-item[hidden]")})},_resetFocusableItem:function(a){Coral.commons.ready(this,function(){var b=this._getFocusable();b&&b.setAttribute("tabindex","-1"),a=a||this._getFocusableItems()[0],a&&a._elements.header.setAttribute("tabindex","0")}.bind(this))},_initialize:function(){this.setAttribute("role","tree"),this._resetFocusableItem(),this._oldSelection=this.selectedItems,this.items._startHandlingItems()},expandAll:function(){this._expandCollapseAll(!0)},collapseAll:function(){this._expandCollapseAll(!1)},_expandCollapseAll:function(a){var b=this.querySelectorAll("coral-tree-item");if(b){var c,d=b.length;if(d>0)for(var e=0;e<d;e++)c=b[e],c&&(c.expanded=a)}}})}(),function(){"use strict";var a={"true":"chevronDown","false":"chevronRight"},b={LEAF:"leaf",DRILLDOWN:"drilldown"},c="coral3-Tree-item",d=[];for(var e in b)b.hasOwnProperty(e)&&d.push(c+"--"+b[e]);var f=function(a){if(a)for(var b=a._parent;b;){var c=a._elements.header;c&&c.insertBefore(Coral.templates.Tree.itemspacer.call(),c.firstChild),b=b._parent}};Coral.register({name:"Tree.Item",tagName:"coral-tree-item",className:c,properties:{content:Coral.property.contentZone({handle:"content",tagName:"coral-tree-item-content",insert:function(a){this._elements.contentContainer.appendChild(a)}}),parent:{get:function(){return this._parent||null},set:function(){}},items:{get:function(){return this._items||(this._items=new Coral.Collection({host:this,itemTagName:"coral-tree-item",itemSelector:":scope > coral-tree-item",container:this._elements.subTreeContainer,filter:this._filterItem.bind(this),onItemAdded:this._onItemAdded,onItemRemoved:this._onItemRemoved})),this._items},set:function(){}},expanded:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,trigger:"coral-tree-item:_expandedchanged",sync:function(){var b=this,c=b._elements.header,d=b._elements.icon,e=b._elements.subTreeContainer;b.classList.toggle("is-expanded",b.expanded),b.classList.toggle("is-collapsed",!b.expanded),c.setAttribute("aria-expanded",b.expanded),e.setAttribute("aria-hidden",!b.expanded),d.icon=a[b.expanded],this._animate?(Coral.commons.transitionEnd(e,function(){b.expanded?e.style.height="":e.hidden=!0,b.trigger("coral-tree-item:_afterexpandedchanged")}),b.expanded?e.hidden=!1:e.style.height=e.scrollHeight+"px",Coral.commons.nextFrame(function(){e.style.height=b.expanded?e.scrollHeight+"px":0})):(b._animate=!0,b.expanded||(e.style.height=0,e.hidden=!0))}},variant:{"default":b.DRILLDOWN,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(b)],sync:function(){this.classList.remove.apply(this.classList,d),this.classList.add(this._className+"--"+this.variant)}},selected:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,triggerBefore:"coral-tree-item:_beforeselectedchanged",trigger:"coral-tree-item:_selectedchanged",sync:function(){this.classList.toggle("is-selected",this.selected),this.setAttribute("aria-selected",this.selected)}},disabled:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,trigger:"coral-tree-item:_disabledchanged",sync:function(){this.classList.toggle("is-disabled",this.disabled),this._elements.header.setAttribute("aria-disabled",this.disabled)}},hidden:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,trigger:"coral-tree-item:_hiddenchanged"}},focus:function(){this._elements.header.focus()},_filterItem:function(a){return a.parentNode&&a.parentNode.parentNode===this||a._parent===this},_onItemAdded:function(a){a._parent=this,f(a)},_onItemRemoved:function(a){a._parent=void 0},_initialize:function(){var a=this;a.setAttribute("role","treeitem");var b=a._elements.header;b.setAttribute("aria-controls",a._elements.subTreeContainer.id),a._elements.subTreeContainer.setAttribute("aria-labelledby",b.id);var c=new MutationObserver(function(b){b.forEach(function(b){for(var c=0;c<b.addedNodes.length;c++){var d=b.addedNodes[c];"CORAL-TREE-ITEM"===d.tagName&&d.parentNode.tagName===d.tagName&&a._elements.subTreeContainer.appendChild(d)}})});c.observe(a,{childList:!0,subtree:!0}),this.items._startHandlingItems()},_templateHandleNames:["header","icon","contentContainer","subTreeContainer"],_render:function(){var a=Coral.templates.Tree.item.call(this._elements),b=this._elements.content=this.querySelector("coral-tree-item-content")||document.createElement("coral-tree-item-content");this._elements.contentContainer.appendChild(b);for(var c;this.firstChild;)c=this.firstChild,c.nodeName===this.tagName?(c._parent=this,this._elements.subTreeContainer.appendChild(c)):c.nodeType===Node.TEXT_NODE||this._templateHandleNames.indexOf(c.getAttribute("handle"))===-1?b.appendChild(c):this.removeChild(c);this.appendChild(a)}}),Coral.Tree.Item.variant=b,Coral.Tree.Item.Content=function(){return document.createElement("coral-tree-item-content")}}(),function(){"use strict";Coral.register({name:"WizardView",tagName:"coral-wizardview",className:"coral3-WizardView",events:{"coral-component:attached coral-panelstack[coral-wizardview-panelstack]":"_onComponentAttached","coral-component:attached coral-steplist[coral-wizardview-steplist]":"_onComponentAttached","coral-steplist:change coral-steplist[coral-wizardview-steplist]":"_onStepListChange","click [coral-wizardview-previous]":"_onPreviousClick","click [coral-wizardview-next]":"_onNextClick"},properties:{panelStacks:{attribute:null,get:function(){return this._panelStacks||(this._panelStacks=new Coral.Collection({host:this,itemTagName:"coral-panelstack",itemSelector:"coral-panelstack[coral-wizardview-panelstack]",filter:this._isControlledByThisComponent.bind(this),onItemAdded:this._onItemAdded})),this._panelStacks},set:function(){}},stepLists:{attribute:null,get:function(){return this._stepLists||(this._stepLists=new Coral.Collection({host:this,itemTagName:"coral-steplist",itemSelector:"coral-steplist[coral-wizardview-steplist]",filter:this._isControlledByThisComponent.bind(this),onItemAdded:this._onItemAdded})),this._stepLists},set:function(){}}},_onComponentAttached:function(a){a.target===a.matchedTarget&&this._isControlledByThisComponent(a.target)&&this._selectItemByIndex(a.target,this._getSelectedIndex())},_onItemAdded:function(a){this._selectItemByIndex(a,this._getSelectedIndex())},_onNextClick:function(a){a.stopPropagation(),this.next()},_onPreviousClick:function(a){a.stopPropagation(),this.previous()},_onStepListChange:function(a){if(this._isControlledByThisComponent(a.target)){a.stopPropagation();var b=a.target.items.getAll().indexOf(a.detail.selection);this._selectStep(b),this.trigger("coral-wizardview:change",{selection:a.detail.selection,oldSelection:a.detail.oldSelection})}},_getSelectedIndex:function(){var a=this.stepLists.first();if(!a)return-1;var b=-1;if(a.items)b=a.items.getAll().indexOf(a.selectedItem);else for(var c=a.querySelectorAll("coral-step"),d=c.length-1;d>=0;d--)if(c[d].hasAttribute("selected")){b=d;break}return b},_isControlledByThisComponent:function(a){return a.closest("coral-wizardview")===this},_selectItemByIndex:function(a,b){var c=null;a.id=a.id||Coral.commons.getUID(),a.items?c=a.items.getAll()[b]:"CORAL-STEPLIST"===a.tagName?c=a.querySelectorAll("#"+a.id+" > coral-step")[b]:"CORAL-PANELSTACK"===a.tagName&&(c=a.querySelectorAll("#"+a.id+" > coral-panel")[b]),c?c.hasAttribute("selected")||c.setAttribute("selected",""):("CORAL-STEPLIST"===a.tagName?c=a.querySelector("#"+a.id+" > coral-step[selected]"):"CORAL-PANELSTACK"===a.tagName&&(c=a.querySelector("#"+a.id+" > coral-panel[selected]")),c&&c.removeAttribute("selected"))},_selectStep:function(a){var b=this;this.stepLists.getAll().forEach(function(c){b._selectItemByIndex(c,a)}),this.panelStacks.getAll().forEach(function(c){b._selectItemByIndex(c,a)})},_syncPanelStackSelection:function(){var a=this._getSelectedIndex();if(a!==-1){var b=this;this.panelStacks.getAll().forEach(function(c){b._selectItemByIndex(c,a)})}},_syncStepListSelection:function(){var a=this._getSelectedIndex();if(a!==-1){var b=this;this.stepLists.getAll().forEach(function(c){b._selectItemByIndex(c,a)})}},_initialize:function(){this._syncStepListSelection(),this._syncPanelStackSelection()},next:function(){var a=this.stepLists.first();a&&(a.next(),this._selectStep(a.items.getAll().indexOf(a.selectedItem)))},previous:function(){var a=this.stepLists.first();a&&(a.previous(),this._selectStep(a.items.getAll().indexOf(a.selectedItem)))}})}(),function(){"use strict";Coral.register({name:"Shell",tagName:"coral-shell",className:"coral3-Shell",properties:{content:Coral.property.contentZone({handle:"content",tagName:"coral-shell-content",defaultContentZone:!0,insert:function(a){this.appendChild(a)}})},_render:function(){Coral.commons.ready(this,function(a){var b=a._elements.content=a.querySelector("coral-shell-content");if(null===b){var c=document.createDocumentFragment();for(b=a._elements.content=document.createElement("coral-shell-content"),c.appendChild(b);a.firstChild;)b.appendChild(a.firstChild);a.appendChild(c)}})}}),Coral.Shell.Content=function(){return document.createElement("coral-shell-content")}}(),window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.Shell=window.Coral.templates.Shell||{},window.Coral.templates.Shell.menubaritem=function(a){var b=this.shellMenuButton=document.createElement("button","coral-button");b.setAttribute("is","coral-button"),b.setAttribute("variant","minimal"),b.setAttribute("iconsize","S"),b.className+=" coral3-Shell-menu-button",b.setAttribute("handle","shellMenuButton");var c=document.createTextNode("\n  ");b.appendChild(c);var d=this.shellMenuButtonLabel=document.createElement("coral-button-label");d.setAttribute("handle","shellMenuButtonLabel"),b.appendChild(d);var e=document.createTextNode("\n");return b.appendChild(e),b},function(){"use strict";Coral.register({name:"Shell.MenuBar",tagName:"coral-shell-menubar",className:"coral3-Shell-menubar",properties:{items:{get:function(){return this._items||(this._items=new Coral.Collection({host:this,itemTagName:"coral-shell-menubar-item"})),this._items},set:function(){}}},_initialize:function(){}});var a={DEFAULT:"default",CIRCLE:"circle"},b="coral3-Shell-menubar-item",c=[];for(var d in a)c.push(b+"--"+a[d]);Coral.register({name:"Shell.MenuBar.Item",tagName:"coral-shell-menubar-item",className:b,events:{'click [handle="shellMenuButton"]':"_handleButtonClick","global:coral-overlay:close":"_handleOverlayEvent","global:coral-overlay:open":"_handleOverlayEvent"},properties:{icon:{set:function(a){this._elements.shellMenuButton.icon=a},get:function(){return this._elements.shellMenuButton.icon}},iconSize:{attribute:"iconsize",set:function(a){this._elements.shellMenuButton.iconSize=a},get:function(){return this._elements.shellMenuButton.iconSize}},iconVariant:{"default":a.DEFAULT,attribute:"iconvariant",validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(a)],sync:function(){this.classList.remove.apply(this.classList,c),this.variant!==Coral.Shell.MenuBar.Item.iconVariant.DEFAULT&&this.classList.add(b+"--"+this.iconVariant)}},badge:{set:function(a){a&&"0"!==a?this._elements.shellMenuButton.setAttribute("badge",a):this._elements.shellMenuButton.removeAttribute("badge",a)},get:function(){return this._elements.shellMenuButton.getAttribute("badge")}},open:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,validate:[Coral.validate.valueMustChange,function(a,b){return!a||null!==this._getMenu()}],trigger:function(a,b){return this.trigger(a?"coral-shell-menubar-item:open":"coral-shell-menubar-item:close")},set:function(a){this._open=a;var b=this._getMenu();b&&(b.open=this.open)}},label:Coral.property.contentZone({handle:"shellMenuButtonLabel",tagName:"coral-button-label",defaultContentZone:!0,insert:function(a){this._elements.shellMenuButtonLabel.appendChild(a)}}),menu:{"default":null}},_handleOverlayEvent:function(a){var b=a.target;b===this._getMenu()&&(this.open=b.open)},_handleButtonClick:function(a){this.open=!this.open},_getMenu:function(a){if(a=a||this.menu,a instanceof Node)return a;var b=null;return"string"==typeof a&&(b=document.querySelector(a)),b},_render:function(){for(var a=Coral.templates.Shell.menubaritem.call(this._elements);this.firstChild;)this.label.appendChild(this.firstChild);this.appendChild(a)}}),Coral.Shell.MenuBar.Item.iconVariant=a}(),function(){"use strict";function a(a){return"string"==typeof a?a.toLowerCase():a}var b="coral3-Shell-menu",c={RIGHT:"right",TOP:"top"},d=[];for(var e in c)d.push(b+"--"+c[e]);var f={RIGHT:"right",TOP:"top"},g=[];for(var h in f)g.push(b+"--"+f[h]);Coral.register({name:"Shell.Menu",tagName:"coral-shell-menu",className:b,mixins:[Coral.mixin.overlay],events:{"click [coral-close]":"_handleCloseClick","global:key:escape":"_handleGlobalEscape","global:capture:click":"_handleGlobalClick"},properties:{placement:{"default":c.RIGHT,transform:a,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(c)],sync:function(){this.classList.remove.apply(this.classList,d),this.classList.add(this._className+"--placement-"+this.placement)}},from:{"default":f.TOP,transform:a,validate:[Coral.validate.valueMustChange,Coral.validate.enumeration(f)],sync:function(){this.classList.remove.apply(this.classList,g),this.classList.add(this._className+"--from-"+this.from)}},full:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){this.classList.toggle(this._className+"--full",this.full)}},top:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr},focusOnShow:{"default":"on"},returnFocus:{"default":"on"},open:{set:function(){this.top&&(this.style.zIndex=parseInt(this.style.zIndex,10)+20)}}},_overlayAnimationTime:400,_handleGlobalEscape:function(){this.open&&this._isTopOverlay()&&(this.open=!1)},_handleCloseClick:function(a){var b=a.matchedTarget,c=b.getAttribute("coral-close");c&&!this.matches(c)||(this.hide(),a.stopPropagation())},_handleGlobalClick:function(a){var b=a.target,c=b.closest("coral-shell-menubar-item");c&&this===c._getMenu()||this.open&&!this.contains(b)&&this.hide()}})}(),function(){"use strict";Coral.register({name:"Shell.Header",tagName:"coral-shell-header",className:"coral3-Shell-header",events:{"global:coral-overlay:beforeopen":"_handleMenuBeforeOpenOrClose","global:coral-overlay:beforeclose":"_handleMenuBeforeOpenOrClose","global:coral-overlay:close":"_handleMenuClose"},properties:{home:Coral.property.contentZone({handle:"home",tagName:"coral-shell-header-home",insert:function(a){this._enableHomeAccessibility(a),this.appendChild(a)}}),content:Coral.property.contentZone({handle:"content",tagName:"coral-shell-header-content",defaultContentZone:!0,insert:function(a){this.appendChild(a)}}),actions:Coral.property.contentZone({handle:"actions",tagName:"coral-shell-header-actions",insert:function(a){this.appendChild(a)}})},_handleMenuBeforeOpenOrClose:function(a){var b=a.target;if("CORAL-SHELL-MENU"===b.tagName){var c=this;Coral.commons.nextFrame(function(){c.style.zIndex=parseInt(b.style.zIndex,10)+100,window.clearTimeout(c._zIndexTimeout)})}},_handleMenuClose:function(a){var b=a.target;if("CORAL-SHELL-MENU"===b.tagName){
var c=this;c._zIndexTimeout=setTimeout(function(){c.style.zIndex=null},200)}},_enableHomeAccessibility:function(a){a.setAttribute("role","heading"),a.setAttribute("aria-level","2")},_render:function(){var a=document.createDocumentFragment(),b=this._elements.home=this.querySelector("coral-shell-header-home")||document.createElement("coral-shell-header-home"),c=this._elements.actions=this.querySelector("coral-shell-header-actions")||document.createElement("coral-shell-header-actions"),d=this._elements.content=this.querySelector("coral-shell-header-content")||document.createElement("coral-shell-header-content");for(this._enableHomeAccessibility(b),a.appendChild(b),a.appendChild(c),a.appendChild(d);this.firstChild;)d.appendChild(this.firstChild);this.appendChild(a)},_initialize:function(){this.classList.add("coral--dark")}}),Coral.Shell.Header.Home=function(){return document.createElement("coral-shell-header-home")},Coral.Shell.Header.Actions=function(){return document.createElement("coral-shell-header-actions")},Coral.Shell.Header.Content=function(){return document.createElement("coral-shell-header-content")}}(),function(){"use strict";Coral.register({name:"Shell.HomeAnchor",tagName:"coral-shell-homeanchor",baseTagName:"a",extend:HTMLAnchorElement,className:"coral3-Shell-homeAnchor",properties:{label:Coral.property.contentZone({handle:"label",tagName:"coral-shell-homeanchor-label",defaultContentZone:!0,insert:function(a){this.appendChild(a)}}),icon:{get:function(){return this._elements.icon.icon},set:function(a){this._elements.icon.icon=a},sync:function(){""===this.icon?this._elements.icon.remove():this._elements.icon.parentNode||this.insertBefore(this._elements.icon,this.firstChild)}}},_render:function(){for(var a=document.createDocumentFragment(),b=this._elements.label=this.querySelector("coral-shell-homeanchor-label")||document.createElement("coral-shell-homeanchor-label");this.firstChild;){var c=this.firstChild;c.nodeType===Node.TEXT_NODE?b.appendChild(c):"CORAL-ICON"===c.tagName?(this._elements.icon=c,a.appendChild(c)):this.removeChild(c)}this._elements.icon||(this._elements.icon=document.createElement("coral-icon"),this._elements.icon.size=Coral.Icon.size.MEDIUM,this._elements.icon.className+=" coral3-Shell-homeAnchor-icon"),a.appendChild(b),this.appendChild(a)}}),Coral.Shell.HomeAnchor.Label=function(){return document.createElement("coral-shell-homeanchor-label")}}(),window.Coral=window.Coral||{},window.Coral.strings=window.Coral.strings||{},window.Coral.strings["coralui-component-shell-help"]={"en-US":{"Search for Help":"Search for Help","Searching Help…":"Searching Help…","Error fetching results":"Error fetching results","No results found":"No results found","See all {0} results":"See all {0} results"},"fr-FR":{"Search for Help":"Rechercher de l’aide","Searching Help…":"Recherche dans l’aide…","Error fetching results":"Erreur lors de la récupération des résultats","No results found":"Aucun résultat trouvé","See all {0} results":"Voir les {0} résultats"},"de-DE":{"Search for Help":"Nach Hilfe suchen","Searching Help…":"Suche nach Hilfe …","Error fetching results":"Fehler beim Abruf von Ergebnissen","No results found":"Keine Ergebnisse gefunden","See all {0} results":"Alle {0} Ergebnisse anzeigen"},"it-IT":{"Search for Help":"Cerca informazioni nell'Aiuto","Searching Help…":"Ricerca aiuto…","Error fetching results":"Errore durante il recupero dei risultati","No results found":"Nessun risultato trovato","See all {0} results":"Visualizza tutti i {0} risultati"},"es-ES":{"Search for Help":"Buscar ayuda","Searching Help…":"Buscando ayuda…","Error fetching results":"Error al obtener los resultados","No results found":"No se han encontrado resultados","See all {0} results":"Ver los {0} resultados"},"pt-BR":{"Search for Help":"Procurar nas seções de Ajuda","Searching Help…":"Procurando ajuda…","Error fetching results":"Erro ao obter resultados","No results found":"Nenhum resultado encontrado","See all {0} results":"Ver todos os resultados de {0}"},"ja-JP":{"Search for Help":"ヘルプを検索","Searching Help…":"ヘルプを検索中…","Error fetching results":"結果を取得中にエラーが発生しました","No results found":"結果が見つかりませんでした","See all {0} results":"すべての {0} 結果を確認"},"ko-KR":{"Search for Help":"도움말 검색","Searching Help…":"도움말 검색 중…","Error fetching results":"결과를 가져오는 중 오류 발생","No results found":"결과를 찾을 수 없습니다","See all {0} results":"총 {0}개 결과 보기"},"zh-CN":{"Search for Help":"搜索帮助","Searching Help…":"正在搜索帮助…","Error fetching results":"获取结果时出错","No results found":"找不到任何结果","See all {0} results":"查看全部 {0} 个结果"},"zh-TW":{"Search for Help":"搜尋說明","Searching Help…":"正在搜尋說明…","Error fetching results":"擷取結果時發生錯誤","No results found":"找不到結果","See all {0} results":"查看全部 {0} 個結果"},"nl-NL":{"Search for Help":"Zoeken naar hulp","Searching Help…":"Hulp zoeken…","Error fetching results":"Fout bij ophalen resultaten","No results found":"Geen resultaten gevonden","See all {0} results":"Alle {0} resultaten bekijken"},"da-DK":{"Search for Help":"Søg efter Hjælp...","Searching Help…":"Søger i Hjælp...","Error fetching results":"Fejl ved hentning af resultater","No results found":"Ingen resultater fundet","See all {0} results":"Se alle {0} resultater"},"fi-FI":{"Search for Help":"Hae ohjeita","Searching Help…":"Haun ohje…","Error fetching results":"Tuloksia haettaessa tapahtui virhe.","No results found":"Tuloksia ei löytynyt.","See all {0} results":"Näytä kaikki {0} tulosta"},"nb-NO":{"Search for Help":"Søk etter hjelp","Searching Help…":"Søker i Hjelp …","Error fetching results":"Kan ikke hente resultater","No results found":"Finner ingen resultater","See all {0} results":"Vis alle de {0} resultatene"},"sv-SE":{"Search for Help":"Sök efter hjälp","Searching Help…":"Sökhjälp…","Error fetching results":"Det gick inte att hämta resultat","No results found":"Inga resultat funna","See all {0} results":"Se alla {0} resultat"},"cs-CZ":{"Search for Help":"Vyhledat nápovědu","Searching Help…":"Nápověda hledání…","Error fetching results":"Při shromažďování výsledků došlo k chybě","No results found":"Nebyly nalezeny žádné výsledky","See all {0} results":"Zobrazit všechny výsledky: {0}"},"pl-PL":{"Search for Help":"Szukaj pomocy","Searching Help…":"Trwa przeszukiwanie Pomocy...","Error fetching results":"Błąd pobierania wyników","No results found":"Nie znaleziono żadnych wyników","See all {0} results":"Zobacz wszystkie {0} wyników"},"ru-RU":{"Search for Help":"Поиск справки","Searching Help…":"Поиск по справке…","Error fetching results":"Ошибка получения результатов","No results found":"Результаты не найдены","See all {0} results":"Посмотреть все результаты ({0})"},"tr-TR":{"Search for Help":"Yardım Ara","Searching Help…":"Yardım Aranıyor...","Error fetching results":"Sonuçlar alınırken hata oluştu","No results found":"Sonuç bulunamadı","See all {0} results":"Tüm {0} sonuçlarını gör"}},window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.Shell=window.Coral.templates.Shell||{},window.Coral.templates.Shell.help=function(a){var b=document.createDocumentFragment(),c=a="undefined"==typeof a?{}:a;c=a;var d=Coral.commons.getUID();a=c;var e=document.createTextNode("\n");b.appendChild(e);var f=document.createElement("label");f.className+=" u-coral-screenReaderOnly",f.id=d,f.textContent=Coral.i18n.get("Search for Help"),b.appendChild(f);var g=document.createTextNode("\n");b.appendChild(g);var h=this.search=document.createElement("coral-search");h.className+=" coral3-Shell-help-search",h.setAttribute("handle","search"),h.setAttribute("placeholder",Coral.i18n.get("Search for Help")),h.setAttribute("labelledby",d),b.appendChild(h);var i=document.createTextNode("\n");b.appendChild(i);var j=this.items=document.createElement("div");j.className+=" coral3-Shell-help-items",j.setAttribute("handle","items"),b.appendChild(j);var k=document.createTextNode("\n");b.appendChild(k);var l=this.results=document.createElement("coral-anchorlist");l.className+=" coral3-Shell-help-results",l.setAttribute("handle","results"),l.setAttribute("hidden",""),b.appendChild(l);var m=document.createTextNode("\n");b.appendChild(m);var n=this.resultMessage=document.createElement("div");n.className+=" coral3-Shell-help-resultMessage",n.setAttribute("handle","resultMessage"),n.setAttribute("hidden",""),b.appendChild(n);var o=document.createTextNode("\n");b.appendChild(o);var p=this.loading=document.createElement("div");p.className+=" coral3-Shell-help-loading",p.setAttribute("handle","loading"),p.setAttribute("hidden","");var q=document.createTextNode("\n  ");p.appendChild(q);var r=document.createElement("coral-wait");r.setAttribute("size","S"),r.className+=" coral3-Shell-help-loading-wait",p.appendChild(r);var s=document.createTextNode("\n  ");p.appendChild(s);var t=document.createElement("span");t.className+=" coral-Heading--2 coral3-Shell-help-loading-info",t.textContent=Coral.i18n.get("Searching Help…"),p.appendChild(t);var u=document.createTextNode("\n");return p.appendChild(u),b.appendChild(p),b},window.Coral.templates.Shell.helpResult=function(a){var b=document.createElement("coral-list-item-content"),c=document.createTextNode(a.title+"\n");b.appendChild(c);var d=document.createElement("div");d.className+=" coral3-Shell-help-result-description",d.textContent=a.description,b.appendChild(d);var e=document.createTextNode("\n");return b.appendChild(e),b},window.Coral.templates.Shell.helpSearchError=function(a){var b=document.createElement("div");b.className+=" coral3-Shell-help-resultMessage-container";var c=document.createTextNode("\n  ");b.appendChild(c);var d=document.createElement("div");d.className+=" coral-Heading--1 coral3-Shell-help-resultMessage-heading",d.textContent=Coral.i18n.get("Error fetching results"),b.appendChild(d);var e=document.createTextNode("\n");return b.appendChild(e),b},window.Coral.templates.Shell.noHelpResults=function(a){var b=document.createElement("div");b.className+=" coral3-Shell-help-resultMessage-container";var c=document.createTextNode("\n  ");b.appendChild(c);var d=document.createElement("div");d.className+=" coral-Heading--1 coral3-Shell-help-resultMessage-heading",d.textContent=Coral.i18n.get("No results found"),b.appendChild(d);var e=document.createTextNode("\n");return b.appendChild(e),b},function(){"use strict";Coral.register({name:"Shell.Help",tagName:"coral-shell-help",className:"coral3-BasicList coral3-AnchorList coral3-Shell-help",extend:Coral.AnchorList,events:{"coral-search:clear":"_showItems","coral-search:submit":"_performSearch"},properties:{items:{get:function(){return this._items||(this._items=new Coral.Collection({host:this,itemTagName:"coral-shell-help-item",itemBaseTagName:"a",container:this._elements.items})),this._items},set:function(){}},placeholder:{set:function(a){this._elements.search.placeholder=a},get:function(){return this._elements.search.placeholder}}},_moveItems:function(){var a=this;a.id=a.id||Coral.commons.getUID(),Array.prototype.forEach.call(a.querySelectorAll("#"+a.id+' > a[is="coral-shell-help-item"]'),function(b){a._elements.items.appendChild(b)})},_performSearch:function(a){a.stopPropagation(),this._elements.items.hidden=!0,this._elements.loading.hidden=!1,this._elements.resultMessage.hidden=!0,this._elements.results.hidden=!0;var b=this._elements.search.value;this.trigger("coral-shell-help:search",{value:b})},_showItems:function(a){a.stopPropagation(),this._elements.results.hidden=!0,this._elements.loading.hidden=!0,this._elements.resultMessage.hidden=!0,this._elements.items.hidden=!1},_render:function(){var a=Coral.templates.Shell.help.call(this._elements);this._moveItems(),this.appendChild(a)},showError:function(){this._elements.loading.hidden=!0,this._elements.resultMessage.innerHTML="",this._elements.resultMessage.appendChild(Coral.templates.Shell.helpSearchError()),this._elements.resultMessage.hidden=!1},showResults:function(a,b,c){var d=this;if(this._elements.loading.hidden=!0,a&&0!==b){if(this._elements.results.innerHTML="",a.forEach(function(a){var b="&nbsp; &bull; &nbsp;",c=a.tags.join(b),e=(new Coral.AnchorList.Item).set({href:a.href,target:a.target});e.content=Coral.templates.Shell.helpResult({title:a.title,description:c}),d._elements.results.appendChild(e)}),this._elements.results.hidden=!1,b>1){var e=(new Coral.AnchorList.Item).set({href:c,content:{innerHTML:Coral.i18n.get("See all {0} results",b)},target:"_blank"});e.classList.add("coral-Link","coral3-Shell-help-allResults"),this._elements.results.appendChild(e)}}else this._elements.resultMessage.innerHTML="",this._elements.resultMessage.appendChild(Coral.templates.Shell.noHelpResults()),this._elements.resultMessage.hidden=!1}}),Coral.register({name:"Shell.Help.Item",tagName:"coral-shell-help-item",className:"coral3-BasicList-item coral3-AnchorList-item coral3-Shell-help-item",baseTagName:"a",extend:Coral.AnchorList.Item})}(),window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.Shell=window.Coral.templates.Shell||{},window.Coral.templates.Shell.solutionSwitcher=function(a){var b=this.icon=document.createElement("coral-icon");return b.setAttribute("size","L"),b.setAttribute("handle","icon"),b.className+=" coral3-Shell-solution-icon",b},function(){"use strict";Coral.register({name:"Shell.SolutionSwitcher",tagName:"coral-shell-solutionswitcher",className:"coral3-Shell-solutionSwitcher",properties:{items:{get:function(){return this._items||(this._items=new Coral.Collection({host:this,itemTagName:"coral-shell-solutions"})),this._items},set:function(){}}},_initialize:function(){var a=this;a.classList.add("coral--dark");var b=new MutationObserver(function(b){b.forEach(function(b){for(var c=0;c<b.addedNodes.length;c++){var d=b.addedNodes[c];"CORAL-SHELL-SOLUTIONS"!==d.tagName||d.hasAttribute("secondary")||a._elements.container.appendChild(d)}})});b.observe(a,{childList:!0})},_render:function(){var a=this._elements.container=document.createElement("div");a.className="coral3-Shell-solutions-container",Array.prototype.forEach.call(this.querySelectorAll("coral-shell-solutions:not([secondary])"),function(b){a.appendChild(b)}),this.insertBefore(a,this.firstChild)}}),Coral.register({name:"Shell.Solutions",tagName:"coral-shell-solutions",className:"coral3-Shell-solutions",properties:{items:{get:function(){return this._items||(this._items=new Coral.Collection({host:this,itemTagName:"coral-shell-solution",itemBaseTagName:"a"})),this._items},set:function(){}},secondary:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){this.classList.toggle(this._className+"--secondary",this.secondary)}}}}),Coral.Shell.Solutions.Header=function(){return document.createElement("coral-shell-solutions-header")},Coral.register({name:"Shell.Solution",tagName:"coral-shell-solution",className:"coral3-Shell-solution",baseTagName:"a",extend:HTMLAnchorElement,properties:{icon:{set:function(a){this._elements.icon.icon=a},get:function(){return this._elements.icon.icon}},label:Coral.property.contentZone({handle:"label",tagName:"coral-shell-solution-label",defaultContentZone:!0,insert:function(a){this.appendChild(a)}}),linked:{"default":!1,reflectAttribute:!0,transform:Coral.transform["boolean"],attributeTransform:Coral.transform.booleanAttr,sync:function(){this.classList.toggle(this._className+"--linked",this.linked)}}},_render:function(){var a=document.createDocumentFragment();a.appendChild(Coral.templates.Shell.solutionSwitcher.call(this._elements));var b=this._elements.label=this.querySelector("coral-shell-solution-label")||document.createElement("coral-shell-solution-label");for(a.appendChild(this._elements.label);this.firstChild;)b.appendChild(this.firstChild);this.appendChild(a)}}),Coral.Shell.Solution.Label=function(){return document.createElement("coral-shell-solution-label")}}(),window.Coral=window.Coral||{},window.Coral.templates=window.Coral.templates||{},window.Coral.templates.Shell=window.Coral.templates.Shell||{},window.Coral.templates.Shell.user=function(a){var b=this.container=document.createElement("div");b.className+=" coral3-Shell-user-container",b.setAttribute("handle","container");var c=document.createTextNode("\n  ");b.appendChild(c);var d=this.image=document.createElement("div");d.className+=" coral3-Shell-user-image",d.setAttribute("handle","image");var e=document.createTextNode("\n    ");d.appendChild(e);var f=this.avatar=document.createElement("coral-icon");f.className+=" coral3-Shell-user-avatar",f.setAttribute("size","L"),f.setAttribute("handle","avatar"),d.appendChild(f);var g=document.createTextNode("\n  ");d.appendChild(g),b.appendChild(d);var h=document.createTextNode("\n");return b.appendChild(h),b},function(){"use strict";Coral.Shell=Coral.Shell||{};var a={DEFAULT:"user"};Coral.register({name:"Shell.User",tagName:"coral-shell-user",className:"coral3-Shell-user",properties:{avatar:{"default":a.DEFAULT,sync:function(){this._elements.avatar.icon=this._avatar}},name:Coral.property.contentZone({handle:"name",tagName:"coral-shell-user-name",insert:function(a){this._elements.container.appendChild(a)}}),heading:Coral.property.contentZone({handle:"heading",tagName:"coral-shell-user-heading",insert:function(a){this._elements.container.appendChild(a)}}),subheading:Coral.property.contentZone({handle:"subheading",tagName:"coral-shell-user-subheading",insert:function(a){this._elements.container.appendChild(a)}}),content:Coral.property.contentZone({handle:"content",tagName:"coral-shell-user-content",defaultContentZone:!0,insert:function(a){this.appendChild(a)}}),footer:Coral.property.contentZone({handle:"footer",tagName:"coral-shell-user-footer",insert:function(a){this.appendChild(a)}})},_render:function(){var a=document.createDocumentFragment();a.appendChild(Coral.templates.Shell.user.call(this._elements));var b=this._elements.name=this.querySelector("coral-shell-user-name")||document.createElement("coral-shell-user-name");this._elements.container.appendChild(b);var c=this._elements.heading=this.querySelector("coral-shell-user-heading")||document.createElement("coral-shell-user-heading");this._elements.container.appendChild(c);var d=this._elements.subheading=this.querySelector("coral-shell-user-subheading")||document.createElement("coral-shell-user-subheading");this._elements.container.appendChild(d);var e=this._elements.content=this.querySelector("coral-shell-user-content")||document.createElement("coral-shell-user-content");a.appendChild(e);var f=this._elements.footer=this.querySelector("coral-shell-user-footer")||document.createElement("coral-shell-user-footer");a.appendChild(f),this.appendChild(a)}}),Coral.Shell.User.Name=function(){return document.createElement("coral-shell-user-name")},Coral.Shell.User.Heading=function(){return document.createElement("coral-shell-user-heading")},Coral.Shell.User.Subheading=function(){return document.createElement("coral-shell-user-subheading")},Coral.Shell.User.Content=function(){return document.createElement("coral-shell-user-content")},Coral.Shell.User.Footer=function(){return document.createElement("coral-shell-user-footer")},Coral.Shell.User.avatar=a}(),function(a){var b=0;CUI.Popover=new Class({toString:"Popover",extend:CUI.Widget,construct:function(a){this.$element.on("change:content",this._setContent.bind(this)),this.$element.on("change:pointAt",this._position.bind(this)),this.$element.on("change:pointFrom",this._position.bind(this)),this.$element.on("change:alignFrom",this._position.bind(this)),this.$element.addClass("coral-Popover"),0===this._getContentElement(this.$element).length&&this._wrapContent(this.$element),this._$content=this._getContentElement(this.$element),""===this._$content.html()&&this._setContent(),this._popoverOffsets(),this.uuid=b+=1,this.popoverId=this.$element.attr("id"),this._makeAccessible()},defaults:{pointFrom:"bottom",preventAutoHide:!1,alignFrom:"left",visible:!1},_directions:["top","bottom","right","left"],_popoverOffsets:function(){this._popoverOffsets={},this._popoverOffsets.leftRight={width:5,height:5},this._popoverOffsets.topBottom={width:5,height:5}},_wrapContent:function(a){a.wrapInner('<div class="coral-Popover-content"/>')},_getContentElement:function(a){return a.find("> .coral-Popover-content")},_position:function(){if(this.options.visible&&this.options.pointAt){var b,c=this.$element,d=this.options.pointAt,e=this.options.pointFrom,f=this._popoverOffsets;if(a.isArray(d)){if(2!==d.length)return;d=this._convertCoordsToEvent(d)}var g=function(a,g){var h,i=c.offsetParent().offset();("top"==e||"bottom"==e)&&i.top+a.top<0?h="bottom":("left"==e||"right"==e)&&i.left+a.left<0&&(h="right"),h?(b=this._instructionFactory[h]({target:d,tailDimensions:f,allowFlip:!1,callback:this._applyFinalPosition.bind(this),within:this.options.within||window}),c.position(b)):this._applyFinalPosition(a,g)}.bind(this);b=this._instructionFactory[e]({target:d,tailDimensions:f,allowFlip:!0,callback:g,within:this.options.within||window}),c.position(b)}},_convertCoordsToEvent:function(b){var c=a.Event();return c.pageX=b[0],c.pageY=b[1],c},_applyFinalPosition:function(b,c){var d={top:b.top};if("right"===this.options.alignFrom){var e,f=this.$element.offsetParent();"html"==f.prop("tagName").toLowerCase()?(f=a("body"),e=f.outerWidth(!0)):e=f.innerWidth(),d.left="auto",d.right=e-b.left-this.$element.outerWidth(!0)}else d.left=b.left,d.right="auto";this.$element.css(d)},_instructionFactory:{top:function(a){return{my:"left bottom-"+a.tailDimensions.topBottom.height,at:"left top",of:a.target,collision:"flipfit "+(a.allowFlip?"flip":"none"),using:a.callback,within:a.within}},right:function(a){return{my:"left+"+a.tailDimensions.leftRight.width+" top",at:"right top",of:a.target,collision:(a.allowFlip?"flipfit":"none")+" flipfit",using:a.callback,within:a.within}},bottom:function(a){return{my:"left top+"+a.tailDimensions.topBottom.height,at:"left bottom",of:a.target,collision:"flipfit "+(a.allowFlip?"flip":"none"),using:a.callback,within:a.within}},left:function(a){return{my:"right-"+a.tailDimensions.leftRight.width+" top",at:"left top",of:a.target,collision:(a.allowFlip?"flipfit":"none")+" flipfit",using:a.callback,within:a.within}}},_show:function(){var b,c=this,d=a(this._lastFocused);this.$element.show().attr("aria-hidden",!1),!this.$element.find(":focusable").length&&this.$element.is(":not([aria-labelledby]):not([aria-label])")&&(b=this._getContentElement(this.$element),this.$element.attr("aria-labelledby",b.first().attr("id"))),this._position(),this._previousFocus=a(document.activeElement),0!==this._previousFocus.length&&(this._restoreClass=this._previousFocus.hasClass("is-selected"),this._previousFocus.addClass("is-selected")),this.options.preventAutoHide||(clearTimeout(this.autoHideInitTimeout),this.autoHideInitTimeout=setTimeout(function(){a(document).on("touchstart.popover-hide-"+c.uuid,c._clickOutsideHandler.bind(c)),a(document).on("click.popover-hide-"+c.uuid,c._clickOutsideHandler.bind(c)),c._moveLastEventToFrontOfQueue(document,"touchstart"),c._moveLastEventToFrontOfQueue(document,"click")},0)),d.length?d.focus():(d=this.$element.find(":tabbable").first(),d.length?d.focus():this.$element.focus()),a(document).on("keydown.popover-"+this.uuid,this._keyDown.bind(this)),this._moveLastEventToFrontOfQueue(document,"keydown"),this.$element.on("keydown.popover-focusLoop",":focusable",this._tabKeyHandler.bind(this)).on("focusin.popover",this._focusInHandler.bind(this)).on("focusout.popover",this._focusOutHandler.bind(this))},_moveLastEventToFrontOfQueue:function(b,c){var d=a._data(a(b)[0],"events"),e=d[c],f=[];e.forEach(function(a,b){0===a.namespace.indexOf("popover-")&&f.push(b)}),f.length>1&&e.splice(f[0],0,e.pop())},_hide:function(){a(document).off("keydown.popover-"+this.uuid),clearTimeout(this.autoHideInitTimeout),this._unforceBlur(),this.$element.hide().attr("aria-hidden",!0),a(document).off(".popover-hide-"+this.uuid),0!==this._previousFocus.length&&this._previousFocus.toggleClass("is-selected",this._restoreClass),this._lastFocused=null,this.$element.off("keydown.popover-focusLoop, focusin.popover, focusout.popover")},_setContent:function(){"string"==typeof this.options.content&&(this._$content.html(this.options.content),this._position())},setPosition:function(a){this.set("pointAt",a)},_keyDown:function(a){switch(a.which){case 27:this._escapeKeyHandler(a);break;case 117:this._gotoTriggerHandler(a)}},_escapeKeyHandler:function(b){(a(document.activeElement).is(this.$element)||a(document.activeElement).closest(this.$element).length)&&this._previousFocus.focus(),this.hide(),b.preventDefault(),b.stopImmediatePropagation()},_clickOutsideHandler:function(b){var c=a(b.target);0===c.closest(".coral-Popover").length&&c.closest("body").length>0&&(a(document.activeElement).is(document.body)&&this._previousFocus.focus(),this.hide(),b.preventDefault(),b.stopImmediatePropagation())},_gotoTriggerHandler:function(b){a(document.activeElement).is(this.$element)||a(document.activeElement).closest(this.$element).length?(this._previousFocus.focus(),this._forceBlur()):(this._unforceBlur(),this._lastFocused?this._lastFocused.focus():this.$element.find(":focusable").addBack().first().focus()),b.preventDefault(),b.stopImmediatePropagation()},_tabKeyHandler:function(b){var c,d=(a(b.currentTarget),this.$element.find(":tabbable"));switch(b.which){case 9:b.shiftKey&&b.currentTarget===d[0]?c=d.last():b.shiftKey||b.currentTarget!==d[d.length-1]||(c=d.first())}c&&c.length&&(b.preventDefault(),c.focus()),this._lastFocused=document.activeElement},_focusTimeoutInt:-1,_focusInHandler:function(b){clearTimeout(this._focusTimeoutInt),a(b.currentTarget).addClass("is-focused")},_focusOutHandler:function(b){var c=a(b.currentTarget),d=this;clearTimeout(this._focusTimeoutInt),this._focusTimeoutInt=setTimeout(function(){c.removeClass("is-focused"),!d.options.preventAutoHide&&d.$element.get(0).contains(b.target)&&0===a(document.activeElement).closest(d.$element).length&&d.$element.closest(".coral-Popover").length>1&&d.hide()},50)},_forcedBlur:!1,_forceBlur:function(){if(!this._forcedBlur){this._forcedBlur=!0;var b=this.$element.find(":focusable").addBack();b.each(function(b,c){var d=a(c);void 0===d.data("cached-tabindex")&&d.data("cached-tabindex",d.attr("tabindex")),d.attr("tabindex",-1)}),this.$element.attr("aria-hidden",!0).on("focusin.popover-"+this.uuid,this._unforceBlur.bind(this))}},_unforceBlur:function(){if(this._forcedBlur){this._forcedBlur=!1;var b=this.$element.find(":focusable").addBack();b.each(function(b,c){var d=a(c);void 0===d.data("cached-tabindex")?d.removeAttr("tabindex"):d.attr("tabindex",d.data("cached-tabindex")).removeData("cached-tabindex")}),this.$element.attr("aria-hidden",!1).off("focusin.popover-"+this.uuid)}},_makeAccessible:function(){var a=this._getContentElement(this.$element);this.$element.attr({role:"dialog",tabindex:"-1"}),a.attr("role",a.length>1?"group":null).not("[id]").each(function(a,b){b.setAttribute("id",CUI.util.getNextId())})}}),CUI.Widget.registry.register("popover",CUI.Popover),a(function(){a(document).on("touchstart.popover.data-api click.popover.data-api",'[data-toggle="popover"]',function(b){var c=a(this),d=CUI.util.getDataTarget(c);d=d&&d.length>0?d:c.next(".coral-Popover");var e=d.popover(a.extend({pointAt:c},d.data(),c.data())).data("popover");e.toggleVisibility(),b.preventDefault()})})}(window.jQuery),function(a,b,c){CUI.SelectList=new Class({toString:"SelectList",extend:CUI.Widget,construct:function(a){this.applyOptions(),this.$element.on("change:type",this._setType.bind(this)).on("click",this._SELECTABLE_SELECTOR,this._triggerSelected.bind(this)).on("mouseenter",this._SELECTABLE_SELECTOR,this._handleMouseEnter.bind(this)),this._makeAccessible()},defaults:{type:"static",multiple:!1,relatedElement:null,autofocus:!0,autohide:!0,dataurl:null,dataurlformat:"html",datapaging:!0,datapagesize:10,dataadditional:null,loadData:a.noop,position:"center bottom-1",collisionAdjustment:""},getItems:function(){return this.$element.children(".coral-SelectList-item").toArray().map(function(b){var c=a(b);return c.is(".coral-SelectList-item--option")?new CUI.SelectList.Option({element:c}):c.is(".coral-SelectList-item--optgroup")?new CUI.SelectList.Group({element:c}):void 0})},getOption:function(b){if(!a.isNumeric(b))throw new TypeError("Position should be numeric");var c=this.$element.children(".coral-SelectList-item"),d=c.eq(b);if(b<0||0===d.length)throw new RangeError("Position >"+b+"< is not within expected range [0,"+(c.length-1)+"]");if(!d.is(".coral-SelectList-item--option"))throw new TypeError("Position does not point to option element");return new CUI.SelectList.Option({element:d})},getGroup:function(b){if(!a.isNumeric(b))throw new TypeError("Position should be numeric");var c=this.$element.children(".coral-SelectList-item"),d=c.eq(b);if(b<0||0===d.length)throw new RangeError("Position >"+b+"< is not within expected range [0,"+(c.length-1)+"]");if(!d.is(".coral-SelectList-item--optgroup"))throw new TypeError("Position does not point to group element");return new CUI.SelectList.Group({element:d})},addOption:function(b,d){var e,f,g;if(a.isArray(b)||b&&b.jquery)for(g=0;g<b.length;g++)this.addOption(b[g],d!==c?d+g:c);else{if(b&&b.$element)return void this.addOption(b.$element);if(a.isPlainObject(b))e=b;else{if(!(b instanceof Element))throw new TypeError("Only Object, Element, CUI.SelectList.Option, jQuery and Array type arguments allowed.");f=a(b),e={value:f.data("value"),display:f.text()}}f||(f=a("<li>",{"class":"coral-SelectList-item coral-SelectList-item--option","data-value":e.value}).text(e.display)),this._addItem(f,d),this.$element.trigger(a.Event("itemadded",{item:new CUI.SelectList.Option({element:f})}))}},addGroup:function(b,d){var e,f,g;if(a.isArray(b)||b&&b.jquery)for(g=0;g<b.length;g++)this.addGroup(b[g],d!==c?d+g:c);else{if(b&&b.$element)return void this.addGroup(b.$element);if("string"===a.type(b))e={display:b};else{if(!(b instanceof Element))throw new TypeError("Only String, Element, CUI.SelectList.Group, jQuery and Array type arguments allowed.");f=a(b),e={display:f.children(".coral-SelectList-groupHeader").text()}}f||(f=a("<li>",{"class":"coral-SelectList-item coral-SelectList-item--optgroup"})),0===f.find(".coral-SelectList-groupHeader").length&&f.prepend(a("<span>",{"class":"coral-SelectList-groupHeader"}).text(e.display)),0===f.find(".coral-SelectList-sublist").length&&f.append(a("<ul>",{"class":"coral-SelectList-sublist"})),this._addItem(f,d),this.$element.trigger(a.Event("itemadded",{item:new CUI.SelectList.Group({element:f})}))}},_addItem:function(a,b){this._makeAccessibleListOption(a);var d=this._getList(),e=this._getItems();if(b===c||b===e.length)return d.append(a),e.length;if(0===b)return d.prepend(a),0;var f=e.eq(b);if(b>0&&f.length)return f.before(a),b;throw new RangeError("Position "+b+" is not within accepted range [0..."+e.length+"].")},_getList:function(){return this.$element},_getItems:function(){return this._getList().children(".coral-SelectList-item")},_SELECTABLE_SELECTOR:".coral-SelectList-item--option:not(.is-disabled):not(.is-hidden)",applyOptions:function(){this._setType()},_setType:function(){function a(){var a=c.$element.get(0),b=a.scrollHeight,d=a.scrollTop;b-c.$element.height()<=d+30&&c._handleLoadData()}var b,c=this;"dynamic"===this.options.type?this.$element.on("scroll.cui-selectlist-dynamic-load",function(d){b&&clearTimeout(b),c._loadingComplete||this._loadingIsActive||(b=setTimeout(a,500))}):this.$element.off("scroll.cui-selectlist-dynamic-load")},_ownerElement:null,_makeAccessible:function(){var b=a(this.options.relatedElement),c=this.$element.hasClass("is-visible");this._ownerElement=a('[aria-owns*="'+this.$element.attr("id")+'"]'),b.length&&(this._ownerElement.length||(this._ownerElement=b)),this._ownerElement.attr({id:this._ownerElement.attr("id")||CUI.util.getNextId(),"aria-haspopup":!0,"aria-expanded":c}),b.not(this._ownerElement).removeAttr("aria-haspopup").removeAttr("aria-expanded"),this.$element.attr({role:"listbox",
"aria-hidden":!c,"aria-multiselectable":this.options.multiple||null,tabindex:-1}),c&&(this.$element.attr("tabindex",0),this.$element.not(".is-inline").addClass("is-inline")),this.$element.off("focusin.cui-selectlist focusout.cui-selectlist").on("focusin.cui-selectlist",this._handleFocusIn.bind(this)).on("focusout.cui-selectlist",this._handleFocusOut.bind(this)),this._makeAccessibleListOption(this.$element.children())},_hasFocus:function(){return this._ownerElement.is(document.activeElement)||1===a(document.activeElement).closest(this.$element).length},_handleFocusIn:function(a){var b=this.$element.find(this._SELECTABLE_SELECTOR+'[aria-selected="true"], '+this._SELECTABLE_SELECTOR+'[tabindex="0"], '+this._SELECTABLE_SELECTOR+".is-highlighted").first();0===b.length&&(this.setCaretToItem(this.$element.find(this._SELECTABLE_SELECTOR).first(),!0),this.$element.attr("tabindex",-1)),this.$element.is(".is-inline")&&(this.$element.addClass("is-focused"),this.$element.off("keydown.cui-selectlist keypress.cui-selectlist").on("keydown.cui-selectlist",this._handleKeyDown.bind(this)).on("keypress.cui-selectlist",this._handleKeyPress.bind(this)))},_handleFocusOut:function(a){this.$element.is(".is-inline")&&(this.$element.removeClass("is-focused"),this.$element.off("keydown.cui-selectlist keypress.cui-selectlist"))},_restoreFocusToOwnerElement:function(){var a=this._ownerElement;a.is(":tabbable")||(a=a.find('input[type="text"], input[type="search"], button, input[type="button"]').filter(":tabbable").first()),a.trigger("focus")},_handleKeyDown:function(b){var d,e=this.$element.find(this._SELECTABLE_SELECTOR),f=e.filter(".is-highlighted"),g=e.index(f);if(e.length){switch(b.which){case 13:case 32:f.length&&1===a(document.activeElement).closest(this.$element).length&&(f.trigger("click"),b.preventDefault());break;case 27:this.hide(),b.preventDefault();break;case 33:case 38:g>0?d=e[g-1]:g==-1&&(d=e[e.length-1]),b.preventDefault();break;case 34:case 40:g+1<e.length&&(d=e[g+1]),b.preventDefault();break;case 36:d=e[0],b.preventDefault();break;case 35:d=e[e.length-1],b.preventDefault();break;case 9:this.options.visible&&this.options.autohide&&b.preventDefault()}d!==c&&this._hasFocus()&&this.setCaretToItem(a(d),!0)}},_keypressTimeoutID:null,_keypressTimeoutDuration:1e3,_keypressSearchString:"",_unicodeRangesRegExp:/[\u0000-\u007F|\u0080-\u00FF|\u0100-\u017F|\u0180-\u024F|\u0250-\u02AF|\u02B0-\u02FF|\u0300-\u036F|\u0370-\u03FF|\u0400-\u04FF|\u0500-\u052F|\u0530-\u058F|\u0590-\u05FF|\u0600-\u06FF|\u0700-\u074F|\u0780-\u07BF|\u0900-\u097F|\u0980-\u09FF|\u0A00-\u0A7F|\u0A80-\u0AFF|\u0B00-\u0B7F|\u0B80-\u0BFF|\u0C00-\u0C7F|\u0C80-\u0CFF|\u0D00-\u0D7F|\u0D80-\u0DFF|\u0E00-\u0E7F|\u0E80-\u0EFF|\u0F00-\u0FFF|\u1000-\u109F|\u10A0-\u10FF|\u1100-\u11FF|\u1200-\u137F|\u13A0-\u13FF|\u1400-\u167F|\u1680-\u169F|\u16A0-\u16FF|\u1700-\u171F|\u1720-\u173F|\u1740-\u175F|\u1760-\u177F|\u1780-\u17FF|\u1800-\u18AF|\u1900-\u194F|\u1950-\u197F|\u19E0-\u19FF|\u1D00-\u1D7F|\u1E00-\u1EFF|\u1F00-\u1FFF|\u2000-\u206F|\u2070-\u209F|\u20A0-\u20CF|\u20D0-\u20FF|\u2100-\u214F|\u2150-\u218F|\u2190-\u21FF|\u2200-\u22FF|\u2300-\u23FF|\u2400-\u243F|\u2440-\u245F|\u2460-\u24FF|\u2500-\u257F|\u2580-\u259F|\u25A0-\u25FF|\u2600-\u26FF|\u2700-\u27BF|\u27C0-\u27EF|\u27F0-\u27FF|\u2800-\u28FF|\u2900-\u297F|\u2980-\u29FF|\u2A00-\u2AFF|\u2B00-\u2BFF|\u2E80-\u2EFF|\u2F00-\u2FDF|\u2FF0-\u2FFF|\u3000-\u303F|\u3040-\u309F|\u30A0-\u30FF|\u3100-\u312F|\u3130-\u318F|\u3190-\u319F|\u31A0-\u31BF|\u31F0-\u31FF|\u3200-\u32FF|\u3300-\u33FF|\u3400-\u4DBF|\u4DC0-\u4DFF|\u4E00-\u9FFF|\uA000-\uA48F|\uA490-\uA4CF|\uAC00-\uD7AF|\uD800-\uDB7F|\uDB80-\uDBFF|\uDC00-\uDFFF|\uE000-\uF8FF|\uF900-\uFAFF|\uFB00-\uFB4F|\uFB50-\uFDFF|\uFE00-\uFE0F|\uFE20-\uFE2F|\uFE30-\uFE4F|\uFE50-\uFE6F|\uFE70-\uFEFF|\uFF00-\uFFEF|\uFFF0-\uFFFF]/,_handleKeyPress:function(b){var d,e,f,g,h,i,j=this.$element.find(this._SELECTABLE_SELECTOR),k=j.filter(".is-highlighted"),l=j.index(k),m="";if(j.length)switch(b.which){case 13:case 32:case 27:case 33:case 37:case 38:case 34:case 39:case 40:case 36:case 35:case 9:break;default:if(clearTimeout(this._keypressTimeoutID),m=String.fromCharCode(b.which),this._unicodeRangesRegExp.test(m)||(m=""),""===m)return;for(this._keypressSearchString+=m!==this._keypressSearchString?m:"",this._keypressTimeoutID=setTimeout(function(){this._keypressSearchString=""}.bind(this),this._keypressTimeoutDuration),e=l===-1?0:1===this._keypressSearchString.length?l+1:l,h=new RegExp("^"+this._keypressSearchString.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),"i"),f=e;f<j.length;f++)if(g=j.eq(f),i=a.trim(g.data("display")||g.text()),h.test(i)){d=g;break}if(d===c)for(f=0;f<e;f++)if(g=j.eq(f),i=a.trim(g.data("display")||g.text()),h.test(i)){d=g;break}d!==c&&this.setCaretToItem(d,!0)}},_makeAccessibleListOption:function(b){b.each(function(b,c){var d,e=a(c);e.hasClass("coral-SelectList-item--optgroup")?(d=e.children(".coral-SelectList-groupHeader"),d.attr({id:d.attr("id")||CUI.util.getNextId(),role:"heading"}),e.attr({role:"presentation"}).children("ul").each(function(b,c){var e=a(c);e.attr({role:"group","aria-labelledby":d.attr("id")})}).children("li").each(function(b,c){var d=a(c);d.attr({role:"option",id:d.attr("id")||CUI.util.getNextId()})})):e.attr({role:"option",id:e.attr("id")||CUI.util.getNextId()})})},setCaretToItem:function(a,b){this.$element.find(".coral-SelectList-item--option").removeClass("is-highlighted").removeAttr("tabindex"),a.addClass("is-highlighted").attr("tabindex",0),this._ownerElement.attr("aria-activedescendant",a.attr("id")),this.$element.attr("aria-activedescendant",a.attr("id")),this._hasFocus()?a.trigger("focus"):b&&this.scrollToItem(a)},resetCaret:function(){this.$element.find('[role="option"]').removeClass("is-highlighted").removeAttr("tabindex"),this.$element.scrollTop(0),this._ownerElement.removeAttr("aria-activedescendant"),this.$element.removeAttr("aria-activedescendant")},scrollToItem:function(a){if(a.length){var b=a.position().top,c=a.outerHeight(!1),d=this.$element[0],e=b+c-d.clientHeight;e>0?d.scrollTop+=e:b<0&&(d.scrollTop+=b)}},show:function(){return this.options.visible?this:(f(),this.inherited(arguments))},_show:function(){var b=this,c=this.$element.find(this._SELECTABLE_SELECTOR+'[aria-selected="true"], '+this._SELECTABLE_SELECTOR+'[tabindex="0"], '+this._SELECTABLE_SELECTOR+".is-highlighted").first();if(this.$element.addClass("is-visible").attr("aria-hidden",!1),this._ownerElement.attr("aria-expanded",!0),this._position(),this.options.autofocus&&(0===c.length&&(c=this.$element.find(this._SELECTABLE_SELECTOR).first()),this.setCaretToItem(c,!0)),"dynamic"===this.options.type){var d=this._outstandingRequest||this._handleLoadData();d.done(function(){b.options.autofocus&&b.setCaretToItem(b.$element.find(b._SELECTABLE_SELECTOR).first(),!0)})}a(document).on("keydown.cui-selectlist",this._handleKeyDown.bind(this)).on("keypress.cui-selectlist",this._handleKeyPress.bind(this))},_position:function(){if(this.options.visible){this.$element.position({my:"top",at:this.options.position,of:this.options.relatedElement,collision:this.options.collisionAdjustment});var b=a(this.options.relatedElement);this.$element.offset().top<b.offset().top?(this.$element.removeClass("is-below").addClass("is-above"),b.removeClass("is-above").addClass("is-below")):(this.$element.removeClass("is-above").addClass("is-below"),b.removeClass("is-below").addClass("is-above"))}},_hide:function(){var b=(a(this.options.relatedElement),this._ownerElement),c=!0,e=this._hasFocus();this.$element.removeClass("is-visible").attr("aria-hidden",!0),this._ownerElement.attr("aria-expanded",!1),this.reset(),a(d).each(function(){var b=a(this).data("selectList");b&&!b.get("autohide")&&b.get("visible")&&(c=!1)}),c&&a(document).off("keydown.cui-selectlist keypress.cui-selectlist"),b.removeAttr("aria-activedescendant"),b.length&&e&&setTimeout(this._restoreFocusToOwnerElement.bind(this),50)},_triggerSelected:function(b){var c=a(b.currentTarget),d=c.data("value"),e=c.data("display")||c.text();c.trigger(a.Event("selected",{selectedValue:d,displayedValue:e}))},_handleMouseEnter:function(b){this.setCaretToItem(a(b.currentTarget),!1)},clearItems:function(){this.$element.empty()},_pagestart:0,_loadingComplete:!1,_loadingIsActive:!1,_outstandingRequest:null,_handleLoadData:function(){var b,d=this,e=this._pagestart+this.options.datapagesize;return this._outstandingRequest&&"function"==typeof this._outstandingRequest.abort?this._outstandingRequest.abort():(a("<div/>",{"class":"coral-SelectList-item--wait",role:"presentation"}).append(a("<span/>",{"class":"coral-Wait",role:"progressbar"})).appendTo(d.$element),this._position(),this._loadingIsActive=!0),this.options.dataurl?b=a.ajax({url:this.options.dataurl,context:this,dataType:this.options.dataurlformat,data:a.extend({start:this._pagestart,end:e},this.options.dataadditional||{})}).done(function(b){var c=0;if("html"===d.options.dataurlformat){var e=a(b);c=e.filter("li").length,d._makeAccessibleListOption(e),d.$element.append(e)}c<d.options.datapagesize&&(this._loadingComplete=!0)}):(b=this.options.loadData.call(this,this._pagestart,e),b.done(function(a){a!==c&&(d._loadingComplete=a)})),b.done(function(){d._pagestart=e}),b.always(function(){d.$element.find(".coral-SelectList-item--wait").remove(),d._position(),d._loadingIsActive=!1,d._outstandingRequest=null}),this._outstandingRequest=b,b},reset:function(){"dynamic"===this.options.type&&(this.clearItems(),this._pagestart=0,this._loadingComplete=!1)},triggerLoadData:function(a){a&&this.reset(),this._handleLoadData()},filter:function(b){var c=this.$element.find(".coral-SelectList-item--option"),d=this.$element.find(".coral-SelectList-item--optgroup");b?(c.each(function(){var c=a(this),d=!b.call(this,c.data("value"),c.data("display")||c.text());c.toggleClass("is-hidden",d),d&&c.removeClass("is-highlighted")}),d.each(function(){var b=a(this),c=b.find('[role="option"]:not(.is-hidden)').length>0;b.toggleClass("is-hidden",!c)})):(c.removeClass("is-hidden"),d.removeClass("is-hidden")),this._position()}}),CUI.Widget.registry.register("selectlist",CUI.SelectList),CUI.options.dataAPI&&a(document).on("cui-contentloaded.data-api",function(b){CUI.SelectList.init(a("[data-init~=selectlist]",b.target))});var d=".coral-SelectList",e="[data-toggle~=selectlist]",f=function(){a(d).each(function(){var b=a(this).data("selectList");b&&b.get("autohide")&&b.hide()})},g=function(){var b,c=CUI.util.getDataTarget(a(this));return c.length&&(b=c.data("selectList"),b.get("relatedElement")||(b.set("relatedElement",this),b._makeAccessible()),b.resetCaret(),b.toggleVisibility()),!1},h=function(b){var c=CUI.util.getDataTarget(a(this)),d=c.data("selectList"),e=c.length&&c.hasClass("is-visible");switch(b.which){case 40:c.length&&!e&&g.call(this),b.preventDefault();break;case 9:e&&d.get("autohide")&&b.preventDefault()}};a(document).on("click.cui-selectlist",f).on("click.cui-selectlist",d,function(a){a.stopPropagation()}).on("click.cui-selectlist",e,g).on("keydown.cui-selectlist-toggleSelector",e,h)}(jQuery,this),function(a,b,c){CUI.SelectList.Item=new Class({toString:"SelectList.Item",$element:c,_cachedPosition:null,construct:function(b){this.$element=a(b.element)},getPosition:function(){var a=this.$element.index();return a>-1?a:this._cachedPosition},getDisplay:function(){throw new Error("Subclass responsibility")},remove:function(){var b=this._getParent();this._cachedPosition=this.getPosition(),this.$element.remove(),b.trigger(a.Event("itemremoved",{item:this}))},_getParent:function(){throw new Error("Subclass responsibility")}})}(jQuery,this),function(a,b,c){CUI.SelectList.Option=new Class({toString:"SelectList.Option",extend:CUI.SelectList.Item,getDisplay:function(){return this.$element.text()},getValue:function(){return this.$element.attr("data-value")},_getParent:function(){return this.$element.closest(".coral-SelectList, .coral-SelectList-item--optgroup")}})}(jQuery,this),function(a,b,c){CUI.SelectList.Group=new Class({toString:"SelectList.Group",extend:CUI.SelectList.Item,getDisplay:function(){return this.$element.children("span").text()},getItems:function(){return this._getItems().toArray().map(function(a){return new CUI.SelectList.Option({element:a})})},getOption:function(b){if(!a.isNumeric(b))throw new TypeError("Position should be numeric");var c=this._getItems(),d=c.eq(b);if(b<0||0===d.length)throw new RangeError("Position >"+b+"< is not within expected range [0,"+(c.length-1)+"]");return new CUI.SelectList.Option({element:d})},addOption:CUI.SelectList.prototype.addOption,_addItem:CUI.SelectList.prototype._addItem,_getList:function(){return this.$element.children(".coral-SelectList-sublist").first()},_getItems:CUI.SelectList.prototype._getItems,_makeAccessibleListOption:CUI.SelectList.prototype._makeAccessibleListOption,_getParent:function(){return this.$element.parent()}})}(jQuery,this),function(a,b,c){CUI.TagList=new Class({toString:"TagList",extend:CUI.Widget,construct:function(a){var b=this;this.applyOptions(),this.$element.on("change:values",this._setValues.bind(this)).on("change:disabled",this._toggleDisabled.bind(this)),this.$element.on("click","button",function(a){var c=b.$element.children().has(a.currentTarget).find("input");b.removeItem(c.val())}),this._makeAccessible()},defaults:{fieldname:"",values:null,disabled:!1,tag:"li",renderer:null},_existingValues:null,applyOptions:function(){var b=this;this._existingValues=[],this.options.values=this.options.values||[],this.options.values.length>0?this._setValues():this.$element.find("input").each(function(c,d){var e=a(d);b._existingValues.push(e.attr("value"))}),this._toggleDisabled(this.options.disabled)},_setValues:function(){var a=this.options.values;this.$element.empty(),this.options.values=[],this.addItem(a)},_makeAccessible:function(){this.$element.attr({role:"listbox"}),this.$element.children(this.options.tag).attr({role:"option",tabindex:0}).on("keydown",this._onKeyDown.bind(this)).children(".coral-TagList-tag-removeButton").attr({tabindex:-1})},_onKeyDown:function(b){if(8===b.which){b.preventDefault(),b.stopPropagation();var c=a(b.currentTarget).next();0===c.length&&(c=a(b.currentTarget).prev()),this.removeItem(a(b.currentTarget).children("input").val()),c.focus()}},_show:function(){this.$element.show().attr("aria-hidden",!1)},_hide:function(){this.$element.hide().attr("aria-hidden",!0)},_removeItem:function(b){var c=this.$element.children(':has(input[value="'+b+'"])');c.length>0&&(c.remove(),this.$element.trigger(a.Event("itemremoved"),{value:b}))},_appendItem:function(b){var c,d;if("string"===a.type(b)?c=d=b:(c=b.display,d=b.value),d+="",!(a.inArray(d,this._existingValues)>-1||0===d.length)){this._existingValues.push(d);var e=this.options.renderer||this._renderTag,f=a(e.call(this,d,c));f.on("keydown",this._onKeyDown.bind(this)),this._toggleItemDisabled(f[0],this.options.disabled),this.$element.append(f),this.$element.trigger(a.Event("itemadded"),{value:d,display:c})}},_renderTag:function(b,c){var d,e;return d=a("<"+this.options.tag+"/>",{role:"option",tabindex:"0","class":"coral-TagList-tag"+(this.options.multiline?" coral-TagList-tag--multiline":""),title:c}),e=a("<button/>",{"class":"coral-MinimalButton coral-TagList-tag-removeButton",type:"button",tabindex:"-1",title:"Remove"}).appendTo(d),a("<i/>",{"class":"coral-Icon coral-Icon--sizeXS coral-Icon--close"}).appendTo(e),a("<span/>",{"class":"coral-TagList-tag-label",text:c}).appendTo(d),a("<input/>",{type:"hidden",value:b,name:this.options.fieldname}).appendTo(d),d},_toggleDisabled:function(a){var b="boolean"==typeof a?a:this.options.disabled,c=this._getItems();this.$element.toggleClass("is-disabled",b),this.$element.attr("aria-disabled",b),c.map(function(a){this._toggleItemDisabled(a,b)}.bind(this))},_toggleItemDisabled:function(b,c){var d="boolean"==typeof c?c:this.options.disabled,e=a(b).find("input, button");e.each(function(b,c){a(c).prop("disabled",d)}),a(b).attr("tabindex",d?-1:0)},_getItems:function(){var a=this,b=a.$element.children();return this._existingValues.map(function(a){var c=b.has('input[value="'+a+'"]');return c.length>1&&(c=c.first()),!!c.length&&c[0]}).filter(function(a){return a})},removeItem:function(a){var b=this._existingValues.indexOf(""+a);b>-1&&(this._existingValues.splice(b,1),this._removeItem(a))},addItem:function(b){var c=this,d=a.isArray(b)?b:[b];a.each(d,function(a,b){c._appendItem(b)})},getValues:function(){return this._existingValues.slice(0)}}),CUI.Widget.registry.register("taglist",CUI.TagList),CUI.options.dataAPI&&a(document).on("cui-contentloaded.data-api",function(b){CUI.TagList.init(a("[data-init~=taglist]",b.target))})}(jQuery,this),function(a,b,c){CUI.Select=new Class({toString:"Select",extend:CUI.Widget,construct:function(){this._button=this.$element.children(".coral-Select-button"),this._buttonText=this._button.children(".coral-Select-button-text"),this._nativeSelect=this.$element.children(".coral-Select-select"),this._selectList=this.$element.children(".coral-SelectList"),this._tagList=this.$element.children(".coral-TagList"),this._valueInput=this.$element.children("input[type=hidden]"),this.$element.on("change:disabled",function(a){a.target===this.$element[0]&&this._toggleDisabled()}.bind(this)),this.applyOptions()},defaults:{type:"static",disabled:!1,nativewidget:!1,nativewidgetonmobile:!0,multiple:!1,tagConfig:null,selectlistConfig:null},applyOptions:function(){switch(this._nativeSelect.length>0&&this._nativeSelect.prop("multiple")&&(this.options.multiple=!0),this._createSelectList(),(this.options.disabled||this._button.hasClass("is-disabled")||this.$element.data("disabled"))&&this.set("disabled",!0),this._nativeSelect.removeClass("coral-Select-select--native"),this._nativeSelect.off(".selectlist"),this._button.off(".selectlist"),this._getModeOfOperation()){case"nativeselect":this._prepareSelectForInteraction(),this._disableKeyboardInteractionWithSelectList();break;case"selectlist":this._prepareSelectListForInteraction(),this._disableKeyboardInteractionWithNativeSelect();break;case"hybrid":this._prepareSelectForInteraction(),this._prepareSelectListForInteraction(),this._hybridEventHandling(),this._disableKeyboardInteractionWithNativeSelect()}this.options.multiple?this._setTagList():"static"===this.options.type&&this._handleNativeSelect(),this._makeAccessible()},_makeAccessible:function(){var c,d,e,f=!!b.navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i);this._button.attr({id:this._button.attr("id")||CUI.util.getNextId()}),this._button.hasClass("is-invalid")&&(this._button.attr({"aria-invalid":!0}),this._nativeSelect.attr({"aria-invalid":!0}),this._selectList.attr({"aria-invalid":!0})),c=this._nativeSelect.length&&this._nativeSelect.attr("id")?'label[for="'+this._nativeSelect.attr("id")+'"]':'label[for="'+this._button.attr("id")+'"]',d=a(c),d.attr({id:d.attr("id")||CUI.util.getNextId()}),e=d.attr("id"),this._buttonText.attr({id:this._buttonText.attr("id")||CUI.util.getNextId()}),this._button.attr({role:f?"button":"combobox","aria-expanded":!1,"aria-haspopup":!0,"aria-labelledby":e?this._buttonText.attr("id")+" "+e:null,"aria-owns":this._selectList.attr("id"),"aria-multiselectable":this.options.multiple||null}),this._selectListWidget&&this._selectListWidget._makeAccessible(),this._selectList.attr({"aria-controls":this._button.attr("id"),"aria-multiselectable":this.options.multiple||null}),d.length&&!this._button.is("[aria-hidden=true]")&&d.on("click.selectLabel",function(a){this._button.focus(),a.preventDefault()}.bind(this))},getValue:function(){return this.options.multiple?this._tagListWidget.getValues():"static"===this.options.type?this._nativeSelect[0][this._nativeSelect[0].selectedIndex].value:"dynamic"===this.options.type?this._valueInput.val():null},setValue:function(b){var d=this;b===c?b=[]:a.isArray(b)||(b=[b]);var e=[],f=function(a){var c=a.getValue(),f=b.indexOf(c);f===-1?e.push(c):d._select(c,a.getDisplay())};this.getItems().forEach(function(a){a instanceof CUI.SelectList.Option?f(a):a instanceof CUI.SelectList.Group&&a.getItems().forEach(f)}),this._deselect(e)},getItems:function(){return this._selectListWidget.getItems()},getOption:function(a){return this._selectListWidget.getOption(a)},getGroup:function(a){return this._selectListWidget.getGroup(a)},addOption:function(a,b){this._selectListWidget.addOption(a,b)},addGroup:function(a,b){this._selectListWidget.addGroup(a,b)},_getModeOfOperation:function(){return"dynamic"===this.options.type?"selectlist":this.options.nativewidget?"nativeselect":this.options.nativewidgetonmobile?"hybrid":"selectlist"},_hybridEventHandling:function(){var a=!1,b=!1,c=this;this._nativeSelect.on("touchstart.selectlist",function(){a=!0}).on("pointerdown.selectlist",function(b){b.originalEvent&&"touch"===b.originalEvent.pointerType&&(a=!0)}).on("MSPointerDown.selectlist",function(b){b.originalEvent&&2===b.originalEvent.pointerType&&(a=!0)}).on("mousedown.selectlist",function(d){return a?void(a=!1):void(1===d.which&&(c._nativeSelect.attr("disabled","disabled"),setTimeout(function(){c._nativeSelect.removeAttr("disabled"),c._button.focus()},0),b=!0,c._button.click()))}).on("click.selectlist",function(a){b&&(a.stopPropagation(),b=!1)}).on("mouseenter.selectlist mouseleave.selectlist",function(a){c._button.toggleClass("is-hovered","mouseenter"===a.type)}).on("focus.selectlist",function(a){c._button.toggleClass("is-focused","focus"===a.type)}).on("blur.selectlist",function(a){c._button.removeClass("is-focused")})},_disableKeyboardInteractionWithNativeSelect:function(){this._nativeSelect.attr({tabindex:"-1","aria-hidden":!0}),this._nativeSelect.off("focusin.nativeselect focusout.nativeselect keydown.nativeselect pointerdown.nativeselect MSPointerDown.nativeselect mousedown.nativeselect")},_disableKeyboardInteractionWithSelectList:function(){this._button.attr({tabindex:"-1","aria-hidden":!0})},_prepareSelectForInteraction:function(){var a=this;a._nativeSelect.addClass("coral-Select-select--native"),a._nativeSelect.css({height:a._button.outerHeight()}),a._nativeSelect.on("change.select",a._handleNativeSelect.bind(a)),a._nativeSelect.on("focusin.nativeselect",function(){a._button.addClass("is-focused")}),a._nativeSelect.on("focusout.nativeselect",function(b){a._button.removeClass("is-focused")})},_createSelectList:function(){var b=this,c="static";0===this._selectList.length?this._selectList=a("<ul/>",{id:CUI.util.getNextId(),"class":"coral-SelectList"}).appendTo(this.$element):this._selectList.attr("id")||this._selectList.attr("id",CUI.util.getNextId()),this._nativeSelect.length>0?this._parseMarkup():c="dynamic",this._selectList.selectList(a.extend({relatedElement:this._button,type:c},this.options.selectlistConfig||{})),this._selectListWidget=this._selectList.data("selectList"),this._selectList.on("itemadded",this._addItemToSelect.bind(this)).on("itemremoved",function(a){var c;c=a.item instanceof CUI.SelectList.Group?a.item.getItems().map(function(a){return a.getValue()}):[a.item.getValue()],b._deselect(c),b._removeItemFromSelect(a)})},_addItemToSelect:function(b){var c;if(b.item instanceof CUI.SelectList.Option)c=a("<option>"),c.attr("value",b.item.getValue());else{if(!(b.item instanceof CUI.SelectList.Group))return;c=a("<optgroup>")}c.text(b.item.getDisplay());var d=this._nativeSelect;b.target!=this._selectList.get(0)&&(d=d.children().eq(a(b.target).closest(".coral-SelectList-item--optgroup").index()));var e=b.item.getPosition();e>=d.children().length?d.append(c):0===e?d.prepend(c):d.children().eq(e).before(c)},_removeItemFromSelect:function(b){var c=this._nativeSelect;b.target!=this._selectList.get(0)&&(c=c.children().eq(a(b.target).closest(".coral-SelectList-item--optgroup").index())),c.children().eq(b.item.getPosition()).remove()},_prepareSelectListForInteraction:function(){var a=this;this._button.attr({"data-toggle":"selectlist","data-target":"#"+this._selectList.attr("id")}),this._selectList.on("selected.select",this._handleSelectedFromSelectList.bind(this)).on("show.select hide.select",function(b){"show"!==b.type&&a._button.removeClass("is-above is-below"),a._button.toggleClass("is-active","show"===b.type)})},_handleNativeSelect:function(b){var c,d,e=this;e.options.multiple?(a.each(e._nativeSelect[0].options,function(a,b){b.selected?e._tagListWidget.addItem({value:b.value,display:b.text}):e._tagListWidget.removeItem(b.value)}),c=e._tagListWidget.getValues()):e._nativeSelect[0]&&(d=e._nativeSelect[0][e._nativeSelect[0].selectedIndex],e._buttonText.text(d?d.text:""),c=d?d.value:null),b&&this.$element.trigger(a.Event("selected",{selected:c}))},_syncSelectionToNativeSelect:function(b){this._nativeSelect.length&&a.each(this._nativeSelect[0].options,function(a,c){c.selected=b.indexOf(c.value)>-1})},_syncSelectionToSelectList:function(b){this._selectList.length&&a.each(this._selectList.find(this._selectListWidget._SELECTABLE_SELECTOR),function(c,d){var e=a(d);e.attr("aria-selected",b.indexOf(e.attr("data-value"))>-1)})},_parseMarkup:function(){function b(b,d){b.children("option").each(function(b,e){var f=a(e);a("<li/>",{"class":"coral-SelectList-item coral-SelectList-item--option","data-value":f.val(),text:f.text()}).appendTo(d).toggleClass("is-disabled",e.hasAttribute("disabled")).attr("aria-selected",e.hasAttribute("selected")&&!c.options.multiple)})}var c=this,d=this._nativeSelect.children("optgroup");d.length>0?d.each(function(d,e){var f=a(e),g=a("<li/>",{"class":"coral-SelectList-item coral-SelectList-item--optgroup"}).append(a("<span/>",{"class":"coral-SelectList-groupHeader",text:f.attr("label")}));b(f,a("<ul/>",{"class":"coral-SelectList-sublist"}).appendTo(g)),c._selectList.append(g)}):b(this._nativeSelect,this._selectList)},_setTagList:function(){var b=this;0===this._tagList.length&&(this._tagList=a("<ol/>",{"class":"coral-TagList"}).appendTo(this.$element)),this._tagList.tagList(this.options.tagConfig||{}),this._tagListWidget=this._tagList.data("tagList"),this._tagList.on("itemremoved",function(a,c){var d=b._tagListWidget.getValues();b._syncSelectionToNativeSelect(d),b._syncSelectionToSelectList(d)}),this._handleNativeSelect()},_handleSelectedFromSelectList:function(b){b&&b.stopPropagation(),this._selectListWidget.hide(),this._select(b.selectedValue,b.displayedValue),this._button.trigger("focus"),this.$element.trigger(a.Event("selected",{selected:this.getValue()}))},_select:function(a,b){var c;this.options.multiple?(this._tagListWidget.addItem({value:a,display:b}),c=this._tagListWidget.getValues()):(this._buttonText.text(b),this._valueInput.val(a),c=[""+a]),this._syncSelectionToNativeSelect(c),this._syncSelectionToSelectList(c)},_deselect:function(a){var b,c=this;if(this.options.multiple)a.forEach(function(a){c._tagListWidget.removeItem(a)}),b=this._tagListWidget.getValues();else if(a.indexOf(this.getValue())>-1){var d,e,f=this._getFirstOptionWithoutValues(this._getAllOptions(),a);f?(d=f.getValue(),e=f.getDisplay(),b=[d]):(d="",e="",b=[]),this._buttonText.text(e),this._valueInput.val(d)}b&&(this._syncSelectionToNativeSelect(b),this._syncSelectionToSelectList(b))},_toggleDisabled:function(a){var b="boolean"==typeof a?a:this.options.disabled;this._button.toggleClass("is-disabled",b),this._button.attr("aria-disabled",b),this._button.prop("disabled",b),this._nativeSelect.prop("disabled",b),this._selectList.attr("aria-disabled",b),this._tagListWidget&&this._tagListWidget.set("disabled",b),a&&this._selectListWidget&&this._selectListWidget.hide()},_getFirstOptionWithoutValues:function(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(b.indexOf(d.getValue())===-1)return d}},_getAllOptions:function(){for(var a=this.getItems(),b=[],c=0;c<a.length;c++){var d=a[c];d instanceof CUI.SelectList.Group?b=b.concat(d.getItems()):b.push(d)}return b}}),CUI.Widget.registry.register("select",CUI.Select),CUI.options.dataAPI&&a(document).on("cui-contentloaded.data-api",function(b){CUI.Select.init(a("[data-init~=select]",b.target))})}(jQuery,this),function(a){CUI.Tooltip=new Class({toString:"Tooltip",extend:CUI.Widget,construct:function(b){if(this.options.target&&(this.options.target=a(this.options.target)),0===this.$element.length&&this.options.target&&(this.$element=a("<div>"),this.$element.insertAfter(this.options.target)),this.$element.addClass("coral-Tooltip"),this.$element.data("interactive")&&(this.options.interactive=!0,this.options.target||(this.options.target=this.$element.parent())),this.$element.data("target")&&(this.options.target=a(this.$element.data("target"))),this.options.arrow||(this.options.arrow="left",this.$element.hasClass("coral-Tooltip--positionRight")&&(this.options.arrow="left"),this.$element.hasClass("coral-Tooltip--positionLeft")&&(this.options.arrow="right"),this.$element.hasClass("coral-Tooltip--positionBelow")&&(this.options.arrow="top"),this.$element.hasClass("coral-Tooltip--positionAbove")&&(this.options.arrow="bottom")),this.options.type||(this.options.type="info",this.$element.hasClass("coral-Tooltip--info")&&(this.options.type="info"),this.$element.hasClass("coral-Tooltip--error")&&(this.options.type="error"),this.$element.hasClass("coral-Tooltip--success")&&(this.options.type="success"),this.$element.hasClass("coral-Tooltip--notice")&&(this.options.type="notice"),this.$element.hasClass("coral-Tooltip--inspect")&&(this.options.type="inspect")),this.options.interactive&&(this.options.visible=!1),this.$element.toggleClass("is-hidden",!this.options.visible),this.$element.on("change:content",this._setContent.bind(this)),this.$element.on("change:type",this._setType.bind(this)),this.$element.on("change:arrow",this._setArrow.bind(this)),this.applyOptions(),this.reposition(),this._makeAccessible(),this.options.target&&this.options.target.data("tooltip",this),this.options.interactive&&this.options.target){var c=null;a(this.options.target).on("touchstart.cui-tooltip",function(a){c&&clearTimeout(c),this.show(),c=setTimeout(function(){this.hide()}.bind(this),3e3)}.bind(this));var d=!1;a(this.options.target).on("mouseover.cui-tooltip focusin.cui-tooltip",function(a){d&&clearTimeout(d),d=setTimeout(function(){this.show(),this.$element.attr("aria-hidden","false")}.bind(this),this.options.delay)}.bind(this)),a(this.options.target).on("focusout.cui-tooltip",function(a){d&&clearTimeout(d),this.hide(),this.$element.attr("aria-hidden","true")}.bind(this)),a(this.options.target).on("mouseout.cui-tooltip",function(b){a(document.activeElement).is(this.options.target)||(d&&clearTimeout(d),this.hide(),this.$element.attr("aria-hidden","true"))}.bind(this))}},_makeAccessible:function(){this.$element.attr({role:"tooltip",id:this.$element.attr("id")||CUI.util.getNextId()}),this.options.target&&this.options.target.attr("aria-describedby",this.$element.attr("id")),a(this.options.target).is(":empty")&&a(this.options.target).attr("aria-label",this.options.content)},defaults:{target:null,visible:!0,type:null,interactive:!1,arrow:null,delay:500,distance:5},_stylesTypes:{info:"coral-Tooltip--info",error:"coral-Tooltip--error",notice:"coral-Tooltip--notice",success:"coral-Tooltip--success",inspect:"coral-Tooltip--inspect"},_arrows:{left:"coral-Tooltip--positionRight",right:"coral-Tooltip--positionLeft",top:"coral-Tooltip--positionBelow",bottom:"coral-Tooltip--positionAbove"},applyOptions:function(){this._setContent(),this._setType(),this._setArrow()},_setType:function(){if("string"==typeof this.options.type&&this._stylesTypes.hasOwnProperty(this.options.type)){var a=this._stylesTypes.info+" "+this._stylesTypes.error+" "+this._stylesTypes.notice+" "+this._stylesTypes.success+" "+this._stylesTypes.inspect;this.$element.removeClass(a),this.$element.addClass(this._stylesTypes[this.options.type]),this.reposition()}},_setArrow:function(){if("string"==typeof this.options.arrow&&this._arrows.hasOwnProperty(this.options.arrow)){var a=this._arrows.left+" "+this._arrows.right+" "+this._arrows.top+" "+this._arrows.bottom;this.$element.removeClass(a),this.$element.addClass(this._arrows[this.options.arrow]),this.reposition()}},_setContent:function(){"string"==typeof this.options.content&&(this.$element.html(this.options.content),
this.reposition())},_show:function(){this.$element.hasClass("is-hidden")&&(this.$element.removeClass("is-hidden"),this.$element.css("display","none")),this.$element.fadeIn(),a(document).on("keydown.cui-tooltip",function(a){27===a.which&&(this._hide(),a.preventDefault(),a.stopPropagation())}.bind(this))},_hide:function(){return this.$element.fadeOut(400,function(){this.options.autoDestroy&&(this.$element.remove(),a(this.options.target).off(".cui-tooltip"),a(this.options.target).data("tooltip",null)),a(document).off("keydown.cui-tooltip")}.bind(this)),this},reposition:function(){if(this.options.target){this.$element.detach().insertAfter(this.options.target),this.$element.css("position","absolute");var b=a(this.options.target),c=b.outerWidth(!0),d=b.outerHeight(!0),e=b.position().left,f=b.position().top,g=b.offsetParent();g.is("html")||(f+=g.scrollTop(),e+=g.scrollLeft());var h=this.$element.outerWidth(!0),i=this.$element.outerHeight(!0),j=0,k=0;return"left"===this.options.arrow&&(j=e+c+this.options.distance,k=f+(d-i)/2),"right"===this.options.arrow&&(j=e-h-this.options.distance,k=f+(d-i)/2),"bottom"===this.options.arrow&&(j=e+(c-h)/2,k=f-i-this.options.distance),"top"===this.options.arrow&&(j=e+(c-h)/2,k=f+d+this.options.distance),this.$element.css("left",j),this.$element.css("top",k),this}}}),CUI.Widget.registry.register("tooltip",CUI.Tooltip),CUI.options.dataAPI&&(a(document).on("cui-contentloaded.data-api",function(b){CUI.Tooltip.init(a("[data-init~=tooltip]",b.target)),a("[data-init~=quicktip][data-quicktip-content]:empty").not("[aria-label], [aria-labelledby], img[alt], input, select, textarea, button").each(function(b,c){var d=a(c);1===d.closest("label").length||d.attr("id")&&a('label[for="'+d.attr("id")+'"]').length>0||d.attr("aria-label",d.attr("data-quicktip-content"))}),a("[data-init~=quicktip]").not("input, select, textarea, button").not(":tabbable").attr("tabindex",0)}),a(document).on("touchstart mouseover focusin","[data-init~=quicktip]",function(b){var c,d=a(this),e=d.data("tooltip"),f=function(b){b.hide(),d.removeAttr("aria-describedby"),d.off("mouseout.cui-quicktip focusout.cui-quicktip"),a(window).off("keydown.cui-tooltip mousedown.cui-tooltip")};if(!e)switch(c=new CUI.Tooltip({target:d,content:d.data("quicktip-content")||d.html(),type:d.data("quicktip-type"),arrow:d.data("quicktip-arrow"),interactive:!1,autoDestroy:!0,visible:!1}).show(),d.data("quicktip",c),b.type){case"mouseover":case"focusin":"mouseover"===b.type?d.on("mouseout.cui-quicktip",function(){a(document.activeElement).is(d)||f(c)}):d.on("focusout.cui-quicktip",function(){f(c)}),a(window).on("keydown.cui-tooltip",function(a){27===a.which&&(f(c),a.preventDefault())}).on("mousedown.cui-tooltip",function(a){d.is(a.target)||c.$element.is(a.target)||f(c)});break;default:setTimeout(function(){f(c)},3e3)}}))}(window.jQuery),function(a,b,c){CUI.Slider=new Class({toString:"Slider",extend:CUI.Widget,construct:function(){var b=this,c=this.$element.attr("id"),d=[];this._readOptions(),c||(c=CUI.util.getNextId(),this.$element.attr("id",c)),this._renderMissingElements(),this.$inputs=this.$element.find("input"),this.$inputs.each(function(c,e){var f=a(e);f.is("[step]")||f.attr("step",b.options.step),f.is("[min]")||f.attr("min",b.options.min),f.is("[max]")||f.attr("max",b.options.max),f.is("[value]")?d.push(f.attr("value")):(f.attr({value:b.options.value}),d.push(b.options.value)),0===c&&(f.is(":disabled")?(b.options.disabled=!0,b.$element.addClass("is-disabled")):b.options.disabled&&(f.attr("disabled","disabled"),b.$element.addClass("is-disabled")))}),b.values=d,"vertical"===this.options.orientation&&(this.isVertical=!0),this.$element.on("touchstart.slider pointerdown.slider mspointerdown.slider mousedown.slider",this._mouseDown.bind(this)).on("focusin.slider","input[type=range], [role=slider].coral-Slider-handle",this._focus.bind(this)).on("focusout.slider","input[type=range], [role=slider].coral-Slider-handle",this._blur.bind(this)).on("input.slider change.slider","input",this._handleInputChange.bind(this)),this.$element.on("change:value",this._processValueChanged.bind(this)).on("change:disabled",this._processDisabledChanged.bind(this)).on("change:min",this._processMinMaxStepChanged.bind(this)).on("change:max",this._processMinMaxStepChanged.bind(this)).on("change:step",this._processMinMaxStepChanged.bind(this)),this._render(),this._makeAccessible()},defaults:{step:"1",min:"1",max:"100",value:"1",orientation:"horizontal",slide:!1,disabled:!1,tooltips:!1,tooltipFormatter:function(a){return a.toString()},valuetextFormatter:function(a){return a.toString()},ticks:!1,filled:!1,bound:!1},values:[],$inputs:null,$ticks:null,$fill:null,$handles:null,$tooltips:null,isVertical:!1,draggingPosition:-1,_inputsOrHandles:null,_readOptions:function(){this.$element.hasClass("coral-Slider--vertical")&&(this.options.orientation="vertical",this.isVertical=!0),this.$element.hasClass("coral-Slider--tooltips")&&(this.options.tooltips=!0),this.$element.hasClass("coral-Slider--ticked")&&(this.options.ticks=!0),this.$element.hasClass("coral-Slider--filled")&&(this.options.filled=!0),this.$element.hasClass("coral-Slider--bound")&&(this.options.bound=!0),(this.$element.data("slide")||this.$element.hasClass("coral-Slider--slide"))&&(this.options.slide=!0)},setValue:function(a,b){b=b||0,this._updateValue(b,a,!0),this._moveHandles(),this.options.filled&&this._updateFill()},_renderMissingElements:function(){if(!this.$element.find("input").length){var b,c=this,d=a.isArray(this.options.value)?this.options.value:[this.options.value];a.each(d,function(d,e){b=a("<input>"),b.attr({type:"range",min:c.options.min,max:c.options.max,step:c.options.step,value:e}),c.$element.append(b)})}if(!this.$element.find("div.coral-Slider-clickarea").length){var e=a('<div class="coral-Slider-clickarea">');this.$element.prepend(e)}this.$element.toggleClass("coral-Slider",!0),this.$element.toggleClass("coral-Slider--vertical","vertical"===this.options.orientation),this.$element.toggleClass("coral-Slider--tooltips",this.options.tooltips),this.$element.toggleClass("coral-Slider--ticked",this.options.ticks),this.$element.toggleClass("coral-Slider--filled",this.options.filled)},_processValueChanged:function(){var b=this,c=a.isArray(this.options.value)?this.options.value:[this.options.value];a.each(c,function(a,c){b._updateValue(a,c,!0)}),this._moveHandles(),this.options.filled&&this._updateFill()},_processMinMaxStepChanged:function(){var b=this,c=this.$inputs;c.attr({min:this.options.min,max:this.options.max,step:this.options.step,value:""}),this._supportsRangeInput||this.$handles.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuestep":this.options.step}),a.each(this.values,function(a,c){b._updateValue(a,c,!0)}),this.options.ticks&&(this.$element.find(".coral-Slider-ticks").remove(),this._buildTicks()),this.options.filled&&(this.$element.find(".coral-Slider-fill").remove(),this._buildFill()),this._moveHandles(),this.options.filled&&this._updateFill()},_processDisabledChanged:function(){this.options.disabled?(this.$inputs.attr("disabled","disabled"),this.$handles.each(function(){a(this).removeClass("is-focused"),a(this).parent().removeClass("is-focused"),this._supportsRangeInput||a(this).attr("aria-disabled",!0)})):(this.$inputs.removeAttr("disabled"),this._supportsRangeInput||this.$handles.removeAttr("aria-disabled")),this.$element.toggleClass("is-disabled",this.options.disabled)},_render:function(){var b=this,c=b.$inputs.map(function(){return a(this).attr("max")}),d=b.$inputs.map(function(){return a(this).attr("min")}),e=b.$inputs.map(function(){return a(this).attr("step")});b.options.max=Math.max.apply(null,c.toArray()),b.options.min=Math.min.apply(null,d.toArray()),b.options.step=Math.min.apply(null,e.toArray()),this._adjustLabelling(),b.options.ticks&&b._buildTicks(),b.options.filled&&b._buildFill(),b.$element.toggleClass("coral-Slider--slide",b.options.slide),b._buildHandles()},_buildTicks:function(){var b=a("<div/>").addClass("coral-Slider-ticks"),c=Math.round((this.options.max-this.options.min)/this.options.step)-1,d=this.isVertical?this.$element.height():this.$element.width();this.$element.prepend(b);for(var e=0;e<c;e++){var f=d*(e+1)/(c+1),g=f/d*100,h=a("<div/>").addClass("coral-Slider-tick").css(this.isVertical?"bottom":"left",g+"%");b.append(h)}this.$ticks=b.find(".coral-Slider-tick"),this.options.filled},_buildFill:function(){var b=this;if(this.$fill=a("<div/>").addClass("coral-Slider-fill"),0!==b.values.length){var c,d,e=b.isVertical?"height":"width",f=b.isVertical?"bottom":"left";b.values.length<2?(c=(b.values[0]-b.options.min)/(b.options.max-b.options.min)*100,this.$fill.css(e,c+"%")):(c=(this._getLowestValue()-b.options.min)/(b.options.max-b.options.min)*100,d=(this._getHighestValue()-this._getLowestValue())/(b.options.max-b.options.min)*100,this.$fill.css(e,d+"%").css(f,c+"%"))}this.$element.prepend(this.$fill),b.options.filled=!0},_buildHandles:function(){var b=this,c=b.$element.attr("id");b.$inputs.each(function(d){var e,f=a(this),g=f.wrap("<div/>").parent().addClass("coral-Slider-value"),h=(b.values[d]-b.options.min)/(b.options.max-b.options.min)*100,i=h+"%",j=b.isVertical?"bottom":"left",k=a("<div/>").addClass("coral-Slider-handle u-coral-openHand").css(j,i).attr({id:c+"-handle"+d});if(f.css(j,i),g.append(k),b.options.tooltips&&(e=a("<output>"+f.attr("value")+"</output>").addClass("coral-Tooltip coral-Tooltip--inspect "+(b.isVertical?"coral-Tooltip--positionRight":"coral-Tooltip--positionAbove")).attr({role:"tooltip","aria-hidden":!0,id:f.attr("id")+"-tooltip","for":f.attr("id")}),k.append(e)),b.$inputs.length>1&&f.attr("aria-labelledby"))for(var l,m=f.attr("aria-labelledby").split(" "),n=0;n<m.length;n++)n>0&&(l=a("#"+m[n]),k.prepend(l))}),b.$handles=b.$element.find(".coral-Slider-handle"),b.$tooltips=b.$element.find(".coral-Tooltip"),b._moveHandles()},_handleClick:function(a){if(this.options.disabled)return!1;var d=this,e=a.pageX,f=a.pageY,g=/^(ms)?pointerdown$/i.test(a.type);if("touchstart"===a.type){var h=a.originalEvent.touches.length>0?a.originalEvent.touches:a.originalEvent.changedTouches;e=h[0].pageX,f=h[0].pageY}else g&&(e=a.originalEvent.clientX+b.pageXOffset,f=a.originalEvent.clientY+b.pageYOffset);if(e!==c&&f!==c){var i=d._findNearestHandle(e,f),j=d._getValueFromCoord(e,f,!0);isNaN(j)||(d._updateValue(i,j),d._moveHandles(),d.options.filled&&d._updateFill()),("mousedown"===a.type||g)&&d.$handles.eq(i).data("mousedown",!0),d._inputsOrHandles.eq(i).focus()}},_findNearestHandle:function(b,c){var d=this,e=1/0,f=0;return d.$handles.each(function(g){var h=a(this).offset().left,i=a(this).offset().top,j=a(this).width(),k=a(this).height(),l=Math.abs(b-(h+j/2));"vertical"===d.options.orientation&&(l=Math.abs(c-(i+k/2))),l<e&&(e=l,f=g)}),f},_handleInputChange:function(b){if(this.options.disabled)return!1;var c=a(b.target),d=this.$inputs.index(c);c.val()!==this.values[d]&&(this.setValue(c.val(),d),c.is(document.activeElement)&&(this.$handles.eq(d).removeData("mousedown"),this._focus(b)))},_focus:function(c){if(this.options.disabled)return!1;var d=this,e=a(c.target),f=e.closest(".coral-Slider-value"),g=f.find(".coral-Slider-handle");g.data("mousedown")||(this.$element.addClass("is-focused"),f.addClass("is-focused"),g.addClass("is-focused")),a(b).on("touchstart.slider pointerdown.slider mspointerdown.slider mousedown.slide",function(b){1!==a(b.target).closest(d.$element).length&&e.trigger("focusout.slider")})},_blur:function(c){if(this.options.disabled)return!1;var d=a(c.target),e=d.closest(".coral-Slider-value"),f=e.find(".coral-Slider-handle");this.$element.removeClass("is-focused"),e.removeClass("is-focused"),f.removeClass("is-focused").removeData("mousedown"),a(b).off("touchstart.slider pointerdown.slider mspointerdown.slider mousedown.slider")},_keyDown:function(b){if(this.options.disabled)return!1;var c=this,d=a(b.target),e=b.which||b.keyCode,f=d.closest(".coral-Slider-value"),g=f.find("input"),h=c.$inputs.index(g),i=c.$handles.eq(h),j=Number(g.val()),k=Number(c.options.step),l=Number(c.options.min),m=Number(c.options.max),n=Math.max(k,Math.round((m-l)/10)),o=!1;switch(i.removeData("mousedown"),c._focus(b),e){case 40:case 37:j-=k,o=!0;break;case 38:case 39:j+=k,o=!0;break;case 33:j+=n-j%n,o=!0;break;case 34:j-=n-(j%n===0?0:n-j%n),o=!0;break;case 35:j=m,o=!0;break;case 36:j=l,o=!0}o&&b.preventDefault(),j!==Number(g.val())&&(c.setValue(j,h),g.trigger("change.slider"))},_mouseDown:function(c){if(this.options.disabled)return!1;c.preventDefault();var d,e=this;return this.draggingPosition=-1,this.$handles.each(function(a,b){b===c.target&&(e.draggingPosition=a)}),this.$tooltips.each(function(a,b){b===c.target&&(e.draggingPosition=a)}),this.draggingPosition<0?void this._handleClick(c):(d=this.$handles.eq(this.draggingPosition),d.addClass("is-dragged"),a("body").addClass("u-coral-closedHand"),a(b).on("touchmove.slider pointermove.slider mspointermove.slider mousemove.slider",this._handleDragging.bind(this)),a(b).on("touchend.slider pointerup.slider mspointerup.slider mouseup.slider",this._mouseUp.bind(this)),("mousedown"===c.type||/^(ms)?pointerdown$/i.test(c.type))&&d.data("mousedown",!0),void this._inputsOrHandles.eq(this.draggingPosition).focus())},_handleDragging:function(a){var c=a.pageX,d=a.pageY;if(a.originalEvent.targetTouches){var e=a.originalEvent.targetTouches.item(0);c=e.pageX,d=e.pageY}else/^(ms)?pointermove$/i.test(a.type)&&(c=a.originalEvent.clientX+b.pageXOffset,d=a.originalEvent.clientY+b.pageYOffset);this._updateValue(this.draggingPosition,this._getValueFromCoord(c,d)),this._moveHandles(),this.options.filled&&this._updateFill(),a.preventDefault()},_mouseUp:function(){this.$handles.eq(this.draggingPosition).removeClass("is-dragged"),a("body").removeClass("u-coral-closedHand"),this.draggingPosition=-1,a(b).off("mousemove.slider mspointermove.slider pointermove.slider touchmove.slider"),a(b).off("mouseup.slider mspointerup.slider pointerup.slider touchend.slider")},_clickLabel:function(a){this.options.disabled||this._inputsOrHandles.eq(0).focus()},_updateValue:function(b,c,d){var e,f,g,h=this,i=h.$inputs.eq(b),j=c.toString(),k=["min","max"],l={};i.val()===j&&i.attr("value")===j&&h.values[b]===j||(c=this._snapValueToStep(c,this.options.min,this.options.max,this.options.step),2===h.$inputs.length&&this.options.bound&&(e=h.$inputs.eq(!b),f=Number(e.val()),c=Math[k[b]](c,f),e.attr(k[b],c),g=k[!b],a.extend(l,{ariaAttribute:f})),h.values[b]=c.toString(),a.extend(l,{value:c,"aria-valuetext":h._supportsRangeInput?h.options.valuetextFormatter(c):null}),i.val(c).attr(l),this._supportsRangeInput||h.$handles.each(function(d,e){var i=d===b,j=i?f:c;g="aria-value"+k[!i],l={ariaAttr:j},i&&a.extend(l,{"aria-valuenow":c,"aria-valuetext":h.options.valuetextFormatter(c)}),a(e).attr(l)}),d||setTimeout(function(){i.change()},1))},_moveHandles:function(){var b=this;this.$handles.each(function(c,d){var e,f=a(d),g=(b.values[c]-b.options.min)/(b.options.max-b.options.min)*100,h=b.$inputs.eq(c);"vertical"===b.options.orientation?(f.css("bottom",g+"%"),h.css("bottom",g+"%")):(f.css("left",g+"%"),h.css("left",g+"%")),b.options.tooltips&&(e=b.$tooltips.eq(c),e.html(b.options.tooltipFormatter(b.values[c])),"vertical"===b.options.orientation?e.css("top",-((e.outerHeight()+f.outerHeight()/2)/2)+"px"):e.css("left",-((e.outerWidth()+f.outerWidth()/2)/2)+"px"))})},_updateFill:function(){var a,b=this;if(0!==b.values.length)if(2===b.values.length){a=(b._getLowestValue()-b.options.min)/(b.options.max-b.options.min)*100;var c=(b._getHighestValue()-b.options.min)/(b.options.max-b.options.min)*100,d=c-a;"vertical"===b.options.orientation?b.$fill.css("bottom",a+"%").css("height",d+"%"):b.$fill.css("left",a+"%").css("width",d+"%")}else a=(b.values[0]-b.options.min)/(b.options.max-b.options.min)*100,"vertical"===b.options.orientation?b.$fill.css("height",a+"%"):b.$fill.css("width",a+"%");b.options.ticks&&b._coverTicks()},_coverTicks:function(){var b=this;b.$ticks.each(function(c){var d=b._getValueFromCoord(a(this).offset().left,a(this).offset().top);2===b.values.length?d>=b._getLowestValue()&&d<=b._getHighestValue()?a(this).addClass("coral-Slider-tick--covered"):a(this).removeClass("coral-Slider-tick--covered"):d<=b._getHighestValue()?a(this).addClass("coral-Slider-tick--covered"):a(this).removeClass("coral-Slider-tick--covered")})},_getValueFromCoord:function(a,b,c){var d,e=this,f=e.$element.offset();if("vertical"===e.options.orientation){var g=e.$element.height();d=(f.top+g-b)/g}else{var h=e.$element.width();d=(a-f.left)/h}if(c&&(d<0||d>1))return NaN;var i=1*e.options.min+(e.options.max-e.options.min)*d;return this._snapValueToStep(i,e.options.min,e.options.max,e.options.step)},_getHighestValue:function(){return Math.max.apply(null,this.values)},_getLowestValue:function(){return Math.min.apply(null,this.values)},_makeAccessible:function(){var b,c,d=this;this.$inputs.each(function(e,f){b=a(f),c=d.$handles.eq(e),d._supportsRangeInput?(b.attr({"aria-valuetext":d.options.valuetextFormatter(b.attr("value")),"aria-hidden":null,tabindex:null}),c.attr({role:null,"aria-valuemin":null,"aria-valuemax":null,"aria-valuestep":null,"aria-valuenow":null,"aria-valuetext":null,tabindex:null,"aria-labelledby":null}),a('label[for="#'+c.attr("id")+'"]').attr("for",b.attr("id"))):(b.attr({"aria-valuetext":null,"aria-hidden":!0,tabindex:-1}),c.attr({role:"slider","aria-valuemin":b.attr("min"),"aria-valuemax":b.attr("max"),"aria-valuestep":b.attr("step"),"aria-valuenow":b.attr("value"),"aria-valuetext":d.options.valuetextFormatter(b.attr("value")),tabindex:b.is(":disabled")?null:0,"aria-labelledby":b.attr("aria-labelledby")||null}),a('label[for="'+b.attr("id")+'"]').attr("for",c.attr("id")))}),d._supportsRangeInput?(this._inputsOrHandles=this.$inputs,this.$element.off("keydown.slider")):(this._inputsOrHandles=this.$handles,this.$element.on("keydown.slider","[role=slider].coral-Slider-handle",this._keyDown.bind(this))),a.each(this.values,function(a,b){d._updateValue(a,b,!0)})},_adjustLabelling:function(){var a=(this.$element.attr("id"),this._adjustFieldsetAndLegend());this._adjustInputLabels(a)},_adjustFieldsetAndLegend:function(){var b,c,d=this.$element.attr("id"),e=this.$element.children("fieldset"),f=e.children("legend");return e.length&&(this.$element.append(e.contents(":not(legend)")),b=a("<div/>",{role:"group","class":"coral-Slider-fieldset"}).insertBefore(this.$element),b.append(this.$element),f.length&&(c=a("<div/>"),c.append(f.contents()),a.each(f.prop("attributes"),function(){c.attr(this.name,this.value)}),c.attr("id")||c.attr("id",d+"-legend"),e.replaceWith(c),f=c.insertBefore(this.$element),b.attr("aria-labelledby",f.attr("id")))),f},_adjustInputLabels:function(c){var d=this,e=this.$element.attr("id"),f=a(c);this.$inputs.each(function(c,g){var h,i=a(g),j=i.attr("id"),k=i.attr("aria-labelledby");j||(i.attr("id",e+"-input"+c),j=i.attr("id")),k||(k="",i.attr("aria-labelledby",k)),h=d.$element.find('label[for="'+j+'"]'),f.length&&b.navigator.platform.indexOf("Win")===-1&&k.indexOf(f.attr("id"))===-1&&(k=f.attr("id")+(k.length?" ":"")+k,i.attr("aria-labelledby",k)),h.length&&(h.not(i.parent()).insertBefore(d.$element),h.each(function(b){a(this).attr("id")||a(this).attr("id",j+"-label"+b),k.indexOf(j+"-label"+b)===-1&&(k=k+(k.length?" ":"")+j+"-label"+b,i.attr("aria-labelledby",k)),a(this).on("mousedown.slider",function(a){d._inputsOrHandles.eq(b).focus(),a.preventDefault(),a.stopImmediatePropagation()})})),i.parent().is("label")&&(h=i.parent(),h.attr("id")||h.attr("id",j+"-label"),h.attr("for")||h.attr("for",j),i.insertAfter(h),f.length&&h.addClass("u-coral-screenReaderOnly").attr({"aria-hidden":!0}),h.insertBefore(d.$element)),h.length&&k.indexOf(h.attr("id"))===-1&&(k=k+(k.length?" ":"")+h.attr("id"),i.attr("aria-labelledby",k)),0===h.length&&k.length>0&&(h=a("#"+k.split(" ")[0])),0===k.length&&i.removeAttr("aria-labelledby"),0===c&&(h.length&&h.on("click.slider",d._clickLabel.bind(d)),f.length&&f.on("click.slider",d._clickLabel.bind(d)))})},_supportsRangeInput:function(){var a=document.createElement("input");return a.setAttribute("type","range"),"range"===a.type}(),_snapValueToStep:function(a,b,c,d){d=parseFloat(d);var e,f=(a-b)%d,g=d.toString().replace(/^(?:\d+)(?:\.(\d+))?$/g,"$1"),h=g.length;return e=2*Math.abs(f)>=d?a-Math.abs(f)+d:a-f,e<b?e=b:e>c&&(e=b+Math.floor((c-b)/d)*d),h>0&&(e=parseFloat(e.toFixed(h))),e}}),CUI.Widget.registry.register("slider",CUI.Slider),CUI.options.dataAPI&&a(document).on("cui-contentloaded.data-api",function(b){CUI.Slider.init(a('.coral-Slider[data-init~="slider"]',b.target))})}(jQuery,this),function(a){CUI.LabeledSlider=new Class({toString:"LabeledSlider",extend:CUI.Slider,construct:function(){this.$element.addClass("coral-Slider--labeled"),this.options.alternating&&this.$element.addClass("coral-Slider--alternatingLabels")},defaults:a.extend(CUI.Slider.prototype.defaults,{alternating:!1}),_readOptions:function(){this.inherited(arguments),this.$element.hasClass("coral-Slider--alternatingLabels")&&(this.options.alternating=!0)},_getTickLabel:function(a){var b=this.$element.find("ul.coral-Slider-tickLabels li").eq(a);return b.html()},_buildTicks:function(){var b=this,c=a("<div></div>").addClass("coral-Slider-ticks"),d=Math.ceil((b.options.max-b.options.min)/b.options.step)+1,e=b.isVertical?b.$element.height():b.$element.width(),f=100*(e/d)/e;this.$element.append(c),this.options.alternating&&(f*=2);for(var g=0;g<d;g++){var h=e*g/(d-1),i=h/e*100,j=a("<div/>").addClass("coral-Slider-tick").css(b.isVertical?"bottom":"left",i+"%"),k="coral-Slider-tickLabel-"+b.$element.attr("id")+"-"+g,l=a("<div/>").addClass("coral-Slider-tickLabel").attr("id",k);c.append(j),b.isVertical||(i-=f/2),l.css(b.isVertical?"bottom":"left",i+"%"),b.isVertical||l.css("width",f+"%"),l.append(b._getTickLabel(g)),c.append(l)}b.$ticks=c.find(".coral-Slider-tick"),b.options.filled&&b._coverTicks()},_moveHandles:function(){var a=this;this.inherited(arguments),this.$ticks&&0!==this.$ticks.length&&this.$inputs.each(function(b){var c=a.$inputs.eq(b),d=a.$handles.eq(b),e=c.offset(),f=e.left+c.width()/2,g=e.top+c.height()/2,h=a._findNearestTick(f,g),i=a.$ticks.eq(h).next(".coral-Slider-tickLabel");(a._supportsRangeInput?c:d).attr({"aria-describedby":i.attr("id")})})},_findNearestTick:function(b,c){if(this.$ticks&&0!==this.$ticks.length){var d=this,e=1/0,f=0;return d.$ticks.each(function(g){var h=a(this).offset().left,i=a(this).offset().top,j=a(this).width(),k=a(this).height(),l=Math.abs(b-(h+j/2));"vertical"===d.options.orientation&&(l=Math.abs(c-(i+k/2))),l<e&&(e=l,f=g)}),f}}}),CUI.Widget.registry.register("labeled-slider",CUI.LabeledSlider),CUI.options.dataAPI&&a(document).on("cui-contentloaded.data-api",function(b){CUI.LabeledSlider.init(a(".coral-Slider[data-init~='labeled-slider']",b.target))})}(window.jQuery),function(a,b,c){CUI.ColumnView=new Class({toString:"ColumnView",extend:CUI.Widget,defaults:{multiselect:!1,single:!1},construct:function(){this._handleDocumentKeyUp=this._handleDocumentKeyUp.bind(this),this._handleDocumentKeyDown=this._handleDocumentKeyDown.bind(this),this._activeColumnRequest=0,this.$element.addClass("coral-ColumnView"),(this.get("single")||this.$element.hasClass("coral-ColumnView--single"))&&(this.set("single",!0),this.$element.addClass("coral-ColumnView--single")),(this.get("multiselect")||this.$element.hasClass("coral-ColumnView--multiselect"))&&(this.set("multiselect",!0),this.$element.addClass("coral-ColumnView--multiselect")),this.$element.on("click",".coral-ColumnView-item",this._itemActivateHandler.bind(this)),this.$element.on("click",".coral-ColumnView-icon",this._itemSelectHandler.bind(this)),this.$element.on("click",".coral-ColumnView-column-content",this._columnContentHandler.bind(this)),this.get("src")?this.setSource(this.get("src")):this._loadInnerMarkup(),this._makeAccessible()},destroy:function(){this.$element.removeData("columnView"),this.$element.off("click",".coral-ColumnView-item"),this.$element.off("click",".coral-ColumnView-icon"),this.$element.off("click",".coral-ColumnView-column-content"),this.$element.off("keydown"),this.$element.find(".coral-ColumnView-column-content").off("scroll"),a(document).off("keyup",this._handleDocumentKeyUp),a(document).off("keydown",this._handleDocumentKeyDown),delete this._data,delete this.$element},_handleDocumentKeyUp:function(a){16===a.which&&this.$element.removeClass("is-unselectable")},_handleDocumentKeyDown:function(a){16===a.which&&this.$element.addClass("is-unselectable")},_makeAccessible:function(){this.$element.attr("tabindex","0"),a(document).on("keyup",this._handleDocumentKeyUp),a(document).on("keydown",this._handleDocumentKeyDown),this.$element.on("keydown",function(a){var b,c=!1,d=this.getSelectedItems(),e=this.$element.data("lastSelected");if(d.length>0)switch(a.which){case 38:c=!0,a.shiftKey?e.item.is(":not(:first-child)")&&(e.direction&&"up"!==e.direction||(e.item=e.item.prev(),e.item.hasClass("is-selected")&&!e.item.prev().hasClass("is-selected")&&(e.item=e.item.prev())),e.item.find(".coral-ColumnView-icon").trigger("click"),e.item.hasClass("is-selected")&&e.item.prev().hasClass("is-selected")&&(e.item=e.item.prevUntil(":not(.is-selected)").last()),d=this.getSelectedItems(),1===d.length&&d[0].item.is(":first-child")&&(e.item=d[0].item.next()),this.$element.data("lastSelected",{item:e.item,direction:"up"})):0!==d[0].item.prev().length?d[0].item.prev().trigger("click"):d.length>1&&d[0].item.trigger("click");break;case 40:c=!0,a.shiftKey?e.item.is(":not(:last-child)")&&(e.direction&&"down"!==e.direction||(e.item=e.item.next(),e.item.hasClass("is-selected")&&!e.item.next().hasClass("is-selected")&&(e.item=e.item.next())),e.item.find(".coral-ColumnView-icon").trigger("click"),e.item.hasClass("is-selected")&&e.item.next().hasClass("is-selected")&&(e.item=e.item.nextUntil(":not(.is-selected)").last()),1===d.length&&d[0].item.is(":last-child")&&(e.item=d[0].item),d=this.getSelectedItems(),1===d.length&&d[0].item.is(":last-child")&&(e.item=d[0].item.prev()),this.$element.data("lastSelected",{item:e.item,direction:"down"})):0!==d[d.length-1].item.next().length?d[d.length-1].item.next().trigger("click",{metaKey:!0}):d.length>1&&d[d.length-1].item.trigger("click");break;case 39:c=!0,d[0].item.hasClass("coral-ColumnView-item--hasChildren")&&(b=this._getActiveColumn(),b.next().find(".coral-ColumnView-item").first().trigger("click"));break;case 37:c=!0,b=this._getActiveColumn(),b.prev().find(".coral-ColumnView-item.is-active").trigger("click")}else{var f=this.$element.children(".coral-ColumnView-column").first(),g=f.find(".coral-ColumnView-item");switch(a.which){case 38:g=g.last(),g.trigger("click"),this.$element.data("lastSelected",{item:g,direction:"up"}),c=!0;break;case 40:case 39:g=g.first(),g.trigger("click"),this.$element.data("lastSelected",{item:g,direction:"down"}),c=!0}}c&&(a.stopImmediatePropagation(),a.preventDefault())}.bind(this))},_loadInnerMarkup:function(){if(this.$element.children().length>0){var a=this.$element.html();this._data={},this._data["/"]=a,this.$element.empty();var b=++this._activeColumnRequest;this.setNextColumn("/").done(function(a,c){this._setActiveColumn(c,!1,b)}.bind(this))}},setSource:function(b){this.cancelNavigation();var c=a.Deferred();this._data={},this.$element.empty();var d=++this._activeColumnRequest;return this.setNextColumn(b).done(function(a,b){this._setActiveColumn(b,!1,d),c.resolve()}.bind(this)).fail(function(){c.reject()}),c.promise()},setData:function(a,b){if(!a._links||!a._links.self||!a._links.self.href)throw"Invalid data: needs to contain self link (_links.self.href)";var c=a._links.self.href;if(this._data=b||!this._data?{}:this._data,this._storeData(a),b){this.cancelNavigation(),this.$element.empty();var d=++this._activeColumnRequest;this.setNextColumn(c).done(function(a,b){this._setActiveColumn(b,!1,d)}.bind(this))}},getSelectedItems:function(){var b=[];return this._getColumnContent(this._getActiveColumn()).children(".is-active").each(function(c,d){var e=a(d);b.push({checked:e.hasClass("is-selected"),data:e.data("data"),item:e})}),b},getBreadcrumbItems:function(){var b=[];return this._getActiveColumn().prevAll().find(".is-active").each(function(c,d){var e=a(d);b.push({checked:e.hasClass("is-selected"),data:e.data("data"),item:e})}),b},getTargetColumn:function(){var a=this._getActiveColumn(),b=this.getSelectedItems().filter(function(a){return!a.checked});return 1===b.length&&b[0].data&&b[0].data.hasChildren?a.next().data("data"):a.data("data")},navigate:function(b,c){var d,e=this,f=a.Deferred();c?"active"===c?d=e._getActiveColumn():"string"==typeof c?d=e.$element.children().filter(function(){return a(this).data("href")===c}):c instanceof a&&(d=c):d=e.$element.find(".coral-ColumnView-column:eq(0)"),d.nextAll().remove(),e.cancelNavigation(),e._navigation=e._navigation||{};var g=(e._lastNavigationId||0)+1;if(e._lastNavigationId=g,e._navigation[g]="pending",d.length>0){var h=function(c,d){if("cancel"===e._navigation[g])return e._navigation[g]="cancelled",void f.reject();var i=b(e._data[c.data("href")],c);if(i){var j=i instanceof a?i:c.find(".coral-ColumnView-item").filter(function(){return a(this).data("href")===(i._links&&i._links.self?i._links.self.href:i)}).eq(0),k=j.data("href");j&&j.length>0&&(e._setActiveColumn(j,!1,d),j.addClass("is-active")),(j||k)&&e.$element.trigger("coral-columnview-item-select",[j.data("data"),j]);var l=++e._activeColumnRequest;k?e.setNextColumn(k,function(){return"pending"===e._navigation[g]}).done(function(a,b){h(b,l)}).fail(function(){e._navigation[g]="failed",f.reject()}):(e._scrollToColumn(),e._navigation[g]="finished",f.resolve())}else i===!1?(e._scrollToColumn(),e._navigation[g]="finished",f.resolve()):e._loadNext(c).done(function(){h(c,l)}).fail(function(){e._navigation[g]="failed",f.reject()})};h(d,++e._activeColumnRequest)}else e._navigation[g]="failed",f.reject();var i=f.promise();return i.navigationId=g,i},cancelNavigation:function(b){return this._navigation=this._navigation||{},b?!(!this._navigation.hasOwnProperty(b)||"pending"!==this._navigation[b])&&(this._navigation[b]="cancel",!0):(a.each(this._navigation,function(a,b){"pending"===this._navigation[a]&&(this._navigation[a]="cancel")}.bind(this)),!0)},renderColumn:function(b){var c=this._data[b];if("object"===a.type(c)){var d=a('<div class="coral-ColumnView-column"></div>'),e=a('<div class="coral-ColumnView-column-content"></div>').appendTo(d);if(this.get("single")&&c._links&&c._links.up){var f=c._links.self?c._links.self.title:"",g=a('<a class="coral-ColumnView-item coral-ColumnView-item--back"></a>').append(a('<div class="coral-ColumnView-label"></div>').text(f));d.prepend(g)}if(c._embedded&&c._embedded.items)for(;c;){if(c._embedded&&c._embedded.items)for(var h=c._embedded.items,i=0;i<h.length;i++){var j=h[i];this.renderItem(j).appendTo(e)}c=this._data[c._links.next]}else(c.properties||c.preview)&&e.append(this.renderPreview(c));return d}return a(c)},renderItem:function(b){var c=a('<div class="coral-ColumnView-item"></div>');if(b.hasChildren&&c.addClass("coral-ColumnView-item--hasChildren"),b.icon||b.image){var d=a('<div class="coral-ColumnView-icon"></div>').appendTo(c);b.image?a("<img/>").addClass("coral-ColumnView-thumbnail").attr("src",b.image).appendTo(d):a("<i/>").addClass("coral-Icon coral-Icon--"+b.icon+" coral-Icon--sizeS").appendTo(d)}return a('<div class="coral-ColumnView-label"></div>').text(b._links.self.title).appendTo(c),c},renderPreview:function(b){var c=a('<div class="coral-ColumnView-preview"></div>');if(b.preview)if(b.preview.image){var d=a('<div class="coral-ColumnView-preview-icon"></div>');a('<img class="coral-ColumnView-preview-thumbnail">').attr("src",b.preview.image).appendTo(d),d.appendTo(c)}else if(b.preview.icon){var e=a('<div class="coral-ColumnView-preview-icon"></div>');a("<i></i>").addClass("coral-Icon coral-Icon--"+b.preview.icon+" coral-Icon--sizeL").appendTo(e),e.appendTo(c)}if(b.properties)for(var f=0;f<b.properties.length;f++){
var g=b.properties[f],h=a('<div class="coral-ColumnView-preview-label"></div>').text(g.label).appendTo(c),i=a('<div class="coral-ColumnView-preview-value"></div>').text(g.value).appendTo(c);g.icon&&(a("<i></i>").addClass("coral-Icon coral-Icon--"+g.icon+" coral-Icon--sizeXS").prependTo(i),h.before('<div class="coral-ColumnView-preview-spacer"></div>'))}return c},setNextColumn:function(b,c){var d=a.Deferred(),e=function(){if("function"!==a.type(c)||c()){var e=this.renderColumn(b);this._prepareColumn(e,b);var f=this._getActiveColumn();this.get("single")&&f.length>0&&e.addClass("is-right"),f.nextAll().empty().removeClass("is-active"),f.length>0&&f.next().length>0?f.next().replaceWith(e):this.$element.append(e),this._loadMoreIfNeeded(e).always(function(){d.resolve(this._data[b],e)}.bind(this))}else d.reject()}.bind(this);return this._data[b]?e(b):this._loadData(b).done(e).fail(function(){d.reject()}),d.promise()},setPreviousColumn:function(b,c){var d=a.Deferred(),e=function(){if("function"!==a.type(c)||c()){var e=this.renderColumn(b);this._prepareColumn(e,b),this.get("single")&&e.addClass("is-left");var f=this._getActiveColumn();f.length>0&&f.prevAll().remove(),this.$element.prepend(e),this._loadMoreIfNeeded(e).always(function(){d.resolve(this._data[b],e)}.bind(this))}else d.reject()}.bind(this);return this._data[b]?e(b):this._loadData(b).done(e).fail(function(){d.reject()}),d.promise()},addItem:function(b,c,d){var e;e=c?"string"===a.type(c)?"active"===c?this._getActiveColumn():this.$element.children().filter(function(){return a(this).data("href")===c}):a(c):this._getActiveColumn();var f;f=b instanceof a?b:this._prepareItem(this.renderItem(b),b);var g=this._getColumnContent(e),h=g.children();return 0===d?g.prepend(f):d>0&&d<h.length?h.eq(d-1).after(f):g.append(f),f},_getActiveColumn:function(){return this.$element.children(".is-active")},_getColumnContent:function(b){var c=b.children(".coral-ColumnView-column-content");return 0===c.length&&(c=a('<div class="coral-ColumnView-column-content"></div>').appendTo(b),c.on("scroll",this._columnScrollHandler.bind(this))),c},_prepareColumn:function(b,c){var d=this._data[c],e=this._getColumnContent(b);if(b.data("href",c),"object"===a.type(d)&&(b.data("data",d),d._links&&d._links.next&&b.data("next",d._links.next.href),d._links&&d._links.up&&b.data("back",d._links.up.href),d._embedded&&d._embedded.items)){var f=d._embedded.items;e.find(".coral-ColumnView-item").each(function(b,c){this._prepareItem(a(c),f[b])}.bind(this))}return e.on("scroll",this._columnScrollHandler.bind(this)),b},_prepareItem:function(a,b){return a.data("data",b),b._links&&b._links.self&&a.data("href",b._links.self.href),a},_storeData:function(b){var c=b._links.self.href;if(this._data[c]=b,b._embedded&&b._embedded.items){var d=b._embedded.items;a.each(d,function(a,b){(b.properties||b.preview||b._embedded&&b._embedded.items)&&this._storeData(b)}.bind(this))}},_loadData:function(b,c){return this._data&&this._data[b]?a.Deferred().resolve(this._data[b]):(this._pendingRequests=this._pendingRequests||{},this._pendingRequests[b]||(this._pendingRequests[b]=a.ajax({url:b,cache:!1}).done(function(c){this._data=this._data||{},this._data[b]=c,"object"===a.type(c)&&this._storeData(c),this.$element.trigger("coral-columnview-load",[b,c]),delete this._pendingRequests[b]}.bind(this))),this._pendingRequests[b])},_loadMoreIfNeeded:function(b){var c=a.Deferred(),d=this._getColumnContent(b),e=d.children(".coral-ColumnView-item"),f=0;return e.each(function(b,c){f+=a(c).height()}),f<d.height()&&b.data("next")?this._loadNext(b).done(function(){this._loadMoreIfNeeded(b).done(function(){c.resolve()}).fail(function(){c.reject()})}.bind(this)).fail(function(){c.reject()}):c.resolve(),c.promise()},_columnContentHandler:function(b){if(!this.get("single")){var c=a(b.target);if(c.hasClass("coral-ColumnView-column-content")){this.cancelNavigation(),b.preventDefault();var d=c.closest(".coral-ColumnView-column");d.nextAll().empty().removeClass("is-active"),d.find(".coral-ColumnView-item").removeClass("is-active");var e=d.prev();0!==e.length&&e.addClass("is-active"),d.removeClass("is-active"),this._scrollToColumn();var f=e.find(".coral-ColumnView-item.is-active");this.$element.trigger("coral-columnview-item-select",[f.data("data"),f])}}},_itemActivateHandler:function(c){this.cancelNavigation(),c.preventDefault();var d=a(c.target).closest(".coral-ColumnView-item");if(c.shiftKey&&(document.selection?document.selection.empty():b.getSelection&&b.getSelection().removeAllRanges&&b.getSelection().removeAllRanges()),c.metaKey||c.ctrlKey||c.shiftKey)return this._itemSelectHandler(c);var e=d.data("href"),f=d.closest(".coral-ColumnView-column");this.$element.data("lastSelected",{item:d});var g=++this._activeColumnRequest;if(e)if(this.get("single"))this.setNextColumn(e).done(function(a,b){setTimeout(function(){this._setActiveColumn(b,!1,g)}.bind(this),30)}.bind(this));else if(d.hasClass("is-active")&&!d.hasClass("is-selected")&&f[0]===this._getActiveColumn()[0]){d.removeClass("is-active"),f.nextAll().empty().removeClass("is-active");var h=f.prev();0!==h.length&&h.addClass("is-active"),f.removeClass("is-active"),this._scrollToColumn()}else this._setActiveColumn(d,!1),d.addClass("is-active"),d.focus(),this.setNextColumn(e).done(function(a,b){this._scrollToColumn()}.bind(this));else d.hasClass("coral-ColumnView-item--back")&&f.data("back")&&this.setPreviousColumn(f.data("back")).done(function(a,b){setTimeout(function(){this._setActiveColumn(b,!1,g)}.bind(this),30)}.bind(this));this.$element.trigger("coral-columnview-item-select",[d.data("data"),d])},_itemSelectHandler:function(b){if(this.get("multiselect")){b.stopPropagation(),b.preventDefault();var c=a(b.target).closest(".coral-ColumnView-item");this._setActiveColumn(c,!0);var d;c.data("href");if(c.toggleClass("is-active is-selected"),0===this.getSelectedItems().length){var e=this._getActiveColumn(),f=e.prev();0!==f.length&&f.addClass("is-active"),e.removeClass("is-active")}if(b.shiftKey)if(1===this.getSelectedItems().length){if(c.is(":not(:first-child)")){var g=c.siblings().first();g.addClass("is-active is-selected").nextUntil(c).addClass("is-active is-selected")}d="down"}else this.$element.data("lastSelected").item.index()<c.index()?(this.$element.data("lastSelected").item.nextUntil(c).addClass("is-active is-selected"),d="down"):(this.$element.data("lastSelected").item.prevUntil(c).addClass("is-active is-selected"),d="up");this.$element.data("lastSelected",{item:c.hasClass("is-selected")?c:c.siblings(".is-selected").first(),direction:d}),this._scrollToColumn(),this.$element.trigger("coral-columnview-item-select",[c.data("data"),c])}},_columnScrollHandler:function(b){var c=a(b.target),d=c.closest(".coral-ColumnView-column"),e=10;c[0].scrollTop+c.height()+e>=c[0].scrollHeight&&this._loadNext(d)},_loadNext:function(b){var c=a.Deferred(),d=b.data("next");if(d){b.removeAttr("data-next"),b.removeData("next");var e=this._getColumnContent(b),f=function(){var f=this._data[d],g=!1;if("object"===a.type(f)){if(f._embedded&&f._embedded.items){for(var h=f._embedded.items,i=0;i<h.length;i++){var j=h[i];this._prepareItem(this.renderItem(j),j).appendTo(e)}this._data[b.data("href")]._embedded.items=this._data[b.data("href")]._embedded.items.concat(f._embedded.items)}f._links&&f._links.next?b.data("next",f._links.next.href):g=!0}else{var k=a(f);k.data("next")?b.data("next",k.data("next")):g=!0,k.find(".coral-ColumnView-item").appendTo(e)}g&&(b.removeAttr("data-next"),b.removeData("next")),c.resolve()}.bind(this);this._data[d]?f(this._data[d]):this._loadData(d,b).done(f).fail(function(){c.reject()})}else c.reject();return c.promise()},_setActiveColumn:function(a,b,d){if(!(d!==c&&d<this._activeColumnRequest)){var e=this._getActiveColumn(),f=a.closest(".coral-ColumnView-column"),g=this._getColumnContent(f),h=!1;a.is(".coral-ColumnView-item")&&(h=!0,b===!0?g.children(".is-active:not(.is-selected)").addClass("is-selected"):g.children(".is-active:not(.is-selected)").removeClass("is-active"),b!==!1&&f.hasClass("is-active")!==!1||g.children(".is-selected").removeClass("is-active is-selected")),e.removeClass("is-active"),(0!==e.length||h)&&f.addClass("is-active"),this.get("single")?e.index()<f.index()?(e.addClass("is-left"),f.removeClass("is-right")):e.index()>f.index()&&(e.addClass("is-right"),f.removeClass("is-left")):f.nextAll().empty().removeData().removeClass("is-active")}},_scrollToColumn:function(){var b,c,d=this._getActiveColumn();if(0===d.length)return b=0,c=1.5*this.$element.scrollLeft(),void this.$element.animate({scrollLeft:b},c);var e,f=this.getSelectedItems().filter(function(a){return!a.checked});e=1===f.length?d.next():d,e.position()&&e.position().left+e.outerWidth()>=this.$element.width()?(e.nextAll().remove(),b=this.$element[0].scrollWidth-this.$element.outerWidth(),c=1.5*(b-this.$element.scrollLeft()),this.$element.animate({scrollLeft:b},c)):d.position()&&d.position().left<0&&(b=0,d.prevAll().each(function(){b+=a(this).outerWidth()}),c=1.5*(this.$element.scrollLeft()-b),this.$element.animate({scrollLeft:b},c))}}),CUI.Widget.registry.register("columnview",CUI.ColumnView),CUI.options.dataAPI&&a(document).on("cui-contentloaded.data-api",function(b){CUI.ColumnView.init(a("[data-init~=columnview]",b.target))})}(jQuery,this),function(a,b,c){CUI.Modal=new Class({toString:"Modal",extend:CUI.Widget,construct:function(b){this.header=this.$element.find(".coral-Modal-header"),this.body=this.$element.find(".coral-Modal-body"),this.footer=this.$element.find(".coral-Modal-footer"),this._previousFocus=a(),this.backdrop=a("<div/>",{"class":"coral-Modal-backdrop",style:"display: none;"}).on("click",function(a){"static"!==this.options.backdrop&&this.hide()}.bind(this)),this.body.loadWithSpinner(this.options.remote),this.applyOptions(),this.$element.on("change:heading",this._setHeading.bind(this)).on("change:header",this._setHeader.bind(this)).on("change:content",this._setContent.bind(this)).on("change:buttons",this._setFooter.bind(this)).on("change:type",this._setType.bind(this)).on("change:fullscreen",this._setFullscreen.bind(this)).on("click",'[data-dismiss="modal"]',this.hide.bind(this)),this._makeAccessible()},defaults:{backdrop:"static",visible:!0,type:"default",fullscreen:!1,attachToBody:!0},_types:{"default":{"class":"",iconClass:""},error:{"class":"coral-Modal--error",iconClass:"coral-Icon--alert"},notice:{"class":"coral-Modal--notice",iconClass:"coral-Icon--alert"},success:{"class":"coral-Modal--success",iconClass:"coral-Icon--checkCircle"},help:{"class":"coral-Modal--help",iconClass:"coral-Icon--helpCircle"},info:{"class":"coral-Modal--info",iconClass:"coral-Icon--infoCircle"}},applyOptions:function(){this._setHeader(),this._setHeading(),this._setContent(),this._setFooter(),this._setType(),this._setFullscreen(),this.options.visible&&(this.options.visible=!1,this.show())},_makeAccessible:function(){var b=this,c="modal-header"+(new Date).getTime()+"-";this.$element.attr({role:"dialog","aria-hidden":!this.options.visible,"aria-labelledby":c+"label","aria-describedby":c+"message",tabindex:-1}),this.header.find("h2").attr({id:c+"label",tabindex:0}),this.body.attr({id:c+"message",role:"document",tabindex:0}),this.$element.on("keydown",":focusable",function(c){var d,e=(a(c.currentTarget),b.$element.find(":tabbable"));switch(c.which){case 9:c.shiftKey&&c.currentTarget===e[0]?d=e.last():c.shiftKey||c.currentTarget!==e[e.length-1]||(d=e.first())}d&&(c.preventDefault(),d.trigger("focus"))})},_setType:function(){if(this.options.type){var a=this.$element.find(".coral-Modal-header > .coral-Icon");for(var b in this._types)this.$element.removeClass(this._types[b]["class"]),a.removeClass(this._types[b].iconClass);"default"!==this.options.type&&(this.$element.addClass(this._types[this.options.type]["class"]),a.addClass(this._types[this.options.type].iconClass))}},_setHeader:function(){this.options.header&&this.header.find("h2").html(this.options.header)},_setHeading:function(){this.options.heading&&(this.options.header=this.options.heading,this._setHeader.apply(this,arguments))},_setContent:function(){this.options.content&&this.body.html(this.options.content)},_setFooter:function(){if(a.isArray(this.options.buttons)){var b=this;this.footer.empty(),a.each(this.options.buttons,function(c,d){var e=d.href?a("<a/>",{"class":"button"}):a("<button/>",{"class":"coral-Button",type:"button"});e.html(d.label),"hide"===d.click?e.attr("data-dismiss","modal"):a.isFunction(d.click)&&e.on("click",d.click.bind(b,{dialog:b})),d.href&&e.attr("href",d.href),d.className&&e.addClass(d.className),b.footer.append(e)})}},_setFullscreen:function(){this.options.fullscreen?this.$element.addClass("fullscreen"):this.$element.removeClass("fullscreen"),this.$element.css({"margin-left":0,"margin-top":0})},_show:function(){var b,c=a("body"),d=this;return this._previousFocus=a(":focus"),this._previousFocus.trigger("blur"),c.addClass("coral-Modal.is-open"),this.$element.trigger("beforeshow"),this._toggleBackdrop(!0),this.options.attachToBody&&(0===this.$element.parent("body").length&&this.$element.appendTo(c),this.$element.siblings("[aria-hidden]").each(function(b,c){a(c).data("aria-hidden",a(c).attr("aria-hidden"))}),this.$element.siblings().not("script, link, style").attr("aria-hidden",this.options.visible)),this.$element.attr("aria-hidden",!this.options.visible),this.center(),this.$element.fadeIn(),this.$element.find(":tabbable:not(.coral-Modal-header .coral-Modal-closeButton):first").focus(),b=a('<div class="coral-Modal-tabcapture" tabindex="0"/>'),b.on("focus.modal-tabcapture",function(b){var c,e=d.$element.find(":tabbable"),f=a("body > .coral-Modal-tabcapture"),g=f.last();c=b.currentTarget===g[0]?e.filter(":not(.coral-Modal-header .coral-Modal-closeButton):last"):e.filter(":not(.coral-Modal-header .coral-Modal-closeButton):first"),0===c.length&&(c=d.$element),c.trigger("focus")}).prependTo(c).clone(!0).appendTo(c),a(document).on("keydown.modal-escape",this._escapeKeyHandler.bind(this)),this},_hide:function(){return a("body").removeClass("coral-Modal.is-open").find(".coral-Modal-tabcapture").off("focus.modal-tabcapture").remove(),a(document).off("keydown.modal-escape"),this.$element.trigger("beforehide"),this._toggleBackdrop(!1),this.$element.attr("aria-hidden",!this.options.visible),this.$element.siblings().removeAttr("aria-hidden").filter(':data("aria-hidden")').each(function(b,c){a(c).attr("aria-hidden",a(c).data("aria-hidden")).removeData("aria-hidden")}),this.$element.fadeOut().trigger("blur"),this._previousFocus.trigger("focus"),this},center:function(){var a=this.$element.outerWidth(),b=this.$element.outerHeight();this.options.fullscreen||this.$element.css({"margin-left":-(a/2),"margin-top":-(b/2)})},_toggleBackdrop:function(b){if(this.options.backdrop){var c=a("body");(b||this.backdrop.is(":hidden"))&&b!==!1?this.backdrop.appendTo(c).fadeIn():this.backdrop.fadeOut(function(){a(this).detach()})}},_escapeKeyHandler:function(a){27===a.which&&this.hide()}}),CUI.Widget.registry.register("modal",CUI.Modal),CUI.options.dataAPI&&(a(document).on("cui-contentloaded.data-api",function(b){CUI.Modal.init(a("[data-init~=modal]",b.target))}),a(document).on("click.modal.data-api",'[data-toggle="modal"]',function(b){b.preventDefault();var c=a(this),d=CUI.util.getDataTarget(c),e=c.attr("href"),f=a.extend({remote:!/#/.test(e)&&e},d.data(),c.data());c.is(document.activeElement)||(c.is(":focusable")||c.attr("tabindex",0),c.focus()),"string"==typeof f.buttons&&(f.buttons=JSON.parse(f.buttons));var g=d.data("modal");d.modal(f),g&&d.data("modal").set({visible:!g.get("visible")})}))}(jQuery,this),function(a){var b=0,c="js-coral-pathbrowser-input",d="js-coral-pathbrowser-button",e="is-collapsed",f="is-disabled",g="is-highlighted",h='<nav class="coral-Crumbs"></nav>',i=['<div class="coral-Pathbrowser-pickerBar">'+h+"</div>",'<div class="coral-Pathbrowser-pickerPanel">','<div class="coral-ColumnView"></div>',"</div>"].join(""),j=['<div class="coral-TabPanel coral-TabPanel--stacked">','<nav class="coral-TabPanel-navigation">','<a class="coral-TabPanel-tab is-active" data-toggle="tab"><i class="coral-Icon coral-Icon-sizeXS coral-Icon--compass"></i></a>',"</nav>",'<div class="coral-TabPanel-content">','<section class="coral-TabPanel-pane is-active">'+i+"</section>","</div>","</div>"].join(""),k=['<div class="coral-Pathbrowser-picker coral-Modal" id="%ID%">','<div class="coral-Modal-header">','<h2 class="coral-Modal-title coral-Heading coral-Heading--2"></h2>','<button type="button" class="js-coral-pathbrowser-confirm coral-Button coral-Button--square coral-Button--primary" title="Confirm">','<i class="coral-Icon coral-Icon-sizeXS coral-Icon--check"></i>',"</button>",'<button type="button" class="js-coral-pathbrowser-cancel coral-Button coral-Button--square coral-Button" title="Cancel">','<i class="coral-Icon coral-Icon-sizeXS coral-Icon--close"></i>',"</button>","</div>",'<div class="coral-Modal-body"></div>',"</div>"].join(""),l='<div class="coral-Wait coral-Wait--large coral-Wait--center"></div>',m="/",n=function(){var b={};return{register:function(a,c){b.hasOwnProperty(a)?b[a].push(c):b[a]=[c]},get:function(c,d){var e=[];d("test","test");return b.hasOwnProperty(c)?"function"==typeof d?a.grep(b[c],d):b[c]:e}}},o=new n;CUI.PathBrowser=new Class({toString:"PathBrowser",extend:CUI.Widget,construct:function(e){var f,g,h,i=["optionLoader","optionValueReader","optionTitleReader","autocompleteCallback","optionRenderer"];this.guid=b+=1;for(var j=0;j<i.length;j++)f=this.options[i[j]],g=this._getHandler(i[j],"cui.pathbrowser."+i[j].toLowerCase()+".default"),"function"==typeof f?this[i[j]]=f.bind(this):"string"==typeof f?(h=this._getHandler(i[j],f),this[i[j]]=h?h:g?g:a.noop()):g&&(this[i[j]]=g);for(this.options.value&&this.set("value",this.options.value),this._render();this.options.optionDisplayStrings.length<this.options.options.length;)this.options.optionDisplayStrings.push(this.options.options[this.options.optionDisplayStrings.length]);this._selectlist=this.$element.find(".coral-SelectList"),0===this._selectlist.length?this._selectlist=a("<ul/>",{id:CUI.util.getNextId(),"class":"coral-SelectList"}).appendTo(this.$element):this._selectlist.attr("id")||this._selectlist.attr("id",CUI.util.getNextId()),this.inputElement.attr("aria-owns",this._selectlist.attr("id")),this.dropdownList=new CUI.SelectList({element:this._selectlist,relatedElement:this.$element,autofocus:!1,autohide:!0}),this.$button=this.$element.find("."+d),this.pickerEnabled=0!==this.$button.length&&this.options.pickerSrc,this.pickerEnabled&&this._constructPicker(),this.$element.on("change:value",this._handleValueChange.bind(this)),this.$element.on("change:disabled",this._update.bind(this)),this.$element.on("change:placeholder",this._update.bind(this)),this.$element.on("change:options",this._changeOptions.bind(this)),this.$element.on("input","."+c,function(){this.options.disabled||(this.typeTimeout&&clearTimeout(this.typeTimeout),this.typeTimeout=setTimeout(this._inputChanged.bind(this),this.options.delay))}.bind(this)),this.pickerEnabled&&(this.$button.on("click",this._clickedPickerButton.bind(this)),this.$picker.on("beforehide",this._beforeHidePicker.bind(this)),this.$picker.on(A,this._pickerSelectionConfirmed.bind(this))),this.$element.on("blur","."+c,function(){this.options.disabled||(this.typeTimeout&&clearTimeout(this.typeTimeout),this.typeTimeout=null,this.selectedIndex>=0&&(""===this.inputElement.val()?this.setSelectedIndex(-1):this._update()))}.bind(this)),this.$element.on("keydown","input",this._keyPressed.bind(this)),this.$element.on("keyup","input",this._keyUp.bind(this)),this.dropdownList.on("selected",function(a){var b=null!=a.selectedValue?a.selectedValue.toString():null;this.dropdownList.hide(200),this.setSelectedIndex(this.options.options.indexOf(b)),this.inputElement.focus()}.bind(this))},defaults:{autocompleteCallback:a.noop(),options:[],optionDisplayStrings:[],optionLoader:a.noop(),optionLoaderRoot:null,optionValueReader:a.noop(),optionTitleReader:a.noop(),showTitles:!0,rootPath:"/content",delay:200,placeholder:null,optionRenderer:a.noop(),position:"below",autoPosition:!0,pickerSrc:null,pickerAdditionalTabs:null,pickerTitle:"Select path",pickerValueKey:"value",pickerIdKey:"id",crumbRoot:"Content",rootPathValidSelection:!0},dropdownList:null,inputElement:null,typeTimeout:null,selectedIndex:-1,triggeredBackspace:!1,setSelectedIndex:function(a){a<-1||a>=this.options.options.length||(this.selectedIndex=a,this._update())},getSelectedIndex:function(){return this.selectedIndex},_changeOptions:function(a){a.widget===this&&(this.selectedIndex=-1,this._update())},_render:function(){this._readDataFromMarkup(),this.$element.find("select option").length>0&&0===this.options.options.length&&(this.options.options=[],this.options.optionDisplayStrings=[],this.$element.find("select option").each(function(b,c){this.options.options.push(a(c).val()),this.options.optionDisplayStrings.push(a.trim(a(c).text())),a(c).attr("selected")&&(this.selectedIndex=b)}.bind(this))),this.inputElement=this.$element.find("."+c),this.$element.removeClass(g),this.options.placeholder||(this.options.placeholder=this.inputElement.attr("placeholder")),this._update()},_readDataFromMarkup:function(){for(var b,c,d=[{attr:"data-option-loader",key:"optionLoader"},{attr:"data-option-value-reader",key:"optionValueReader"},{attr:"data-option-title-reader",key:"optionTitleReader"},{attr:"data-autocomplete-callback",key:"autocompleteCallback"},{attr:"data-option-renderer",key:"optionRenderer"}],e=0;e<d.length;e++)this.$element.attr(d[e].attr)&&(b=this._getHandler(d[e].key,"cui.pathbrowser."+d[e].key.toLowerCase()+".default"),c=this._getHandler(d[e].key,this.$element.attr(d[e].attr)),this[d[e].key]=c?c:b?b:a.noop());this.$element.attr("data-option-loader-root")&&(this.options.optionLoaderRoot=this.$element.attr("data-option-loader-root")),this.$element.attr("data-root-path")&&(this.options.rootPath=this.$element.attr("data-root-path")),this.$element.attr("placeholder")&&(this.options.placeholder=this.$element.attr("placeholder")),this.$element.attr("data-placeholder")&&(this.options.placeholder=this.$element.attr("data-placeholder")),(this.$element.attr("disabled")||this.$element.attr("data-disabled"))&&(this.options.disabled=!0)},_handleValueChange:function(a){this.options.value&&this._setInputValue(this.options.value)},_update:function(){if(this.options.placeholder&&this.inputElement.attr("placeholder",this.options.placeholder),this.options.disabled?(this.$element.addClass(f),this.inputElement.add(this.$button).prop("disabled",!0)):(this.$element.removeClass(f),this.inputElement.add(this.$button).prop("disabled",!1)),this.selectedIndex>=0){var a=this.options.options[this.selectedIndex];if(a&&0!==a.indexOf(m)){var b="",c=this.inputElement.val().lastIndexOf(m);c>=0&&(b=this.inputElement.val().substring(0,c+1)),a=b+a}this._setInputValue(a,!0)}},_setInputValue:function(a,b){null!=a&&(this.inputElement.val(a),this.inputElement.change(),b&&this.inputElement==document.activeElement&&CUI.util.selectText(this.inputElement,a.length))},_keyUp:function(a){var b=a.keyCode;8===b&&(this.triggeredBackspace=!1)},_keyPressed:function(a){var b=a.keyCode;this.dropdownList.get("visible")||40===b&&(this._inputChanged(),a.preventDefault())},_inputChanged:function(){var a=this,b=this.inputElement.val();b.length>0?this.autocompleteCallback(b).done(function(b){a._showAutocompleter(b)}).fail(function(){}):this.dropdownList.hide()},_showAutocompleter:function(a){if(this.dropdownList.hide(),a&&0!==a.length){this._selectlist.empty();for(var b=0;b<a.length;b++)this._selectlist.append(this.optionRenderer(null,a[b]));this.dropdownList.show()}},_rebuildOptions:function(b,c,d){var e=this,f=CUI.util.getNested(d,e.options.optionLoaderRoot);if(f){var g=[],h=[];a.each(f,function(a,b){var c;c=e.optionValueReader?e.optionValueReader(b):"object"==typeof b?b.path:b,g.push(c);var d="";e.optionTitleReader?d=e.optionTitleReader(b):"object"==typeof b&&(d=b.title),h.push(d)}.bind(e)),e.options.options=g,e.options.optionDisplayStrings=h;var i=e._filterOptions(c);b.resolve(i)}else b.reject()},_filterOptions:function(b){var c=[],d=b.split("/");return d=d[d.length-1].toLowerCase(),a.each(this.options.options,function(a,b){b.toLowerCase().indexOf(d,0)>=0&&c.push(a)}.bind(this)),c},_getHandler:function(a,b){var c=function(a){return function(b,c){return b.name===a}},d=c.call(this,b),e=o.get(a,d)[0];return e&&"function"==typeof e.handler?e.handler.bind(this):void 0},_constructPicker:function(){var b,c="mod-guid-"+this.guid,d="#"+c+".coral-Modal";this.$picker=a("body").find(d),0===this.$picker.length&&(a("body").append(k.replace("%ID%",c)),this.$picker=a("body").find(d)),b=a.extend({},this.options,{element:this.$picker}),this.picker=new C(b)},_clickedPickerButton:function(){var b,c=this;c.options.disabled||(c.picker.columnView?c.picker.startup(c.inputElement.val()):(c.$button.prop("disabled",!0),b=a(l).appendTo("body"),c.picker.startup(c.inputElement.val()).always(function(){c.$button.prop("disabled",!1),b.remove()})))},_beforeHidePicker:function(){this.pickerShown=!1,this.inputElement.removeClass(g)},_pickerSelectionConfirmed:function(a){a.selectedValue&&(this.options.options.indexOf(a.selectedValue)!==-1?this.setSelectedIndex(a.selectedValue):(this.setSelectedIndex(-1),this._setInputValue(a.selectedValue,!0)),this.inputElement.focus())}});var p="js-coral-pathbrowser-confirm",q="js-coral-pathbrowser-cancel",r="coral-Pathbrowser-picker-backdrop",s="coral-Modal-title",t="coral-Modal-body",u="coral-TabPanel",v="coral-ColumnView",w="coral-ColumnView-column",x="coral-ColumnView-item",y="coral-columnview-item-select",z="coral-pathbrowser-picker-select",A="coral-pathbrowser-picker-confirm",B="invalid",C=new Class({toString:"Picker",extend:CUI.Widget,construct:function(b){this.$element.modal({visible:!1}),this.modal=this.$element.data("modal"),this.modal.backdrop.addClass(r),this._hasTabs=null!=this.options.pickerAdditionalTabs;var c=this.$element.find("."+t),d=a(this._hasTabs?j:i);c.append(d),this._selection=this._hasTabs?{}:[],this.$tabPanel=this.$element.find("."+u),this.tabPanel=new CUI.Tabs({element:this.$tabPanel}),this._setupAdditionalTabs(),this.$columnView=this.$element.find("."+v),this.$crumbs=this.$element.find("."+D),this.crumbs=new L({element:this.$crumbs}),this._setCrumbRootHref(this.options.pickerSrc),this.$cancel=this.$element.find("."+q),this.$confirm=this.$element.find("."+p),this._setupListeners()},startup:function(b){var c,d=a.Deferred(),e=this,f=function(){e._renderPicker(),e._showPicker(),e.selectPath(b).fail(function(){b.indexOf("#")!=-1&&(b=b.substring(0,b.lastIndexOf("#")),e.selectPath(b).fail(function(){b.indexOf(".")!=-1&&(b=b.substring(0,b.lastIndexOf(".")),e.selectPath(b).always(function(){e._buildCrumbs(e._determineCrumbs())}))}).always(function(){e._buildCrumbs(e._determineCrumbs()),e._updateConfirm()}))}).always(function(){e._buildCrumbs(e._determineCrumbs())})};return e.columnView?(f(),d.resolve(),e.$columnView.focus()):(c=new CUI.ColumnView({element:e.$columnView,multiselect:e.options.pickerMultiselect||!1}),c.setSource(e.options.pickerSrc).done(function(){e.columnView=c,f(),d.resolve(),e.$columnView.focus()}).fail(function(){d.fail()})),a(document).on("keypress.pathbrowser-confirm",function(b){13===b.which&&(a(":focus").is(this.$cancel)?this._takeDown():this.$confirm.prop("disabled")||this._selectionConfirmed())}.bind(this)),d.promise()},selectPath:function(b){var c,d,e,f,g=a.Deferred();if(b=b.replace(/\/$/,""),c=this.options.rootPath||m,b&&b.slice(0,c.length)==c){if(b=b.slice(c.length),b=b.charAt(0)==m?b.substr(1):b,d=b.split(m),f=this.options.pickerIdKey,d.length){var h=0;return e=function(b,c){if(h==d.length)return!1;var e=c.find("."+x).filter(function(){var b,c=a(this).data("data");return b=c&&c[f]?c[f]:a(this).data(f),!!b&&String(b)===d[h]});return h++,1==e.length?e:void 0},this.columnView.navigate(e)}g.reject()}else g.reject();return g},_showPicker:function(){this.modal.show()},_hidePicker:function(){this.modal.hide()},_takeDown:function(){a(document).off("keypress.pathbrowser-confirm"),this._hidePicker()},_setupListeners:function(){var a=this;a.$cancel.on("click",a._takeDown.bind(a)),a.$confirm.on("click",a._selectionConfirmed.bind(a)),a.$columnView.on(y,a._itemSelected.bind(a)),a.$element.on(z,function(b){var c=b.selectedValue?b.selectedValue:[];a._handleSelection.call(a,c)}),this._hasTabs&&this.tabPanel._getTabs().on("focus",a._updateConfirm.bind(a))},_setupAdditionalTabs:function(){var a=this.options.pickerAdditionalTabs;if(a&&a.length>0)for(var b=0;b<a.length;b++){var c=a[b];c&&(c.active=c.active===!0,this.tabPanel.addItem(c))}},_setupCrumbListeners:function(b){var c=this;a(b).on("click",function(d){if(!a(this).hasClass(G)&&!a(this).hasClass(H)){var e,f,g,h=b.data("coral-columnview-item"),i=!0;h&&h.item?(g=h.item,f=function(a,b){if(i)return i=!1,b.find(g).click()}):f=function(a,b){},e=a(b).attr("href"),e&&c.columnView.navigate(f,e).done(function(){c._buildCrumbs()})}d.preventDefault()})},_itemSelected:function(b){var c=this._getSelectedValue(!0);this.$element.trigger(a.Event(z,{selectedValue:c})),this._buildCrumbs(this._determineCrumbs())},_enableConfirm:function(a){this.$confirm.prop("disabled",!a)},_updateConfirm:function(){var a=this._getSelection(),b=a&&a.length>0;this._enableConfirm(b)},_setSelection:function(a){if(this._hasTabs){var b=this._getActivePaneId();this._selection[b]=a}else this._selection=a},_getSelection:function(){var a;if(this._hasTabs){var b=this._getActivePaneId();a=this._selection[b]}else a=this._selection;return a},_handleSelection:function(a){this._setSelection(a),this._updateConfirm()},_getActivePaneId:function(){var a=this.tabPanel.panelist.find(".coral-TabPanel-pane.is-active");return a.length>0?a.get(0).id:void 0},_selectionConfirmed:function(){var b=this._getSelection();this.$element.trigger(a.Event(A,{selectedValue:b})),this._takeDown()},_getSelectedValue:function(a){var b,c=this.columnView.getSelectedItems(),d=!0;if(c.length>0&&(c[0].data&&c[0].data[this.options.pickerValueKey]?b=c[0].data[this.options.pickerValueKey]:c[0].item&&(b=c[0].item.data(this.options.pickerValueKey)),a&&(c[0].data&&c[0].data[B]?d=!1:c[0].item&&c[0].item.data(B)&&(d=!1))),void 0===b&&this.options.rootPathValidSelection&&(b=this.options.rootPath),b&&d)return b},_renderPicker:function(){this.$element.find("."+s).text(this.options.pickerTitle)},_resetPicker:function(){this.columnView.setSource(this.options.pickerSrc),this._updateConfirm(),this._buildCrumbs();var b=this._getSelectedValue(!0);this.$element.trigger(a.Event(z,{selectedValue:b}))},_buildCrumbs:function(b){this.crumbs.removeAllItems();var c=this.crumbs.addItem(this.options.crumbRoot,this.options.pickerSrc);c.on("click",function(a){a.preventDefault(),c.hasClass(G)||c.hasClass(H)||this._resetPicker()}.bind(this)),b&&a.each(b,function(a,b){var c;b&&(c=this.crumbs.addItem(b),this._setupCrumbListeners(c))}.bind(this)),this.crumbs.truncate()},_determineCrumbs:function(){var b=this.columnView.getBreadcrumbItems(),c=this.columnView.getSelectedItems();return a.each(b,function(a,c){b[a]=this._getCrumbFromColumnViewItem(c,!1)}.bind(this)),c.length>0&&b.push(this._getCrumbFromColumnViewItem(c[0],!0)),b},_getCrumbFromColumnViewItem:function(b,c){var d,e=b.data,f=b.item,g=a("<a></a>");if(g.data("coral-columnview-item",b),g.toggleClass(G,c),d=a(f).closest("."+w).data("href")){if(g.attr("href",d),e&&e._links&&e._links.self&&e._links.self.title)return g.text(e._links.self.title);if(f)return g.text(f.text().trim())}},_setCrumbRootHref:function(b){a.isPlainObject(this.options.crumbRoot)?this.options.crumbRoot.href=b:this.options.crumbRoot&&this.options.crumbRoot.jquery&&this.options.crumbRoot.attr("href",b)}}),D="coral-Crumbs",E="coral-Crumbs-item",F=E+"--ellipsis",G=E+"--unavailable",H=E+"--noNavigation",I='<i class="coral-Crumbs-item-icon coral-Icon"></i>',J='<a class="'+E+" "+F+'" href="#"></a>',K=100,L=new Class({
toString:"Crumbs",extend:CUI.Widget,construct:function(a){this._decorateElement(),this._findOrCreateEllipsis(),this.truncate()},addItem:function(a,b){var c=this._itemFromTitleOrObjectOrElement(a,b);return this.$element.append(c),c},removeAllItems:function(){return delete this._firstCrumb,this.$element.children().remove().not("."+F)},truncate:function(){var b=this.$element.children(),c=this.$element.width()-K;b.removeClass(e),this._ellipsis.remove();var d=Array.prototype.reduce.call(b,function(b,c){return b+=a(c).outerWidth()},0);if(b.length&&d>c){for(var f=d,g=1,h=b.length-1;g<h&&f>c;g++){var i=a(b[g]);f-=i.width(),i.addClass(e)}this._ellipsis.insertAfter(b[0]).addClass(e)}},_ellipsis:a(),_decorateElement:function(){if(!this.$element.is("nav"))throw new Error("Crumbs expects to be attached to a nav element");this.$element.addClass(D),this.$element.children().addClass(E)},_findOrCreateEllipsis:function(){var b=this.$element.find("."+F);0===b.length&&(b=a(J)),this._ellipsis=b},_itemFromTitleOrObjectOrElement:function(b,c){var d,e=b,f="string"==typeof e?e:void 0,g=a.isPlainObject(e)?e:void 0,h=e&&e.jquery?e:void 0;return h?(d=h,d.addClass(E)):d=g?this._constructItemFromObject(g):this._constructItemFromTitleAndRef(f,c),d},_constructItemFromTitleAndRef:function(b,c){return a("<a>").attr("href",c).text(b).addClass(E)},_constructItemFromObject:function(b){var c=this._constructItemFromTitleAndRef(b.title,b.href);if(b.hasOwnProperty("isAvailable")&&!b.isAvailable&&(c.addClass(G),c.attr("tabindex",-1)),b.hasOwnProperty("isNavigable")&&!b.isNavigable&&c.addClass(H),b.hasOwnProperty("icon")){var d=a(I);d.addClass(b.icon),c.prepend(d)}return c}});CUI.util.plugClass(CUI.PathBrowser),CUI.options.dataAPI&&a(document).on("cui-contentloaded.data-api",function(b){a("[data-init~='pathbrowser']",b.target).pathBrowser()}),CUI.PathBrowser.register=function(a,b){o.register(a,b)},CUI.PathBrowser.register("optionRenderer",{name:"cui.pathbrowser.optionrenderer.default",handler:function(b,c){var d=this.options.options[c];if(0===d.indexOf(m)){var e=d.lastIndexOf(m);d=d.substring(e+1)}var f="";return this.options.showTitles&&this.options.optionDisplayStrings[c]&&this.options.optionDisplayStrings[c].length>0&&(f=" "+this.options.optionDisplayStrings[c]),a("<li>",{"class":"coral-SelectList-item coral-SelectList-item--option","data-value":d}).text(d+f)}}),CUI.PathBrowser.register("autocompleteCallback",{name:"cui.pathbrowser.autocompletecallback.default",handler:function(b){var c=this,d=a.Deferred();if(0!==b.indexOf("/"))return d.resolve([]),d.promise();var e=b.substring(0,b.lastIndexOf(m))||m;if(e!=this.lastBasePath&&c.optionLoader){var f=!1;e===m&&c.options.rootPath&&(b=c.options.rootPath.replace(/\/$/,""),""!==b?f=!0:b=m),f&&(e=b,b+=m,c._setInputValue(b));var g={loadOptions:c.optionLoader},h=a.Deferred();h.promise(g),g.done(function(e){a.isFunction(e.promise)?e.done(function(a){c._rebuildOptions(d,b,a)}):c._rebuildOptions(d,b,e)});var i=g.loadOptions(e,function(a){h.resolve(a)});i&&h.resolve(i)}else d.resolve(c._filterOptions(b));return this.lastBasePath=e,d.promise()}})}(window.jQuery),window.CUI=window.CUI||{},CUI.imageeditor=CUI.imageeditor||{},CUI.imageeditor.actions={},CUI.imageeditor.plugins={},CUI.imageeditor.ui={},CUI.imageeditor.strings={},CUI.imageeditor.strings["de-DE"]={"control.toolbar.close":"Abbrechen","control.toolbar.finish":"Beenden","crop.aspect_ratios.16_to_9":"16 : 9","crop.aspect_ratios.2_to_3":"2 : 3","crop.aspect_ratios.3_to_5":"3 : 5","crop.aspect_ratios.free_hand":"Freihand","crop.aspect_ratios.square":"Quadrat","crop.template.removecrop":"Beschnitt entfernen","crop.toolbar.confirm":"Bestätigen","crop.toolbar.identifier":"Zuschneiden","crop.toolbar.launch":"Beschnitt beginnen","crop.toolbar.launchwithratio":"Beschnitt beginnen","crop.toolbar.unlaunch":"Abbrechen","flip.toolbar.horizontal":"Horizontal spiegeln","flip.toolbar.vertical":"Vertikal spiegeln","fullscreen.toolbar.fullscreen":"In die Vollbildansicht wechseln","fullscreen.toolbar.fullscreenexit":"Vollbildansicht verlassen","history.toolbar.redo":"Wiederherstellen","history.toolbar.undo":"Rückgängig","map.template.alt_text":"Alt-Text","map.template.confirm":"Bestätigen","map.template.delete":"Löschen","map.template.new_tab":"Neuer Tab","map.template.parent_frame":"Parent-Frame","map.template.path":"Pfad","map.template.path_picker":"Pfad-Picker","map.template.same_tab":"Selber Tab","map.template.target":"Ziel","map.template.top_frame":"Top-Frame","map.template.unlaunch":"Abbrechen","map.toolbar.circle":"Kreisförmige Karte hinzufügen","map.toolbar.confirm":"Bestätigen","map.toolbar.launch":"Karte starten","map.toolbar.polygon":"Polygonkarte hinzufügen","map.toolbar.rectangle":"Rechteckige Karte hinzufügen","map.toolbar.unlaunch":"Abbrechen","rotate.toolbar.left":"Nach links drehen","rotate.toolbar.right":"Nach rechts drehen","zoom.toolbar.popupslider":"Zoom-Schieberegler öffnen","zoom.toolbar.reset100":"Zoom zurücksetzen"},CUI.imageeditor.strings["en-US"]={"control.toolbar.close":"Cancel","control.toolbar.finish":"Finish","crop.aspect_ratios.16_to_9":"16 : 9","crop.aspect_ratios.2_to_3":"2 : 3","crop.aspect_ratios.3_to_5":"3 : 5","crop.aspect_ratios.free_hand":"Free Hand","crop.aspect_ratios.square":"Square","crop.template.removecrop":"Remove Crop","crop.toolbar.confirm":"Confirm","crop.toolbar.identifier":"Crop","crop.toolbar.launch":"Start Crop","crop.toolbar.launchwithratio":"Start Crop","crop.toolbar.unlaunch":"Cancel","flip.toolbar.horizontal":"Flip Horizontally","flip.toolbar.vertical":"Flip Vertically","fullscreen.toolbar.fullscreen":"Enter Fullscreen","fullscreen.toolbar.fullscreenexit":"Exit Fullscreen","history.toolbar.redo":"Redo","history.toolbar.undo":"Undo","map.template.alt_text":"Alt Text","map.template.confirm":"Confirm","map.template.delete":"Delete","map.template.new_tab":"New Tab","map.template.parent_frame":"Parent Frame","map.template.path":"Path","map.template.path_picker":"Path Picker","map.template.same_tab":"Same Tab","map.template.target":"Target","map.template.top_frame":"Top Frame","map.template.unlaunch":"Cancel","map.toolbar.circle":"Add Circular Map","map.toolbar.confirm":"Confirm","map.toolbar.launch":"Launch Map","map.toolbar.polygon":"Add Polygon Map","map.toolbar.rectangle":"Add Rectangular Map","map.toolbar.unlaunch":"Cancel","rotate.toolbar.left":"Rotate Left","rotate.toolbar.right":"Rotate Right","zoom.toolbar.popupslider":"Open Zoom Slider","zoom.toolbar.reset100":"Reset Zoom"},CUI.imageeditor.strings["es-ES"]={"control.toolbar.close":"Cancelar","control.toolbar.finish":"Terminar","crop.aspect_ratios.16_to_9":"16 : 9","crop.aspect_ratios.2_to_3":"2 : 3","crop.aspect_ratios.3_to_5":"3 : 5","crop.aspect_ratios.free_hand":"Manos libres","crop.aspect_ratios.square":"cuadrado","crop.template.removecrop":"Eliminar corte","crop.toolbar.confirm":"Confirmar","crop.toolbar.identifier":"Cortar","crop.toolbar.launch":"Empezar a cortar","crop.toolbar.launchwithratio":"Empezar a cortar","crop.toolbar.unlaunch":"Cancelar","flip.toolbar.horizontal":"Girar horizontalmente","flip.toolbar.vertical":"Girar verticalmente","fullscreen.toolbar.fullscreen":"Ir a pantalla completa","fullscreen.toolbar.fullscreenexit":"Salir de la pantalla completa","history.toolbar.redo":"Rehacer","history.toolbar.undo":"Deshacer","map.template.alt_text":"Texto alternativo","map.template.confirm":"Confirmar","map.template.delete":"Eliminar","map.template.new_tab":"Nueva pestaña","map.template.parent_frame":"Marco superior","map.template.path":"Ruta","map.template.path_picker":"Seleccionador de ruta","map.template.same_tab":"Misma pestaña","map.template.target":"Meta","map.template.top_frame":"Parte superior","map.template.unlaunch":"Cancelar","map.toolbar.circle":"Añadir mapa circular","map.toolbar.confirm":"Confirmar","map.toolbar.launch":"Iniciar mapa","map.toolbar.polygon":"Añadir mapa poligonal","map.toolbar.rectangle":"Añadir mapa rectangular","map.toolbar.unlaunch":"Cancelar","rotate.toolbar.left":"Girar a la izquierda","rotate.toolbar.right":"Girar a la derecha","zoom.toolbar.popupslider":"Abrir zoom deslizante","zoom.toolbar.reset100":"Restablecer zoom"},CUI.imageeditor.strings["fr-FR"]={"control.toolbar.close":"Annuler","control.toolbar.finish":"Terminer","crop.aspect_ratios.16_to_9":"16 : 9","crop.aspect_ratios.2_to_3":"2 : 3","crop.aspect_ratios.3_to_5":"3 : 5","crop.aspect_ratios.free_hand":"Main libre","crop.aspect_ratios.square":"Carré","crop.template.removecrop":"Annuler le recadrage","crop.toolbar.confirm":"Confirmer","crop.toolbar.identifier":"Recadrer","crop.toolbar.launch":"Commencer le recadrage","crop.toolbar.launchwithratio":"Commencer le recadrage","crop.toolbar.unlaunch":"Annuler","flip.toolbar.horizontal":"Inverser horizontalement","flip.toolbar.vertical":"Inverser verticalement","fullscreen.toolbar.fullscreen":"Passer au mode plein écran","fullscreen.toolbar.fullscreenexit":"Quitter le mode plein écran","history.toolbar.redo":"Refaire","history.toolbar.undo":"Annuler","map.template.alt_text":"Texte alternatif","map.template.confirm":"Confirmer","map.template.delete":"Supprimer","map.template.new_tab":"Nouvel onglet","map.template.parent_frame":"Cadre parent","map.template.path":"Chemin","map.template.path_picker":"Sélecteur de chemin","map.template.same_tab":"Même onglet","map.template.target":"Cible","map.template.top_frame":"Cadre supérieur","map.template.unlaunch":"Annuler","map.toolbar.circle":"Ajouter une carte circulaire","map.toolbar.confirm":"Confirmer","map.toolbar.launch":"Lancer la carte","map.toolbar.polygon":"Ajouter une carte polygonale","map.toolbar.rectangle":"Ajouter une carte rectangulaire","map.toolbar.unlaunch":"Annuler","rotate.toolbar.left":"Faire pivoter vers la gauche","rotate.toolbar.right":"Faire pivoter vers la droite","zoom.toolbar.popupslider":"Ouvrir le curseur du zoom","zoom.toolbar.reset100":"Réinitialiser le zoom"},CUI.imageeditor.strings["it-IT"]={"control.toolbar.close":"Annulla","control.toolbar.finish":"Termina","crop.aspect_ratios.16_to_9":"16 : 9","crop.aspect_ratios.2_to_3":"2 : 3","crop.aspect_ratios.3_to_5":"3 : 5","crop.aspect_ratios.free_hand":"Mano Libera","crop.aspect_ratios.square":"Quadrato","crop.template.removecrop":"Rimuovi Ritaglio","crop.toolbar.confirm":"Conferma","crop.toolbar.identifier":"Ritaglia","crop.toolbar.launch":"Avvia Ritaglio","crop.toolbar.launchwithratio":"Avvia Ritaglio","crop.toolbar.unlaunch":"Annulla","flip.toolbar.horizontal":"Inverti Orizzontalmente","flip.toolbar.vertical":"Inverti Verticalmente","fullscreen.toolbar.fullscreen":"Attiva Modalità Schermo Intero","fullscreen.toolbar.fullscreenexit":"Disattiva Modalità Schermo Intero","history.toolbar.redo":"Ripeti Ultima Operazione","history.toolbar.undo":"Annulla Ultima Operazione","map.template.alt_text":"Testo Alternativo","map.template.confirm":"Conferma","map.template.delete":"Cancella","map.template.new_tab":"Nuova Scheda","map.template.parent_frame":"Riquadro Principale","map.template.path":"Percorso","map.template.path_picker":"Selezionatore Del Percorso","map.template.same_tab":"Stessa Scheda","map.template.target":"Obiettivo","map.template.top_frame":"Riquadro Superiore","map.template.unlaunch":"Annulla","map.toolbar.circle":"Aggiungi Mappa Circolare","map.toolbar.confirm":"Conferma","map.toolbar.launch":"Attiva Mappa","map.toolbar.polygon":"Aggiungi Mappa Poligonale","map.toolbar.rectangle":"Aggiungi Mappa Rettangolare","map.toolbar.unlaunch":"Annulla","rotate.toolbar.left":"Ruota A Sinistra","rotate.toolbar.right":"Ruota A Destra","zoom.toolbar.popupslider":"Apri Controllo Zoom","zoom.toolbar.reset100":"Reimposta Zoom"},CUI.imageeditor.strings["ja-JP"]={"control.toolbar.close":"キャンセル","control.toolbar.finish":"終了","crop.aspect_ratios.16_to_9":"16 : 9","crop.aspect_ratios.2_to_3":"2 : 3","crop.aspect_ratios.3_to_5":"3 : 5","crop.aspect_ratios.free_hand":"フリーハンド","crop.aspect_ratios.square":"四角","crop.template.removecrop":"切り抜きを解除","crop.toolbar.confirm":"承認","crop.toolbar.identifier":"切り抜き","crop.toolbar.launch":"切り抜きを開始","crop.toolbar.launchwithratio":"切り抜きを開始","crop.toolbar.unlaunch":"キャンセル","flip.toolbar.horizontal":"左右反転","flip.toolbar.vertical":"上下反転","fullscreen.toolbar.fullscreen":"フルスクリーンで表示","fullscreen.toolbar.fullscreenexit":"フルスクリーンを解除","history.toolbar.redo":"やり直す","history.toolbar.undo":"元に戻す","map.template.alt_text":"代替テキスト","map.template.confirm":"承認","map.template.delete":"削除","map.template.new_tab":"新しいタブ","map.template.parent_frame":"親フレーム","map.template.path":"パス","map.template.path_picker":"パスピッカー","map.template.same_tab":"同じタブ","map.template.target":"ターゲット","map.template.top_frame":"トップフレーム","map.template.unlaunch":"キャンセル","map.toolbar.circle":"環状マップを追加","map.toolbar.confirm":"承認","map.toolbar.launch":"マップを表示","map.toolbar.polygon":"ポリゴンマップを追加","map.toolbar.rectangle":"矩形マップを追加","map.toolbar.unlaunch":"キャンセル","rotate.toolbar.left":"左に回転","rotate.toolbar.right":"右に回転","zoom.toolbar.popupslider":"ズームスライダーを開く","zoom.toolbar.reset100":"ズームをリセット"},CUI.imageeditor.strings["ko-KR"]={"control.toolbar.close":"취소","control.toolbar.finish":"마치기","crop.aspect_ratios.16_to_9":"16 : 9","crop.aspect_ratios.2_to_3":"2 : 3","crop.aspect_ratios.3_to_5":"3 : 5","crop.aspect_ratios.free_hand":"프리 핸드","crop.aspect_ratios.square":"정사각형","crop.template.removecrop":"자르기 제거","crop.toolbar.confirm":"확인","crop.toolbar.identifier":"자르기","crop.toolbar.launch":"자르기 시작","crop.toolbar.launchwithratio":"자르기 시작","crop.toolbar.unlaunch":"취소","flip.toolbar.horizontal":"상하 반전","flip.toolbar.vertical":"좌우 반전","fullscreen.toolbar.fullscreen":"전체화면 들어가기","fullscreen.toolbar.fullscreenexit":"전체화면 나가기","history.toolbar.redo":"다시 실행","history.toolbar.undo":"실행 취소","map.template.alt_text":"대체 텍스트","map.template.confirm":"확인","map.template.delete":"삭제","map.template.new_tab":"새 탭","map.template.parent_frame":"부모 프레임","map.template.path":"경로","map.template.path_picker":"경로 선택기","map.template.same_tab":"같은 탭","map.template.target":"대상","map.template.top_frame":"상위 프레임","map.template.unlaunch":"취소","map.toolbar.circle":"순환형 지도 추가","map.toolbar.confirm":"확인","map.toolbar.launch":"지도 실행","map.toolbar.polygon":"다각형 지도 추가","map.toolbar.rectangle":"사각형 지도 추가","map.toolbar.unlaunch":"취소","rotate.toolbar.left":"왼쪽으로 회전","rotate.toolbar.right":"오른쪽으로 회전","zoom.toolbar.popupslider":"줌 슬라이더 열기","zoom.toolbar.reset100":"줌 재설정"},CUI.imageeditor.strings["pt-BR"]={"control.toolbar.close":"Cancelar","control.toolbar.finish":"Terminar","crop.aspect_ratios.16_to_9":"16 : 9","crop.aspect_ratios.2_to_3":"2 : 3","crop.aspect_ratios.3_to_5":"3 : 5","crop.aspect_ratios.free_hand":"Mão Livre","crop.aspect_ratios.square":"Quadrado","crop.template.removecrop":"Remover Corte","crop.toolbar.confirm":"Confirmar","crop.toolbar.identifier":"CorteÏ","crop.toolbar.launch":"Começar Corte","crop.toolbar.launchwithratio":"Começar Corte","crop.toolbar.unlaunch":"Cancelar","flip.toolbar.horizontal":"Giro Horizontal","flip.toolbar.vertical":"Giro Vertical","fullscreen.toolbar.fullscreen":"Inserir Tela inteira","fullscreen.toolbar.fullscreenexit":"Sair de Tela inteira","history.toolbar.redo":"Refazer","history.toolbar.undo":"Desfazer","map.template.alt_text":"Texto Alternativo","map.template.confirm":"Confirmar","map.template.delete":"Deletar","map.template.new_tab":"Nova Tabela","map.template.parent_frame":"Quadro Principal","map.template.path":"Caminho","map.template.path_picker":"Coletor de Caminho","map.template.same_tab":"Mesma Tabela","map.template.target":"Alvo","map.template.top_frame":"Quadro Superior","map.template.unlaunch":"Cancelar","map.toolbar.circle":"Adicionar Mapa Circular","map.toolbar.confirm":"Confirmar","map.toolbar.launch":"Lançar Mapa","map.toolbar.polygon":"Adicionar Mapa Polígono","map.toolbar.rectangle":"Adicionar Mapa Retangular","map.toolbar.unlaunch":"Cancelar","rotate.toolbar.left":"Girar à Esquerda","rotate.toolbar.right":"Girar à Direita","zoom.toolbar.popupslider":"Abrir Zoom Deslizante","zoom.toolbar.reset100":"Restabelecer Zoom"},CUI.imageeditor.strings["zh-CN"]={"control.toolbar.close":"取消","control.toolbar.finish":"完成","crop.aspect_ratios.16_to_9":"16 : 9","crop.aspect_ratios.2_to_3":"2 : 3","crop.aspect_ratios.3_to_5":"3 : 5","crop.aspect_ratios.free_hand":"徒手","crop.aspect_ratios.square":"方形","crop.template.removecrop":"去除裁剪","crop.toolbar.confirm":"确认","crop.toolbar.identifier":"裁剪","crop.toolbar.launch":"开始裁剪","crop.toolbar.launchwithratio":"开始裁剪","crop.toolbar.unlaunch":"取消","flip.toolbar.horizontal":"水平翻转","flip.toolbar.vertical":"垂直翻转","fullscreen.toolbar.fullscreen":"进入全屏","fullscreen.toolbar.fullscreenexit":"退出全屏","history.toolbar.redo":"重做","history.toolbar.undo":"撤销","map.template.alt_text":"Alt 文字","map.template.confirm":"确认","map.template.delete":"删除","map.template.new_tab":"新选项卡","map.template.parent_frame":"父框架","map.template.path":"路径","map.template.path_picker":"路径选择器","map.template.same_tab":"同一选项卡","map.template.target":"目标","map.template.top_frame":"顶层框架","map.template.unlaunch":"取消","map.toolbar.circle":"添加圆形地图","map.toolbar.confirm":"确认","map.toolbar.launch":"启动地图","map.toolbar.polygon":"添加多边形地图","map.toolbar.rectangle":"添加矩形地图","map.toolbar.unlaunch":"取消","rotate.toolbar.left":"向左旋转","rotate.toolbar.right":"向右旋转","zoom.toolbar.popupslider":"打开缩放滑块","zoom.toolbar.reset100":"重置缩放"},CUI.imageeditor.strings["zh-TW"]={"control.toolbar.close":"取消","control.toolbar.finish":"完成","crop.aspect_ratios.16_to_9":"16 : 9","crop.aspect_ratios.2_to_3":"2 : 3","crop.aspect_ratios.3_to_5":"3 : 5","crop.aspect_ratios.free_hand":"徒手繪圖","crop.aspect_ratios.square":"正方型","crop.template.removecrop":"移除裁切","crop.toolbar.confirm":"確認","crop.toolbar.identifier":"裁切","crop.toolbar.launch":"開始裁切","crop.toolbar.launchwithratio":"開始裁切","crop.toolbar.unlaunch":"取消","flip.toolbar.horizontal":"水平翻轉","flip.toolbar.vertical":"垂直翻轉","fullscreen.toolbar.fullscreen":"進入全螢幕模式","fullscreen.toolbar.fullscreenexit":"離開全螢幕模式","history.toolbar.redo":"取消復原","history.toolbar.undo":"復原","map.template.alt_text":"修改文字","map.template.confirm":"確認","map.template.delete":"刪除","map.template.new_tab":"新分頁","map.template.parent_frame":"母框架","map.template.path":"路徑","map.template.path_picker":"路線選擇器","map.template.same_tab":"同一分頁","map.template.target":"目標","map.template.top_frame":"最上層框架","map.template.unlaunch":"取消","map.toolbar.circle":"新增圓形地圖","map.toolbar.confirm":"確認","map.toolbar.launch":"發佈地圖","map.toolbar.polygon":"新增多邊形地圖","map.toolbar.rectangle":"新增矩型地圖","map.toolbar.unlaunch":"取消","rotate.toolbar.left":"向左旋轉","rotate.toolbar.right":"向右旋轉","zoom.toolbar.popupslider":"開啟縮放滑桿","zoom.toolbar.reset100":"重設縮放"},function(a,b,c){"use strict";var d={en:"en-US","en-us":"en-US",de:"de-DE","de-de":"de-DE",es:"es-ES","es-es":"es-ES",fr:"fr-FR","fr-fr":"fr-FR",it:"it-IT","it-it":"it-IT",ja:"ja-JP","ja-jp":"ja-JP",ko:"ko-KR","ko-kr":"ko-KR",pt:"pt-BR","pt-br":"pt-BR","zh-cn":"zh-CN","zh-hans-cn":"zh-CN","zh-hans":"zh-CN","zh-tw":"zh-TW","zh-hant-tw":"zh-TW","zh-hant":"zh-TW"};CUI.imageeditor.I18nProvider=new Class({toString:"I18nProvider",construct:function(){var a="en-US",b=d[document.documentElement.lang.toLowerCase()]||document.documentElement.lang||a,c=/^(..)-?(.*)$/gi.exec(b);b="undefined"!=typeof CUI.imageeditor.strings[c[0]]?c[0]:"undefined"!=typeof CUI.imageeditor.strings[d[c[1]]]?d[c[1]]:a,this.translations=CUI.imageeditor.strings[b]},get:function(a){return this.has(a)?this.translations[a]:a},has:function(a){return this.translations.hasOwnProperty(a)}})}(jQuery,this),function(a,b,c){"use strict";CUI.imageeditor.OptionsUtils={loadOptionsAndStartEditing:function(b,c,d){function e(a){"function"==typeof d&&(a=d(a)),b.start(a)}var f={},g=c.data("options"),h=c.data("options-path");a.isPlainObject(g)?e(g):h?a.ajax({url:h,success:function(a){f=a},complete:function(){e(f)}}):e(f)}}}(jQuery,this),function(a,b,c){"use strict";var d=function(){};CUI.imageeditor.TemplateProvider=new Class({toString:"TemplateProvider",construct:function(b){this.templates=a.extend({},CUI.imageeditor.Templates,b)},get:function(a){return this.has(a)?this.templates[a]:d},has:function(a){return this.templates.hasOwnProperty(a)}}),CUI.imageeditor.TemplateProvider.NOOP=d}(jQuery,this),function(a,b,c){"use strict";CUI.imageeditor.Theme={IMAGEEDITOR_HIDDEN_CLASS:"u-coral-hidden",TOOLBARITEM_DISABLED_CLASS:"is-disabled",TOOLBARITEM_SELECTED_CLASS:"is-selected",TOOLBARITEM_MODECHANGER_CLASS:"modechanger"}}(jQuery,this),function(a,b,c){"use strict";CUI.imageeditor.TransformResult=new Class({toString:"TransformResult",result:null,history:null,future:null,construct:function(){this.result={},this.history=[],this.future=[]},registerTransformField:function(a){return!this.result.hasOwnProperty(a)&&(this.result[a]=null,!0)},setTransformValue:function(a,b,c){return c!==!1&&this.storeHistory(),!!this.result.hasOwnProperty(a)&&(this.result[a]=b,!0)},setTransformValues:function(b,c){var d,e,f;if(c!==!1&&this.storeHistory(),a.isPlainObject(b))for(e in b)b.hasOwnProperty(e)&&this.setTransformValue(e,b[e],!1);else if(a.isArray(b))for(d=0;d<b.length;d++)f=a.extend({},b[d]),e=f.transformation,delete f.transformation,a.isEmptyObject(f)||this.setTransformValue(e,f,!1)},undo:function(){return!!this.history.length&&(this.storeHistory(),this.future.push(this.history.pop()),this.setTransformValues(this.history.pop(),!1),!0)},redo:function(){return!!this.future.length&&(this.storeHistory(),this.setTransformValues(this.future.pop(),!1),!0)},getTransformValue:function(a){return this.result.hasOwnProperty(a)?this.result[a]:c},toJSON:function(){var b,c=[];for(b in this.result)this.result.hasOwnProperty(b)&&a.isPlainObject(this.result[b])&&!a.isEmptyObject(this.result[b])&&c.push(a.extend(!0,{transformation:b},this.result[b]));return c},storeHistory:function(){this.history.push(a.extend(!0,{},this.result))}})}(jQuery,this),function(a,b,c){"use strict";CUI.imageeditor.UIUtils={getUIContainer:function(b){return b=a(b),b.is(".imageeditor-container")?b:b.parents(".imageeditor-container").first()},getToolbars:function(a,b){var c,d;if(!b)throw new Error("ArgumentError - missing toolbar type");return c=a.hasClass("imageeditor-container")?a:CUI.imageeditor.UIUtils.getUIContainer(a),c&&c.length?(d=c.find('div[data-type="'+b+'"] > div.imageeditor-toolbar'),d&&d.length?d:null):null},getToolbarContainer:function(a,b){if(!b)throw new Error("ArgumentError - missing toolbar type");var c=a.find('.imageeditor-toolbars [data-type="'+b+'"]');return c.length?c:a.find(".imageeditor-toolbars")},getItem:function(a,b,c){if(!b)throw new Error("ArgumentError - missing toolbar type");return c.find('div[data-type="'+b+'"] button[data-action="'+a+'"]')},getClippingParent:function(b){for(var c,d,e,f,g=a(document.body);b[0]!==g[0];){if(d=b.css("overflow"),e=b.css("overflowX"),f=b.css("overflowY"),"visible"!==e||"visible"!==f||"visible"!==d){c=b;break}b=b.parent()}return c},elementInIframe:function(b){var c=a(b).prop("ownerDocument"),d=null;return a("iframe").each(function(){if(this.contentDocument===c)return void(d=this)}),d},handleTapOrClick:function(a,b,c){c=c||{};var d="";c.timeout||(c.timeout=300),"undefined"==typeof c.clickIgnoredAfterTouchTimeout&&(c.clickIgnoredAfterTouchTimeout=5e3),"undefined"==typeof c.preventIgnoredClickEventDefault&&(c.preventIgnoredClickEventDefault=!0),"undefined"==typeof c.stopIgnoredClickEventImmediatePropagation&&(c.stopIgnoredClickEventImmediatePropagation=!0),"undefined"==typeof c.preventTouchendDefault&&(c.preventTouchendDefault=!0),"undefined"!=typeof c.eventNamespace&&c.eventNamespace&&(d=0!==c.eventNamespace.indexOf(".")?"."+c.eventNamespace:c.eventNamespace);var e=null;return e={lastTouchstartTime:0,lastTouchTime:0,off:function(){a.off("click"+d,e.clickHandler),a.off("touchend"+d,e.touchendHandler),a.off("touchstart"+d,e.touchstartHandler)}},e.outerHandler=b,e.clickHandler=function(a){var b=(new Date).getTime();return c.clickIgnoredAfterTouchTimeout>b-e.lastTouchTime?(c.preventIgnoredClickEventDefault&&a.preventDefault(),void(c.stopIgnoredClickEventImmediatePropagation&&a.stopImmediatePropagation())):void e.outerHandler.apply(a.currentTarget||{},[a])},e.touchstartHandler=function(a){var b=(new Date).getTime();e.lastTouchstartTime=b,e.lastTouchTime=e.lastTouchstartTime},e.touchendHandler=function(a){var b=(new Date).getTime();e.lastTouchTime=b,c.timeout<b-e.lastTouchstartTime||(c.preventTouchendDefault&&a.preventDefault(),e.lastTouchstartTime=0,e.outerHandler.apply(a.currentTarget||{},[a]))},a.on("click"+d,e.clickHandler),a.on("touchstart"+d,e.touchstartHandler),a.on("touchend"+d,e.touchendHandler),e},installPinchZooming:function(a,b,c,d){this.togglePinchZooming(!0,a,b,c,d)},togglePinchZooming:function(a,b,c,d,e){c=c||".imageeditorzoom";var f="gesturestart"+c,g="gesturechange"+c,h="gestureend"+c,i=100;b.off(c),a&&b.on(f,function(a){var c=d(),f=0,j=null;a.preventDefault(),b.off(g),b.on(g,function(a){var b=a.originalEvent.scale,d=1;a.preventDefault(),j&&(clearTimeout(j),d=Math.max(1,i-((new Date).getTime()-f))),j=setTimeout(function(){f=(new Date).getTime(),e(b*c,"change"),j=null},d)}),b.on(h,function(a){var d=a.originalEvent.scale;a.preventDefault(),j&&clearTimeout(j),b.off(g),b.off(h),e(d*c,"end")})})},removePinchZooming:function(a,b){this.togglePinchZooming(!1,a,b)},isHavingClassOrParentHavingClass:function(b,c){if(b){if(b.hasClass||(b=a(b)),b.hasClass(c))return!0;if(b.length)return this.isHavingClassOrParentHavingClass(b.parent(),c)}return!1},isHavingModalParent:function(a){return this.isHavingClassOrParentHavingClass(a,"coral-Modal")},getEventCoordinatesPageRelative:function(a){return a.originalEvent&&a.originalEvent.touches?{x:a.originalEvent.touches[0].pageX,y:a.originalEvent.touches[0].pageY}:{x:a.pageX,y:a.pageY}}}}(jQuery,this),function(a,b,c){"use strict";CUI.imageeditor.Utils={defer:function(a,c,d,e){var f=a;return d?f=function(){e?a.apply(d,e):a.call(d)}:e&&(f=function(){a.apply(b,e)}),b.setTimeout(f,c)},onPluginCreated:function(a){return a},applyDefaults:function(a,b){var c,d;if(a=a||{},b=b||{},"object"==typeof a)for(c in b)b.hasOwnProperty(c)&&(d=b[c],d&&"object"==typeof d&&!CUI.imageeditor.Utils.isArray(d)?a[c]=this.applyDefaults(a[c],d):"undefined"==typeof a[c]&&(a[c]=d));return a},isArray:function(b){return a.isArray(b)},isString:function(b){return a.isString(b)},endsWith:function(a,b){return"undefined"!=typeof a&&null!==a&&(null!==b&&"undefined"!=typeof b&&(!(a.length<b.length)&&a.substring(a.length-b.length)===b))},apply:function(b,c,d){return a.extend(b,c,d)},getPagePosition:function(b){var c=a(b).offset();return[c.left,c.top]},getWidth:function(b){return a(b).width()},getHeight:function(b){return a(b).height()},jsonDecode:function(b){return a.parseJSON(b)}}}(jQuery,this),function(a,b,c){"use strict";var d=function(a,b){var c=a;if(b){if("object"!=typeof a)return!1;c=a[b]}if("number"==typeof c&&c>0)return!0;if("string"==typeof c){var d=parseFloat(c);return!isNaN(d)&&d>0&&(""+d===c||CUI.imageeditor.Utils.endsWith(c,"px"))}return!1};CUI.imageeditor.TranslationUtil=function(a){if("object"!=typeof a)throw new Error("Sizes need constructor parameter");this.initRotation(a),this.flip=a.flip||{horizontal:!1,vertical:!1},this.naturalDimensionsBeforeRotation={height:a.naturalHeight,width:a.naturalWidth},this.naturalDimensions=this.rotateDimsIfNecessary(this.naturalDimensionsBeforeRotation),a.cropOnOriginal&&a.cropOnOriginal.width&&a.cropOnOriginal.height?this.cropOnOriginal={top:a.cropOnOriginal.top||0,left:a.cropOnOriginal.left||0,height:a.cropOnOriginal.height,width:a.cropOnOriginal.width}:this.cropOnOriginal={top:0,left:0,height:this.naturalDimensionsBeforeRotation.height,width:this.naturalDimensionsBeforeRotation.width},this.croppedRotatedDim=this.rotateDimsIfNecessary(this.cropOnOriginal),this.determineScaledDimensions(a)},CUI.imageeditor.TranslationUtil.prototype.determineScaledDimensions=function(a){var b,c,e=!1,f=1,g=1,h=1;if(e=!1,(d(a,"fixedWidth")||d(a,"fixedHeight"))&&(e=!0),e){var i=parseInt(a.fixedWidth,10),j=parseInt(a.fixedHeight,10);isNaN(i)?f=g=j/this.croppedRotatedDim.height:isNaN(j)?f=g=i/this.croppedRotatedDim.width:(f=i/this.croppedRotatedDim.width,g=j/this.croppedRotatedDim.height)}if(!e){var k={width:-1,height:-1},l={width:-1,height:-1};d(a,"minWidth")&&(k.width=parseInt(a.minWidth,10)),d(a,"minHeight")&&(k.height=parseInt(a.minHeight,10)),d(a,"maxWidth")&&(l.width=parseInt(a.maxWidth,10)),d(a,"maxHeight")&&(l.height=parseInt(a.maxHeight,10));var m=null;k.width>0?m=k.height>0&&k.width/k.height<this.croppedRotatedDim.width/this.croppedRotatedDim.height?"height":"width":k.height>0&&(m="height");var n=null;l.width>0?n=l.height>0?l.width/l.height<this.croppedRotatedDim.width/this.croppedRotatedDim.height?"width":"height":"width":l.height>0&&(n="height"),m&&("height"===m?k.height>this.croppedRotatedDim.height&&(c=g,g=k.height/this.croppedRotatedDim.height,f=g/c*f):k.width>this.croppedRotatedDim.width&&(b=f,f=k.width/this.croppedRotatedDim.width,g=f/b*g)),n&&("height"===n?l.height<this.croppedRotatedDim.height&&(c=g,g=l.height/this.croppedRotatedDim.height,f=g/c*f):l.width<this.croppedRotatedDim.width&&(b=f,f=l.width/this.croppedRotatedDim.width,g=f/b*g))}this.displayDimensions={height:Math.round(this.croppedRotatedDim.height*g),width:Math.round(this.croppedRotatedDim.width*f)},this.fromNaturalToDisplayScaleFactors={width:f,height:g},a.zoomFactor&&(h=a.zoomFactor),this.zoomFactor=h,this.zoomedDimensions={height:Math.round(this.displayDimensions.height*h),width:Math.round(this.displayDimensions.width*h)},this.fromNaturalToZoomedScaleFactors={width:f*h,height:g*h},this.fromDisplayToZoomedScaleFactors={width:h,height:h}},CUI.imageeditor.TranslationUtil.prototype.initRotation=function(a){var b=null;if(a.rotation){var c=parseInt(a.rotation,10);isNaN(c)||(b=c)}if(a.rotation=b,this.rotatedByNinetyDegrees=!1,this.rotation=0,a.rotation){this.rotation=a.rotation;var d=Math.abs(a.rotation%180);90===d&&(this.rotatedByNinetyDegrees=!0)}},CUI.imageeditor.TranslationUtil.prototype.getDisplayDimensions=function(){return this.displayDimensions},CUI.imageeditor.TranslationUtil.prototype.getNaturalDimensions=function(){return this.naturalDimensions},CUI.imageeditor.TranslationUtil.prototype.getZoomedDimensions=function(){return this.zoomedDimensions},CUI.imageeditor.TranslationUtil.prototype.getZoomedDimensionsBeforeRotation=function(){var a=this.getFromNaturalToZoomedScaleFactors(!0),b=this.getNaturalDimensionsBeforeRotation();return{height:Math.round(b.height*a.height),width:Math.round(b.width*a.width)}},CUI.imageeditor.TranslationUtil.prototype.getZoomedCropBeforeRotation=function(){var a=this.getCropOnOriginal(),b=this.getFromNaturalToZoomedScaleFactors(!0);return{top:Math.round(a.top*b.height),left:Math.round(a.left*b.width),height:Math.round(a.height*b.height),width:Math.round(a.width*b.width)}},CUI.imageeditor.TranslationUtil.prototype.getNaturalDimensionsBeforeRotation=function(){return this.naturalDimensionsBeforeRotation},CUI.imageeditor.TranslationUtil.prototype.adaptScaleFactorsToUnrotatedImage=function(a){return this.rotatedByNinetyDegrees?{width:a.height,height:a.width}:a},CUI.imageeditor.TranslationUtil.prototype.getFromNaturalToDisplayScaleFactors=function(a){return a?this.adaptScaleFactorsToUnrotatedImage(this.fromNaturalToDisplayScaleFactors):this.fromNaturalToDisplayScaleFactors},CUI.imageeditor.TranslationUtil.prototype.getFromDisplayToNaturalScaleFactors=function(a){var b=this.getFromNaturalToDisplayScaleFactors(a);return{width:1/b.width,height:1/b.height}},CUI.imageeditor.TranslationUtil.prototype.getFromNaturalToZoomedScaleFactors=function(a){return a?this.adaptScaleFactorsToUnrotatedImage(this.fromNaturalToZoomedScaleFactors):this.fromNaturalToZoomedScaleFactors},CUI.imageeditor.TranslationUtil.prototype.getFromZoomedToNaturalScaleFactors=function(a){var b=this.getFromNaturalToZoomedScaleFactors(a);return{width:1/b.width,height:1/b.height}},CUI.imageeditor.TranslationUtil.prototype.getFromDisplayToZoomedScaleFactors=function(){return this.fromDisplayToZoomedScaleFactors;
},CUI.imageeditor.TranslationUtil.prototype.getFromZoomedToDisplayScaleFactors=function(){return{width:1/this.zoomFactor,height:1/this.zoomFactor}},CUI.imageeditor.TranslationUtil.prototype.getCropOnOriginal=function(){return this.cropOnOriginal},CUI.imageeditor.TranslationUtil.prototype.getCropOnDisplayBeforeRotation=function(){var a=this.getCropOnOriginal(),b=this.getFromNaturalToDisplayScaleFactors(!0),c={top:a.top*b.height,left:a.left*b.width,height:a.height*b.height,width:a.width*b.width};return c.right=c.left+c.width,c.bottom=c.top+c.height,c},CUI.imageeditor.TranslationUtil.prototype.getCompleteImageAfterScalingDimensions=function(){var a=this.getNaturalDimensions(),b=this.getFromNaturalToDisplayScaleFactors();return{height:a.height*b.height,width:a.width*b.width}},CUI.imageeditor.TranslationUtil.prototype.translateToDisplay=function(a,b,c){var d=this.getFromNaturalToDisplayScaleFactors(c);return{w:Math.round(d.width*a),h:Math.round(d.height*b)}},CUI.imageeditor.TranslationUtil.prototype.translateWidthToDisplay=function(a,b){return Math.round(a*this.getFromNaturalToDisplayScaleFactors(b).width)},CUI.imageeditor.TranslationUtil.prototype.translateHeightToDisplay=function(a,b){return Math.round(a*this.getFromNaturalToDisplayScaleFactors(b).height)},CUI.imageeditor.TranslationUtil.prototype.translateToNatural=function(a,b,c){var d=this.getFromDisplayToNaturalScaleFactors(c);return{w:Math.round(d.width*a),h:Math.round(d.height*b)}},CUI.imageeditor.TranslationUtil.prototype.translateNaturalToZoomed=function(a,b,c){var d=this.getFromNaturalToZoomedScaleFactors(c);return{w:Math.round(d.width*a),h:Math.round(d.height*b)}},CUI.imageeditor.TranslationUtil.prototype.translateZoomedToNatural=function(a,b,c){var d=this.getFromZoomedToNaturalScaleFactors(c);return{w:Math.round(d.width*a),h:Math.round(d.height*b)}},CUI.imageeditor.TranslationUtil.prototype.applyScaleFactors=function(a,b,c){return{w:Math.round(c.width*a),h:Math.round(c.height*b)}},CUI.imageeditor.TranslationUtil.prototype.translatePoints=function(a,b){var c,d,e=[];for(c=0;c<a.length;c++)d=a[c],d="toZoomed"===b?this.translateNaturalToZoomed(d.w,d.h):this.translateZoomedToNatural(d.w,d.h),e.push(d);return e},CUI.imageeditor.TranslationUtil.prototype.zoomPoints=function(a,b){var c,d,e,f=[];for(e=b?this.getFromZoomedToDisplayScaleFactors():this.getFromDisplayToZoomedScaleFactors(),c=0;c<a.length;c++)d=a[c],d=this.applyScaleFactors(d.w,d.h,e),f.push(d);return f},CUI.imageeditor.TranslationUtil.prototype.translateWidthToNatural=function(a,b){return Math.round(1*a/this.getFromNaturalToDisplayScaleFactors(b).width)},CUI.imageeditor.TranslationUtil.prototype.translateHeightToNatural=function(a,b){return Math.round(1*a/this.getFromNaturalToDisplayScaleFactors(b).height)},CUI.imageeditor.TranslationUtil.prototype.scaleCropToNatural=function(a,b){return this.applyScaleFactorsToCrop(a,this.getFromZoomedToNaturalScaleFactors(b))},CUI.imageeditor.TranslationUtil.prototype.scaleCropToZoomed=function(a,b){return this.applyScaleFactorsToCrop(a,this.getFromNaturalToZoomedScaleFactors(b))},CUI.imageeditor.TranslationUtil.prototype.applyScaleFactorsToCrop=function(a,b){return a?{top:Math.round(a.top*b.height),left:Math.round(a.left*b.width),height:Math.round(a.height*b.height),width:Math.round(a.width*b.width)}:null},CUI.imageeditor.TranslationUtil.prototype.rotateDimsIfNecessary=function(a){return a?{height:this.rotatedByNinetyDegrees?a.width:a.height,width:this.rotatedByNinetyDegrees?a.height:a.width}:null},CUI.imageeditor.TranslationUtil.prototype.rotateCropBy90IfNecessary=function(a){return a?{top:this.rotatedByNinetyDegrees?a.left:a.top,left:this.rotatedByNinetyDegrees?a.top:a.left,height:this.rotatedByNinetyDegrees?a.width:a.height,width:this.rotatedByNinetyDegrees?a.height:a.width}:null},CUI.imageeditor.TranslationUtil.prototype.translate=function(b,c,d){var e,f,g=this.rotation,h=this.flip;return c=c||"zoomed",c=c.toLowerCase(),f="display"===c?this.getDisplayDimensionsBeforeRotation():"natural"===c?this.getNaturalDimensionsBeforeRotation():this.getZoomedDimensionsBeforeRotation(),d=d||a.extend({},b),g%=360,g+=360,g%=360,b.hasOwnProperty("top")&&b.hasOwnProperty("left")&&(g%180===0?(e=0!==g,h.horizontal^e?d.left=f.width-b.width-b.left:d.left=b.left,h.vertical^e?d.top=f.height-b.height-b.top:d.top=b.top):(e=90!==g,h.vertical^e?d.left=b.top:d.left=f.height-b.height-b.top,h.horizontal^e?d.top=f.width-b.width-b.left:d.top=b.left)),g%180!==0?(d.width=b.height,d.height=b.width):(d.width=b.width,d.height=b.height),d}}(jQuery,this),function(a,b,c){"use strict";CUI.imageeditor.actions.Action=new Class({toString:"Action",config:{},construct:function(a,b){this._init(a,b)},_init:function(a,b){this.editor=a,this.actionId=b},notifyPluginConfig:function(a){this.config=a},isAction:function(a){return!1},isUndoable:function(a){return!0},requiresInitializedComponent:function(a){return!0},execute:function(a){},queryState:function(a,b){return!1},toCss:function(a,b,c){return{}},getString:function(a){return this.editor.i18n.get(this.actionId+"."+a)},getTemplateOptions:function(){var a=this;return{helpers:{i18n:function(b){return a.getString("template."+b)}}}}})}(jQuery,this),function(a,b,c){"use strict";CUI.imageeditor.actions.ActionRegistry=function(){var a={};return{register:function(b,c){a[b]=c},createRegisteredActions:function(b){var c,d={};for(c in a)a.hasOwnProperty(c)&&(d[c]=new a[c](b,c));return d}}}()}(jQuery,this),function(a,b,c){"use strict";CUI.imageeditor.actions.Crop=new Class({toString:"Crop",extend:CUI.imageeditor.actions.Action,isAction:function(a){var b=a.toLowerCase();return"croplaunch"===b||"croplaunchwithratio"===b||"cropunlaunch"===b||"cropconfirm"===b||"cropremovecrop"===b},execute:function(a){switch(a.action.toLowerCase()){case"croplaunch":return this.launchCrop(a);case"croplaunchwithratio":return this.launchCropWithRatio(a);case"cropunlaunch":return this.unlaunchCrop(a);case"cropconfirm":return this.confirmCrop(a);case"cropremovecrop":return this.removeCrop(a)}},launchCropWithRatio:function(a){this.popover&&this.popover.get("visible")?this.closeRatioPopover(a):this.openRatioPopover(a)},openRatioPopover:function(b){var c,d;this.clickTarget||(c=a("<div>",{"class":"imageeditor-clicktarget"}),a(".imageeditor-controls").append(c),c.on("click",this,this.clickTargetClicked),this.clickTarget=c),this.popover||(d=a("<div>",{"class":"imageeditor-popover imageeditor-toolbar-popover coral-Popover"}).html(this.editor.templates.get("crop-popover")({aspectRatios:b.value.getAspectRatios()},this.getTemplateOptions())),a(".imageeditor-controls").append(d),d.trigger("cui-contentloaded"),d.on("click",a.proxy(this.ratioPopoverClicked,this,b.value)),this.popover=new CUI.Popover({element:d,pointFrom:"bottom"})),this.clickTarget.show(),this.popover.set("pointAt",b.ui.find(".coral-Icon--crop:visible").closest(".coral-Button")).show()},closeRatioPopover:function(a){this.popover&&this.popover.hide(),this.clickTarget&&this.clickTarget.hide()},clickTargetClicked:function(a){a.stopPropagation(),setTimeout(function(){a.data.closeRatioPopover()},300)},ratioPopoverClicked:function(b,c){this.closeRatioPopover();var d=a(c.target).val();"removeCrop"===d?b.execute("removecrop"):b.execute("launch",d)},launchCrop:function(a){var b=a.createTranslationUtil(),c=this.getFullCanvasCrop(b),d=null,e=this.getCurrent(a.result,b),f=null;"fullscreen"!==a.mode||e.top===c.top&&e.left===c.left&&e.width===c.width&&e.height===c.height?(c=e,e=this.getDefaultSelection(a,c)):a.element.css("clip",""),d=b.scaleCropToZoomed(c,!0),f=b.scaleCropToZoomed(e,!0),a.editor.togglePinchZooming(!1),a.element.imageSelect({classPrefix:"imageeditor-imageselect-",parent:a.ui.find(".imageeditor-controls"),applyTransformations:!0,aspectRatio:a.value||0,canvas:{top:d.top,left:d.left,width:d.width,height:d.height},selection:{top:f.top,left:f.left,width:f.width,height:f.height}})},unlaunchCrop:function(a){return a.element.imageSelect({call:"destroy"}),a.editor.togglePinchZooming(!0),!0},confirmCrop:function(a){var b=a.element.imageSelect({instance:!0}),c=b.getSelection();return this.setCurrent(a.result,a.createTranslationUtil().scaleCropToNatural(c,!0)),this.unlaunchCrop(a)},removeCrop:function(a){return this.setCurrent(a.result,null),!0},toCss:function(a,b,c){var d,e=this.getCurrent(a);if(e)return e=c.scaleCropToZoomed(e,!0),d=this.findCenter(e),{clip:"rect("+[e.top,e.left+e.width,e.top+e.height,e.left].join("px, ")+"px)","transform-origin":d.x+"px "+d.y+"px"}},findCenter:function(a){return{x:a.left+Math.round(a.width/2),y:a.top+Math.round(a.height/2)}},setCurrent:function(a,b){var c=null;b&&(c={top:b.top,left:b.left,width:b.width,height:b.height}),a.setTransformValue("crop",c)},getCurrent:function(b,c){var d=b&&b.getTransformValue("crop");return a.isPlainObject(d)&&d.hasOwnProperty("top")&&d.hasOwnProperty("left")&&d.hasOwnProperty("width")&&d.hasOwnProperty("height")?{top:d.top,left:d.left,width:d.width,height:d.height}:this.getFullCanvasCrop(c)},getFullCanvasCrop:function(a){var b;return a?(b=a.getNaturalDimensionsBeforeRotation(),{top:0,left:0,width:b.width,height:b.height}):void 0},getDefaultSelection:function(a,b){var c,d=a.createTranslationUtil(),e=d.rotateCropBy90IfNecessary(d.scaleCropToNatural(a.viewportCrop,!1)),f=d.getCropOnOriginal(),g="fullscreen"===a.mode;return c={x:.1*e.width,y:.1*e.height},{top:(g?e.top:f.top)+c.y,left:(g?e.left:f.left)+c.x,width:e.width-2*c.x,height:e.height-2*c.y}}})}(jQuery,this),CUI.imageeditor.actions.ActionRegistry.register("crop",CUI.imageeditor.actions.Crop),function(a,b,c){"use strict";CUI.imageeditor.actions.Rotate=new Class({toString:"Rotate",extend:CUI.imageeditor.actions.Action,isAction:function(a){return"rotateright"===a||"rotateleft"===a},execute:function(a){var b=CUI.imageeditor.actions.Rotate.ROTATION_ANGLE,c=this.getCurrent(a.result);return"rotateleft"===a.action&&(b=-b),b=c+b,this.setCurrent(a.result,b),!0},setCurrent:function(a,b){a.setTransformValue("rotate",{angle:b})},getCurrent:function(b){var c=b.getTransformValue("rotate");return a.isPlainObject(c)?c.angle||0:0},toCss:function(a,b,c){return{transform:"rotate("+this.getCurrent(a)+"deg)"}}})}(jQuery,this),CUI.imageeditor.actions.Rotate.ROTATION_ANGLE=90,CUI.imageeditor.actions.ActionRegistry.register("rotate",CUI.imageeditor.actions.Rotate),function(a,b,c){"use strict";CUI.imageeditor.actions.Flip=new Class({toString:"Flip",extend:CUI.imageeditor.actions.Action,isAction:function(a){return"fliphorizontal"===a||"flipvertical"===a},execute:function(a){var b,c=this.getCurrent(a.result),d=a.rotation%180!==0;switch(a.action){case"fliphorizontal":b=d?"vertical":"horizontal";break;case"flipvertical":b=d?"horizontal":"vertical";break;default:return!1}return c[b]=!c[b],this.setCurrent(a.result,c),!0},setCurrent:function(a,b){a.setTransformValue("flip",b)},getCurrent:function(b){var c=b.getTransformValue("flip");return a.isPlainObject(c)?{vertical:!!c.vertical,horizontal:!!c.horizontal}:{vertical:!1,horizontal:!1}},toCss:function(a,b,c){var d=this.getCurrent(a);return{transform:" scaleX("+(d.horizontal?"-1":"1")+") scaleY("+(d.vertical?"-1":"1")+")"}}})}(jQuery,this),CUI.imageeditor.actions.ActionRegistry.register("flip",CUI.imageeditor.actions.Flip),function(a,b,c){"use strict";var d=function(b,c){c.find("[name]").each(function(){var c=a(this),d=c.attr("type"),e=c.attr("name"),f=c.val();"radio"===d||"checkbox"===d?c.prop("checked")&&(b[e]=f):b[e]=f})},e=function(b,c){c.find("[name]").each(function(){var c=a(this),d=c.attr("type"),e=c.attr("name"),f=b[e]||"";if("radio"===d||"checkbox"===d)c.attr("value")===f?c.prop("checked",!0):c.prop("checked",!1),c.change();else if(c.val(f).change(),c.is("select")){var g=c.closest(".coral-Select").data("select");g&&g._handleNativeSelect()}})};CUI.imageeditor.actions.Map=new Class({toString:"Map",extend:CUI.imageeditor.actions.Action,MIN_SIZE:40,isAction:function(a){return"maplaunch"===a||"mapunlaunch"===a||"mapconfirm"===a||"maprectangle"===a||"mapcircle"===a||"mappolygon"===a},execute:function(a){switch(a.action){case"maplaunch":return this.launchMap(a);case"mapunlaunch":return this.unlaunchMap(a);case"mapconfirm":return this.confirmMap(a);case"maprectangle":return this.startRectangleArea(a);case"mapcircle":return this.startCircleArea(a);case"mappolygon":return this.startPolygonArea(a)}},launchMap:function(b){this.isActive=!0,b.editor.togglePinchZooming(!1),this.areas=this.getCurrent(b.result),this.drawAreas(b),b.ui.on("click.map deselect_click.map",a.proxy(this.tryToSelectAreaOrUnselect,this,b)),b.ui.on("second_click.map",a.proxy(this.togglePopover,this,b)),this.getMapCont(b.element).on("update.map",a.proxy(this.closePopover,this))},unlaunchMap:function(a){this.isActive=!1,this.unselectCurrentArea(a),this.areas=[],this.drawAreas(a),a.ui.off(".map"),this.getMapCont(a.element).off(".map"),a.editor.togglePinchZooming(!0)},confirmMap:function(a){this.unselectCurrentArea(a),this.setCurrent(a.result,this.areas),this.unlaunchMap(a)},startRectangleArea:function(a){this.unselectCurrentArea(a),this.currentArea={alt:"",href:"",target:"",selection:this.getDefaultNewSelection(a),shape:"rect"},this.selectCurrentArea(a)},startCircleArea:function(a){this.unselectCurrentArea(a),this.currentArea={alt:"",href:"",target:"",selection:this.getDefaultNewSelection(a),shape:"circle"},this.selectCurrentArea(a)},startPolygonArea:function(a){this.unselectCurrentArea(a),this.currentArea={alt:"",href:"",target:"",points:this.getDefaultNewPoints(a),shape:"polygon"},this.selectCurrentArea(a)},getDefaultNewSelection:function(a){var b=a.createTranslationUtil(),c=b.scaleCropToNatural(a.viewportCrop,!0),d={x:.2*c.width,y:.2*c.height};return{top:c.top+d.y,left:c.left+d.x,width:c.width-2*d.x,height:c.height-2*d.y}},getDefaultNewPoints:function(a){var b=a.createTranslationUtil(),c=b.scaleCropToNatural(a.viewportCrop,!0),d={x:.2*c.width,y:.2*c.height};return[{w:c.left+.5*c.width,h:c.top+d.y},{w:c.left+(c.width-d.x),h:c.top+(c.height-d.y)},{w:c.left+d.x,h:c.top+(c.height-d.y)}]},getCurrent:function(b){var c=b.getTransformValue("map");return c&&c.areas?a.map(c.areas,function(b){return a.extend(!0,{},b)}):[]},setCurrent:function(a,b){b?a.setTransformValue("map",{areas:b}):a.setTransformValue("map",null)},getMapCont:function(a){return a.parent().find(".imageeditor-controls-map-areas")},drawAreas:function(b){var d,e,f,g,h,i,j=b.createTranslationUtil(),k=this.getMapCont(b.element),l=j.translate(j.getZoomedCropBeforeRotation(),"zoomed"),m=this.getPolygonOutlineStyling(b);if(k.html(""),this.areas)for(k.css({width:l.width,height:l.height}).position({of:b.element,my:"left top",at:"left+"+l.left+" top+"+l.top,collision:"none"}),f=0;f<this.areas.length;f++)d=this.areas[f],"polygon"===d.shape?(e=a("<canvas/>",{"class":"imageeditor-map-canvas",width:l.width,height:l.height}),e[0].width=l.width,e[0].height=l.height,h=d.points,h=j.translatePoints(h,"toZoomed"),i=e.polygon().data("polygon"),i.paintPolygonWithPoints(e,h,m),k.append(e)):(e=a("<div/>",{"class":"imageeditor-controls-map-area"}),k.append(e),g=j.scaleCropToZoomed(d.selection),e.css({top:g.top,left:g.left,width:g.width,height:g.height,borderRadius:"circle"===d.shape?"50%":c}))},getPolygonOutlineStyling:function(b){var c=a(this.getMapCont(b.element).parent()),d=c.find(".imageeditor-imagemap-polygon-helper"),e=d.css("border-top-width"),f=null;return f=a("<div/>",{width:e}).width(),{strokeStyle:d.css("border-top-color"),lineWidth:f}},isCurrentlySelectedArea:function(a){return this.currentImageSelect&&this.currentArea===a},tryToSelectAreaOrUnselect:function(b,c){if(!(c&&a(c.target).parents(".imageeditor-popover").length||c&&a(c.target).parents(".imageeditor-imagemap-holder").length)){var d,e,f,g,h=!1,i=b.createTranslationUtil(),j=a("<div/>").polygon().data("polygon"),k=CUI.imageeditor.UIUtils.getEventCoordinatesPageRelative(c),l=this.getMapCont(b.element),m=l.offset(),n={w:k.x-m.left,h:k.y-m.top};for(c.preventDefault(),c.stopPropagation(),e=0;e<this.areas.length;e++)if(d=this.areas[e],h=!1,"polygon"===d.shape?(g=j.pointsToVectors(i.translatePoints(d.points,"toZoomed")),h=j.isPointInsideOrOnEdgeOfPolygon([n.w,n.h],g)):(f=i.scaleCropToZoomed(d.selection),h=j.isCoordsInBoundingBox(f,n.w,n.h)),h){this.isCurrentlySelectedArea(d)||this.createSelectionFromArea(e,b);break}h||this.unselectCurrentArea(b)}},createSelectionFromArea:function(a,b){var c=this.areas[a];this.unselectCurrentArea(b),this.currentArea=c,this.areas.splice(a,1),this.drawAreas(b),this.selectCurrentArea(b)},selectCurrentArea:function(a){var b,c=a.createTranslationUtil();if("polygon"===this.currentArea.shape)b={instance:!0,classPrefix:"imageeditor-imagemap-",parent:a.element.parent().find(".imageeditor-controls"),points:c.translatePoints(this.currentArea.points,"toZoomed")},this.currentImageSelect=this.getMapCont(a.element).imageSelectPolygon(b);else{switch(b={instance:!0,classPrefix:"imageeditor-imagemap-",parent:a.element.parent().find(".imageeditor-controls"),min:this.MIN_SIZE,selection:c.scaleCropToZoomed(this.currentArea.selection)},this.currentArea.shape){case"rect":b.shape="rectangle";break;case"circle":b.shape="ellipse",b.aspectRatio=1}this.currentImageSelect=this.getMapCont(a.element).imageSelect(b)}},unselectCurrentArea:function(a){this.currentImageSelect&&("polygon"===this.currentArea.shape?this.currentArea.points=a.createTranslationUtil().translatePoints(this.currentImageSelect.getPoints(),"toNatural"):this.currentArea.selection=a.createTranslationUtil().scaleCropToNatural(this.currentImageSelect.getSelection()),this.areas.push(this.currentArea),this.removeCurrentSelection(a))},removeCurrentSelection:function(a){this.currentImageSelect&&(this.currentImageSelect.destroy(),this.currentImageSelect=null,this.closePopover(),this.drawAreas(a))},togglePopover:function(a){this.currentImageSelect&&(this.currentPopover||this.createPopover(a),this.currentPopover.get("visible")?this.closePopover():this.openPopover(a))},createPopover:function(b){var c,d={},e=!1,f=a.extend({},CUI.imageeditor.actions.Map.DEFAULT_OPTIONS,this.config);f.pathbrowser=a.extend({},CUI.imageeditor.actions.Map.DEFAULT_OPTIONS.pathbrowser,f.pathbrowser),f.pathbrowser.type&&("picker"===f.pathbrowser.type?(d.pathbrowserPicker=!0,e=!0):"autocomplete"===f.pathbrowser.type&&(d.pathbrowserAutocomplete=!0,e=!0)),e?d.pathbrowser=a.extend({},f.pathbrowser):d.noPathbrowser=!0,c=a("<div>",{"class":"imageeditor-popover"}).html(this.editor.templates.get("map-popover")(d,this.getTemplateOptions())),a(".imageeditor-controls").append(c);var g=a(a(c).find(".pathbrowser"));g.length&&g.pathBrowser(d.pathbrowser),c.trigger("cui-contentloaded"),this.currentPopover=new CUI.Popover({element:c,pointFrom:"top",preventAutoHide:!0})},updateAndGetBoundingBoxDiv:function(b){var c,d=this.currentImageSelect.getBoundingBox(),e=this.getMapCont(b.element),f="imageeditor-map-polygon-bounding-box";return c=e.find("."+f),c.length||(c=a("<div/>",{"class":f}),c.css({position:"absolute"}),e.append(c)),c.css({top:d.top,left:d.left,width:d.width,height:d.height}),c},openPopover:function(b){var c;if(this.currentPopover&&this.currentImageSelect){c="polygon"===this.currentArea.shape?this.updateAndGetBoundingBoxDiv(b):this.currentImageSelect.$selection,this.currentPopover.set("pointAt",c).show();var d=this.currentPopover.get("element"),f=this.currentArea;e(f,d),d.on("click.map",".imageeditor-map-delete",a.proxy(this.removeCurrentSelection,this,b)).on("click.map",".imageeditor-map-unlaunch",a.proxy(this.metaDataAbort,this)).on("click.map",".imageeditor-map-confirm",a.proxy(this.metaDataConfirm,this))}},closePopover:function(){this.currentPopover&&(this.currentPopover.get("element").off(".map").find(":focus").blur(),this.closeSelect(),this.currentPopover.hide())},metaDataConfirm:function(a){if(this.currentPopover&&this.currentArea){var b=this.currentArea,c=this.currentPopover.get("element");d(b,c),this.closePopover()}},metaDataAbort:function(a){this.closePopover()},closeSelect:function(){var a=this.currentPopover.get("element").find(".coral-SelectList");a.length&&a.data("selectList").hide()},reposition:function(a){this.getMapCont(a).position({of:a,my:"left top",at:"left top",collision:"none"}),this.currentPopover&&this.currentPopover.get("visible")&&this.currentPopover.hide().show()},toCss:function(a,b,c){this.isActive&&this.reposition(b)}}),CUI.imageeditor.actions.Map.DEFAULT_OPTIONS={pathbrowser:{type:null,rootPath:"/",showTitles:!1,optionLoader:function(a){return[]},optionLoaderRoot:null,optionValueReader:function(a){return""+a},optionTitleReader:function(a){return""+a},pickerSrc:"/libs/wcm/core/content/common/pathbrowser/column.html/?predicate=hierarchyNotFile",pickerTitle:"Choose a target path",picketCrumbRoot:{title:"Root",icon:"coral-Icon-home"}}}}(jQuery,this),CUI.imageeditor.actions.ActionRegistry.register("map",CUI.imageeditor.actions.Map),function(a,b,c){"use strict";CUI.imageeditor.actions.History=new Class({toString:"History",extend:CUI.imageeditor.actions.Action,isAction:function(a){return"undo"===a||"redo"===a},execute:function(a){switch(a.action){case"undo":a.result.undo();break;case"redo":a.result.redo()}return!0},toCss:function(a,b,c){}})}(jQuery,this),CUI.imageeditor.actions.ActionRegistry.register("history",CUI.imageeditor.actions.History),function(a,b,c){"use strict";CUI.imageeditor.actions.Fullscreen=new Class({toString:"Fullscreen",extend:CUI.imageeditor.actions.Action,isAction:function(a){return"fullscreen"===a||"fullscreenexit"===a},execute:function(a){return!0},toCss:function(a,b,c){}})}(jQuery,this),CUI.imageeditor.actions.ActionRegistry.register("fullscreen",CUI.imageeditor.actions.Fullscreen),function(a,b,c){"use strict";var d="Zoom",e="zoom",f=e+"popupslider",g=e+"reset100";CUI.imageeditor.actions.Zoom=new Class({toString:d,extend:CUI.imageeditor.actions.Action,isAction:function(a){var b=a.toLowerCase();return b===f||b===g},execute:function(a){switch(a.action.toLowerCase()){case f:return this.popupSlider(a);case g:return this.reset100(a)}},popupSlider:function(a){this.popover&&this.popover.get("visible")?this.closeSliderPopover(a):this.openSliderPopover(a)},openSliderPopover:function(b){var c,d;this.clickTarget||(c=a("<div>",{"class":"imageeditor-clicktarget"}),a(".imageeditor-controls").append(c),c.on("click",this,this.clickTargetClicked),this.clickTarget=c),this.popover||(d=a("<div>",{"class":"imageeditor-popover imageeditor-toolbar-popover coral-Popover"}).html(this.editor.templates.get("zoomslider-popover")(this.getZoomLimits(b))),a(".imageeditor-controls").append(d),d.trigger("cui-contentloaded"),this.popover=new CUI.Popover({element:d,pointFrom:"bottom"}),this.getSlider().on("change",a.proxy(this.sliderChanged,this,b.value))),this.clickTarget.show(),this.getSlider().setValue(Math.round(100*b.editor.getZoomFactor())),this.popover.set("pointAt",b.ui.find(".coral-Icon--search:visible").closest(".coral-Button")).show()},getZoomLimits:function(a){var b=a.editor.getZoomLimits();return{zoomMin:Math.round(100*b[0]),zoomMax:Math.round(100*b[1])}},getSlider:function(){return a(this.popover.$element.find("div.coral-Slider")).data("slider")},closeSliderPopover:function(a){this.popover&&this.popover.hide(),this.clickTarget&&this.clickTarget.hide()},clickTargetClicked:function(a){a.stopPropagation(),setTimeout(function(){a.data.closeSliderPopover()},300)},reset100:function(a){a.editor.zoom(1)},sliderChanged:function(b,c){var d=a(c.target).val();b.editor.zoom(.01*d)},toCss:function(a,b,c){}}),CUI.imageeditor.actions.ActionRegistry.register(e,CUI.imageeditor.actions.Zoom)}(jQuery,this),function(a,b,c){"use strict";CUI.imageeditor.plugins.Plugin=new Class({features:null,pluginId:null,editor:null,config:null,construct:function(a,b){this._init(a,b)},_init:function(a,b){this.editor=a,this.pluginId=b},notifyPluginConfig:function(a){this.config=a},getFeatures:function(){return this.features},isFeatureEnabled:function(b){return a.inArray(b,this.getFeatures())!==-1&&(!this.config||!this.config.features||(a.isArray(this.config.features)?a.inArray(b,this.config.features)!==-1:"*"===this.config.features||"-"!==this.config.features))},initializeUI:function(a){},execute:function(a,b,c){},registerTransformFields:function(a){return null},getString:function(a){return this.editor.i18n.get(this.pluginId+"."+a)},getTooltip:function(a){return this.getString("toolbar."+a)}})}(jQuery,this),function(a,b,c){"use strict";CUI.imageeditor.plugins.PluginRegistry=function(){var a={};return{register:function(b,c){a[b]=c},createRegisteredPlugins:function(b){var c,d,e={};for(c in a)a.hasOwnProperty(c)&&(d=new a[c](b,c),d=CUI.imageeditor.Utils.onPluginCreated(d),e[c]=d);return e}}}()}(jQuery,this),function(a,b,c){"use strict";CUI.imageeditor.plugins.Crop=new Class({toString:"Crop",extend:CUI.imageeditor.plugins.Plugin,features:["launch","launchwithratio","unlaunch","confirm"],initializeUI:function(a){var b;this.isFeatureEnabled("launch")&&(b=a.createItem("launch",this.getTooltip("launch"),this),a.registerItem(b,"crop")),this.isFeatureEnabled("launchwithratio")&&(b=a.createItem("launchwithratio",this.getTooltip("launchwithratio"),this),a.registerItem(b,"crop")),b=a.createItem("identifier",this.getTooltip("identifier"),this),a.registerItem(b,"crop",CUI.imageeditor.Theme.TOOLBARITEM_SELECTED_CLASS),this.isFeatureEnabled("unlaunch")&&(b=a.createItem("unlaunch",this.getTooltip("unlaunch"),this),a.registerItem(b,"close")),this.isFeatureEnabled("confirm")&&(b=a.createItem("confirm",this.getTooltip("confirm"),this),a.registerItem(b,"check"))},execute:function(b,c){"launch"===b&&(a.each(this.editor.toolbars,function(a,b){b.switchToolbar(CUI.imageeditor.plugins.Crop.TOOLBAR_ID)}),this.editor.relayAction("croplaunch",c)),"launchwithratio"===b&&this.editor.relayAction("croplaunchwithratio",this),"unlaunch"===b&&(a.each(this.editor.toolbars,function(a,b){this.switchToPrimaryToolbar()}),this.editor.relayAction("cropunlaunch",c)),"confirm"===b&&(a.each(this.editor.toolbars,function(a,b){this.switchToPrimaryToolbar()}),this.editor.relayAction("cropconfirm",c)),"removecrop"===b&&this.editor.relayAction("cropremovecrop",c)},getAspectRatios:function(){if(a.isPlainObject(this.config)&&a.isArray(this.config.aspectRatios))return this.config.aspectRatios;var b=this,c=CUI.imageeditor.plugins.Crop.ASPECT_RATIOS;return a.map(c,function(a){return{ratio:a.ratio,name:b.getString("aspect_ratios."+a.name)}})},registerTransformFields:function(a){a.registerTransformField("crop")}})}(jQuery,this),CUI.imageeditor.plugins.Crop.TOOLBAR_ID="crop",CUI.imageeditor.plugins.Crop.ASPECT_RATIOS=[{name:"free_hand",ratio:0},{name:"2_to_3",ratio:.67},{name:"3_to_5",ratio:.6},{name:"16_to_9",ratio:.5625},{name:"square",ratio:1}],CUI.imageeditor.plugins.PluginRegistry.register("crop",CUI.imageeditor.plugins.Crop),function(a,b,c){"use strict";CUI.imageeditor.plugins.Rotate=new Class({toString:"Rotate",extend:CUI.imageeditor.plugins.Plugin,features:["left","right"],initializeUI:function(a){var b;this.isFeatureEnabled("left")&&(b=a.createItem("left",this.getTooltip("left"),this),a.registerItem(b,"rotateLeft")),this.isFeatureEnabled("right")&&(b=a.createItem("right",this.getTooltip("right"),this),a.registerItem(b,"rotateRight"))},execute:function(a,b){"right"===a&&this.editor.relayAction("rotateright",b),"left"===a&&this.editor.relayAction("rotateleft",b)},registerTransformFields:function(a){a.registerTransformField("rotate")}})}(jQuery,this),CUI.imageeditor.plugins.PluginRegistry.register("rotate",CUI.imageeditor.plugins.Rotate),function(a,b,c){"use strict";CUI.imageeditor.plugins.Flip=new Class({toString:"Flip",extend:CUI.imageeditor.plugins.Plugin,features:["horizontal","vertical"],initializeUI:function(a){var b;this.isFeatureEnabled("horizontal")&&(b=a.createItem("horizontal",this.getTooltip("horizontal"),this),a.registerItem(b,"reflectHorizontal")),this.isFeatureEnabled("vertical")&&(b=a.createItem("vertical",this.getTooltip("vertical"),this),a.registerItem(b,"reflectVertical"))},execute:function(a,b){switch(a){case"horizontal":this.editor.relayAction("fliphorizontal",b);break;case"vertical":this.editor.relayAction("flipvertical",b)}},registerTransformFields:function(a){a.registerTransformField("flip")}})}(jQuery,this),CUI.imageeditor.plugins.PluginRegistry.register("flip",CUI.imageeditor.plugins.Flip),function(a,b,c){"use strict";CUI.imageeditor.plugins.Map=new Class({toString:"Map",extend:CUI.imageeditor.plugins.Plugin,features:["launch","unlaunch","confirm","rectangle","circle","polygon"],initializeUI:function(a){var b;this.isFeatureEnabled("launch")&&(b=a.createItem("launch",this.getTooltip("launch"),this),a.registerItem(b,"imageMap")),this.isFeatureEnabled("rectangle")&&(b=a.createItem("rectangle",this.getTooltip("rectangle"),this),a.registerItem(b,"imageMapRectangle")),this.isFeatureEnabled("circle")&&(b=a.createItem("circle",this.getTooltip("circle"),this),a.registerItem(b,"imageMapCircle")),this.isFeatureEnabled("polygon")&&(b=a.createItem("polygon",this.getTooltip("polygon"),this),a.registerItem(b,"imageMapPolygon")),this.isFeatureEnabled("unlaunch")&&(b=a.createItem("unlaunch",this.getTooltip("unlaunch"),this),a.registerItem(b,"close")),this.isFeatureEnabled("confirm")&&(b=a.createItem("confirm",this.getTooltip("confirm"),this),a.registerItem(b,"check"))},execute:function(b,c){"launch"===b?(a.each(this.editor.toolbars,function(a,b){b.switchToolbar(CUI.imageeditor.plugins.Map.TOOLBAR_ID)}),this.editor.relayAction("maplaunch",c)):"unlaunch"===b||"confirm"===b?(a.each(this.editor.toolbars,function(a,b){this.switchToPrimaryToolbar()}),this.editor.relayAction("map"+b,c)):"rectangle"===b?this.editor.relayAction("maprectangle",c):"circle"===b?this.editor.relayAction("mapcircle",c):"polygon"===b&&this.editor.relayAction("mappolygon",c)},registerTransformFields:function(a){a.registerTransformField("map",[])}})}(jQuery,this),CUI.imageeditor.plugins.Map.TOOLBAR_ID="map",CUI.imageeditor.plugins.PluginRegistry.register("map",CUI.imageeditor.plugins.Map),function(a,b,c){"use strict";CUI.imageeditor.plugins.Control=new Class({toString:"Control",extend:CUI.imageeditor.plugins.Plugin,features:["close","finish"],initializeUI:function(a){var b;this.isFeatureEnabled("close")&&(b=a.createItem("close",this.getTooltip("close"),this),a.registerItem(b,"close",CUI.imageeditor.Theme.TOOLBARITEM_MODECHANGER_CLASS)),this.isFeatureEnabled("finish")&&(b=a.createItem("finish",this.getTooltip("finish"),this),a.registerItem(b,"check",CUI.imageeditor.Theme.TOOLBARITEM_MODECHANGER_CLASS))},execute:function(a,b,c){"close"===a?this.editor.cancel():"finish"===a&&this.editor.finish()}})}(jQuery,this),CUI.imageeditor.plugins.PluginRegistry.register("control",CUI.imageeditor.plugins.Control),function(a,b,c){"use strict";CUI.imageeditor.plugins.Fullscreen=new Class({toString:"Fullscreen",extend:CUI.imageeditor.plugins.Plugin,features:["fullscreen","fullscreenexit"],initializeUI:function(a){var b;this.isFeatureEnabled("fullscreen")&&(b=a.createItem("fullscreen",this.getTooltip("fullscreen"),this),a.registerItem(b,"fullScreen",CUI.imageeditor.Theme.TOOLBARITEM_MODECHANGER_CLASS)),this.isFeatureEnabled("fullscreenexit")&&(b=a.createItem("fullscreenexit",this.getTooltip("fullscreenexit"),this),a.registerItem(b,"fullScreenExit",CUI.imageeditor.Theme.TOOLBARITEM_MODECHANGER_CLASS))},execute:function(a,b){"fullscreen"===a?this.editor.switchToFullscreen():"fullscreenexit"===a&&this.editor.switchToInline()}})}(jQuery,this),CUI.imageeditor.plugins.PluginRegistry.register("fullscreen",CUI.imageeditor.plugins.Fullscreen),function(a,b,c){"use strict";CUI.imageeditor.plugins.History=new Class({toString:"History",extend:CUI.imageeditor.plugins.Plugin,features:["undo","redo"],initializeUI:function(a){var b;this.isFeatureEnabled("undo")&&(b=a.createItem("undo",this.getTooltip("undo"),this),this.notifyToolbarDecorator(b),a.registerItem(b,"undo",CUI.imageeditor.Theme.TOOLBARITEM_DISABLED_CLASS)),this.isFeatureEnabled("redo")&&(b=a.createItem("redo",this.getTooltip("redo"),this),this.notifyToolbarDecorator(b),
a.registerItem(b,"redo",CUI.imageeditor.Theme.TOOLBARITEM_DISABLED_CLASS)),this.transformResultDecorator()},execute:function(a,b){"undo"===a&&this.editor.relayAction("undo",b),"redo"===a&&this.editor.relayAction("redo",b)},transformResultDecorator:function(){var a=this,b=CUI.imageeditor.TransformResult.prototype.setTransformValue;(this.isFeatureEnabled("undo")||this.isFeatureEnabled("redo"))&&(CUI.imageeditor.TransformResult.prototype.setTransformValue=function(){var c;for(b.apply(this,arguments),c=a._observeHistory.undo.length-1;c>=0;c--)a._observeHistory.undo[c].toggleClass(CUI.imageeditor.Theme.TOOLBARITEM_DISABLED_CLASS,!this.history.length);for(c=a._observeHistory.redo.length-1;c>=0;c--)a._observeHistory.redo[c].toggleClass(CUI.imageeditor.Theme.TOOLBARITEM_DISABLED_CLASS,!this.future.length)})},notifyToolbarDecorator:function(a){var b=a.notifyToolbar,c=this;return this._observeHistory=this._observeHistory||{},this._observeHistory[a.id]=this._observeHistory[a.id]||[],a.notifyToolbar=function(){b.apply(this,arguments),c._observeHistory[a.id].push(this.$ui)},a}})}(jQuery,this),CUI.imageeditor.plugins.PluginRegistry.register("history",CUI.imageeditor.plugins.History),function(a,b,c){"use strict";var d="zoom",e="popupslider",f="search",g="reset100",h="compare";CUI.imageeditor.plugins.Zoom=new Class({toString:"Zoom",extend:CUI.imageeditor.plugins.Plugin,features:[e,g],initializeUI:function(a){var b;this.isFeatureEnabled(e)&&(b=a.createItem(e,this.getTooltip(e),this),a.registerItem(b,f)),this.isFeatureEnabled(g)&&(b=a.createItem(g,this.getTooltip(g),this),a.registerItem(b,h))},execute:function(a,b){a===e&&this.editor.relayAction(d+e,this),a===g&&this.editor.relayAction(d+g,this)},registerTransformFields:function(a){}}),CUI.imageeditor.plugins.Zoom.TOOLBAR_ID=d,CUI.imageeditor.plugins.PluginRegistry.register(d,CUI.imageeditor.plugins.Zoom)}(jQuery,this),function(a,b,c){"use strict";CUI.imageeditor.ui.ToolbarBuilder=new Class({toString:"ToolbarBuilder",groups:null,$editable:null,construct:function(a){this.registeredItems={},this.templates=a.templates},createItem:function(a,b,c){return new CUI.imageeditor.ui.ToolbarItem(a,b,c)},registerItem:function(b,c,d){b=a.extend({},b,{icon:c,addClasses:d}),this.registeredItems[b.action]=b},createToolbar:function(a,b){var c,d,e,f=a.$editable,g=this.getUIOptions(a,b);if(!b)throw new Error("ArgumentError - missing toolbar type");if(!g)return null;d=CUI.imageeditor.UIUtils.getToolbars(f,b),d&&0!==d.length||this._buildToolbar(f,g,b),c=new CUI.imageeditor.ui.Toolbar(f,b);for(e in this.registeredItems)this.registeredItems.hasOwnProperty(e)&&this.registeredItems[e].notifyToolbar(c);return c},_buildToolbar:function(b,c,d){var e=this.templates.get("toolbar"),f=this.templates.get("toolbar-item"),g=[];g=[];var h,i,j=c.replacementToolbars;for(h in j)j.hasOwnProperty(h)&&(i=j[h],g.push(e({ref:i.ref||h,toolbarItems:this.getToolbarItemHTML(i.items||i,f)})));var k=a(this.templates.get("toolbars")({type:d,toolbar:e({ref:"primary",toolbarItems:this.getToolbarItemHTML(c.toolbar,f)}),replacementToolbars:g})),l=CUI.imageeditor.UIUtils.getUIContainer(b),m=CUI.imageeditor.UIUtils.getToolbarContainer(l,d);a(m).append(k)},getUIOptions:function(a,b){return a&&a.ui?a.ui[b]:CUI.imageeditor.ui.DEFAULT_OPTIONS[b]},getToolbarItemHTML:function(b,c){var d,e,f,g;if(a.isArray(b))g=a.isArray(b[0])?{left:b[0],right:b.length>1?b[1]:[]}:{left:b,right:[]};else if(g={left:b.left?b.left:[],right:b.right?b.right:[]},!a.isArray(b.left)||!a.isArray(b.right))throw new Error("Argument error: Expecting object {left:[], right:[]}");for(e={left:[],right:[]},d=0;d<g.left.length;d++)f=this.registeredItems[g.left[d]],f&&e.left.push(a.trim(c(f)));for(d=0;d<g.right.length;d++)f=this.registeredItems[g.right[d]],f&&e.right.push(a.trim(c(f)));return e}})}(jQuery,this),CUI.imageeditor.ui.DEFAULT_OPTIONS={inline:{toolbar:["crop#launch","rotate#left","rotate#right","flip#vertical","flip#horizontal","history#undo","history#redo","fullscreen#fullscreen","control#close"],replacementToolbars:{crop:["crop#identifier","crop#unlaunch","crop#confirm"]}},fullscreen:{toolbar:{left:["crop#launchwithratio","rotate#left","rotate#right","flip#vertical","flip#horizontal","map#launch","zoom#reset100","zoom#popupslider"],right:["history#undo","history#redo","fullscreen#fullscreenexit"]},replacementToolbars:{crop:{left:["crop#identifier"],right:["crop#unlaunch","crop#confirm"]},map:{left:["map#rectangle","map#circle","map#polygon"],right:["map#unlaunch","map#confirm"]}}}},function(a,b,c){"use strict";CUI.imageeditor.ui.Toolbar=new Class({toString:"Toolbar",$ui:null,$editable:null,$container:null,$toolbars:null,construct:function(a,b){if(!b)throw new Error("ArgumentError - missing toolbar type");this.tbType=b,this.$editable=a,this.$ui=CUI.imageeditor.UIUtils.getUIContainer(this.$editable),this.$container=CUI.imageeditor.UIUtils.getToolbarContainer(this.$ui,b),this.$toolbars=CUI.imageeditor.UIUtils.getToolbars(this.$editable,this.tbType),this.autoSetToolbarWidths(),this.switchToPrimaryToolbar()},autoSetToolbarWidths:function(){var b=this;this.$toolbars.each(function(){var d=a(this).data("id");d!==c&&b.autoSetToolbarWidth(d)})},autoSetToolbarWidth:function(a){this.showToolbar(a),this.setToolbarWidth(a,this.calcToolbarWidth(a)),this.hideToolbar(a)},setToolbarWidth:function(a,b){var c=this.getToolbar(a);null!==c&&c.width(b)},calcToolbarWidth:function(b){var c=this.getToolbar(b),d=0;return c.children().each(function(){d+=a(this).outerWidth(!0)}),d},show:function(){this.$container.addClass(CUI.imageeditor.Theme.IMAGEEDITOR_HIDDEN_CLASS)},hide:function(){this.$container.addClass(CUI.imageeditor.Theme.IMAGEEDITOR_HIDDEN_CLASS)},isHidden:function(){return this.$container.hasClass(CUI.imageeditor.Theme.IMAGEEDITOR_HIDDEN_CLASS)},getContainer:function(){return this.$container},getToolbar:function(b){var c=null;return this.$toolbars.each(function(){if(a(this).data("id")===b)return void(c=a(this))}),c},getToolbars:function(){return this.$toolbars},switchToPrimaryToolbar:function(){this.switchToolbar(CUI.imageeditor.ui.Toolbar.PRIMARY_TOOLBAR_ID)},switchToolbar:function(a){this.hideToolbars(),this.showToolbar(a)},showToolbar:function(b){var c=this.getToolbar(b);null!==c&&a(c).removeClass(CUI.imageeditor.Theme.IMAGEEDITOR_HIDDEN_CLASS)},hideToolbar:function(b){var c=this.getToolbar(b);null!==c&&a(c).addClass(CUI.imageeditor.Theme.IMAGEEDITOR_HIDDEN_CLASS)},hideToolbars:function(){this.$toolbars.each(function(){a(this).addClass(CUI.imageeditor.Theme.IMAGEEDITOR_HIDDEN_CLASS)})},startEditing:function(){this.show()},finishEditing:function(){this.hide()}})}(jQuery,this),CUI.imageeditor.ui.Toolbar.PRIMARY_TOOLBAR_ID="primary",function(a,b,c){"use strict";CUI.imageeditor.ui.ToolbarItem=new Class({toString:"ToolbarItem",$ui:null,id:null,plugin:null,title:null,toolbar:null,construct:function(a,b,c){this._init.apply(this,arguments)},_init:function(a,b,c){this.id=a,this.title=b,this.plugin=c,this.action=this.plugin.pluginId+"#"+this.id},notifyToolbar:function(b){var c=this,d=null;this.toolbar=b,d=a(b.getContainer()),this.$ui=d.find('button[data-action="'+this.action+'"]'),this.tapOrClickHandler=CUI.imageeditor.UIUtils.handleTapOrClick(this.$ui,function(a){a.stopImmediatePropagation(),c.$ui.hasClass(CUI.imageeditor.Theme.TOOLBARITEM_DISABLED_CLASS)||c.plugin.execute(c.id),this.blur()},{eventNamespace:"imageeditor-handler"})},createToolbarDef:function(){return{id:this.id,element:this}},destroy:function(){this.tapOrClickHandler&&this.tapOrClickHandler.off()}})}(jQuery,this),jQuery.fn.polygon=function(a){"use strict";var b=function(a){return!isNaN(a)},c=function(a,b){this.$element=a,this.loadOpts(b)};c.prototype.defaults={points:[]},c.prototype.loadOpts=function(b){this.options=a.extend({},this.defaults,b),this.options.points&&(this.points=this.readPoints(this.options.points))},c.prototype.readPoints=function(a){var c,d,e,f=[];if(a&&a.length)for(c=0;c<a.length;c++)d=a[c],b(d.w)&&b(d.h)&&(e={w:parseInt(d.w,10),h:parseInt(d.h,10)},f.push(e));return f},c.prototype.clearCanvas=function(a){var b=this.getCanvas(a),c=this.get2dContext(a);c.clearRect(0,0,b.width,b.height)},c.prototype.get2dContext=function(a){return this.getCanvas(a).getContext("2d")},c.prototype.getCanvas=function(a){var b=this.$element;return a&&(b=a),b.length?b[0]:b},c.prototype.paintPolygon=function(a){this.paintPolygonWithPoints(null,null,a)},c.prototype.paintPolygonWithPoints=function(b,c,d){b=this.getCanvas(b);var e,f,g=this.get2dContext(b),h=!1;if(c=c||this.points,d=a.extend({strokeStyle:"#000",fillStyle:null,lineWidth:1,lineJoin:"round"},d),c&&c.length){for(g.beginPath(),e=c[0],g.moveTo(e.w,e.h),h=!0,f=1;f<c.length;f++)e=c[f],g.lineTo(e.w,e.h);g.closePath()}h&&(d.strokeStyle&&(g.lineWidth=d.lineWidth,g.strokeStyle=d.strokeStyle,g.lineJoin=d.lineJoin,g.stroke()),d.fillStyle&&(g.fillStyle=d.fillStyle,g.fill()))},c.prototype.getPoints=function(){return this.points.slice()},c.prototype.setPoints=function(a){this.points=a},c.prototype.isCoordsInBoundingBox=function(a,b,c){var d=null;return d=a&&"undefined"!=typeof a.left?a:this.getBoundingBox(a),b>=d.left&&b<=d.left+d.width&&c>=d.top&&c<=d.top+d.height},c.prototype.getBoundingBox=function(a){var b,c,d=a||this.points,e={top:Number.MAX_VALUE,bottom:Number.MIN_VALUE,left:Number.MAX_VALUE,right:Number.MIN_VALUE};if(!d||d.length<1)throw new Error("Cannot define bounding box if there are no points, handle this case differently");for(b=0;b<d.length;b++)c=d[b],c.w<e.left&&(e.left=c.w),c.w>e.right&&(e.right=c.w),c.h<e.top&&(e.top=c.h),c.h>e.bottom&&(e.bottom=c.h);return e.width=e.right-e.left,e.height=e.bottom-e.top,e},c.prototype.isPointInsideOrOnEdgeOfPolygon=function(a,b){var c,d,e,f,g,h=[[-6e7,a[1]],a];if(!b||b.length<3)return!1;for(d=0,f=b[b.length-1],g=0;g<b.length;g++){if(c=[f,b[g]],this.isPointOnLineSegment(a,c[0],c[1]))return!0;e=this.intersectSegments(h,c),null!=e&&d++,f=b[g]}return d>0&&d%2===1},c.prototype.intersectSegments=function(a,b){var c=a[0],d=a[1],e=b[0],f=b[1],g=this.intersectLines(a,b);return null==g?null:g===!0?this.isWithin(e,c,f)?this.isWithin(e,d,f)?[c,d]:this.isWithin(c,e,d)?[c,e]:[c,f]:this.isWithin(e,d,f)?this.isWithin(c,e,d)?[d,e]:[d,f]:this.isWithin(c,e,d)?this.isWithin(c,f,d)?[e,f]:this.isWithin(e,c,f)?[e,c]:[e,d]:this.isWithin(c,f,d)?this.isWithin(e,c,f)?[c,f]:[d,f]:null:this.isPointOnLineSegment(g,a[0],a[1])&&this.isPointOnLineSegment(g,b[0],b[1])?g:null},c.prototype.intersectLines=function(a,b){if(2!==a.length||2!==b.length)throw new Error("Arguments invalid: Please pass 2 arrays of two vectors each");var c,d,e,f,g,h=a[0],i=a[1],j=b[0],k=b[1],l=[i[0]-h[0],i[1]-h[1]],m=[k[0]-j[0],k[1]-j[1]],n=this.vectorsEqual(l,[0,0]),o=this.vectorsEqual(m,[0,0]);return n?o?this.vectorsEqual(h,j)?h:null:this.isThreePointsOnOneLine(j,k,h)?h:null:o?this.isThreePointsOnOneLine(h,i,j)?j:null:0===l[0]&&0===m[0]||0===l[1]&&0===m[1]||this.floatsEqual(l[0]/m[0],l[1]/m[1])?!!this.isThreePointsOnOneLine(h,i,j)||null:(d=l[0]*(h[1]-j[1])+l[1]*(j[0]-h[0]),e=l[0]*m[1]-l[1]*m[0],c=d/e,f=j[0]+c*m[0],g=j[1]+c*m[1],[f,g])},c.prototype.filterLineSegmentsNextToPointAndSortByDistance=function(a,b){var c,d,e,f,g=[];for(c=0;c<b.length;c++)d=b[c],e=this.projectPointOntoLine(a,d[0],d[1]),this.isPointOnLineSegment(e,d[0],d[1])&&(f=[e[0]-a[0],e[1]-a[1]],g.push({line:d,projection:e,distance:this.vectorNorm(f)}));return g.sort(function(a,b){return a.distance-b.distance}),g},c.prototype.projectPointOntoLine=function(a,b,c){var d,e,f;return b[0]===c[0]&&b[1]===c[1]?[b[0]-a[0],b[1]-a[1]]:(d=[b[0]-c[0],b[1]-c[1]],e=0===d[1]?[0,1]:[1,-1*(d[0]/d[1])],f=(e[1]*(b[0]-a[0])+e[0]*(a[1]-b[1]))/(e[0]*d[1]-e[1]*d[0]),[b[0]+f*d[0],b[1]+f*d[1]])},c.prototype.isPointOnLineSegment=function(a,b,c){return!!this.isThreePointsOnOneLine(a,b,c)&&(b[0]!==c[0]?this.isWithin(b[0],a[0],c[0]):this.isWithin(b[1],a[1],c[1]))},c.prototype.isThreePointsOnOneLine=function(a,b,c){return this.floatsEqual((b[0]-a[0])*(c[1]-a[1]),(c[0]-a[0])*(b[1]-a[1]))},c.prototype.isWithin=function(a,b,c){return a<=b&&b<=c||c<=b&&b<=a},c.prototype.floatsEqual=function(a,b,c){return"undefined"==typeof c&&(c=1e-9),a===b||Math.abs((a-b)/b)<=c},c.prototype.vectorNorm=function(a){return Math.sqrt(this.dotProduct(a,a))},c.prototype.dotProduct=function(a,b){var c,d=0;if(a.length!==b.length)throw new Exception("a and b have differing length");for(c=0;c<a.length;c++)d+=a[c]*b[c];return d},c.prototype.pointsToVectors=function(a){var b,c;if("object"==typeof a){if("undefined"!=typeof a.length){for(b=[],c=0;c<a.length;c++)b.push(this.pointsToVectors(a[c]));return b}return"undefined"!=typeof a.w?[a.w,a.h]:[a.x,a.y]}},c.prototype.vectorsEqual=function(a,b){var c;if(a.length!==b.length)return!1;for(c=0;c<a.length;c++)if(!this.floatsEqual(a[c],b[c]))return!1;return!0},c.prototype.pointsToLineSegmentsWithVectors=function(a){var b,c=this.pointsToVectors(a),d=[];if(!c||c.length<2)return[];if(2===c.length)return d.push([c[0],c[1]]),d;for(b=1;b<c.length;b++)d.push([c[b-1],c[b]]);return d.push([c[c.length-1],c[0]]),d};var d=function(b){return b=b||{},this.each(function(){var d=a(this),e=d.data("polygon");b.call?e&&e[b.call].call(e,b):e?e.loadOpts(b):(e=new c(d,b),d.data("polygon",e))}),b&&b.instance?this.eq(0).data("polygon"):this};return d}(jQuery),jQuery.fn.imageSelect=function(a){"use strict";var b={NAMESPACE:".imageSelect"};b.CLICK="click"+b.NAMESPACE,b.RESIZE="resize"+b.NAMESPACE,b.MOUSEDOWN="touchstart"+b.NAMESPACE+" mousedown"+b.NAMESPACE,b.MOUSEUP="touchend"+b.NAMESPACE+" touchcancel"+b.NAMESPACE+" mouseup"+b.NAMESPACE,b.MOUSEMOVE="touchmove"+b.NAMESPACE+" mousemove"+b.NAMESPACE,b.OPEN="open",b.CLOSE="close",b.UPDATE="update",b.SECOND_CLICK="second_click";var c=2,d=50,e=["rectangle","ellipse"],f=function(a){return!isNaN(a)},g=function(a){return a.stopPropagation(),a.preventDefault(),!1},h=function(a){return a.originalEvent.touches?{x:a.originalEvent.touches[0].pageX,y:a.originalEvent.touches[0].pageY}:{x:a.pageX,y:a.pageY}},i=function(a,b,c,d){return a.width=Math.min(b.width,a.width),a.height=Math.min(b.height,a.height),"undefined"!=typeof c&&(a.width=Math.max(c.width,a.width),a.height=Math.max(c.height,a.height)),"undefined"!=typeof d&&0!==d&&(a.height>Math.round(a.width*d)?a.height=Math.floor(a.width*d):a.width=Math.floor(a.height/d)),a.left=Math.max(b.left,a.left),a.left=Math.min(b.left+b.width-a.width,a.left),a.top=Math.max(b.top,a.top),a.top=Math.min(b.top+b.height-a.height,a.top),a},j=/matrix\(([^,]+), ([^,]+), ([^,]+), ([^,]+), ([^,]+), ([^,]+)\)/,k=/matrix3d\(([^,]+), ([^,]+), ([^,]+), ([^,]+), ([^,]+), ([^,]+), ([^,]+), ([^,]+), ([^,]+), ([^,]+), ([^,]+), ([^,]+), ([^,]+), ([^,]+), ([^,]+), ([^,]+)\)/,l=function(a){var b=parseFloat(a);if(isNaN(b))throw new Error("Number is not a float");return Math.round(b)},m=function(b){var c,d=a(b).css("transform");try{if(c=d.match(j))return[[l(c[1]),l(c[2])],[l(c[3]),l(c[4])]];if(c=d.match(k))return[[l(c[1]),l(c[5])],[l(c[2]),l(c[6])]];if("none"===d)return[[1,0],[0,1]]}catch(e){}return window.console&&window.console.log&&window.console.log("ImageEditor: Could not parse matrix string",d),[[1,0],[0,1]]},n=function(b,c){if(2!==b.length||2!==b[0].length||2!==b[1].length)throw new Error("Expecting 2x2 matrix");if(void 0===c.x||void 0===c.y)throw new Error("Expecting point to be object like {x: 0, y: 0}");return a.extend({},c,{x:c.x*b[0][0]+c.y*b[0][1],y:c.x*b[1][0]+c.y*b[1][1]})},o=function(a){try{var b=a.match(/matrix\(([^)]+)\)/);if(b){for(var c=b[1],d=c.split(/, ?/),e=[],f=0;f<d.length;f++){var g=d[f];if(g.indexOf("e")>-1||g.indexOf("E")>-1){var h=parseFloat(g);if(isNaN(h))throw new Error("Not a number: '"+g+"'");e.push(""+h.toFixed(19))}else e.push(g)}return"matrix("+e.join(", ")+")"}}catch(i){}return a},p=function(a,b){this.$element=a,this.open(b)};p.prototype.defaults={classPrefix:"image-select-",parent:null,min:40,selection:null},p.prototype.init=function(b){this.options=a.extend({},this.defaults,b),this.matrix=m(this.$element),this.canvas=this.options.canvas||this.canvas||{top:0,left:0,width:this.$element.width(),height:this.$element.height()},this.readSelectionFromOptions(),this.readAspectRatioFromOptions(),i(this.selection,this.canvas,this.min,this.aspectRatio)},p.prototype.readSelectionFromOptions=function(){a.inArray(this.options.shape,e)===-1?this.shape=e[0]:this.shape=this.options.shape;var b=this.options.selection;b&&f(b.top)&&f(b.height)&&f(b.left)&&f(b.width)?this.selection={top:parseInt(b.top,10),left:parseInt(b.left,10),width:parseInt(b.width,10),height:parseInt(b.height,10)}:this.selection=this.selection||{top:this.canvas.top+50,left:this.canvas.left+50,width:this.canvas.width-100,height:this.canvas.height-100}},p.prototype.readAspectRatioFromOptions=function(){var a=this.options.min;this.options.aspectRatio&&(this.aspectRatio=parseFloat(this.options.aspectRatio)),this.aspectRatio||(this.aspectRatio=0),this.fixedAspectRatio=0!==this.aspectRatio,this.fixedAspectRatio?this.aspectRatio>1?this.min={width:a,height:a*this.aspectRatio}:this.min={width:a/this.aspectRatio,height:a}:this.min={width:a,height:a}},p.prototype.cssClass=function(a){return this.options.classPrefix+a},p.prototype.createDiv=function(b){return a("<div>").addClass(this.cssClass(b))},p.prototype.buildUI=function(){if(this.$holder=this.createDiv("holder").css({width:this.$element.width(),height:this.$element.height()}).addClass(this.cssClass(this.shape)),this.$backdrop=this.createDiv("backdrop").css({width:this.canvas.width,height:this.canvas.height,top:this.canvas.top,left:this.canvas.left}),this.$holder.append(this.$backdrop),this.$selection=this.createDiv("selection"),this.$holder.append(this.$selection),this.handleDragging(this.$selection,this.handleCenter),"rectangle"===this.shape){var c=this.createDiv("guideline").addClass(this.cssClass("guideline-vertical"));this.$selection.append(c);var d=this.createDiv("guideline").addClass(this.cssClass("guideline-horizontal"));this.$selection.append(d),this.fixedAspectRatio||(this.createHandle({top:"0",left:"50%"},this.handleTop),this.createHandle({top:"50%",left:"100%"},this.handleRight),this.createHandle({top:"100%",left:"50%"},this.handleBottom),this.createHandle({top:"50%",left:"0"},this.handleLeft)),this.createHandle({top:"0",left:"100%"},this.handleTopRight),this.createHandle({top:"100%",left:"100%"},this.handleBottomRight),this.createHandle({top:"100%",left:"0"},this.handleBottomLeft),this.createHandle({top:"0",left:"0"},this.handleTopLeft)}else"ellipse"===this.shape&&this.createHandle({top:"86%",left:"86%"},this.handleBottomRight);this.updateUI(!1),this.options.parent?a(this.options.parent).append(this.$holder):this.$element.after(this.$holder),this.repositionUI(),this.options.applyTransformations&&this.applyTransformationsToUI(),this.$element.trigger(b.OPEN,this),this.$backdrop.on(b.CLICK,g),this.$selection.on(b.CLICK,this,g),a(window).on(b.RESIZE,this,this.repositionUI)},p.prototype.repositionUI=function(a){var b=a?a.data:this;b.$holder.position({of:b.$element,at:"center",my:"center"})},p.prototype.applyTransformationsToUI=function(a){var b=o(this.$element.css("transform"));if(this.$holder.css({transform:b,"-webkit-transform":b}),0===n(this.matrix,{x:1,y:0}).x){var c=(this.$element.width()-this.$element.height())/2;this.$holder.css({"margin-top":+c,"margin-right":-c,"margin-bottom":+c,"margin-left":-c})}},p.prototype.ensureSelectionIsInReasonableBounds=function(a){a.width=Math.max(this.min.width,a.width),a.width=Math.min(this.canvas.width,a.width),a.height=Math.max(this.min.height,a.height),a.height=Math.min(this.canvas.height,a.height),a.top=Math.max(this.canvas.top,a.top),a.top=Math.min(this.canvas.top+this.canvas.height-a.height,a.top),a.left=Math.max(this.canvas.left,a.left),a.left=Math.min(this.canvas.left+this.canvas.width-a.width,a.left)},p.prototype.enforceAspectRatio=function(a,b){return this.fixedAspectRatio?(a.height>Math.round(a.width*this.aspectRatio)?a.height=Math.floor(a.width*this.aspectRatio):a.width=Math.floor(a.height/this.aspectRatio),b&&b.call(this),a):a},p.prototype.updateUI=function(d){this.previousSelection&&this.previousSelection.top===this.selection.top&&this.previousSelection.left===this.selection.left&&this.previousSelection.width===this.selection.width&&this.previousSelection.height===this.selection.height||(this.$backdrop&&this.$backdrop.css({"border-top-width":this.selection.top-this.canvas.top,"border-right-width":this.canvas.left+this.canvas.width-(this.selection.left+this.selection.width),"border-bottom-width":this.canvas.top+this.canvas.height-(this.selection.top+this.selection.height),"border-left-width":this.selection.left-this.canvas.left}),this.$selection&&this.$selection.css({top:this.selection.top-c+"px",left:this.selection.left-c+"px",width:this.selection.width+"px",height:this.selection.height+"px"}),this.previousSelection=a.extend({},this.selection),d!==!1&&this.$element.trigger(b.UPDATE,this.getSelection()))},p.prototype.createHandle=function(a,b){var c=this.createDiv("handle").css(a);this.$selection.append(c),this.handleDragging(c,b)},p.prototype.handleDragging=function(c,e){var f=this;c.on(b.MOUSEDOWN,function(g){if(1===g.which||0===g.which){g.preventDefault(),g.stopPropagation();var i={},j=h(g),k=a.extend({},f.selection);a("body").on(b.MOUSEMOVE,function(a){a.preventDefault();var b=h(a);i.x=b.x-j.x,i.y=b.y-j.y,i.timeout||(i.timeout=setTimeout(function(){delete i.timeout,i.moved=!0,f.handleDrag(n(f.matrix,i),k,e)},d))}).one(b.MOUSEUP,function(){a(this).off(b.MOUSEMOVE).off(b.MOUSEUP),f.showAllHandles(),i.moved||f.$element.trigger(b.SECOND_CLICK,f)}),f.hideOtherHandles(c)}})},p.prototype.hideOtherHandles=function(a){this.$selection.find("."+this.cssClass("handle")).not(a).addClass(this.cssClass("handle-other")),a.addClass(this.cssClass("handle-selected"))},p.prototype.showAllHandles=function(){this.$selection.find("."+this.cssClass("handle")).removeClass(this.cssClass("handle-other")).removeClass(this.cssClass("handle-selected"))},p.prototype.handleDrag=function(a,b,c){var d=c.call(this,a,b);d&&(this.selection.top=Math.round(d.top),this.selection.left=Math.round(d.left),this.selection.width=Math.round(d.width),this.selection.height=Math.round(d.height),this.updateUI())},p.prototype.handleTop=function(b,c){var d=a.extend({},c);return d.top=d.top+b.y,d.top=Math.max(this.canvas.top,d.top),d.top=Math.min(c.top+c.height-this.min.height,d.top),d.height=c.top+d.height-d.top,d},p.prototype.handleTopRight=function(a,b){var c=this.handleTop(a,this.handleRight(a,b));return this.enforceAspectRatio(c,function(){c.top=b.top-(c.height-b.height)}),c},p.prototype.handleRight=function(b,c){var d=a.extend({},c);return d.width=d.width+b.x,d.width=Math.max(this.min.width,d.width),d.width=Math.min(this.canvas.left+this.canvas.width-c.left,d.width),d},p.prototype.handleBottomRight=function(a,b){var c=this.handleBottom(a,this.handleRight(a,b));return this.enforceAspectRatio(c),c},p.prototype.handleBottom=function(b,c){var d=a.extend({},c);return d.height=d.height+b.y,d.height=Math.max(this.min.height,d.height),d.height=Math.min(this.canvas.top+this.canvas.height-c.top,d.height),d},p.prototype.handleBottomLeft=function(a,b){var c=this.handleBottom(a,this.handleLeft(a,b));return this.enforceAspectRatio(c,function(){c.left=b.left-(c.width-b.width)}),c},p.prototype.handleLeft=function(b,c){var d=a.extend({},c);return d.left=d.left+b.x,d.left=Math.max(this.canvas.left,d.left),d.left=Math.min(c.left+c.width-this.min.width,d.left),d.width=c.left+d.width-d.left,d},p.prototype.handleTopLeft=function(a,b){var c=this.handleTop(a,this.handleLeft(a,b));return this.enforceAspectRatio(c,function(){c.left=b.left-(c.width-b.width),c.top=b.top-(c.height-b.height)}),c},p.prototype.handleCenter=function(b,c){var d=a.extend({},c);return d.top=d.top+b.y,d.top=Math.max(this.canvas.top,d.top),d.top=Math.min(this.canvas.top+this.canvas.height-c.height,d.top),d.left=d.left+b.x,d.left=Math.max(this.canvas.left,d.left),d.left=Math.min(this.canvas.left+this.canvas.width-c.width,d.left),d},p.prototype.destroyUI=function(){a(window).off(b.RESIZE),void 0!==this.$holder&&(this.$holder.off(b.CLICK),this.$holder.remove()),delete this.$holder,delete this.$backdrop,delete this.$selection,delete this.previousSelection},p.prototype.open=function(a){a=a||{},this.opened&&this.destroyUI(),this.init(a),this.buildUI(),this.opened=!0},p.prototype.close=function(){this.opened&&(this.destroyUI(),this.opened=!1,this.$element.trigger(b.CLOSE,this))},p.prototype.destroy=function(){this.close(),this.$element.data("image-select",null)},p.prototype.getSelection=function(){return{top:this.selection.top,left:this.selection.left,width:this.selection.width,height:this.selection.height}};var q=function(b){return b=b||{},this.each(function(){var c=a(this),d=c.data("image-select");b.call?d&&d[b.call].call(d,b):d?d.open(b):(d=new p(c,b),c.data("image-select",d))}),b&&b.instance?this.eq(0).data("image-select"):this};return q.moveSelectionIntoCanvas=i,q}(jQuery),jQuery.fn.imageSelectPolygon=function(a){"use strict";var b={NAMESPACE:".imageSelect"};b.CLICK="click"+b.NAMESPACE,b.RESIZE="resize"+b.NAMESPACE,b.MOUSEDOWN="touchstart"+b.NAMESPACE+" mousedown"+b.NAMESPACE,b.MOUSEUP="touchend"+b.NAMESPACE+" touchcancel"+b.NAMESPACE+" mouseup"+b.NAMESPACE,b.MOUSEMOVE="touchmove"+b.NAMESPACE+" mousemove"+b.NAMESPACE,b.OPEN="open",b.CLOSE="close",b.UPDATE="update",b.SECOND_CLICK="second_click",b.DESELECT_CLICK="deselect_click";var c=20,d=50,e=["polygon"],f=function(a){return!isNaN(a)},g=function(a){return a.originalEvent.touches?{x:a.originalEvent.touches[0].pageX,y:a.originalEvent.touches[0].pageY}:{x:a.pageX,y:a.pageY}},h=function(a,b,c,d){return a.width=Math.min(b.width,a.width),a.height=Math.min(b.height,a.height),"undefined"!=typeof c&&(a.width=Math.max(c.width,a.width),a.height=Math.max(c.height,a.height)),"undefined"!=typeof d&&0!==d&&(a.height>Math.round(a.width*d)?a.height=Math.floor(a.width*d):a.width=Math.floor(a.height/d)),a.left=Math.max(b.left,a.left),a.left=Math.min(b.left+b.width-a.width,a.left),a.top=Math.max(b.top,a.top),a.top=Math.min(b.top+b.height-a.height,a.top),a},i=/matrix\(([^,]+), ([^,]+), ([^,]+), ([^,]+), ([^,]+), ([^,]+)\)/,j=/matrix3d\(([^,]+), ([^,]+), ([^,]+), ([^,]+), ([^,]+), ([^,]+), ([^,]+), ([^,]+), ([^,]+), ([^,]+), ([^,]+), ([^,]+), ([^,]+), ([^,]+), ([^,]+), ([^,]+)\)/,k=function(a){var b=parseFloat(a);if(isNaN(b))throw new Error("Number is not a float");return Math.round(b)},l=function(b){var c,d=a(b).css("transform");try{if(c=d.match(i))return[[k(c[1]),k(c[2])],[k(c[3]),k(c[4])]];if(c=d.match(j))return[[k(c[1]),k(c[5])],[k(c[2]),k(c[6])]];if("none"===d)return[[1,0],[0,1]]}catch(e){}return window.console&&window.console.log&&window.console.log("ImageEditor: Could not parse matrix string",d),[[1,0],[0,1]]},m=function(b,c){if(2!==b.length||2!==b[0].length||2!==b[1].length)throw new Error("Expecting 2x2 matrix");if(void 0===c.x||void 0===c.y)throw new Error("Expecting point to be object like {x: 0, y: 0}");return a.extend({},c,{x:c.x*b[0][0]+c.y*b[0][1],y:c.x*b[1][0]+c.y*b[1][1]})},n=function(a){try{var b=a.match(/matrix\(([^)]+)\)/);if(b){for(var c=b[1],d=c.split(/, ?/),e=[],f=0;f<d.length;f++){var g=d[f];if(g.indexOf("e")>-1||g.indexOf("E")>-1){var h=parseFloat(g);if(isNaN(h))throw new Error("Not a number: '"+g+"'");e.push(""+h.toFixed(19))}else e.push(g)}return"matrix("+e.join(", ")+")"}}catch(i){}return a},o=function(a,b){this.$element=a,this.open(b)};o.prototype.defaults={classPrefix:"image-select-",parent:null,min:40,points:[]},o.prototype.init=function(b){this._ignoreHolderClickUntil=null,this.distanceFromLineForAddPointDetection=10,this.options=a.extend({},this.defaults,b),this.matrix=l(this.$element),this.canvas=this.options.canvas||this.canvas||{top:0,left:0,width:this.$element.width(),height:this.$element.height()},this.readSelectionFromOptions()},o.prototype.readSelectionFromOptions=function(){a.inArray(this.options.shape,e)===-1?this.shape=e[0]:this.shape=this.options.shape;var b=this.readPoints(this.options.points);b&&b.length?this.points=b:this.points=this.points||[{w:this.canvas.left+Math.round(.5*this.canvas.width),h:this.canvas.top+Math.round(1*this.canvas.height/3)},{w:this.canvas.left+Math.round(2*this.canvas.width/3),h:this.canvas.top+Math.round(2*this.canvas.height/3)},{w:this.canvas.left+Math.round(1*this.canvas.width/3),h:this.canvas.top+Math.round(2*this.canvas.height/3)}]},o.prototype.readPoints=function(a){var b,c,d,e=[];if(a&&a.length)for(b=0;b<a.length;b++)c=a[b],f(c.w)&&f(c.h)&&(d={w:parseInt(c.w,10),h:parseInt(c.h,10)},e.push(d));return e},o.prototype.cssClass=function(a){return this.options.classPrefix+a},o.prototype.createDiv=function(b){return a("<div>").addClass(this.cssClass(b))},o.prototype.buildUI=function(){var c=this,d=this.createDiv("polygon-helper").css({});this.$holder=this.createDiv("holder").css({width:this.$element.width(),height:this.$element.height()}).addClass(this.cssClass(this.shape)),this.$holder.append(d),this.$drawCanvas=a("<canvas/>").css({width:this.canvas.width+"px",height:this.canvas.height+"px",top:this.canvas.top,left:this.canvas.left}),this.$drawCanvas[0].height=this.canvas.height,this.$drawCanvas[0].width=this.canvas.width,this.$holder.append(this.$drawCanvas),this.polygonTool=this.$drawCanvas.polygon().data("polygon"),this.movePolygonIntoCanvas(),this.updateUI(!1),this.options.parent?a(this.options.parent).append(this.$holder):this.$element.after(this.$holder),this.handleDragging(this.$drawCanvas,function(a,b){c.updatePoints(a,b)}),this.$holder.on("click",function(a){c._ignoreHolderClickUntil&&(new Date).getTime()<=c._ignoreHolderClickUntil&&(a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation(),c._ignoreHolderClickUntil=null)}),this.repositionUI(),this.options.applyTransformations&&this.applyTransformationsToUI(),this.$element.trigger(b.OPEN,this),a(window).on(b.RESIZE,this,this.repositionUI)},o.prototype.repositionUI=function(a){var b=a?a.data:this;b.$holder.position({of:b.$element,at:"center",my:"center"})},o.prototype.applyTransformationsToUI=function(a){var b=n(this.$element.css("transform"));if(this.$holder.css({transform:b,"-webkit-transform":b}),0===m(this.matrix,{x:1,y:0}).x){var c=(this.$element.width()-this.$element.height())/2;this.$holder.css({"margin-top":+c,"margin-right":-c,"margin-bottom":+c,"margin-left":-c})}},o.prototype.ensureSelectionIsInReasonableBounds=function(a){a.width=Math.max(this.min.width,a.width),a.width=Math.min(this.canvas.width,a.width),a.height=Math.max(this.min.height,a.height),a.height=Math.min(this.canvas.height,a.height),a.top=Math.max(this.canvas.top,a.top),a.top=Math.min(this.canvas.top+this.canvas.height-a.height,a.top),a.left=Math.max(this.canvas.left,a.left),a.left=Math.min(this.canvas.left+this.canvas.width-a.width,a.left)},o.prototype.updateUI=function(c){if(this.$holder){var d,e=this,f=c,g=this.$holder.find("."+this.cssClass("polygon-helper")),h=g.css("border-top-width"),i=null;i=a("<div/>",{width:h}).width();var j={strokeStyle:g.css("border-top-color"),fillStyle:g.css("background-color"),lineWidth:i};if((null==i||i<1)&&(c=!1,setTimeout(function(){e.updateUI(f)},10)),this.polygonTool.clearCanvas(),this.polygonTool.paintPolygonWithPoints(this.$drawCanvas,this.points,j),this.points.length!==this.getAllHandles().length&&(this.removeAllHandles(),this.points&&this.points.length))for(d=0;d<this.points.length;d++)this.createHandle(d);c!==!1&&this.$element.trigger(b.UPDATE,this.points)}},o.prototype.createHandle=function(a){var b,c=this,d=this.points[a];b=this.createDiv("handle").css({top:d.h,left:d.w}),this.$holder.append(b),this.handleDragging(b,function(b,d){c.updatePoint(b,d,a)})},o.prototype.removeAllHandles=function(){this.getAllHandles().remove()},o.prototype.getAllHandles=function(){return this.$holder.find("."+this.cssClass("handle"))},o.prototype.isHandleOrHasHandleParent=function(b){var c=this.cssClass("handle"),d=a(b);return d.hasClass(c)||d.parents("."+c).length>0},o.prototype.handleDragging=function(e,f){var h=this;e.on(b.MOUSEDOWN,function(i){
if(1===i.which||0===i.which){i.preventDefault(),i.stopPropagation();var j={},k=g(i),l=h.points.slice(),n=h.isHandleOrHasHandleParent(i.target),o=h.isPageCoordsOnPolygon(k);(n||o)&&a("body").on(b.MOUSEMOVE,function(a){a.preventDefault();var b=g(a);j.x=b.x-k.x,j.y=b.y-k.y,j.timeout||(j.timeout=setTimeout(function(){delete j.timeout,j.moved=!0,h.handleDrag(m(h.matrix,j),l,f)},d))}),a("body").one(b.MOUSEUP,function(d){var e;a(this).off(b.MOUSEMOVE).off(b.MOUSEUP),"undefined"==typeof d.pageX&&(d.pageX=k.x,d.pageY=k.y),h.showAllHandles(),j.moved||(n?h.$element.trigger(b.SECOND_CLICK,h):(e=h.getClosestLineSegmentResult(h.pageToRelative(d.pageX,d.pageY)),e&&e.distance<h.distanceFromLineForAddPointDetection?(h.addPoint(e.projection,e.line),h.updateUI()):o?h.$element.trigger(b.SECOND_CLICK,h):h.$element.trigger(a.Event(b.DESELECT_CLICK,{originalEvent:d,pageX:d.pageX,pageY:d.pageY})))),h._ignoreHolderClickUntil=(new Date).getTime()+c}),h.hideOtherHandles(e)}})},o.prototype.hideOtherHandles=function(a){this.$holder.find("."+this.cssClass("handle")).not(a).addClass(this.cssClass("handle-other")),a.addClass(this.cssClass("handle-selected"))},o.prototype.showAllHandles=function(){this.$holder.find("."+this.cssClass("handle")).removeClass(this.cssClass("handle-other")).removeClass(this.cssClass("handle-selected"))},o.prototype.handleDrag=function(a,b,c){c.call(this,a,b),this.updateUI()},o.prototype.pageToRelative=function(a,b){var c=this.$holder.offset();return{w:a-c.left,h:b-c.top}},o.prototype.vectorToPoint=function(a){return{w:a[0],h:a[1]}},o.prototype.addPoint=function(a,b){var c,d,e,f,g=null,h=this.polygonTool.pointsToVectors(this.points),i=this.vectorToPoint(a);if(this.points.length<2)return void this.points.push(i);if(!b)return void this.points.push(i);for(c=0;c<h.length;c++)if(d=h[c],this.polygonTool.vectorsEqual(d,b[0])){if(e=c===h.length-1?0:c+1,this.polygonTool.vectorsEqual(h[e],b[1])){g=e;break}if(f=0===c?h.length-1:c-1,this.polygonTool.vectorsEqual(h[f],b[1])){g=f;break}}null==g?this.points.push(i):this.points.splice(e,0,i)},o.prototype.updatePoints=function(a,b){var c;for(c=0;c<b.length;c++)this.updatePoint(a,b,c)},o.prototype.updatePoint=function(b,c,d){var e,f=this.$drawCanvas.position(),g=c[d];return g&&(g={w:Math.round(g.w+b.x),h:Math.round(g.h+b.y)},g.h=Math.max(f.top,g.h),g.h=Math.min(f.top+this.$drawCanvas.height(),g.h),g.w=Math.max(f.left,g.w),g.w=Math.min(f.left+this.$drawCanvas.width(),g.w),this.points[d]=g,e=a(this.getAllHandles()[d]),e.css({top:g.h,left:g.w})),g},o.prototype.destroyUI=function(){a(window).off(b.RESIZE),void 0!==this.$holder&&(this.$holder.off(b.CLICK),this.$holder.remove()),delete this.$holder,delete this.$drawCanvas,delete this.$selection},o.prototype.open=function(a){a=a||{},this.opened&&this.destroyUI(),this.init(a),this.buildUI(),this.opened=!0},o.prototype.close=function(){this.opened&&(this.destroyUI(),this.opened=!1,this.$element.trigger(b.CLOSE,this))},o.prototype.destroy=function(){this.close(),this.$element.data("image-select",null)},o.prototype.getPoints=function(){return this.points.slice()},o.prototype.getClosestLineSegmentResult=function(a){var b=this.polygonTool.pointsToVectors(a),c=this.polygonTool.filterLineSegmentsNextToPointAndSortByDistance(b,this.polygonTool.pointsToLineSegmentsWithVectors(this.points));return c.length?c[0]:null},o.prototype.isPageCoordsOnPolygon=function(a){var b;return"undefined"!=typeof a.x&&(a={w:a.x,h:a.y}),b=this.pageToRelative(a.w,a.h),this.polygonTool.isPointInsideOrOnEdgeOfPolygon([b.w,b.h],this.polygonTool.pointsToVectors(this.points))},o.prototype.getBoundingBox=function(){return this.polygonTool.getBoundingBox(this.points)},o.prototype.movePolygonIntoCanvas=function(){var b,c,d=this.polygonTool.getBoundingBox(this.points),e=h(a.extend({},d),this.canvas),f={left:e.left-d.left,top:e.top-d.top},g={width:e.width/d.width,height:e.height/d.height};for(b=0;b<this.points.length;b++)c=this.points[b],c.w=c.w+f.left,c.h=c.h+f.top,c.w=e.left+(c.w-e.left)*g.width,c.h=e.top+(c.h-e.top)*g.height};var p=function(b){return b=b||{},this.each(function(){var c=a(this),d=c.data("image-select");b.call?d&&d[b.call].call(d,b):d?d.open(b):(d=new o(c,b),c.data("image-select",d))}),b&&b.instance?this.eq(0).data("image-select"):this};return p}(jQuery);var Handlebars=function(){var a=function(){"use strict";function a(a){this.string=a}var b;return a.prototype.toString=function(){return""+this.string},b=a}(),b=function(a){"use strict";function b(a){return h[a]||"&amp;"}function c(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}function d(a){return a instanceof g?a.toString():a||0===a?(a=""+a,j.test(a)?a.replace(i,b):a):""}function e(a){return!a&&0!==a||!(!m(a)||0!==a.length)}var f={},g=a,h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/[&<>"'`]/g,j=/[&<>"'`]/;f.extend=c;var k=Object.prototype.toString;f.toString=k;var l=function(a){return"function"==typeof a};l(/x/)&&(l=function(a){return"function"==typeof a&&"[object Function]"===k.call(a)});var l;f.isFunction=l;var m=Array.isArray||function(a){return!(!a||"object"!=typeof a)&&"[object Array]"===k.call(a)};return f.isArray=m,f.escapeExpression=d,f.isEmpty=e,f}(a),c=function(){"use strict";function a(a,b){var d;b&&b.firstLine&&(d=b.firstLine,a+=" - "+d+":"+b.firstColumn);for(var e=Error.prototype.constructor.call(this,a),f=0;f<c.length;f++)this[c[f]]=e[c[f]];d&&(this.lineNumber=d,this.column=b.firstColumn)}var b,c=["description","fileName","lineNumber","message","name","number","stack"];return a.prototype=new Error,b=a}(),d=function(a,b){"use strict";function c(a,b){this.helpers=a||{},this.partials=b||{},d(this)}function d(a){a.registerHelper("helperMissing",function(a){if(2!==arguments.length)throw new h("Missing helper: '"+a+"'")}),a.registerHelper("blockHelperMissing",function(b,c){var d=c.inverse||function(){},e=c.fn;return m(b)&&(b=b.call(this)),b===!0?e(this):b===!1||null==b?d(this):l(b)?b.length>0?a.helpers.each(b,c):d(this):e(b)}),a.registerHelper("each",function(a,b){var c,d=b.fn,e=b.inverse,f=0,g="";if(m(a)&&(a=a.call(this)),b.data&&(c=q(b.data)),a&&"object"==typeof a)if(l(a))for(var h=a.length;f<h;f++)c&&(c.index=f,c.first=0===f,c.last=f===a.length-1),g+=d(a[f],{data:c});else for(var i in a)a.hasOwnProperty(i)&&(c&&(c.key=i,c.index=f,c.first=0===f),g+=d(a[i],{data:c}),f++);return 0===f&&(g=e(this)),g}),a.registerHelper("if",function(a,b){return m(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||g.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})}),a.registerHelper("with",function(a,b){if(m(a)&&(a=a.call(this)),!g.isEmpty(a))return b.fn(a)}),a.registerHelper("log",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)})}function e(a,b){p.log(a,b)}var f={},g=a,h=b,i="1.3.0";f.VERSION=i;var j=4;f.COMPILER_REVISION=j;var k={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};f.REVISION_CHANGES=k;var l=g.isArray,m=g.isFunction,n=g.toString,o="[object Object]";f.HandlebarsEnvironment=c,c.prototype={constructor:c,logger:p,log:e,registerHelper:function(a,b,c){if(n.call(a)===o){if(c||b)throw new h("Arg not supported with multiple helpers");g.extend(this.helpers,a)}else c&&(b.not=c),this.helpers[a]=b},registerPartial:function(a,b){n.call(a)===o?g.extend(this.partials,a):this.partials[a]=b}};var p={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(a,b){if(p.level<=a){var c=p.methodMap[a];"undefined"!=typeof console&&console[c]&&console[c].call(console,b)}}};f.logger=p,f.log=e;var q=function(a){var b={};return g.extend(b,a),b};return f.createFrame=q,f}(b,c),e=function(a,b,c){"use strict";function d(a){var b=a&&a[0]||1,c=m;if(b!==c){if(b<c){var d=n[c],e=n[b];throw new l("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new l("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function e(a,b){if(!b)throw new l("No environment passed to template");var c=function(a,c,d,e,f,g){var h=b.VM.invokePartial.apply(this,arguments);if(null!=h)return h;if(b.compile){var i={helpers:e,partials:f,data:g};return f[c]=b.compile(a,{data:void 0!==g},b),f[c](d,i)}throw new l("The partial "+c+" could not be compiled when running in runtime-only mode")},d={escapeExpression:k.escapeExpression,invokePartial:c,programs:[],program:function(a,b,c){var d=this.programs[a];return c?d=g(a,b,c):d||(d=this.programs[a]=g(a,b)),d},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c={},k.extend(c,b),k.extend(c,a)),c},programWithDepth:b.VM.programWithDepth,noop:b.VM.noop,compilerInfo:null};return function(c,e){e=e||{};var f,g,h=e.partial?e:b;e.partial||(f=e.helpers,g=e.partials);var i=a.call(d,h,c,f,g,e.data);return e.partial||b.VM.checkRevision(d.compilerInfo),i}}function f(a,b,c){var d=Array.prototype.slice.call(arguments,3),e=function(a,e){return e=e||{},b.apply(this,[a,e.data||c].concat(d))};return e.program=a,e.depth=d.length,e}function g(a,b,c){var d=function(a,d){return d=d||{},b(a,d.data||c)};return d.program=a,d.depth=0,d}function h(a,b,c,d,e,f){var g={partial:!0,helpers:d,partials:e,data:f};if(void 0===a)throw new l("The partial "+b+" could not be found");if(a instanceof Function)return a(c,g)}function i(){return""}var j={},k=a,l=b,m=c.COMPILER_REVISION,n=c.REVISION_CHANGES;return j.checkRevision=d,j.template=e,j.programWithDepth=f,j.program=g,j.invokePartial=h,j.noop=i,j}(b,c,d),f=function(a,b,c,d,e){"use strict";var f,g=a,h=b,i=c,j=d,k=e,l=function(){var a=new g.HandlebarsEnvironment;return j.extend(a,g),a.SafeString=h,a.Exception=i,a.Utils=j,a.VM=k,a.template=function(b){return k.template(b,a)},a},m=l();return m.create=l,f=m}(d,a,c,b,e),g=function(a){"use strict";function b(a){a=a||{},this.firstLine=a.first_line,this.firstColumn=a.first_column,this.lastColumn=a.last_column,this.lastLine=a.last_line}var c,d=a,e={ProgramNode:function(a,c,d,f){var g,h;3===arguments.length?(f=d,d=null):2===arguments.length&&(f=c,c=null),b.call(this,f),this.type="program",this.statements=a,this.strip={},d?(h=d[0],h?(g={first_line:h.firstLine,last_line:h.lastLine,last_column:h.lastColumn,first_column:h.firstColumn},this.inverse=new e.ProgramNode(d,c,g)):this.inverse=new e.ProgramNode(d,c),this.strip.right=c.left):c&&(this.strip.left=c.right)},MustacheNode:function(a,c,d,f,g){if(b.call(this,g),this.type="mustache",this.strip=f,null!=d&&d.charAt){var h=d.charAt(3)||d.charAt(2);this.escaped="{"!==h&&"&"!==h}else this.escaped=!!d;a instanceof e.SexprNode?this.sexpr=a:this.sexpr=new e.SexprNode(a,c),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(a,c,d){b.call(this,d),this.type="sexpr",this.hash=c;var e=this.id=a[0],f=this.params=a.slice(1),g=this.eligibleHelper=e.isSimple;this.isHelper=g&&(f.length||c)},PartialNode:function(a,c,d,e){b.call(this,e),this.type="partial",this.partialName=a,this.context=c,this.strip=d},BlockNode:function(a,c,e,f,g){if(b.call(this,g),a.sexpr.id.original!==f.path.original)throw new d(a.sexpr.id.original+" doesn't match "+f.path.original,this);this.type="block",this.mustache=a,this.program=c,this.inverse=e,this.strip={left:a.strip.left,right:f.strip.right},(c||e).strip.left=a.strip.right,(e||c).strip.right=f.strip.left,e&&!c&&(this.isInverse=!0)},ContentNode:function(a,c){b.call(this,c),this.type="content",this.string=a},HashNode:function(a,c){b.call(this,c),this.type="hash",this.pairs=a},IdNode:function(a,c){b.call(this,c),this.type="ID";for(var e="",f=[],g=0,h=0,i=a.length;h<i;h++){var j=a[h].part;if(e+=(a[h].separator||"")+j,".."===j||"."===j||"this"===j){if(f.length>0)throw new d("Invalid path: "+e,this);".."===j?g++:this.isScoped=!0}else f.push(j)}this.original=e,this.parts=f,this.string=f.join("."),this.depth=g,this.isSimple=1===a.length&&!this.isScoped&&0===g,this.stringModeValue=this.string},PartialNameNode:function(a,c){b.call(this,c),this.type="PARTIAL_NAME",this.name=a.original},DataNode:function(a,c){b.call(this,c),this.type="DATA",this.id=a},StringNode:function(a,c){b.call(this,c),this.type="STRING",this.original=this.string=this.stringModeValue=a},IntegerNode:function(a,c){b.call(this,c),this.type="INTEGER",this.original=this.integer=a,this.stringModeValue=Number(a)},BooleanNode:function(a,c){b.call(this,c),this.type="BOOLEAN",this.bool=a,this.stringModeValue="true"===a},CommentNode:function(a,c){b.call(this,c),this.type="comment",this.comment=a}};return c=e}(c),h=function(){"use strict";var a,b=function(){function a(a,b){return{left:"~"===a.charAt(2),right:"~"===b.charAt(0)||"~"===b.charAt(1)}}function b(){this.yy={}}var c={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(b,c,d,e,f,g,h){var i=g.length-1;switch(f){case 1:return new e.ProgramNode(g[i-1],this._$);case 2:return new e.ProgramNode([],this._$);case 3:this.$=new e.ProgramNode([],g[i-1],g[i],this._$);break;case 4:this.$=new e.ProgramNode(g[i-2],g[i-1],g[i],this._$);break;case 5:this.$=new e.ProgramNode(g[i-1],g[i],[],this._$);break;case 6:this.$=new e.ProgramNode(g[i],this._$);break;case 7:this.$=new e.ProgramNode([],this._$);break;case 8:this.$=new e.ProgramNode([],this._$);break;case 9:this.$=[g[i]];break;case 10:g[i-1].push(g[i]),this.$=g[i-1];break;case 11:this.$=new e.BlockNode(g[i-2],g[i-1].inverse,g[i-1],g[i],this._$);break;case 12:this.$=new e.BlockNode(g[i-2],g[i-1],g[i-1].inverse,g[i],this._$);break;case 13:this.$=g[i];break;case 14:this.$=g[i];break;case 15:this.$=new e.ContentNode(g[i],this._$);break;case 16:this.$=new e.CommentNode(g[i],this._$);break;case 17:this.$=new e.MustacheNode(g[i-1],null,g[i-2],a(g[i-2],g[i]),this._$);break;case 18:this.$=new e.MustacheNode(g[i-1],null,g[i-2],a(g[i-2],g[i]),this._$);break;case 19:this.$={path:g[i-1],strip:a(g[i-2],g[i])};break;case 20:this.$=new e.MustacheNode(g[i-1],null,g[i-2],a(g[i-2],g[i]),this._$);break;case 21:this.$=new e.MustacheNode(g[i-1],null,g[i-2],a(g[i-2],g[i]),this._$);break;case 22:this.$=new e.PartialNode(g[i-2],g[i-1],a(g[i-3],g[i]),this._$);break;case 23:this.$=a(g[i-1],g[i]);break;case 24:this.$=new e.SexprNode([g[i-2]].concat(g[i-1]),g[i],this._$);break;case 25:this.$=new e.SexprNode([g[i]],null,this._$);break;case 26:this.$=g[i];break;case 27:this.$=new e.StringNode(g[i],this._$);break;case 28:this.$=new e.IntegerNode(g[i],this._$);break;case 29:this.$=new e.BooleanNode(g[i],this._$);break;case 30:this.$=g[i];break;case 31:g[i-1].isHelper=!0,this.$=g[i-1];break;case 32:this.$=new e.HashNode(g[i],this._$);break;case 33:this.$=[g[i-2],g[i]];break;case 34:this.$=new e.PartialNameNode(g[i],this._$);break;case 35:this.$=new e.PartialNameNode(new e.StringNode(g[i],this._$),this._$);break;case 36:this.$=new e.PartialNameNode(new e.IntegerNode(g[i],this._$));break;case 37:this.$=new e.DataNode(g[i],this._$);break;case 38:this.$=new e.IdNode(g[i],this._$);break;case 39:g[i-2].push({part:g[i],separator:g[i-1]}),this.$=g[i-2];break;case 40:this.$=[{part:g[i]}];break;case 43:this.$=[];break;case 44:g[i-1].push(g[i]);break;case 47:this.$=[g[i]];break;case 48:g[i-1].push(g[i])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(a,b){throw new Error(a)},parse:function(a){function b(){var a;return a=c.lexer.lex()||1,"number"!=typeof a&&(a=c.symbols_[a]||a),a}var c=this,d=[0],e=[null],f=[],g=this.table,h="",i=0,j=0,k=0;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var l=this.lexer.yylloc;f.push(l);var m=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var n,o,p,q,r,s,t,u,v,w={};;){if(p=d[d.length-1],this.defaultActions[p]?q=this.defaultActions[p]:(null!==n&&"undefined"!=typeof n||(n=b()),q=g[p]&&g[p][n]),"undefined"==typeof q||!q.length||!q[0]){var x="";if(!k){v=[];for(s in g[p])this.terminals_[s]&&s>2&&v.push("'"+this.terminals_[s]+"'");x=this.lexer.showPosition?"Parse error on line "+(i+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[n]||n)+"'":"Parse error on line "+(i+1)+": Unexpected "+(1==n?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[n]||n,line:this.lexer.yylineno,loc:l,expected:v})}}if(q[0]instanceof Array&&q.length>1)throw new Error("Parse Error: multiple actions possible at state: "+p+", token: "+n);switch(q[0]){case 1:d.push(n),e.push(this.lexer.yytext),f.push(this.lexer.yylloc),d.push(q[1]),n=null,o?(n=o,o=null):(j=this.lexer.yyleng,h=this.lexer.yytext,i=this.lexer.yylineno,l=this.lexer.yylloc,k>0&&k--);break;case 2:if(t=this.productions_[q[1]][1],w.$=e[e.length-t],w._$={first_line:f[f.length-(t||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(t||1)].first_column,last_column:f[f.length-1].last_column},m&&(w._$.range=[f[f.length-(t||1)].range[0],f[f.length-1].range[1]]),r=this.performAction.call(w,h,j,i,this.yy,q[1],e,f),"undefined"!=typeof r)return r;t&&(d=d.slice(0,-1*t*2),e=e.slice(0,-1*t),f=f.slice(0,-1*t)),d.push(this.productions_[q[1]][0]),e.push(w.$),f.push(w._$),u=g[d[d.length-2]][d[d.length-1]],d.push(u);break;case 3:return!0}}return!0}},d=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parser)throw new Error(a);this.yy.parser.parseError(a,b)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var b=a.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b-1),this.offset-=b;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]),this},more:function(){return this._more=!0,this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=new Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d,e;this._more||(this.yytext="",this.match="");for(var f=this._currentRules(),g=0;g<f.length&&(c=this._input.match(this.rules[f[g]]),!c||b&&!(c[0].length>b[0].length)||(b=c,d=g,this.options.flex));g++);return b?(e=b[0].match(/(?:\r\n?|\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,f[d],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),a?a:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return"undefined"!=typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)}};return a.options={},a.performAction=function(a,b,c,d){function e(a,c){return b.yytext=b.yytext.substr(a,b.yyleng-c)}switch(c){case 0:if("\\\\"===b.yytext.slice(-2)?(e(0,1),this.begin("mu")):"\\"===b.yytext.slice(-1)?(e(0,1),this.begin("emu")):this.begin("mu"),b.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return e(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:return 19;case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return e(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:return 40;case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return b.yytext=e(1,2).replace(/\\"/g,'"'),32;case 24:return b.yytext=e(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:return 34;case 27:return 34;case 28:return 33;case 29:return 40;case 30:return b.yytext=e(1,2),40;case 31:return"INVALID";case 32:return 5}},a.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],a.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},a}();return c.lexer=d,b.prototype=c,c.Parser=b,new b}();return a=b}(),i=function(a,b){"use strict";function c(a){return a.constructor===f.ProgramNode?a:(e.yy=f,e.parse(a))}var d={},e=a,f=b;return d.parser=e,d.parse=c,d}(h,g),j=function(a){"use strict";function b(){}function c(a,b,c){if(null==a||"string"!=typeof a&&a.constructor!==c.AST.ProgramNode)throw new f("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+a);b=b||{},"data"in b||(b.data=!0);var d=c.parse(a),e=(new c.Compiler).compile(d,b);return(new c.JavaScriptCompiler).compile(e,b)}function d(a,b,c){function d(){var d=c.parse(a),e=(new c.Compiler).compile(d,b),f=(new c.JavaScriptCompiler).compile(e,b,void 0,!0);return c.template(f)}if(null==a||"string"!=typeof a&&a.constructor!==c.AST.ProgramNode)throw new f("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+a);b=b||{},"data"in b||(b.data=!0);var e;return function(a,b){return e||(e=d()),e.call(this,a,b)}}var e={},f=a;return e.Compiler=b,b.prototype={compiler:b,disassemble:function(){for(var a,b,c,d=this.opcodes,e=[],f=0,g=d.length;f<g;f++)if(a=d[f],"DECLARE"===a.opcode)e.push("DECLARE "+a.name+"="+a.value);else{b=[];for(var h=0;h<a.args.length;h++)c=a.args[h],"string"==typeof c&&(c='"'+c.replace("\n","\\n")+'"'),b.push(c);e.push(a.opcode+" "+b.join(" "))}return e.join("\n")},equals:function(a){var b=this.opcodes.length;if(a.opcodes.length!==b)return!1;for(var c=0;c<b;c++){var d=this.opcodes[c],e=a.opcodes[c];if(d.opcode!==e.opcode||d.args.length!==e.args.length)return!1;for(var f=0;f<d.args.length;f++)if(d.args[f]!==e.args[f])return!1}if(b=this.children.length,a.children.length!==b)return!1;for(c=0;c<b;c++)if(!this.children[c].equals(a.children[c]))return!1;return!0},guid:0,compile:function(a,b){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=b;var c=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},c)for(var d in c)this.options.knownHelpers[d]=c[d];return this.accept(a)},accept:function(a){var b,c=a.strip||{};return c.left&&this.opcode("strip"),b=this[a.type](a),c.right&&this.opcode("strip"),b},program:function(a){for(var b=a.statements,c=0,d=b.length;c<d;c++)this.accept(b[c]);return this.isSimple=1===d,this.depths.list=this.depths.list.sort(function(a,b){return a-b}),this},compileProgram:function(a){var b,c=(new this.compiler).compile(a,this.options),d=this.guid++;this.usePartial=this.usePartial||c.usePartial,this.children[d]=c;for(var e=0,f=c.depths.list.length;e<f;e++)b=c.depths.list[e],b<2||this.addDepth(b-1);return d},block:function(a){var b=a.mustache,c=a.program,d=a.inverse;c&&(c=this.compileProgram(c)),d&&(d=this.compileProgram(d));var e=b.sexpr,f=this.classifySexpr(e);"helper"===f?this.helperSexpr(e,c,d):"simple"===f?(this.simpleSexpr(e),this.opcode("pushProgram",c),this.opcode("pushProgram",d),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(e,c,d),this.opcode("pushProgram",c),this.opcode("pushProgram",d),
this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(a){var b,c,d=a.pairs;this.opcode("pushHash");for(var e=0,f=d.length;e<f;e++)b=d[e],c=b[1],this.options.stringParams?(c.depth&&this.addDepth(c.depth),this.opcode("getContext",c.depth||0),this.opcode("pushStringParam",c.stringModeValue,c.type),"sexpr"===c.type&&this.sexpr(c)):this.accept(c),this.opcode("assignToHash",b[0]);this.opcode("popHash")},partial:function(a){var b=a.partialName;this.usePartial=!0,a.context?this.ID(a.context):this.opcode("push","depth0"),this.opcode("invokePartial",b.name),this.opcode("append")},content:function(a){this.opcode("appendContent",a.string)},mustache:function(a){this.sexpr(a.sexpr),a.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousSexpr:function(a,b,c){var d=a.id,e=d.parts[0],f=null!=b||null!=c;this.opcode("getContext",d.depth),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("invokeAmbiguous",e,f)},simpleSexpr:function(a){var b=a.id;"DATA"===b.type?this.DATA(b):b.parts.length?this.ID(b):(this.addDepth(b.depth),this.opcode("getContext",b.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(a,b,c){var d=this.setupFullMustacheParams(a,b,c),e=a.id.parts[0];if(this.options.knownHelpers[e])this.opcode("invokeKnownHelper",d.length,e);else{if(this.options.knownHelpersOnly)throw new f("You specified knownHelpersOnly, but used the unknown helper "+e,a);this.opcode("invokeHelper",d.length,e,a.isRoot)}},sexpr:function(a){var b=this.classifySexpr(a);"simple"===b?this.simpleSexpr(a):"helper"===b?this.helperSexpr(a):this.ambiguousSexpr(a)},ID:function(a){this.addDepth(a.depth),this.opcode("getContext",a.depth);var b=a.parts[0];b?this.opcode("lookupOnContext",a.parts[0]):this.opcode("pushContext");for(var c=1,d=a.parts.length;c<d;c++)this.opcode("lookup",a.parts[c])},DATA:function(a){if(this.options.data=!0,a.id.isScoped||a.id.depth)throw new f("Scoped data references are not supported: "+a.original,a);this.opcode("lookupData");for(var b=a.id.parts,c=0,d=b.length;c<d;c++)this.opcode("lookup",b[c])},STRING:function(a){this.opcode("pushString",a.string)},INTEGER:function(a){this.opcode("pushLiteral",a.integer)},BOOLEAN:function(a){this.opcode("pushLiteral",a.bool)},comment:function(){},opcode:function(a){this.opcodes.push({opcode:a,args:[].slice.call(arguments,1)})},declare:function(a,b){this.opcodes.push({opcode:"DECLARE",name:a,value:b})},addDepth:function(a){0!==a&&(this.depths[a]||(this.depths[a]=!0,this.depths.list.push(a)))},classifySexpr:function(a){var b=a.isHelper,c=a.eligibleHelper,d=this.options;if(c&&!b){var e=a.id.parts[0];d.knownHelpers[e]?b=!0:d.knownHelpersOnly&&(c=!1)}return b?"helper":c?"ambiguous":"simple"},pushParams:function(a){for(var b,c=a.length;c--;)b=a[c],this.options.stringParams?(b.depth&&this.addDepth(b.depth),this.opcode("getContext",b.depth||0),this.opcode("pushStringParam",b.stringModeValue,b.type),"sexpr"===b.type&&this.sexpr(b)):this[b.type](b)},setupFullMustacheParams:function(a,b,c){var d=a.params;return this.pushParams(d),this.opcode("pushProgram",b),this.opcode("pushProgram",c),a.hash?this.hash(a.hash):this.opcode("emptyHash"),d}},e.precompile=c,e.compile=d,e}(c),k=function(a,b){"use strict";function c(a){this.value=a}function d(){}var e,f=a.COMPILER_REVISION,g=a.REVISION_CHANGES,h=a.log,i=b;d.prototype={nameLookup:function(a,b){var c,e;return 0===a.indexOf("depth")&&(c=!0),e=/^[0-9]+$/.test(b)?a+"["+b+"]":d.isValidJavaScriptVariableName(b)?a+"."+b:a+"['"+b+"']",c?"("+a+" && "+e+")":e},compilerInfo:function(){var a=f,b=g[a];return"this.compilerInfo = ["+a+",'"+b+"'];\n"},appendToBuffer:function(a){return this.environment.isSimple?"return "+a+";":{appendToBuffer:!0,content:a,toString:function(){return"buffer += "+a+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(a,b,c,d){this.environment=a,this.options=b||{},h("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!c,this.context=c||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(a,b);var e,f=a.opcodes;this.i=0;for(var g=f.length;this.i<g;this.i++)e=f[this.i],"DECLARE"===e.opcode?this[e.name]=e.value:this[e.opcode].apply(this,e.args),e.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new i("Compile completed with content left on stack");return this.createFunctionContext(d)},preamble:function(){var a=[];if(this.isChild)a.push("");else{var b=this.namespace,c="helpers = this.merge(helpers, "+b+".helpers);";this.environment.usePartial&&(c=c+" partials = this.merge(partials, "+b+".partials);"),this.options.data&&(c+=" data = data || {};"),a.push(c)}this.environment.isSimple?a.push(""):a.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=a},createFunctionContext:function(a){var b=this.stackVars.concat(this.registers.list);if(b.length>0&&(this.source[1]=this.source[1]+", "+b.join(", ")),!this.isChild)for(var c in this.context.aliases)this.context.aliases.hasOwnProperty(c)&&(this.source[1]=this.source[1]+", "+c+"="+this.context.aliases[c]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var d=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],e=0,f=this.environment.depths.list.length;e<f;e++)d.push("depth"+this.environment.depths.list[e]);var g=this.mergeSource();if(this.isChild||(g=this.compilerInfo()+g),a)return d.push(g),Function.apply(this,d);var i="function "+(this.name||"")+"("+d.join(",")+") {\n  "+g+"}";return h("debug",i+"\n\n"),i},mergeSource:function(){for(var a,b="",c=0,d=this.source.length;c<d;c++){var e=this.source[c];e.appendToBuffer?a=a?a+"\n    + "+e.content:e.content:(a&&(b+="buffer += "+a+";\n  ",a=void 0),b+=e+"\n  ")}return b},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=["depth0"];this.setupParams(0,a),this.replaceStack(function(b){return a.splice(1,0,b),"blockHelperMissing.call("+a.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=["depth0"];this.setupParams(0,a);var b=this.topStack();a.splice(1,0,b),this.pushSource("if (!"+this.lastHelper+") { "+b+" = blockHelperMissing.call("+a.join(", ")+"); }")},appendContent:function(a){this.pendingContent&&(a=this.pendingContent+a),this.stripNext&&(a=a.replace(/^\s+/,"")),this.pendingContent=a},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var a=this.popStack();this.pushSource("if("+a+" || "+a+" === 0) { "+this.appendToBuffer(a)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(a){this.lastContext!==a&&(this.lastContext=a)},lookupOnContext:function(a){this.push(this.nameLookup("depth"+this.lastContext,a,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(a){return"typeof "+a+" === functionType ? "+a+".apply(depth0) : "+a})},lookup:function(a){this.replaceStack(function(b){return b+" == null || "+b+" === false ? "+b+" : "+this.nameLookup(b,a,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(a,b){this.pushStackLiteral("depth"+this.lastContext),this.pushString(b),"sexpr"!==b&&("string"==typeof a?this.pushString(a):this.pushStackLiteral(a))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var a=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+a.contexts.join(",")+"}"),this.push("{"+a.types.join(",")+"}")),this.push("{\n    "+a.values.join(",\n    ")+"\n  }")},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},push:function(a){return this.inlineStack.push(a),a},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){null!=a?this.pushStackLiteral(this.programExpression(a)):this.pushStackLiteral(null)},invokeHelper:function(a,b,c){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var d=this.lastHelper=this.setupHelper(a,b,!0),e=this.nameLookup("depth"+this.lastContext,b,"context"),f="helper = "+d.name+" || "+e;d.paramsInit&&(f+=","+d.paramsInit),this.push("("+f+",helper ? helper.call("+d.callParams+") : helperMissing.call("+d.helperMissingParams+"))"),c||this.flushInline()},invokeKnownHelper:function(a,b){var c=this.setupHelper(a,b);this.push(c.name+".call("+c.callParams+")")},invokeAmbiguous:function(a,b){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var c=this.setupHelper(0,a,b),d=this.lastHelper=this.nameLookup("helpers",a,"helper"),e=this.nameLookup("depth"+this.lastContext,a,"context"),f=this.nextStack();c.paramsInit&&this.pushSource(c.paramsInit),this.pushSource("if (helper = "+d+") { "+f+" = helper.call("+c.callParams+"); }"),this.pushSource("else { helper = "+e+"; "+f+" = typeof helper === functionType ? helper.call("+c.callParams+") : helper; }")},invokePartial:function(a){var b=[this.nameLookup("partials",a,"partial"),"'"+a+"'",this.popStack(),"helpers","partials"];this.options.data&&b.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+b.join(", ")+")")},assignToHash:function(a){var b,c,d=this.popStack();this.options.stringParams&&(c=this.popStack(),b=this.popStack());var e=this.hash;b&&e.contexts.push("'"+a+"': "+b),c&&e.types.push("'"+a+"': "+c),e.values.push("'"+a+"': ("+d+")")},compiler:d,compileChildren:function(a,b){for(var c,d,e=a.children,f=0,g=e.length;f<g;f++){c=e[f],d=new this.compiler;var h=this.matchExistingProgram(c);null==h?(this.context.programs.push(""),h=this.context.programs.length,c.index=h,c.name="program"+h,this.context.programs[h]=d.compile(c,b,this.context),this.context.environments[h]=c):(c.index=h,c.name="program"+h)}},matchExistingProgram:function(a){for(var b=0,c=this.context.environments.length;b<c;b++){var d=this.context.environments[b];if(d&&d.equals(a))return b}},programExpression:function(a){if(this.context.aliases.self="this",null==a)return"self.noop";for(var b,c=this.environment.children[a],d=c.depths.list,e=[c.index,c.name,"data"],f=0,g=d.length;f<g;f++)b=d[f],1===b?e.push("depth0"):e.push("depth"+(b-1));return(0===d.length?"self.program(":"self.programWithDepth(")+e.join(", ")+")"},register:function(a,b){this.useRegister(a),this.pushSource(a+" = "+b+";")},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},pushStackLiteral:function(a){return this.push(new c(a))},pushSource:function(a){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),a&&this.source.push(a)},pushStack:function(a){this.flushInline();var b=this.incrStack();return a&&this.pushSource(b+" = "+a+";"),this.compileStack.push(b),b},replaceStack:function(a){var b,d,e,f="",g=this.isInline();if(g){var h=this.popStack(!0);if(h instanceof c)b=h.value,e=!0;else{d=!this.stackSlot;var i=d?this.incrStack():this.topStackName();f="("+this.push(i)+" = "+h+"),",b=this.topStack()}}else b=this.topStack();var j=a.call(this,b);return g?(e||this.popStack(),d&&this.stackSlot--,this.push("("+f+j+")")):(/^stack/.test(b)||(b=this.nextStack()),this.pushSource(b+" = ("+f+j+");")),b},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var a=this.inlineStack;if(a.length){this.inlineStack=[];for(var b=0,d=a.length;b<d;b++){var e=a[b];e instanceof c?this.compileStack.push(e):this.pushStack(e)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var b=this.isInline(),d=(b?this.inlineStack:this.compileStack).pop();if(!a&&d instanceof c)return d.value;if(!b){if(!this.stackSlot)throw new i("Invalid stack pop");this.stackSlot--}return d},topStack:function(a){var b=this.isInline()?this.inlineStack:this.compileStack,d=b[b.length-1];return!a&&d instanceof c?d.value:d},quotedString:function(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(a,b,c){var d=[],e=this.setupParams(a,d,c),f=this.nameLookup("helpers",b,"helper");return{params:d,paramsInit:e,name:f,callParams:["depth0"].concat(d).join(", "),helperMissingParams:c&&["depth0",this.quotedString(b)].concat(d).join(", ")}},setupOptions:function(a,b){var c,d,e,f=[],g=[],h=[];f.push("hash:"+this.popStack()),this.options.stringParams&&(f.push("hashTypes:"+this.popStack()),f.push("hashContexts:"+this.popStack())),d=this.popStack(),e=this.popStack(),(e||d)&&(e||(this.context.aliases.self="this",e="self.noop"),d||(this.context.aliases.self="this",d="self.noop"),f.push("inverse:"+d),f.push("fn:"+e));for(var i=0;i<a;i++)c=this.popStack(),b.push(c),this.options.stringParams&&(h.push(this.popStack()),g.push(this.popStack()));return this.options.stringParams&&(f.push("contexts:["+g.join(",")+"]"),f.push("types:["+h.join(",")+"]")),this.options.data&&f.push("data:data"),f},setupParams:function(a,b,c){var d="{"+this.setupOptions(a,b).join(",")+"}";return c?(this.useRegister("options"),b.push("options"),"options="+d):(b.push(d),"")}};for(var j="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),k=d.RESERVED_WORDS={},l=0,m=j.length;l<m;l++)k[j[l]]=!0;return d.isValidJavaScriptVariableName=function(a){return!(d.RESERVED_WORDS[a]||!/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(a))},e=d}(d,c),l=function(a,b,c,d,e){"use strict";var f,g=a,h=b,i=c.parser,j=c.parse,k=d.Compiler,l=d.compile,m=d.precompile,n=e,o=g.create,p=function(){var a=o();return a.compile=function(b,c){return l(b,c,a)},a.precompile=function(b,c){return m(b,c,a)},a.AST=h,a.Compiler=k,a.JavaScriptCompiler=n,a.Parser=i,a.parse=j,a};return g=p(),g.create=p,f=g}(f,g,i,j,k);return l}();this.CUI=this.CUI||{},this.CUI.imageeditor=this.CUI.imageeditor||{},this.CUI.imageeditor.Templates=this.CUI.imageeditor.Templates||{},this.CUI.imageeditor.Templates["crop-popover"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var c,d="";return d+='\n    <button class="coral-Button popover-button" name="aspectRatio" value="'+l((c=a.ratio,typeof c===k?c.apply(a):c))+'">'+l((c=a.name,typeof c===k?c.apply(a):c))+"</button><br/>\n  "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h,i,j="",k="function",l=this.escapeExpression,m=c.helperMissing,n=this;return j+='<div class="coral-Popover-content imageeditor-popover-content">\n  <button class="coral-Button popover-button" name="aspectRatio" value="removeCrop">',i={hash:{},data:e},j+=l((g=c.i18n||b.i18n,g?g.call(b,"removecrop",i):m.call(b,"i18n","removecrop",i)))+"</button><br/>\n  ",h=c.each.call(b,b.aspectRatios,{hash:{},inverse:n.noop,fn:n.program(1,f,e),data:e}),(h||0===h)&&(j+=h),j+="\n</div>\n"}),this.CUI.imageeditor.Templates.imageeditor=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<div class="imageeditor-container">\n  <div class="imageeditor-toolbars icongroup"></div>\n  <div class="imageeditor-controls">\n    <div class="imageeditor-imagemap-polygon-helper"></div>\n    <div class="imageeditor-controls-map-areas"></div>\n  </div>\n</div>\n'}),this.CUI.imageeditor.Templates["map-popover"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\n    <input class="coral-Textfield" name="href" type="url" placeholder="',e={hash:{},data:b},f+=m((d=c.i18n||a.i18n,d?d.call(a,"path",e):l.call(a,"i18n","path",e)))+'" />\n  '}function g(a,b){var d,e,f="";return f+='\n    <span class="coral-PathBrowser pathbrowser" data-placeholder="',e={hash:{},data:b},f+=m((d=c.i18n||a.i18n,d?d.call(a,"path",e):l.call(a,"i18n","path",e)))+'" data-root-path="'+m((d=a.pathbrowser,d=null==d||d===!1?d:d.rootPath,typeof d===n?d.apply(a):d))+'">\n      <span class="coral-InputGroup">\n        <input class="coral-InputGroup-input js-coral-pathbrowser-input coral-Textfield" type="text" name="href">\n        <span class="coral-InputGroup-button">\n          <button class="coral-Button coral-Button--secondary coral-Button--square js-coral-pathbrowser-button" type="button" title="',e={hash:{},data:b},f+=m((d=c.i18n||a.i18n,d?d.call(a,"path_picker",e):l.call(a,"i18n","path_picker",e)))+'">\n            <i class="coral-Icon coral-Icon--sizeS coral-Icon--folderSearch"></i>\n          </button>\n        </span>\n      </span>\n    </span>\n  '}function h(a,b){var d,e,f="";return f+='\n    <span class="coral-DecoratedTextfield pathbrowser" data-placeholder="',e={hash:{},data:b},f+=m((d=c.i18n||a.i18n,d?d.call(a,"path",e):l.call(a,"i18n","path",e)))+'" data-root-path="'+m((d=a.pathbrowser,d=null==d||d===!1?d:d.rootPath,typeof d===n?d.apply(a):d))+'">\n      <input class="js-coral-pathbrowser-input coral-Textfield" type="text" name="href">\n    </span>\n  '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j,k="",l=c.helperMissing,m=this.escapeExpression,n="function",o=this;return k+='<div class="imageeditor-map-toolbar toolbar">\n  ',i=c["if"].call(b,b.noPathbrowser,{hash:{},inverse:o.noop,fn:o.program(1,f,e),data:e}),(i||0===i)&&(k+=i),k+="\n  ",i=c["if"].call(b,b.pathbrowserPicker,{hash:{},inverse:o.noop,fn:o.program(3,g,e),data:e}),(i||0===i)&&(k+=i),k+="\n  ",i=c["if"].call(b,b.pathbrowserAutocomplete,{hash:{},inverse:o.noop,fn:o.program(5,h,e),data:e}),(i||0===i)&&(k+=i),k+='\n  <input class="coral-Textfield" name="alt" type="text" placeholder="',j={hash:{},data:e},k+=m((i=c.i18n||b.i18n,i?i.call(b,"alt_text",j):l.call(b,"i18n","alt_text",j)))+'" />\n  <span class="coral-Select" data-init="select">\n    <button class="coral-Select-button coral-MinimalButton" type="button">\n      <span class="coral-Select-button-text"></span>\n    </button>\n    <select class="coral-Select-select" name="target">\n      <option value="">',j={hash:{},data:e},k+=m((i=c.i18n||b.i18n,i?i.call(b,"target",j):l.call(b,"i18n","target",j)))+'</option>\n      <option value="_self">',j={hash:{},data:e},k+=m((i=c.i18n||b.i18n,i?i.call(b,"same_tab",j):l.call(b,"i18n","same_tab",j)))+'</option>\n      <option value="_blank">',j={hash:{},data:e},k+=m((i=c.i18n||b.i18n,i?i.call(b,"new_tab",j):l.call(b,"i18n","new_tab",j)))+'</option>\n      <option value="_parent">',j={hash:{},data:e},k+=m((i=c.i18n||b.i18n,i?i.call(b,"parent_frame",j):l.call(b,"i18n","parent_frame",j)))+'</option>\n      <option value="_top">',j={hash:{},data:e},k+=m((i=c.i18n||b.i18n,i?i.call(b,"top_frame",j):l.call(b,"i18n","top_frame",j)))+'</option>\n    </select>\n  </span>\n  <span class="actions">\n    <button class="coral-Button coral-Button--square coral-Button--warning imageeditor-map-delete" title="',j={hash:{},data:e},k+=m((i=c.i18n||b.i18n,i?i.call(b,"delete",j):l.call(b,"i18n","delete",j)))+'">\n      <i class="coral-Icon coral-Icon--delete"></i>\n    </button>\n    <button class="coral-Button coral-Button--square imageeditor-map-unlaunch" title="',j={hash:{},data:e},k+=m((i=c.i18n||b.i18n,i?i.call(b,"unlaunch",j):l.call(b,"i18n","unlaunch",j)))+'">\n      <i class="coral-Icon coral-Icon--close"></i>\n    </button>\n    <button class="coral-Button coral-Button--square coral-Button--primary imageeditor-map-confirm" title="',j={hash:{},data:e},k+=m((i=c.i18n||b.i18n,i?i.call(b,"confirm",j):l.call(b,"i18n","confirm",j)))+'">\n      <i class="coral-Icon coral-Icon--check"></i>\n    </button>\n  </span>\n</div>\n'}),this.CUI.imageeditor.Templates["toolbar-item"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<button data-action="',(f=c.action)?f=f.call(b,{hash:{},data:e}):(f=b.action,f=typeof f===h?f.apply(b):f),g+=i(f)+'" title="',(f=c.title)?f=f.call(b,{hash:{},data:e}):(f=b.title,f=typeof f===h?f.apply(b):f),g+=i(f)+'"\n        class="coral-Button coral-Button--quiet coral-Button--square ',(f=c.addClasses)?f=f.call(b,{hash:{},data:e}):(f=b.addClasses,f=typeof f===h?f.apply(b):f),g+=i(f)+'">\n  <i class="coral-Icon coral-Icon--',(f=c.icon)?f=f.call(b,{hash:{},data:e}):(f=b.icon,f=typeof f===h?f.apply(b):f),g+=i(f)+'"></i>\n</button>\n'}),this.CUI.imageeditor.Templates.toolbar=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+="\n    ",d=c["if"].call(a,a,{hash:{},inverse:m.noop,fn:m.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="\n  "}function g(a,b){var d,e,f="";return f+='\n      <div class="imageeditor-toolbar-'+l((d=b,d=null==d||d===!1?d:d.key,typeof d===k?d.apply(a):d))+'-hand-side">\n        ',e=c.each.call(a,a,{hash:{},inverse:m.noop,fn:m.program(3,h,b),data:b}),(e||0===e)&&(f+=e),f+="\n      </div>\n    "}function h(a,b){var c;return c=typeof a===k?a.apply(a):a,c||0===c?c:""}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j="",k="function",l=this.escapeExpression,m=this;return j+='<div data-id="',(i=c.ref)?i=i.call(b,{hash:{},data:e}):(i=b.ref,i=typeof i===k?i.apply(b):i),j+=l(i)+'" class="imageeditor-toolbar">\n  ',i=c.each.call(b,b.toolbarItems,{hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e}),(i||0===i)&&(j+=i),j+="\n</div>\n"}),this.CUI.imageeditor.Templates.toolbars=Handlebars.template(function(a,b,c,d,e){function f(a,b){var c,d="";return d+="\n    ",c=typeof a===i?a.apply(a):a,(c||0===c)&&(d+=c),d+="\n  "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h="",i="function",j=this.escapeExpression,k=this;return h+='<div data-type="',(g=c.type)?g=g.call(b,{hash:{},data:e}):(g=b.type,g=typeof g===i?g.apply(b):g),h+=j(g)+'">\n  ',(g=c.toolbar)?g=g.call(b,{hash:{},data:e}):(g=b.toolbar,g=typeof g===i?g.apply(b):g),(g||0===g)&&(h+=g),h+="\n  ",g=c.each.call(b,b.replacementToolbars,{hash:{},inverse:k.noop,fn:k.program(1,f,e),data:e}),(g||0===g)&&(h+=g),h+="\n</div>\n"}),this.CUI.imageeditor.Templates["zoomslider-popover"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<div class="coral-Popover-content imageeditor-popover-content">\n  <div class="coral-Slider popover-slider" data-init="slider">\n    <input type="range" value="100" min="',(f=c.zoomMin)?f=f.call(b,{hash:{},data:e}):(f=b.zoomMin,f=typeof f===h?f.apply(b):f),g+=i(f)+'" max="',(f=c.zoomMax)?f=f.call(b,{hash:{},data:e}):(f=b.zoomMax,f=typeof f===h?f.apply(b):f),g+=i(f)+'" step="1">\n  </div>\n</div>\n'}),function(a,b,c,d){"use strict";var e=function(b){return 0===a(b.target).closest(".imageeditor-container").length},f=function(b,c,d,e,f){var g;return f=f||a.extend({},e),b%=360,b+=360,b%=360,e.hasOwnProperty("top")&&e.hasOwnProperty("left")&&(b%180===0?(g=0!==b,c.horizontal^g?f.left=d.width-e.width-e.left:f.left=e.left,c.vertical^g?f.top=d.height-e.height-e.top:f.top=e.top):(g=90!==b,c.vertical^g?f.left=e.top:f.left=d.height-e.height-e.top,c.horizontal^g?f.top=d.width-e.width-e.left:f.top=e.left)),b%180!==0?(f.width=e.height,f.height=e.width):(f.width=e.width,f.height=e.height),f},g=function(){if(navigator&&navigator.userAgent)return/.*OS 7.{0,4} like Mac OS X.*/.test(navigator.userAgent)};CUI.ImageEditor=new Class({toString:"ImageEditor",extend:CUI.Widget,CSS_LAYOUT_CONSTRAINTS:{"min-height":"minHeight","min-width":"minWidth","max-height":"maxHeight","max-width":"maxWidth"},ZOOM_MIN:.1,ZOOM_MAX:3,registeredActions:null,registeredPlugins:null,defaults:{},elementContext:{},$ui:{},construct:function(a){this.options=a||{},this.i18n=new CUI.imageeditor.I18nProvider},configurePluginsAndActions:function(a){var b,c=a.plugins||{};for(var d in this.registeredPlugins)this.registeredPlugins.hasOwnProperty(d)&&(b=this.registeredPlugins[d],b.notifyPluginConfig(c[d]));for(var e in this.registeredActions)this.registeredActions.hasOwnProperty(e)&&(b=this.registeredActions[e],b.notifyPluginConfig(c[e]))},bindUIListener:function(b,c,d){c=d?a.proxy(c,d):c,this.$ui.on(b,c)},isAnimated:function(){return!!this._isAnimated},toggleAnimation:function(a){this._isAnimated=a,this.$element&&(this.$element.position(),this.$element.toggleClass("imageeditor-editable-animate",a)),this.$ui&&(this.$ui.position(),this.$ui.toggleClass("imageeditor-container-animate",a),this.$ui.copy&&(this.$ui.copy.position(),this.$ui.copy.toggleClass("imageeditor-editable-copy-animate",a)))},withoutAnimation:function(a){if(!this.isAnimated())return a.call(this);var b;return this.toggleAnimation(!1),b=a.call(this),this.toggleAnimation(!0),b},start:function(b){b=b||{},this.setupTemplates(b.templates),this.setupElementContext(),this._zoomFactor=b.zoomFactor,this._zoomFactor||(this._zoomFactor=this.options.zoomFactor),this._zoomFactor||(this._zoomFactor=1),this.createUI(),this.preferCopy()?(this.options.image=a(this.options.image),this.$ui.copy=this.options.image.addClass("imageeditor-editable-copy")):this.$ui.copy=this.$element.clone().addClass("imageeditor-editable-copy"),this.$ui.copy.css("margin",0),this.$ui.prepend(this.$ui.copy),this.registeredActions=CUI.imageeditor.actions.ActionRegistry.createRegisteredActions(this),this.registeredPlugins=CUI.imageeditor.plugins.PluginRegistry.createRegisteredPlugins(this),this.configurePluginsAndActions(b),this.transformResult=this.createTransformResult(b.result),this.installUI(),this.createToolbar(b),"fullscreen"===this.options.mode?this.switchToFullscreen():this.switchToInline(),this.setupEventHandling(),this.$element.trigger("editing-start")},preferCopy:function(){return this.options.image&&a(this.options.image).length?this.preferCopy=function(){return!0}:this.preferCopy=function(){return!1},this.preferCopy()},cancel:function(){this.destroyEventHandling(),this.destroyUI(),this.$element.trigger("editing-cancelled")},finish:function(){this.destroyEventHandling(),this.destroyUI(),this.$element.trigger("editing-finished",{result:this.transformResult.toJSON()})},getImageNaturalSize:function(a){var b=a,c={},d=new Image;return d.src=b.attr("src"),c.w=d.width,c.h=d.height,c},createToolbar:function(b){var c,d,e,f=this.createToolbarBuilder();b=a.extend({},{$editable:this.$ui},b);for(c in this.registeredPlugins)this.registeredPlugins.hasOwnProperty(c)&&(d=this.registeredPlugins[c],d.initializeUI(f,b));this.toolbars={},this.$ui.toolbars={},e=f.createToolbar(b,"inline"),e&&(this.toolbars.inline=e,this.$ui.toolbars.inline=this.toolbars.inline.getToolbars()),e=f.createToolbar(b,"fullscreen"),e&&(this.toolbars.fullscreen=e,this.$ui.toolbars.fullscreen=this.toolbars.fullscreen.getToolbars())},getToolbarHeight:function(){var b=0,c=function(c,d){var e=a(d).height();e>b&&(b=e)};return this.$ui.find(".imageeditor-toolbar").each(c),b},createToolbarBuilder:function(){return new CUI.imageeditor.ui.ToolbarBuilder({templates:this.templates})},createTransformResult:function(a){var b,c,d=new CUI.imageeditor.TransformResult,e=this.registeredPlugins;for(b in e)e.hasOwnProperty(b)&&(c=e[b],c.registerTransformFields(d));return a&&d.setTransformValues(a,!1),d},setupEventHandling:function(){var c=this;this.$element.parents("body").add(document.body).on("tap.imageeditor-ooa click.imageeditor-ooa",function(a){e(a)&&!CUI.imageeditor.UIUtils.isHavingModalParent(a.target)&&c.finish()}),a(b).on("resize.imageeditor orientationchange.imageeditor",function(){c.withoutAnimation(function(){c.updatePreview()})}),this.bindUIListener("requestclose",this.finish,this)},destroyEventHandling:function(){this.$element.parents("body").add(document.body).off(".imageeditor-ooa"),a(b).off(".imageeditor")},submit:function(){a.ajax({type:"POST",url:"action",data:JSON.stringify(this.transformResult.toJSON()),success:function(){},error:function(){}})},createUI:function(){var b=this.templates.get("imageeditor");this.$ui=a(b({})),"dark"===this.options.theme?(this.$ui.attr("data-theme","dark"),this.$ui.addClass("coral--dark")):(this.$ui.removeAttr("data-theme"),this.$ui.removeClass("coral--dark"))},getMode:function(){return"fullscreen"===this.$ui.attr("data-mode")?"fullscreen":"inline"},setMode:function(a){"fullscreen"===a?this.switchToFullscreen():"inline"===a&&this.switchToInline()},switchToFullscreen:function(a){return this.toolbars.fullscreen||a?(this.$ui.attr("data-mode","fullscreen"),this.togglePinchZooming(!0),void this.withoutAnimation(function(){this.updatePreview(),this.scaleToFitForFullscreen()})):this.switchToInline(!0)},switchToInline:function(a){return this.toolbars.inline||a?(this.$ui.attr("data-mode","inline"),this.togglePinchZooming(!1),void this.withoutAnimation(function(){this.$element.css(this.createTranslationUtil().getZoomedDimensions()),this.updatePreview()})):this.switchToFullscreen(!0)},installStylesheet:function(){var a,b,d,e,f,g,h,i,j=/\.imageeditor-editable(-animate)?/;if(a=this.$element.parents("html").get(0).parentNode,!a.getElementById("imageeditor-editable-stylesheet")){for(b=a.createElement("style"),b.id="imageeditor-editable-stylesheet",a.getElementsByTagName("head")[0].appendChild(b),e=0;e<a.styleSheets.length;e++)if(a.styleSheets[e].ownerNode===b){d=a.styleSheets[e];break}if(null!==document.styleSheets&&null!==d)for(e=0;e<document.styleSheets.length;e++){i=document.styleSheets[e];try{g=i.cssRules}catch(k){continue}if(null!==g)for(f=0;f<g.length;f++)h=g[f],h.type===c.STYLE_RULE&&j.test(h.selectorText)&&d.insertRule(h.cssText,d.cssRules.length)}}},installUI:function(){var b;this.options.parent?a(this.options.parent).append(this.$ui):this.$element.after(this.$ui),this.$clipParent=CUI.imageeditor.UIUtils.getClippingParent(this.$ui),this.uiClipped=this.$clipParent!==d,this.$element.addClass("imageeditor-editable"),b=this.preferCopy()?{width:this.$ui.copy.width(),height:this.$ui.copy.height()}:{width:this.$element.width(),height:this.$element.height()},this.options.overrides&&this.options.overrides.naturalHeight&&this.options.overrides.naturalWidth&&(b={height:this.options.overrides.naturalHeight,width:this.options.overrides.naturalWidth}),this._naturalDimensions=b,this.$ui.copy.data("imageeditor-dimensions",b),this._layoutConstraints={"max-width":this.$ui.copy.css("max-width"),"max-height":this.$ui.copy.css("max-height"),"min-width":this.$ui.copy.css("min-width"),"min-height":this.$ui.copy.css("min-height")},this.$element.css(this.getBaseCssPropertiesForElement()),this.$ui.copy.css("margin",0),this.$ui.copy.css(this.getBaseCssPropertiesForCopy()),this.$ui.css({height:b.height+"px",width:b.width+"px"}),null!==this.elementContext.iframe&&this.installStylesheet(),this.toggleAnimation(!0)},positionUI:function(b){var c=a.proxy(function(c,d){if(this.elementContext.iframe){var e=a(this.elementContext.iframe),f=a(this.elementContext.iframe).offset();
c.left+=f.left+parseInt(e.css("border-left-width"),10),c.top+=f.top+parseInt(e.css("border-top-width"),10)}c.top=Math.max(c.top,this.$ui.toolbars.inline.height()),a.isFunction(b)?b.call(this,c):this.$ui.css(c)},this);this.$ui.position({using:c,of:this.$element,my:"left top",at:"left top",collision:"none"})},togglePinchZooming:function(a){var b=this,c=".imageeditorzoom";CUI.imageeditor.UIUtils.removePinchZooming(b.$ui,c),a&&CUI.imageeditor.UIUtils.installPinchZooming(b.$ui,c,function(){return b.getZoomFactor()},function(a,c){"change"===c?b.zoom(a,!1):b.zoom(a,!0)})},getBaseCssPropertiesForCopy:function(){var a=this.createTranslationUtil(),b=a.getZoomedDimensionsBeforeRotation();return{"max-width":"9999px","max-height":"9999px","min-width":"0px","min-height":"0px",height:""+b.height+"px",width:""+b.width+"px",clip:"rect(0px, "+b.width+"px, "+b.height+"px, 0px)","transform-origin":"50% 50%",transform:"scale(1)"}},getBaseCssPropertiesForElement:function(){var a=this.createTranslationUtil().getZoomedDimensionsBeforeRotation();return{width:a.width,height:a.height}},destroyUI:function(){var a=this.$ui.copy.data("imageeditor-dimensions");this.$ui.remove(),this.toggleAnimation(!1),this.$element.removeClass("imageeditor-editable"),this.$element.css(a)},setupElementContext:function(){this.elementContext=this.elementContext||{},this.elementContext.iframe=CUI.imageeditor.UIUtils.elementInIframe(this.$element),null===this.elementContext.iframe?(this.elementContext.win=b,this.elementContext.doc=document):(this.elementContext.win=this.elementContext.iframe.contentWindow,this.elementContext.doc=this.elementContext.iframe.contentWindow.document)},getCustomAction:function(a){var b,c,d=this.registeredActions[a];if(d)return d;for(b in this.registeredActions)if(c=this.registeredActions[b],c.isAction(a))return c;return null},relayAction:function(a,b){CUI.imageeditor.Utils.defer(function(){this.execAction(a,b)},10,this)},execAction:function(a,b){var c,d,e=this.getCustomAction(a),g=this,h=this.getRotation(),i=this.getImageDisplayDimensions(),j=this.getToolbarHeight(),k=this.getViewportCrop(),l=this.getCrop(),m=this.getFlip();return delete l.right,delete l.bottom,d={action:a,value:b,element:this.$ui.copy,editor:this,ui:this.$ui,result:this.transformResult,mode:this.getMode(),dimensions:i,viewportCrop:k,toolbarHeight:j,canvas:l,rotation:h,flip:m,translate:function(a){return f(h,m,i,a)},createTranslationUtil:function(){return g.createTranslationUtil()}},e&&(c=e.execute(d)),c&&this.updatePreview(),c},getViewportCrop:function(){var c,d,e,f,g,h,i=this.createTranslationUtil(),j={top:0,left:0,width:this.$ui.width(),height:this.$ui.height()},k=a(b),l=i.rotateDimsIfNecessary(i.getZoomedCropBeforeRotation()),m="fullscreen"===this.getMode()?this.getToolbarHeight():0;return"inline"===this.getMode()?(f=i.translate(i.getZoomedCropBeforeRotation()),g=this.$ui.copy.offset(),e={left:g.left+f.left,top:g.top+f.top,width:f.width,height:f.height},d={top:k.scrollTop(),left:k.scrollLeft(),width:k.width(),height:k.height()},h={left:Math.max(d.left,e.left),top:Math.max(d.top,e.top),right:Math.min(d.left+d.width,e.left+e.width),bottom:Math.min(d.top+d.height,e.top+e.height)},h={left:Math.max(0,h.left-e.left),top:Math.max(0,h.top-e.top),width:Math.max(0,h.right-h.left),height:Math.max(0,h.bottom-h.top)}):(h={width:Math.min(l.width,j.width),height:Math.min(l.height,j.height-m)},h.width<l.width?h.left=(l.width-h.width)/2:h.left=0,h.height<l.height?(c=Math.max(0,Math.min(m,l.height-h.height)),h.top=c+(l.height-h.height-c)/2):h.top=0),h},getImageDisplayDimensions:function(a){return{width:this.$ui.copy.width(),height:this.$ui.copy.height()}},createTranslationUtil:function(){var b=a.extend({},this.options);return b.flip=this.getFlip(),b.rotation=this.getRotation(),b.zoomFactor="inline"===this.getMode()?1:this.getZoomFactor(),b.naturalWidth=this._naturalDimensions.width,b.naturalHeight=this._naturalDimensions.height,b.cropOnOriginal=this.getCrop(),this.availableButNotFalse(b,"ignoreCssLayoutConstraints")||this.copyIfAvailable(b,this._layoutConstraints,this.CSS_LAYOUT_CONSTRAINTS),this.copyIfAvailable(b,this.options,this.CSS_LAYOUT_CONSTRAINTS),this.copyIfAvailable(b,this.options,{width:"fixedWidth",height:"fixedHeight"}),new CUI.imageeditor.TranslationUtil(b)},copyIfAvailable:function(b,c,d){var e,f,g=null;a.isPlainObject(d)||(d={namesMapping:d});for(e in d)d.hasOwnProperty(e)&&(f=d[e],f||(f=e),g=c[e],g||(g=c[e.toLowerCase()]),g||(g=c[f]),g||(g=c[f.toLowerCase()]),g&&(b[f]=g))},availableButNotFalse:function(a,b){var c=a[b];return!!a&&(!!a.hasOwnProperty(b)&&(c=a[b],!("string"==typeof c&&c.toLowerCase()in["no","false"])))},getCssPropertiesForCopy:function(){var a,b,c,d=this.getBaseCssPropertiesForCopy(),e=this.createTranslationUtil();for(b in this.registeredActions)if(this.registeredActions.hasOwnProperty(b)){if(a=this.registeredActions[b].toCss(this.transformResult,this.$ui.copy,e),!a)continue;for(c in a)a.hasOwnProperty(c)&&("transform"===c?d[c]+=" "+a[c]:d[c]=a[c])}return d},getCrop:function(){var a;if(this.registeredActions.crop&&(a=this.registeredActions.crop.getCurrent(this.transformResult)),!a){var b=this._naturalDimensions;a={top:0,left:0,width:b.width,height:b.height}}return a},getRotation:function(){var a;return this.registeredActions.rotate&&(a=this.registeredActions.rotate.getCurrent(this.transformResult)),isNaN(a)&&(a=0),a},getFlip:function(){var a;return this.registeredActions.flip&&(a=this.registeredActions.flip.getCurrent(this.transformResult)),a||(a={horizontal:!1,vertical:!1}),a},getZoomFactor:function(){return this._zoomFactor},getZoomLimits:function(){return[this.ZOOM_MIN,this.ZOOM_MAX]},zoom:function(a,b){var c=Math.min(this.ZOOM_MAX,Math.max(this.ZOOM_MIN,a)),d=this;c=Math.round(100*c)/100,c!==this._zoomFactor&&(this._zoomFactor=c,b?this.updatePreview():this.withoutAnimation(function(){d.updatePreview()}))},getCssPropertiesForElement:function(a){var b=this.createTranslationUtil(),c=b.getZoomedDimensionsBeforeRotation(),d={},e=b.getZoomedCropBeforeRotation(),f=this.getRotation();if(d.width=e.width,d.height=e.height,a["margin-top"]=-e.top,a["margin-right"]=-(c.width-(e.left+e.width)),a["margin-bottom"]=-(c.height-(e.top+e.height)),a["margin-left"]=-e.left,f%180!==0){var g=d.width;d.width=d.height,d.height=g;var h=(d.width-d.height)/2;a["margin-left"]+=h,a["margin-right"]+=h,a["margin-top"]-=h,a["margin-bottom"]-=h}return"fullscreen"===this.getMode()&&(a["margin-top"]-=Math.floor(d.height/2),a["margin-right"]-=Math.floor(d.width/2),a["margin-bottom"]-=Math.floor(d.height/2),a["margin-left"]-=Math.floor(d.width/2)),d},getCssPropertiesForContainer:function(a){return"fullscreen"===this.getMode()?this.getCssPropertiesForContainerFullscreen(a):this.getCssPropertiesForContainerInline(a)},getCssPropertiesForContainerFullscreen:function(a){return{left:"",top:""}},getCssPropertiesForContainerInline:function(a){var b,c={width:this.$element.width(),height:this.$element.height()};return this.withoutAnimation(function(){this.$element.css(a),this.positionUI(function(a){b=a}),this.$element.css(c)}),b},updatePreview:function(){var a=this.getCssPropertiesForCopy(),b=this.getCssPropertiesForElement(a),c=this.getCssPropertiesForContainer(b);this.$element.css(b),g()?this.updateClipForIosV7(a):this.$ui.copy.css(a),this.$ui.css(c)},scaleToFitForFullscreen:function(){var a,b=this.getViewportCrop(),c=this.createTranslationUtil(),d=c.translate(c.getZoomedCropBeforeRotation(),"zoomed"),e=1;d.width>b.width&&(e=b.width/d.width),d.height>b.height&&(a=b.height/d.height,a<e&&(e=a)),this.zoom(this.getZoomFactor()*e,!0)},updateClipForIosV7:function(a){var b=this.$ui.copy,c=a.clip||"",d=b.css("clip");c.replace(/, ?/g," ")===d||"rect(0px, 0px, 0px, 0px)"===c&&"auto"===d?b.css(a):(a.clip="rect(0px, 0px, 0px, 0px);",b.css(a),setTimeout(function(){b.css("clip",c)},1e3))},setupTemplates:function(b){b&&a.isFunction(b.get)?this.templates=b:a.isPlainObject(b)?this.templates=new CUI.imageeditor.TemplateProvider(b):this.templates||(this.templates=new CUI.imageeditor.TemplateProvider)}}),CUI.util.plugClass(CUI.ImageEditor,"imageEditor",function(b){CUI.imageeditor.OptionsUtils.loadOptionsAndStartEditing(b,a(this))}),CUI.options.dataAPI&&a(function(){a(document.body).on("click.imageeditor.data-api",'img[data-editable="true"],img[data-editable=""]',function(b){e(b)&&!CUI.imageeditor.UIUtils.isHavingModalParent(b.target)&&a(this).imageEditor()})})}(jQuery,this,window.CSSRule),function(a,b,c){var d="coral-TabPanel-content",e="coral-TabPanel-navigation",f="."+e,g="."+d;CUI.Tabs=new Class({toString:"Tabs",extend:CUI.Widget,construct:function(a){this.tablist=this._findOrCreateTabList(),this.panelist=this._findOrCreatePaneList(),this._applyOptions(),this.$element.on("change:type",this._setType.bind(this)),this.$element.on("change:active",this._setActive.bind(this))},defaults:{},DEFAULT_VARIANT_KEY:"default",VARIANT_TYPES:["default","stacked","nav"],VARIANT_CLASS_MAPPING:{"default":"",stacked:"coral-TabPanel--stacked",nav:"coral-TabPanel--large"},setDisabled:function(a,b){var c=b||!1;return a.toggleClass("is-disabled",c).prop("aria-disabled",c),this},setEnabled:function(a){return this.setDisabled(a,!0)},addItem:function(b){var d=this._getTabs();b=a.extend({tabContent:"",panelContent:"",panelID:c,panelURL:c,index:d.length,enabled:!0,active:!0},b);var e=a('<section class="coral-TabPanel-pane"/>').append(b.panelContent);b.panelID!==c&&e.attr("id",b.panelID);var f=a('<a class="coral-TabPanel-tab" data-toggle="tab"/>').append(b.tabContent);b.panelURL!==c&&f.attr("href",b.panelURL);var g=Math.min(Math.max(b.index,0),d.length);return 0===g?(this.tablist.prepend(f),this.panelist.prepend(e)):(d.eq(g-1).after(f),this._getPanels().eq(g-1).after(e)),b.enabled||f.addClass("is-disabled"),this._makeTabsAccessible(f),b.active&&b.enabled&&this._activateTab(f,!0),e.attr("id")},removeItem:function(a){var b,c,d=this._getTabs(),e=this._getPanels();if("number"==typeof a?(b=d.eq(a),c=e.eq(a)):"string"==typeof a&&(b=d.filter('[aria-controls="'+a+'"]'),c=e.filter("#"+a)),b&&c){if(b.hasClass("is-active")){var f='.coral-TabPanel-tab[data-toggle="tab"]:not(.is-disabled)',g=b.nextAll(f).first();0===g.length&&(g=b.prevAll(f).first()),1===g.length&&this._activateTab(g,!0)}c.remove(),b.remove()}},_findOrCreateTabList:function(){var b=this.$element.find(f);return 0===b.length&&(b=a("<nav>").addClass(e).prependTo(this.$element)),b},_findOrCreatePaneList:function(){var b=this.$element.find(g);return 0===b.length&&(b=a("<div>").addClass(d).appendTo(this.$element)),b},_applyOptions:function(){var a=this._getTabs().filter(".is-active");this.options.type&&this._setType(this.options.type),this._initTabswitch(),this._makeAccessible(),0===a.length?this._setActive(this.options.active||0):this._activateTab(a,!0)},_getTabs:function(){return this.tablist.find('> .coral-TabPanel-tab[data-toggle="tab"]')},_getPanels:function(){return this.panelist.children(".coral-TabPanel-pane")},_setActive:function(b){b=a.isNumeric(b)?b:this.options.active;var c=this._getTabs().eq(b);this._activateTab(c,!0)},_setType:function(b){var d=this,e="string"===a.type(b)?b:this.options.type;if(this.VARIANT_TYPES.indexOf(e)>-1&&this.VARIANT_CLASS_MAPPING[e]!==c){var f=Object.keys(this.VARIANT_CLASS_MAPPING).map(function(a){return d.VARIANT_CLASS_MAPPING[a]});this.$element.removeClass(f.join(" ")),this.$element.addClass(this.VARIANT_CLASS_MAPPING[e])}},_activateTab:function(a,b){var c,d=a.attr("href"),e="is-active",f=this._getTabs(),g=this._getPanels();return a.hasClass("is-disabled")?(a.blur(),!1):(c=g.filter("#"+a.attr("aria-controls")),d&&"#"!==d.charAt(0)&&c.loadWithSpinner(d),f.removeClass(e).attr({"aria-selected":!1,tabindex:-1}),g.removeClass(e).attr({"aria-hidden":!0}),a.addClass(e).attr({"aria-selected":!0,tabindex:0}),c.addClass(e).attr({"aria-hidden":!1}),void(b||a.trigger("focus")))},_initTabswitch:function(){var b=this,c='> .coral-TabPanel-navigation > .coral-TabPanel-tab[data-toggle="tab"]';this.$element.on("click",c,function(c){var d=a(c.currentTarget);c.preventDefault(),b._activateTab(d)})},_makeAccessible:function(){this._makeTabsAccessible(),this._makeTablistAccessible()},_makeTabsAccessible:function(b){var c=this._getPanels();b=b||this._getTabs(),b.each(function(b,d){var e=a(d),f=c.eq(e.index()),g=f.attr("id")||CUI.util.getNextId(),h={role:"tab",tabindex:-1,"aria-selected":!1,"aria-controls":g,"aria-disabled":e.hasClass("is-disabled")};e.attr("href")||(h.href="#"),e.attr(h),f.attr({id:g,role:"tabpanel","aria-hidden":!0})})},_makeTablistAccessible:function(){var b=this,c='> [role="tab"]';this.tablist.attr("role","tablist"),this.tablist.on("keydown",c,function(d){var e=a(d.currentTarget),f=a(d.delegateTarget).find(c).not('[aria-disabled="true"]'),g=e,h=!0,i=f.index(e);switch(d.which){case 33:case 37:case 38:g=i-1>-1?f[i-1]:f[f.length-1];break;case 34:case 39:case 40:g=i+1<f.length?f[i+1]:f[0];break;case 36:g=f[0];break;case 35:g=f[f.length-1];break;default:h=!1}h&&(d.preventDefault(),b._activateTab(a(g)))})}}),CUI.Widget.registry.register("tabs",CUI.Tabs),CUI.options.dataAPI&&a(document).on("cui-contentloaded.data-api",function(b){CUI.Tabs.init(a("[data-init~=tabs]",b.target))})}(jQuery,this);