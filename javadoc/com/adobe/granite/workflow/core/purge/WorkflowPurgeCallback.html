<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_131) on Fri May 29 19:13:30 UTC 2020 -->
<title>WorkflowPurgeCallback (The Adobe AEM Quickstart and Web Application.)</title>
<meta name="date" content="2020-05-29">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="WorkflowPurgeCallback (The Adobe AEM Quickstart and Web Application.)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?com/adobe/granite/workflow/core/purge/WorkflowPurgeCallback.html" target="_top">Frames</a></li>
<li><a href="WorkflowPurgeCallback.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.adobe.granite.workflow.core.purge</div>
<h2 title="Interface WorkflowPurgeCallback" class="title">Interface WorkflowPurgeCallback</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public interface <span class="typeNameLabel">WorkflowPurgeCallback</span></pre>
<div class="block">Callback to be implemented by applications which wish to be notified whenever workflow instances are purged from the
 repository using one of the available purge tools (scheduled purge job or JMX console). This is useful, for example,
 in situations where some application-specific data associated with a workflow instance needs to be deleted along
 with the workflow instance itself. Applications that wish to be notified upon workflow instance purge need to
 provide an implementation of this interface and register it into the OSGI service registry. When the purge process
 runs, it will notify every registered implementation of this interface whenever it purges a workflow instance. The
 implementations can then perform whatever operations they need to perform for the given workflow instance (including
 ignoring the instance if it is not of interest).</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/adobe/granite/workflow/core/purge/WorkflowPurgeCallback.html#onDelete-com.adobe.granite.workflow.WorkflowSession-java.lang.String-java.lang.String-java.lang.String-com.adobe.granite.workflow.exec.Workflow.State-">onDelete</a></span>(<a href="../../../../../../com/adobe/granite/workflow/WorkflowSession.html" title="interface in com.adobe.granite.workflow">WorkflowSession</a>&nbsp;session,
        java.lang.String&nbsp;workflowInstanceId,
        java.lang.String&nbsp;payload,
        java.lang.String&nbsp;modelId,
        <a href="../../../../../../com/adobe/granite/workflow/exec/Workflow.State.html" title="enum in com.adobe.granite.workflow.exec">Workflow.State</a>&nbsp;state)</code>
<div class="block">Callback method invoked by the purge process whenever it purges a workflow instance.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="onDelete-com.adobe.granite.workflow.WorkflowSession-java.lang.String-java.lang.String-java.lang.String-com.adobe.granite.workflow.exec.Workflow.State-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>onDelete</h4>
<pre>void&nbsp;onDelete(<a href="../../../../../../com/adobe/granite/workflow/WorkflowSession.html" title="interface in com.adobe.granite.workflow">WorkflowSession</a>&nbsp;session,
              java.lang.String&nbsp;workflowInstanceId,
              java.lang.String&nbsp;payload,
              java.lang.String&nbsp;modelId,
              <a href="../../../../../../com/adobe/granite/workflow/exec/Workflow.State.html" title="enum in com.adobe.granite.workflow.exec">Workflow.State</a>&nbsp;state)
       throws java.lang.Exception</pre>
<div class="block">Callback method invoked by the purge process whenever it purges a workflow instance. Implementations can ignore
 the given instance if it is not of interest to them, or perform any additional processing required for the
 instance.<br>
 To ensure that the purge process completes safely, efficiently and atomically, the following guidelines should
 be followed by implementations of this callback:
 <ul>
     <li>The implementation should try to determine as efficiently as possible whether the given workflow instance
     is of interest, preferably by relying only on the supplied inputs and not executing any extra queries.</li>
     <li>The implementation should try to re-use the supplied session as far as possible, to ensure that any
     repository updates it performs (e.g. deletion of extra data associated with the given workflow instance)
     are atomic with the deletion of the workflow instance itself.</li>
     <li>The implementation is allowed to throw exceptions (which will be caught by the purge process and logged,
     but otherwise ignored), but should be careful not to modify the given session in a manner which prevents
     it from being committed later. This is to ensure that the main workflow instance purge and other registered
     callbacks are not affected by errors in a specific callback implementation.</li>
 </ul></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>session</code> - The workflow session being used by the purge process for deleting workflow instances.</dd>
<dd><code>workflowInstanceId</code> - The ID of the workflow instance being purged.</dd>
<dd><code>payload</code> - The payload associated with the workflow instance being purged.</dd>
<dd><code>modelId</code> - The ID of the workflow model associated with the workflow instance being purged.</dd>
<dd><code>state</code> - The state of the workflow instance being purged.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - If an error occurs within the callback. To ensure isolation, the purge process will catch this
 error and log it, but otherwise ignore it. Callback implementations should take care to fail fast by throwing
 errors early if they cannot complete their processing, instead of potentially dirtying the given session with
 changes which cannot be committed later on.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?com/adobe/granite/workflow/core/purge/WorkflowPurgeCallback.html" target="_top">Frames</a></li>
<li><a href="WorkflowPurgeCallback.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &copy; 2010 - 2020 Adobe. All Rights Reserved</small></p>
</body>
</html>
