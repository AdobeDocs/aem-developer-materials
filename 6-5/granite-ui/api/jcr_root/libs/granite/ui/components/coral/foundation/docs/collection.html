
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Explainer: foundation-collection &#8212; Granite UI 1.0 documentation</title>
    <link rel="stylesheet" href="../../../../../../../../_static/pyramid.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../../../_static/gnd.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../../../../../../" src="../../../../../../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../../../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../../../../../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../../../search.html" />
    <link rel="next" title="Granite UI Foundation Client-side" href="../clientlibs/foundation/index.html" />
    <link rel="prev" title="Granite UI Foundation" href="../index.html" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Neuton&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nobile:regular,italic,bold,bolditalic&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="../../../../../../../../_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->

  </head><body>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../clientlibs/foundation/index.html" title="Granite UI Foundation Client-side"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../index.html" title="Granite UI Foundation"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">Granite UI 1.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Granite UI Foundation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="explainer-foundation-collection">
<h1>Explainer: foundation-collection<a class="headerlink" href="#explainer-foundation-collection" title="Permalink to this headline">¶</a></h1>
<div class="section" id="background">
<h2>Background<a class="headerlink" href="#background" title="Permalink to this headline">¶</a></h2>
<p>A collection represents a group of items. A concept of collection is one of the most frequently used concept in a UI. For example, a starting point to implement a CRUD pattern is usually done by listing the available items.</p>
<p>In HTML, in order to represent the collection, it can be done in many ways. One of them is <code class="docutils literal notranslate"><span class="pre">&lt;ul&gt;</span></code>. For example for a simple list, we can have the following markup:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">ul</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;my-collection&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>Item 1<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>Item 2<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>Item 3<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>The markup can then be parsed and interpreted for any purpose based on the understanding of HTML spec. For example, the following JS code can be used to count and read the available items of the collection:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">collection</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#my-collection&quot;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Count: &quot;</span><span class="p">,</span> <span class="nx">collection</span><span class="p">.</span><span class="nx">prop</span><span class="p">(</span><span class="s2">&quot;childElementCount&quot;</span><span class="p">));</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Items:&quot;</span><span class="p">);</span>
<span class="nx">collection</span><span class="p">.</span><span class="nx">children</span><span class="p">().</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">textContent</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>HTML elements have pretty strict rules on what the exact markup structures are. e.g. <code class="docutils literal notranslate"><span class="pre">&lt;ul&gt;</span></code> requires <code class="docutils literal notranslate"><span class="pre">&lt;li&gt;</span></code> as a direct child. However, to build a complex widget to represent a collection, often there is a need for flexibility in the markup. For example we can have the following markup for SimpleList widget:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;my-collection&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;simplelist&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;simplelist-wrapper&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;simplelist-item&quot;</span><span class="p">&gt;</span>Item 1<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;simplelist-item&quot;</span><span class="p">&gt;</span>Item 2<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;simplelist-item&quot;</span><span class="p">&gt;</span>Item 3<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>And to count and read the items like before, we have to change our JS code:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">collection</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#my-collection&quot;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">items</span> <span class="o">=</span> <span class="nx">collection</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;.simplelist-item&quot;</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Count: &quot;</span><span class="p">,</span> <span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Items:&quot;</span><span class="p">);</span>
<span class="nx">items</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">textContent</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>We know that as a good programming practice that we want to code against the interface, not to an implementation details.
And the difference of the markup above—<code class="docutils literal notranslate"><span class="pre">&lt;ul&gt;</span></code> versus <code class="docutils literal notranslate"><span class="pre">.simplelist</span></code>—is implementation details, that we want to see as blackboxes.
Therefore we need something to represent the abstraction of collection.</p>
</div>
<div class="section" id="introducing-foundation-collection">
<h2>Introducing foundation-collection<a class="headerlink" href="#introducing-foundation-collection" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="../clientlibs/foundation/vocabulary/collection.html"><span class="doc">foundation-collection</span></a> is a <a class="reference internal" href="../../../../docs/client/vocabulary.html"><span class="doc">vocabulary</span></a> to represent the abstraction of a collection.</p>
<p>To use <code class="docutils literal notranslate"><span class="pre">foundation-collection</span></code> for the <code class="docutils literal notranslate"><span class="pre">&lt;ul&gt;</span></code> example, we need to anotate the markup following its contract.
For example we have to annotate the root element of the collection and the elements of the items:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">ul</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;my-collection&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;foundation-collection&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;foundation-collection-item&quot;</span><span class="p">&gt;</span>Item 1<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;foundation-collection-item&quot;</span><span class="p">&gt;</span>Item 2<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;foundation-collection-item&quot;</span><span class="p">&gt;</span>Item 3<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Likewise, as the implementor of SimpleList, we can also make it compatible with <code class="docutils literal notranslate"><span class="pre">foundation-collection</span></code>:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;my-collection&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;simplelist foundation-collection&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;simplelist-wrapper&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;simplelist-item foundation-collection-item&quot;</span><span class="p">&gt;</span>Item 1<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;simplelist-item foundation-collection-item&quot;</span><span class="p">&gt;</span>Item 2<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;simplelist-item foundation-collection-item&quot;</span><span class="p">&gt;</span>Item 3<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Because of this, we can have a common JS code to read both examples:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">collection</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#my-collection&quot;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">items</span> <span class="o">=</span> <span class="nx">collection</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;.foundation-collection-item&quot;</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Count: &quot;</span><span class="p">,</span> <span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Items:&quot;</span><span class="p">);</span>
<span class="nx">items</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">textContent</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>The above JS code is also compatible to any implementation that follows <code class="docutils literal notranslate"><span class="pre">foundation-collection</span></code> vocabulary.</p>
<p><code class="docutils literal notranslate"><span class="pre">foundation-collection</span></code> also establishes other features that are relevant for collection. For example, usually there is a need for identifications of the collection and its items, which are represented by <code class="docutils literal notranslate"><span class="pre">[data-foundation-collection-id]</span></code> and <code class="docutils literal notranslate"><span class="pre">[data-foundation-collection-item-id]</span></code> respectively.</p>
<p>These features will be apparent when we build a reusable behaviour leveraging <code class="docutils literal notranslate"><span class="pre">foundation-collection</span></code>.</p>
</div>
<div class="section" id="foundation-selections">
<h2>foundation-selections<a class="headerlink" href="#foundation-selections" title="Permalink to this headline">¶</a></h2>
<p>After defining the collection concept, the next step is to manipulate it. One of the first thing we have to do with a collection is to select its items. Like <code class="docutils literal notranslate"><span class="pre">foundation-collection</span></code>, we need to express this concept as a common vocabulary, which is manifested as <a class="reference internal" href="../clientlibs/foundation/vocabulary/selections.html"><span class="doc">foundation-selections</span></a>. This vocabulary is built on top of <code class="docutils literal notranslate"><span class="pre">foundation-collection</span></code>.</p>
<p>As SimpleList implementor, we can modify its implementation to satify the <code class="docutils literal notranslate"><span class="pre">foundation-selections</span></code> contract when the user selects its items:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="c1">// Toggle the selection when the user clicks the item.</span>

<span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="s2">&quot;.simplelist-item.foundation-collection-item&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">collection</span> <span class="o">=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">closest</span><span class="p">(</span><span class="s2">&quot;.simplelist.foundation-collection&quot;</span><span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">collection</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span><span class="p">;</span> <span class="c1">// Invalid markup</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">mode</span> <span class="o">=</span> <span class="nx">collection</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;data-foundation-selections-mode&quot;</span><span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">mode</span> <span class="o">===</span> <span class="s2">&quot;single&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">currentSelectedItem</span> <span class="o">=</span> <span class="nx">collection</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;.foundation-selections-item&quot;</span><span class="p">);</span>

    <span class="nx">currentSelectedItem</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">&quot;foundation-selections-item&quot;</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">currentSelectedItem</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="nx">item</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">item</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">&quot;foundation-selections-item&quot;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">item</span><span class="p">.</span><span class="nx">toggleClass</span><span class="p">(</span><span class="s2">&quot;foundation-selections-item&quot;</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">collection</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;foundation-selections-change&quot;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>We also need to expose <code class="docutils literal notranslate"><span class="pre">foundation-selections</span></code> AdaptTo interface:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">adaptTo</span><span class="p">(</span><span class="s2">&quot;foundation-registry&quot;</span><span class="p">).</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;foundation.adapters&quot;</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;foundation-selections&quot;</span><span class="p">,</span>
  <span class="nx">selector</span><span class="o">:</span> <span class="s2">&quot;.simplelist.foundation-collection&quot;</span><span class="p">,</span>
  <span class="nx">adapter</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">collection</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>

    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">count</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">collection</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;.foundation-selections-item&quot;</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
      <span class="p">},</span>

      <span class="nx">clear</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">suppressEvent</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="nx">collection</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;.foundation-selections-item&quot;</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">&quot;foundation-selections-item&quot;</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">suppressEvent</span> <span class="o">&amp;&amp;</span> <span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">collection</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;foundation-selections-change&quot;</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">},</span>

      <span class="nx">select</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="s2">&quot;foundation-collection-item&quot;</span><span class="p">))</span> <span class="p">{</span>
          <span class="k">return</span><span class="p">;</span> <span class="c1">// Invalid item element</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="s2">&quot;foundation-selections-item&quot;</span><span class="p">))</span> <span class="p">{</span>
          <span class="k">return</span><span class="p">;</span> <span class="c1">// Already selected</span>
        <span class="p">}</span>

        <span class="kd">var</span> <span class="nx">mode</span> <span class="o">=</span> <span class="nx">collection</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;data-foundation-selections-mode&quot;</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">mode</span> <span class="o">===</span> <span class="s2">&quot;single&quot;</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">currentSelectedItem</span> <span class="o">=</span> <span class="nx">collection</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;.foundation-selections-item&quot;</span><span class="p">);</span>
          <span class="nx">currentSelectedItem</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">&quot;foundation-selections-item&quot;</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">item</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">&quot;foundation-selections-item&quot;</span><span class="p">);</span>

        <span class="nx">collection</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;foundation-selections-change&quot;</span><span class="p">);</span>
      <span class="p">},</span>

      <span class="nx">deselect</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="s2">&quot;foundation-collection-item&quot;</span><span class="p">))</span> <span class="p">{</span>
          <span class="k">return</span><span class="p">;</span> <span class="c1">// Invalid item element</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="s2">&quot;foundation-selections-item&quot;</span><span class="p">))</span> <span class="p">{</span>
          <span class="k">return</span><span class="p">;</span> <span class="c1">// Already deselected</span>
        <span class="p">}</span>

        <span class="nx">item</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">&quot;foundation-selections-item&quot;</span><span class="p">);</span>

        <span class="nx">collection</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;foundation-selections-change&quot;</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
<p>So when the user clicks on “Item 2”, the resulting markup would be like this:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;my-collection&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;simplelist foundation-collection&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;simplelist-wrapper&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;simplelist-item foundation-collection-item&quot;</span><span class="p">&gt;</span>Item 1<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;simplelist-item foundation-collection-item foundation-selections-item&quot;</span><span class="p">&gt;</span>Item 2<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;simplelist-item foundation-collection-item&quot;</span><span class="p">&gt;</span>Item 3<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>The third party JS code is able to read the markup or use its AdaptTo API, without knowing the implementation details:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="c1">// Select &quot;Item2&quot;</span>

<span class="kd">var</span> <span class="nx">myCollection</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#my-collection&quot;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">item2El</span> <span class="o">=</span> <span class="nx">myCollection</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;.foundation-collection-item&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">];</span>

<span class="kd">var</span> <span class="nx">selectionAPI</span> <span class="o">=</span> <span class="nx">myCollection</span><span class="p">.</span><span class="nx">adaptTo</span><span class="p">(</span><span class="s2">&quot;foundation-selections&quot;</span><span class="p">);</span>

<span class="nx">selectionAPI</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="nx">item2El</span><span class="p">);</span>

<span class="c1">// Count the selection using selector</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Selection Count: &quot;</span><span class="p">,</span> <span class="nx">myCollection</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;.foundation-selections-item&quot;</span><span class="p">).</span><span class="nx">length</span><span class="p">);</span>
<span class="c1">// or using AdaptTo API</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Selection Count: &quot;</span><span class="p">,</span> <span class="nx">selectionAPI</span><span class="p">.</span><span class="nx">count</span><span class="p">());</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Explainer: foundation-collection</a><ul>
<li><a class="reference internal" href="#background">Background</a></li>
<li><a class="reference internal" href="#introducing-foundation-collection">Introducing foundation-collection</a></li>
<li><a class="reference internal" href="#foundation-selections">foundation-selections</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../index.html"
                        title="previous chapter">Granite UI Foundation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../clientlibs/foundation/index.html"
                        title="next chapter">Granite UI Foundation Client-side</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../../../../../../_sources/jcr_root/libs/granite/ui/components/coral/foundation/docs/collection.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../../../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../clientlibs/foundation/index.html" title="Granite UI Foundation Client-side"
             >next</a> |</li>
        <li class="right" >
          <a href="../index.html" title="Granite UI Foundation"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">Granite UI 1.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Granite UI Foundation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Adobe Systems Incorporated.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.3.
    </div>
  </body>
</html>